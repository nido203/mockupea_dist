(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function t(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(r){if(r.ep)return;r.ep=!0;const o=t(r);fetch(r.href,o)}})();var fh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function mf(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var Gg={exports:{}};/*! UIkit 3.17.0 | https://www.getuikit.com | (c) 2014 - 2023 YOOtheme | MIT License */(function(s,e){(function(t,n){s.exports=n()})(fh,function(){const{hasOwnProperty:t,toString:n}=Object.prototype;function r(i,a){return t.call(i,a)}const o=/\B([A-Z])/g,l=wt(i=>i.replace(o,"-$1").toLowerCase()),c=/-(\w)/g,f=wt(i=>(i.charAt(0).toLowerCase()+i.slice(1)).replace(c,(a,u)=>u.toUpperCase())),d=wt(i=>i.charAt(0).toUpperCase()+i.slice(1));function m(i,a){var u;return(u=i==null?void 0:i.startsWith)==null?void 0:u.call(i,a)}function v(i,a){var u;return(u=i==null?void 0:i.endsWith)==null?void 0:u.call(i,a)}function y(i,a){var u;return(u=i==null?void 0:i.includes)==null?void 0:u.call(i,a)}function M(i,a){var u;return(u=i==null?void 0:i.findIndex)==null?void 0:u.call(i,a)}const{isArray:T,from:A}=Array,{assign:E}=Object;function b(i){return typeof i=="function"}function z(i){return i!==null&&typeof i=="object"}function I(i){return n.call(i)==="[object Object]"}function H(i){return z(i)&&i===i.window}function X(i){return oe(i)===9}function G(i){return oe(i)>=1}function g(i){return oe(i)===1}function oe(i){return!H(i)&&z(i)&&i.nodeType}function U(i){return typeof i=="boolean"}function V(i){return typeof i=="string"}function Me(i){return typeof i=="number"}function Te(i){return Me(i)||V(i)&&!isNaN(i-parseFloat(i))}function ve(i){return!(T(i)?i.length:z(i)&&Object.keys(i).length)}function Z(i){return i===void 0}function me(i){return U(i)?i:i==="true"||i==="1"||i===""?!0:i==="false"||i==="0"?!1:i}function _e(i){const a=Number(i);return isNaN(a)?!1:a}function fe(i){return parseFloat(i)||0}function Fe(i){return Ee(i)[0]}function Ee(i){return G(i)?[i]:Array.from(i||[]).filter(G)}function Le(i){if(H(i))return i;i=Fe(i);const a=X(i)?i:i==null?void 0:i.ownerDocument;return(a==null?void 0:a.defaultView)||window}function ge(i,a){return i===a||z(i)&&z(a)&&Object.keys(i).length===Object.keys(a).length&&nt(i,(u,x)=>u===a[x])}function Ce(i,a,u){return i.replace(new RegExp(`${a}|${u}`,"g"),x=>x===a?u:a)}function Je(i){return i[i.length-1]}function nt(i,a){for(const u in i)if(a(i[u],u)===!1)return!1;return!0}function ut(i,a){return i.slice().sort(({[a]:u=0},{[a]:x=0})=>u>x?1:x>u?-1:0)}function bt(i,a){return i.reduce((u,x)=>u+fe(b(a)?a(x):x[a]),0)}function It(i,a){const u=new Set;return i.filter(({[a]:x})=>u.has(x)?!1:u.add(x))}function St(i,a){return a.reduce((u,x)=>({...u,[x]:i[x]}),{})}function Rt(i,a=0,u=1){return Math.min(Math.max(_e(i)||0,a),u)}function Mt(){}function Ft(...i){return[["bottom","top"],["right","left"]].every(([a,u])=>Math.min(...i.map(({[a]:x})=>x))-Math.max(...i.map(({[u]:x})=>x))>0)}function xe(i,a){return i.x<=a.right&&i.x>=a.left&&i.y<=a.bottom&&i.y>=a.top}function Mn(i,a,u){const x=a==="width"?"height":"width";return{[x]:i[a]?Math.round(u*i[x]/i[a]):i[x],[a]:u}}function Tt(i,a){i={...i};for(const u in i)i=i[u]>a[u]?Mn(i,u,a[u]):i;return i}function Gt(i,a){i=Tt(i,a);for(const u in i)i=i[u]<a[u]?Mn(i,u,a[u]):i;return i}const Lt={ratio:Mn,contain:Tt,cover:Gt};function qt(i,a,u=0,x=!1){a=Ee(a);const{length:S}=a;return S?(i=Te(i)?_e(i):i==="next"?u+1:i==="previous"?u-1:i==="last"?S-1:a.indexOf(Fe(i)),x?Rt(i,0,S-1):(i%=S,i<0?i+S:i)):-1}function wt(i){const a=Object.create(null);return u=>a[u]||(a[u]=i(u))}function Ge(i,a,u){var x;if(z(a)){for(const S in a)Ge(i,S,a[S]);return}if(Z(u))return(x=Fe(i))==null?void 0:x.getAttribute(a);for(const S of Ee(i))b(u)&&(u=u.call(S,Ge(S,a))),u===null?Cn(S,a):S.setAttribute(a,u)}function Vt(i,a){return Ee(i).some(u=>u.hasAttribute(a))}function Cn(i,a){Ee(i).forEach(u=>u.removeAttribute(a))}function Xt(i,a){for(const u of[a,`data-${a}`])if(Vt(i,u))return Ge(i,u)}function W(i,...a){for(const u of Ee(i)){const x=vt(a).filter(S=>!Ne(u,S));x.length&&u.classList.add(...x)}}function k(i,...a){for(const u of Ee(i)){const x=vt(a).filter(S=>Ne(u,S));x.length&&u.classList.remove(...x)}}function se(i,a){a=new RegExp(a);for(const u of Ee(i))u.classList.remove(...A(u.classList).filter(x=>x.match(a)))}function Ye(i,a,u){u=vt(u),a=vt(a).filter(x=>!y(u,x)),k(i,a),W(i,u)}function Ne(i,a){return[a]=vt(a),Ee(i).some(u=>u.classList.contains(a))}function Xe(i,a,u){const x=vt(a);Z(u)||(u=!!u);for(const S of Ee(i))for(const C of x)S.classList.toggle(C,u)}function vt(i){return T(i)?i.map(vt).flat():String(i).split(/[ ,]/).filter(Boolean)}const it={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0};function ht(i){return Ee(i).some(a=>it[a.tagName.toLowerCase()])}function Q(i){return Ee(i).some(a=>a.offsetWidth||a.offsetHeight||a.getClientRects().length)}const Ze="input,select,textarea,button";function ze(i){return Ee(i).some(a=>K(a,Ze))}const et=`${Ze},a[href],[tabindex]`;function _t(i){return K(i,et)}function tt(i){var a;return(a=Fe(i))==null?void 0:a.parentElement}function pt(i,a){return Ee(i).filter(u=>K(u,a))}function K(i,a){return Ee(i).some(u=>u.matches(a))}function je(i,a){var u;return(u=Fe(i))==null?void 0:u.closest(m(a,">")?a.slice(1):a)}function Ie(i,a){return V(a)?!!je(i,a):Fe(a).contains(Fe(i))}function rt(i,a){const u=[];for(;i=tt(i);)(!a||K(i,a))&&u.push(i);return u}function We(i,a){i=Fe(i);const u=i?A(i.children):[];return a?pt(u,a):u}function Ue(i,a){return a?Ee(i).indexOf(Fe(a)):We(tt(i)).indexOf(i)}function qe(i){return i=Fe(i),i&&["origin","pathname","search"].every(a=>i[a]===location[a])}function xt(i){if(qe(i)){i=Fe(i);const a=decodeURIComponent(i.hash).substring(1);return document.getElementById(a)||document.getElementsByName(a)[0]}}function Zt(i,a){return Fn(i,Xi(i,a))}function xn(i,a){return Hn(i,Xi(i,a))}function Fn(i,a){return Fe(dr(i,Fe(a),"querySelector"))}function Hn(i,a){return Ee(dr(i,Fe(a),"querySelectorAll"))}const Rn=/(^|[^\\],)\s*[!>+~-]/,qn=wt(i=>i.match(Rn));function Xi(i,a=document){return V(i)&&qn(i)||X(a)?a:a.ownerDocument}const fr=/([!>+~-])(?=\s+[!>+~-]|\s*$)/g,as=wt(i=>i.replace(fr,"$1 *"));function dr(i,a=document,u){if(!i||!V(i))return i;if(i=as(i),qn(i)){const x=js(i);i="";for(let S of x){let C=a;if(S[0]==="!"){const O=S.substr(1).trim().split(" ");if(C=je(tt(a),O[0]),S=O.slice(1).join(" ").trim(),!S.length&&x.length===1)return C}if(S[0]==="-"){const O=S.substr(1).trim().split(" "),j=(C||a).previousElementSibling;C=K(j,S.substr(1))?j:null,S=O.slice(1).join(" ")}C&&(i+=`${i?",":""}${Ys(C)} ${S}`)}a=document}try{return a[u](i)}catch{return null}}const kr=/.*?[^\\](?:,|$)/g,js=wt(i=>i.match(kr).map(a=>a.replace(/,$/,"").trim()));function Ys(i){const a=[];for(;i.parentNode;){const u=Ge(i,"id");if(u){a.unshift(`#${ls(u)}`);break}else{let{tagName:x}=i;x!=="HTML"&&(x+=`:nth-child(${Ue(i)+1})`),a.unshift(x),i=i.parentNode}}return a.join(" > ")}function ls(i){return V(i)?CSS.escape(i):""}function F(...i){let[a,u,x,S,C=!1]=gt(i);S.length>1&&(S=Nt(S)),C!=null&&C.self&&(S=Pt(S)),x&&(S=Et(x,S));for(const O of u)for(const j of a)j.addEventListener(O,S,C);return()=>pe(a,u,S,C)}function pe(...i){let[a,u,,x,S=!1]=gt(i);for(const C of u)for(const O of a)O.removeEventListener(C,x,S)}function we(...i){const[a,u,x,S,C=!1,O]=gt(i),j=F(a,u,x,ne=>{const de=!O||O(ne);de&&(j(),S(ne,de))},C);return j}function re(i,a,u){return Wt(i).every(x=>x.dispatchEvent(Re(a,!0,!0,u)))}function Re(i,a=!0,u=!1,x){return V(i)&&(i=new CustomEvent(i,{bubbles:a,cancelable:u,detail:x})),i}function gt(i){return i[0]=Wt(i[0]),V(i[1])&&(i[1]=i[1].split(" ")),b(i[2])&&i.splice(2,0,!1),i}function Et(i,a){return u=>{const x=i[0]===">"?Hn(i,u.currentTarget).reverse().filter(S=>Ie(u.target,S))[0]:je(u.target,i);x&&(u.current=x,a.call(this,u),delete u.current)}}function Nt(i){return a=>T(a.detail)?i(a,...a.detail):i(a)}function Pt(i){return function(a){if(a.target===a.currentTarget||a.target===a.current)return i.call(null,a)}}function jt(i){return i&&"addEventListener"in i}function Dt(i){return jt(i)?i:Fe(i)}function Wt(i){return T(i)?i.map(Dt).filter(Boolean):V(i)?Hn(i):jt(i)?[i]:Ee(i)}function Qt(i){return i.pointerType==="touch"||!!i.touches}function bn(i){var a,u;const{clientX:x,clientY:S}=((a=i.touches)==null?void 0:a[0])||((u=i.changedTouches)==null?void 0:u[0])||i;return{x,y:S}}const Mi={"animation-iteration-count":!0,"column-count":!0,"fill-opacity":!0,"flex-grow":!0,"flex-shrink":!0,"font-weight":!0,"line-height":!0,opacity:!0,order:!0,orphans:!0,"stroke-dasharray":!0,"stroke-dashoffset":!0,widows:!0,"z-index":!0,zoom:!0};function ue(i,a,u,x){const S=Ee(i);for(const C of S)if(V(a)){if(a=Pn(a),Z(u))return getComputedStyle(C).getPropertyValue(a);C.style.setProperty(a,Te(u)&&!Mi[a]?`${u}px`:u||Me(u)?u:"",x)}else if(T(a)){const O={};for(const j of a)O[j]=ue(C,j);return O}else z(a)&&(x=u,nt(a,(O,j)=>ue(C,j,O,x)));return S[0]}const Pn=wt(i=>rn(i));function rn(i){if(m(i,"--"))return i;i=l(i);const{style:a}=document.documentElement;if(i in a)return i;for(const u of["webkit","moz"]){const x=`-${u}-${i}`;if(x in a)return x}}const Br="uk-transition",In="transitionend",Pi="transitioncanceled";function Ts(i,a,u=400,x="linear"){return u=Math.round(u),Promise.all(Ee(i).map(S=>new Promise((C,O)=>{for(const ne in a){const de=ue(S,ne);de===""&&ue(S,ne,de)}const j=setTimeout(()=>re(S,In),u);we(S,[In,Pi],({type:ne})=>{clearTimeout(j),k(S,Br),ue(S,{transitionProperty:"",transitionDuration:"",transitionTimingFunction:""}),ne===Pi?O():C(S)},{self:!0}),W(S,Br),ue(S,{transitionProperty:Object.keys(a).map(Pn).join(","),transitionDuration:`${u}ms`,transitionTimingFunction:x,...a})})))}const Ut={start:Ts,async stop(i){re(i,In),await Promise.resolve()},async cancel(i){re(i,Pi),await Promise.resolve()},inProgress(i){return Ne(i,Br)}},Ei="uk-animation-",Gn="animationend",Oi="animationcanceled";function cs(i,a,u=200,x,S){return Promise.all(Ee(i).map(C=>new Promise((O,j)=>{re(C,Oi);const ne=setTimeout(()=>re(C,Gn),u);we(C,[Gn,Oi],({type:de})=>{clearTimeout(ne),de===Oi?j():O(C),ue(C,"animationDuration",""),se(C,`${Ei}\\S*`)},{self:!0}),ue(C,"animationDuration",`${u}ms`),W(C,a,Ei+(S?"leave":"enter")),m(a,Ei)&&(x&&W(C,`uk-transform-origin-${x}`),S&&W(C,`${Ei}reverse`))})))}const ni=new RegExp(`${Ei}(enter|leave)`),Ii={in:cs,out(i,a,u,x){return cs(i,a,u,x,!0)},inProgress(i){return ni.test(Ge(i,"class"))},cancel(i){re(i,Oi)}};function Kr(i){if(document.readyState!=="loading"){i();return}we(document,"DOMContentLoaded",i)}function q(i,...a){return a.some(u=>{var x;return((x=i==null?void 0:i.tagName)==null?void 0:x.toLowerCase())===u.toLowerCase()})}function D(i){return i=dt(i),i.innerHTML="",i}function B(i,a){return Z(a)?dt(i).innerHTML:ie(D(i),a)}const P=Pe("prepend"),ie=Pe("append"),ee=Pe("before"),le=Pe("after");function Pe(i){return function(a,u){var x;const S=Ee(V(u)?Kt(u):u);return(x=dt(a))==null||x[i](...S),sn(S)}}function $e(i){Ee(i).forEach(a=>a.remove())}function Ve(i,a){for(a=Fe(ee(i,a));a.firstChild;)a=a.firstChild;return ie(a,i),a}function Oe(i,a){return Ee(Ee(i).map(u=>u.hasChildNodes()?Ve(A(u.childNodes),a):ie(u,a)))}function ke(i){Ee(i).map(tt).filter((a,u,x)=>x.indexOf(a)===u).forEach(a=>a.replaceWith(...a.childNodes))}const Ke=/^<(\w+)\s*\/?>(?:<\/\1>)?$/;function Kt(i){const a=Ke.exec(i);if(a)return document.createElement(a[1]);const u=document.createElement("template");return u.innerHTML=i.trim(),sn(u.content.childNodes)}function sn(i){return i.length>1?i:i[0]}function fn(i,a){if(g(i))for(a(i),i=i.firstElementChild;i;){const u=i.nextElementSibling;fn(i,a),i=u}}function dt(i,a){return $n(i)?Fe(Kt(i)):Fn(i,a)}function $t(i,a){return $n(i)?Ee(Kt(i)):Hn(i,a)}function $n(i){return V(i)&&m(i.trim(),"<")}const Ln={width:["left","right"],height:["top","bottom"]};function Ot(i){const a=g(i)?Fe(i).getBoundingClientRect():{height:dn(i),width:ri(i),top:0,left:0};return{height:a.height,width:a.width,top:a.top,left:a.left,bottom:a.top+a.height,right:a.left+a.width}}function kt(i,a){a&&ue(i,{left:0,top:0});const u=Ot(i);if(i){const{scrollY:x,scrollX:S}=Le(i),C={height:x,width:S};for(const O in Ln)for(const j of Ln[O])u[j]+=C[O]}if(!a)return u;for(const x of["left","top"])ue(i,x,a[x]-u[x])}function st(i){let{top:a,left:u}=kt(i);const{ownerDocument:{body:x,documentElement:S},offsetParent:C}=Fe(i);let O=C||S;for(;O&&(O===x||O===S)&&ue(O,"position")==="static";)O=O.parentNode;if(g(O)){const j=kt(O);a-=j.top+fe(ue(O,"borderTopWidth")),u-=j.left+fe(ue(O,"borderLeftWidth"))}return{top:a-fe(ue(i,"marginTop")),left:u-fe(ue(i,"marginLeft"))}}function an(i){i=Fe(i);const a=[i.offsetTop,i.offsetLeft];for(;i=i.offsetParent;)if(a[0]+=i.offsetTop+fe(ue(i,"borderTopWidth")),a[1]+=i.offsetLeft+fe(ue(i,"borderLeftWidth")),ue(i,"position")==="fixed"){const u=Le(i);return a[0]+=u.scrollY,a[1]+=u.scrollX,a}return a}const dn=nr("height"),ri=nr("width");function nr(i){const a=d(i);return(u,x)=>{if(Z(x)){if(H(u))return u[`inner${a}`];if(X(u)){const S=u.documentElement;return Math.max(S[`offset${a}`],S[`scroll${a}`])}return u=Fe(u),x=ue(u,i),x=x==="auto"?u[`offset${a}`]:fe(x)||0,x-ki(u,i)}else return ue(u,i,!x&&x!==0?"":+x+ki(u,i)+"px")}}function ki(i,a,u="border-box"){return ue(i,"boxSizing")===u?bt(Ln[a].map(d),x=>fe(ue(i,`padding${x}`))+fe(ue(i,`border${x}Width`))):0}function ir(i){for(const a in Ln)for(const u in Ln[a])if(Ln[a][u]===i)return Ln[a][1-u];return i}function Nn(i,a="width",u=window,x=!1){return V(i)?bt(fi(i),S=>{const C=As(S);return C?qs(C==="vh"?Qo():C==="vw"?ri(Le(u)):x?u[`offset${d(a)}`]:Ot(u)[a],S):S}):fe(i)}const Bi=/-?\d+(?:\.\d+)?(?:v[wh]|%|px)?/g,fi=wt(i=>i.toString().replace(/\s/g,"").match(Bi)||[]),pr=/(?:v[hw]|%)$/,As=wt(i=>(i.match(pr)||[])[0]);function qs(i,a){return i*fe(a)/100}let mr,Jr;function Qo(){return mr||(Jr||(Jr=dt("<div>"),ue(Jr,{height:"100vh",position:"fixed"}),F(window,"resize",()=>mr=null)),ie(document.body,Jr),mr=Jr.clientHeight,$e(Jr),mr)}const gr=typeof window<"u",Un=gr&&document.dir==="rtl",Fr=gr&&"ontouchstart"in window,Hr=gr&&window.PointerEvent,vr=Hr?"pointerdown":Fr?"touchstart":"mousedown",ea=Hr?"pointermove":Fr?"touchmove":"mousemove",hs=Hr?"pointerup":Fr?"touchend":"mouseup",h=Hr?"pointerenter":Fr?"":"mouseenter",p=Hr?"pointerleave":Fr?"":"mouseleave",_=Hr?"pointercancel":"touchcancel",w={reads:[],writes:[],read(i){return this.reads.push(i),N(),i},write(i){return this.writes.push(i),N(),i},clear(i){J(this.reads,i),J(this.writes,i)},flush:R};function R(i){te(w.reads),te(w.writes.splice(0)),w.scheduled=!1,(w.reads.length||w.writes.length)&&N(i+1)}const L=4;function N(i){w.scheduled||(w.scheduled=!0,i&&i<L?Promise.resolve().then(()=>R(i)):requestAnimationFrame(()=>R(1)))}function te(i){let a;for(;a=i.shift();)try{a()}catch(u){console.error(u)}}function J(i,a){const u=i.indexOf(a);return~u&&i.splice(u,1)}function he(){}he.prototype={positions:[],init(){this.positions=[];let i;this.unbind=F(document,"mousemove",a=>i=bn(a)),this.interval=setInterval(()=>{i&&(this.positions.push(i),this.positions.length>5&&this.positions.shift())},50)},cancel(){var i;(i=this.unbind)==null||i.call(this),clearInterval(this.interval)},movesTo(i){if(this.positions.length<2)return!1;const a=i.getBoundingClientRect(),{left:u,right:x,top:S,bottom:C}=a,[O]=this.positions,j=Je(this.positions),ne=[O,j];return xe(j,a)?!1:[[{x:u,y:S},{x,y:C}],[{x:u,y:C},{x,y:S}]].some(ye=>{const ot=De(ne,ye);return ot&&xe(ot,a)})}};function De([{x:i,y:a},{x:u,y:x}],[{x:S,y:C},{x:O,y:j}]){const ne=(j-C)*(u-i)-(O-S)*(x-a);if(ne===0)return!1;const de=((O-S)*(a-C)-(j-C)*(i-S))/ne;return de<0?!1:{x:i+de*(u-i),y:a+de*(x-a)}}function He(i,a,u={},{intersecting:x=!0}={}){const S=new IntersectionObserver(x?(C,O)=>{C.some(j=>j.isIntersecting)&&a(C,O)}:a,u);for(const C of Ee(i))S.observe(C);return S}const Se=gr&&window.ResizeObserver;function Qe(i,a,u={box:"border-box"}){if(Se)return en(ResizeObserver,i,a,u);const x=[F(window,"load resize",a),F(document,"loadedmetadata load",a,!0)];return{disconnect:()=>x.map(S=>S())}}function Ht(i){return{disconnect:F([window,window.visualViewport],"resize",i)}}function pn(i,a,u){return en(MutationObserver,i,a,u)}function en(i,a,u,x){const S=new i(u);for(const C of Ee(a))S.observe(C,x);return S}function si(i){zr(i)&&Cs(i,{func:"playVideo",method:"play"}),on(i)&&i.play()}function Qn(i){zr(i)&&Cs(i,{func:"pauseVideo",method:"pause"}),on(i)&&i.pause()}function xr(i){zr(i)&&Cs(i,{func:"mute",method:"setVolume",value:0}),on(i)&&(i.muted=!0)}function yr(i){return on(i)||zr(i)}function on(i){return q(i,"video")}function zr(i){return q(i,"iframe")&&(mn(i)||Vn(i))}function mn(i){return!!i.src.match(/\/\/.*?youtube(-nocookie)?\.[a-z]+\/(watch\?v=[^&\s]+|embed)|youtu\.be\/.*/)}function Vn(i){return!!i.src.match(/vimeo\.com\/video\/.*/)}async function Cs(i,a){await Gr(i),ta(i,a)}function ta(i,a){i.contentWindow.postMessage(JSON.stringify({event:"command",...a}),"*")}const rr="_ukPlayer";let vo=0;function Gr(i){if(i[rr])return i[rr];const a=mn(i),u=Vn(i),x=++vo;let S;return i[rr]=new Promise(C=>{a&&we(i,"load",()=>{const O=()=>ta(i,{event:"listening",id:x});S=setInterval(O,100),O()}),we(window,"message",C,!1,({data:O})=>{try{return O=JSON.parse(O),a&&(O==null?void 0:O.id)===x&&O.event==="onReady"||u&&Number(O==null?void 0:O.player_id)===x}catch{}}),i.src=`${i.src}${y(i.src,"?")?"&":"?"}${a?"enablejsapi=1":`api=1&player_id=${x}`}`}).then(()=>clearInterval(S))}function Vr(i,a=0,u=0){return Q(i)?Ft(...Ni(i).map(x=>{const{top:S,left:C,bottom:O,right:j}=ji(x);return{top:S-a,left:C-u,bottom:O+a,right:j+u}}).concat(kt(i))):!1}function Qr(i,{offset:a=0}={}){const u=Q(i)?us(i,!1,["hidden"]):[];return u.reduce((j,ne,de)=>{const{scrollTop:ye,scrollHeight:ot,offsetHeight:ct}=ne,Ct=ji(ne),nn=ot-Ct.height,{height:yn,top:Kn}=u[de-1]?ji(u[de-1]):kt(i);let gi=Math.ceil(Kn-Ct.top-a+ye);return a>0&&ct<yn+a?gi+=a:a=0,gi>nn?(a-=gi-nn,gi=nn):gi<0&&(a-=gi,gi=0),()=>x(ne,gi-ye,i,nn).then(j)},()=>Promise.resolve())();function x(j,ne,de,ye){return new Promise(ot=>{const ct=j.scrollTop,Ct=S(Math.abs(ne)),nn=Date.now(),yn=kt(de).top;let Kn=0,gi=15;(function dl(){const dc=C(Rt((Date.now()-nn)/Ct));let Wr=0;if(u[0]===j&&ct+ne<ye){Wr=kt(de).top-yn;const aa=O(de);Wr-=aa?kt(aa).height:0}j.scrollTop=Math[ne+Wr>0?"max":"min"](j.scrollTop,ct+(ne+Wr)*dc),dc===1&&(Kn===Wr||!gi--)?ot():(Kn=Wr,requestAnimationFrame(dl))})()})}function S(j){return 40*Math.pow(j,.375)}function C(j){return .5*(1-Math.cos(Math.PI*j))}function O(j){return j.ownerDocument.elementsFromPoint(0,0).find(ne=>["fixed","sticky"].includes(ue(ne,"position"))&&!ne.contains(j))}}function Fi(i,a=0,u=0){if(!Q(i))return 0;const x=oi(i,!0),{scrollHeight:S,scrollTop:C}=x,{height:O}=ji(x),j=S-O,ne=an(i)[0]-an(x)[0],de=Math.max(0,ne-O+a),ye=Math.min(j,ne+i.offsetHeight-u);return Rt((C-de)/(ye-de))}function us(i,a=!1,u=[]){const x=Xl(i);let S=rt(i).reverse();S=S.slice(S.indexOf(x)+1);const C=M(S,O=>ue(O,"position")==="fixed");return~C&&(S=S.slice(C)),[x].concat(S.filter(O=>ue(O,"overflow").split(" ").some(j=>y(["auto","scroll",...u],j))&&(!a||O.scrollHeight>ji(O).height))).reverse()}function oi(...i){return us(...i)[0]}function Ni(i){return us(i,!1,["hidden","clip"])}function ji(i){const a=Le(i),{visualViewport:u,document:{documentElement:x}}=a;let S=i===Xl(i)?a:i;if(H(S)&&u){let{height:O,width:j,scale:ne,pageTop:de,pageLeft:ye}=u;return O=Math.round(O*ne),j=Math.round(j*ne),{height:O,width:j,top:de,left:ye,bottom:de+O,right:ye+j}}let C=kt(S);if(ue(S,"display")==="inline")return C;for(let[O,j,ne,de]of[["width","x","left","right"],["height","y","top","bottom"]]){H(S)?S=x:C[ne]+=fe(ue(S,`border-${ne}-width`));const ye=C[O]%1;C[O]=C[j]=S[`client${d(O)}`]-(ye?ye<.5?-ye:1-ye:0),C[de]=C[O]+C[ne]}return C}function Xl(i){return Le(i).document.scrollingElement}const Yi=[["width","x","left","right"],["height","y","top","bottom"]];function En(i,a,u){u={attach:{element:["left","top"],target:["left","top"],...u.attach},offset:[0,0],placement:[],...u},T(a)||(a=[a,a]),kt(i,xo(i,a,u))}function xo(i,a,u){const x=sr(i,a,u),{boundary:S,viewportOffset:C=0,placement:O}=u;let j=x;for(const[ne,[de,,ye,ot]]of Object.entries(Yi)){const ct=wh(i,a[ne],C,S,ne);if(_r(x,ct,ne))continue;let Ct=0;if(O[ne]==="flip"){const nn=u.attach.target[ne];if(nn===ot&&x[ot]<=ct[ot]||nn===ye&&x[ye]>=ct[ye])continue;Ct=ql(i,a,u,ne)[ye]-x[ye];const yn=Yl(i,a[ne],C,ne);if(!_r(fs(x,Ct,ne),yn,ne)){if(_r(x,yn,ne))continue;if(u.recursion)return!1;const Kn=yo(i,a,u);if(Kn&&_r(Kn,yn,1-ne))return Kn;continue}}else if(O[ne]==="shift"){const nn=kt(a[ne]),{offset:yn}=u;Ct=Rt(Rt(x[ye],ct[ye],ct[ot]-x[de]),nn[ye]-x[de]+yn[ne],nn[ot]-yn[ne])-x[ye]}j=fs(j,Ct,ne)}return j}function sr(i,a,u){let{attach:x,offset:S}={attach:{element:["left","top"],target:["left","top"],...u.attach},offset:[0,0],...u},C=kt(i);for(const[O,[j,,ne,de]]of Object.entries(Yi)){const ye=x.target[O]===x.element[O]?ji(a[O]):kt(a[O]);C=fs(C,ye[ne]-C[ne]+jl(x.target[O],de,ye[j])-jl(x.element[O],de,C[j])+ +S[O],O)}return C}function fs(i,a,u){const[,x,S,C]=Yi[u],O={...i};return O[S]=i[x]=i[S]+a,O[C]+=a,O}function jl(i,a,u){return i==="center"?u/2:i===a?u:0}function wh(i,a,u,x,S){let C=na(...ds(i,a).map(ji));return u&&(C[Yi[S][2]]+=u,C[Yi[S][3]]-=u),x&&(C=na(C,kt(T(x)?x[S]:x))),C}function Yl(i,a,u,x){const[S,C,O,j]=Yi[x],[ne]=ds(i,a),de=ji(ne);return["auto","scroll"].includes(ue(ne,`overflow-${C}`))&&(de[O]-=ne[`scroll${d(O)}`],de[j]=de[O]+ne[`scroll${d(S)}`]),de[O]+=u,de[j]-=u,de}function ds(i,a){return Ni(a).filter(u=>Ie(i,u))}function na(...i){let a={};for(const u of i)for(const[,,x,S]of Yi)a[x]=Math.max(a[x]||0,u[x]),a[S]=Math.min(...[a[S],u[S]].filter(Boolean));return a}function _r(i,a,u){const[,,x,S]=Yi[u];return i[x]>=a[x]&&i[S]<=a[S]}function ql(i,a,{offset:u,attach:x},S){return sr(i,a,{attach:{element:_o(x.element,S),target:_o(x.target,S)},offset:el(u,S)})}function yo(i,a,u){return xo(i,a,{...u,attach:{element:u.attach.element.map(bo).reverse(),target:u.attach.target.map(bo).reverse()},offset:u.offset.reverse(),placement:u.placement.reverse(),recursion:!0})}function _o(i,a){const u=[...i],x=Yi[a].indexOf(i[a]);return~x&&(u[a]=Yi[a][1-x%2+2]),u}function bo(i){for(let a=0;a<Yi.length;a++){const u=Yi[a].indexOf(i);if(~u)return Yi[1-a][u%2+2]}}function el(i,a){return i=[...i],i[a]*=-1,i}var Mh=Object.freeze({__proto__:null,$:dt,$$:$t,Animation:Ii,Dimensions:Lt,MouseTracker:he,Transition:Ut,addClass:W,after:le,append:ie,apply:fn,assign:E,attr:Ge,before:ee,boxModelAdjust:ki,camelize:f,children:We,clamp:Rt,closest:je,createEvent:Re,css:ue,data:Xt,dimensions:Ot,each:nt,empty:D,endsWith:v,escape:ls,fastdom:w,filter:pt,find:Fn,findAll:Hn,findIndex:M,flipPosition:ir,fragment:Kt,getEventPos:bn,getIndex:qt,getTargetedElement:xt,hasAttr:Vt,hasClass:Ne,hasOwn:r,hasTouch:Fr,height:dn,html:B,hyphenate:l,inBrowser:gr,includes:y,index:Ue,intersectRect:Ft,isArray:T,isBoolean:U,isDocument:X,isElement:g,isEmpty:ve,isEqual:ge,isFocusable:_t,isFunction:b,isInView:Vr,isInput:ze,isNode:G,isNumber:Me,isNumeric:Te,isObject:z,isPlainObject:I,isRtl:Un,isSameSiteAnchor:qe,isString:V,isTag:q,isTouch:Qt,isUndefined:Z,isVideo:yr,isVisible:Q,isVoidElement:ht,isWindow:H,last:Je,matches:K,memoize:wt,mute:xr,noop:Mt,observeIntersection:He,observeMutation:pn,observeResize:Qe,observeViewportResize:Ht,off:pe,offset:kt,offsetPosition:an,offsetViewport:ji,on:F,once:we,overflowParents:Ni,parent:tt,parents:rt,pause:Qn,pick:St,play:si,pointInRect:xe,pointerCancel:_,pointerDown:vr,pointerEnter:h,pointerLeave:p,pointerMove:ea,pointerUp:hs,position:st,positionAt:En,prepend:P,propName:Pn,query:Zt,queryAll:xn,ready:Kr,remove:$e,removeAttr:Cn,removeClass:k,removeClasses:se,replaceClass:Ye,scrollIntoView:Qr,scrollParent:oi,scrollParents:us,scrolledOver:Fi,selFocusable:et,selInput:Ze,sortBy:ut,startsWith:m,sumBy:bt,swap:Ce,toArray:A,toBoolean:me,toEventTargets:Wt,toFloat:fe,toNode:Fe,toNodes:Ee,toNumber:_e,toPx:Nn,toWindow:Le,toggleClass:Xe,trigger:re,ucfirst:d,uniqueBy:It,unwrap:ke,width:ri,within:Ie,wrapAll:Ve,wrapInner:Oe}),di={connected(){W(this.$el,this.$options.id)}};const tl=["days","hours","minutes","seconds"];var nl={mixins:[di],props:{date:String,clsWrapper:String,role:String},data:{date:"",clsWrapper:".uk-countdown-%unit%",role:"timer"},connected(){Ge(this.$el,"role",this.role),this.date=fe(Date.parse(this.$props.date)),this.end=!1,this.start()},disconnected(){this.stop()},events:{name:"visibilitychange",el(){return document},handler(){document.hidden?this.stop():this.start()}},methods:{start(){this.stop(),this.update(),this.timer||(re(this.$el,"countdownstart"),this.timer=setInterval(this.update,1e3))},stop(){this.timer&&(clearInterval(this.timer),re(this.$el,"countdownstop"),this.timer=null)},update(){const i=Eh(this.date);i.total||(this.stop(),this.end||(re(this.$el,"countdownend"),this.end=!0));for(const a of tl){const u=dt(this.clsWrapper.replace("%unit%",a),this.$el);if(!u)continue;let x=String(Math.trunc(i[a]));x=x.length<2?`0${x}`:x,u.textContent!==x&&(x=x.split(""),x.length!==u.children.length&&B(u,x.map(()=>"<span></span>").join("")),x.forEach((S,C)=>u.children[C].textContent=S))}}}};function Eh(i){const a=Math.max(0,i-Date.now())/1e3;return{total:a,seconds:a%60,minutes:a/60%60,hours:a/60/60%24,days:a/60/60/24}}const Zn={};Zn.events=Zn.watch=Zn.observe=Zn.created=Zn.beforeConnect=Zn.connected=Zn.beforeDisconnect=Zn.disconnected=Zn.destroy=Y,Zn.args=function(i,a){return a!==!1&&Y(a||i)},Zn.update=function(i,a){return ut(Y(i,b(a)?{read:a}:a),"order")},Zn.props=function(i,a){if(T(a)){const u={};for(const x of a)u[x]=String;a=u}return Zn.methods(i,a)},Zn.computed=Zn.methods=function(i,a){return a?i?{...i,...a}:a:i},Zn.i18n=Zn.data=function(i,a,u){return u?il(i,a,u):a?i?function(x){return il(i,a,x)}:a:i};function il(i,a,u){return Zn.computed(b(i)?i.call(u,u):i,b(a)?a.call(u,u):a)}function Y(i,a){return i=i&&!T(i)?[i]:i,a?i?i.concat(a):T(a)?a:[a]:i}function ae(i,a){return Z(a)?i:a}function be(i,a,u){const x={};if(b(a)&&(a=a.options),a.extends&&(i=be(i,a.extends,u)),a.mixins)for(const C of a.mixins)i=be(i,C,u);for(const C in i)S(C);for(const C in a)r(i,C)||S(C);function S(C){x[C]=(Zn[C]||ae)(i[C],a[C],u)}return x}function Ae(i,a=[]){try{return i?m(i,"{")?JSON.parse(i):a.length&&!y(i,":")?{[a[0]]:i}:i.split(";").reduce((u,x)=>{const[S,C]=x.split(/:(.*)/);return S&&!Z(C)&&(u[S.trim()]=C.trim()),u},{}):{}}catch{return{}}}function Be(i,a){return i===Boolean?me(a):i===Number?_e(a):i==="list"?at(a):i===Object&&V(a)?Ae(a):i?i(a):a}function at(i){return T(i)?i:V(i)?i.split(/,(?![^(]*\))/).map(a=>Te(a)?_e(a):me(a.trim())):[i]}function lt(i){return At(Qe,i,"resize")}function yt(i){return At(He,i)}function mt(i){return At(pn,i)}function tn(i={}){return yt({handler:function(a,u){const{targets:x=this.$el,preload:S=5}=i;for(const C of Ee(b(x)?x(this):x))$t('[loading="lazy"]',C).slice(0,S-1).forEach(O=>Cn(O,"loading"));for(const C of a.filter(({isIntersecting:O})=>O).map(({target:O})=>O))u.unobserve(C)},...i})}function Bt(i){return At((a,u)=>Ht(u),i)}function zt(i){return At((a,u)=>({disconnect:F(Hi(a),"scroll",u,{passive:!0})}),i,"scroll")}function ln(i){return{observe(a,u){return{observe:Mt,unobserve:Mt,disconnect:F(a,vr,u,{passive:!0})}},handler(a){if(!Qt(a))return;const u=bn(a),x="tagName"in a.target?a.target:tt(a.target);we(document,`${hs} ${_} scroll`,S=>{const{x:C,y:O}=bn(S);(S.type!=="scroll"&&x&&C&&Math.abs(u.x-C)>100||O&&Math.abs(u.y-O)>100)&&setTimeout(()=>{re(x,"swipe"),re(x,`swipe${On(u.x,u.y,C,O)}`)})})},...i}}function At(i,a,u){return{observe:i,handler(){this.$emit(u)},...a}}function On(i,a,u,x){return Math.abs(i-u)>=Math.abs(a-x)?i-u>0?"Left":"Right":a-x>0?"Up":"Down"}function Hi(i){return Ee(i).map(a=>{const{ownerDocument:u}=a,x=oi(a,!0);return x===u.scrollingElement?u:x})}var pi={props:{margin:String,firstColumn:Boolean},data:{margin:"uk-margin-small-top",firstColumn:"uk-first-column"},observe:[mt({options:{childList:!0,attributes:!0,attributeFilter:["style"]}}),lt({target:({$el:i})=>[i,...We(i)]})],update:{read(){return{rows:zi(A(this.$el.children))}},write({rows:i}){for(const a of i)for(const u of a)Xe(u,this.margin,i[0]!==a),Xe(u,this.firstColumn,a[Un?a.length-1:0]===u)},events:["resize"]}};function zi(i){const a=[[]],u=i.some((x,S)=>S&&i[S-1].offsetParent!==x.offsetParent);for(const x of i){if(!Q(x))continue;const S=or(x,u);for(let C=a.length-1;C>=0;C--){const O=a[C];if(!O[0]){O.push(x);break}const j=or(O[0],u);if(S.top>=j.bottom-1&&S.top!==j.top){a.push([x]);break}if(S.bottom-1>j.top||S.top===j.top){let ne=O.length-1;for(;ne>=0;ne--){const de=or(O[ne],u);if(S.left>=de.left)break}O.splice(ne+1,0,x);break}if(C===0){a.unshift([x]);break}}}return a}function or(i,a=!1){let{offsetTop:u,offsetLeft:x,offsetHeight:S,offsetWidth:C}=i;return a&&([u,x]=an(i)),{top:u,left:x,bottom:u+S,right:x+C}}const ps="uk-transition-leave",mi="uk-transition-enter";function $f(i,a,u,x=0){const S=Zl(a,!0),C={opacity:1},O={opacity:0},j=ye=>()=>S===Zl(a)?ye():Promise.reject(),ne=j(async()=>{W(a,ps),await Promise.all(jf(a).map((ye,ot)=>new Promise(ct=>setTimeout(()=>Ut.start(ye,O,u/2,"ease").then(ct),ot*x)))),k(a,ps)}),de=j(async()=>{const ye=dn(a);W(a,mi),i(),ue(We(a),{opacity:0}),await a1();const ot=We(a),ct=dn(a);ue(a,"alignContent","flex-start"),dn(a,ye);const Ct=jf(a);ue(ot,O);const nn=Ct.map(async(yn,Kn)=>{await l1(Kn*x),await Ut.start(yn,C,u/2,"ease")});ye!==ct&&nn.push(Ut.start(a,{height:ct},u/2+Ct.length*x,"ease")),await Promise.all(nn).then(()=>{k(a,mi),S===Zl(a)&&(ue(a,{height:"",alignContent:""}),ue(ot,{opacity:""}),delete a.dataset.transition)})});return Ne(a,ps)?Xf(a).then(de):Ne(a,mi)?Xf(a).then(ne).then(de):ne().then(de)}function Zl(i,a){return a&&(i.dataset.transition=1+Zl(i)),_e(i.dataset.transition)||0}function Xf(i){return Promise.all(We(i).filter(Ut.inProgress).map(a=>new Promise(u=>we(a,"transitionend transitioncanceled",u))))}function jf(i){return zi(We(i)).flat().filter(Vr)}function a1(){return new Promise(i=>requestAnimationFrame(i))}function l1(i){return new Promise(a=>setTimeout(a,i))}async function c1(i,a,u){await Zf();let x=We(a);const S=x.map(ct=>Yf(ct,!0)),C={...ue(a,["height","padding"]),display:"block"};await Promise.all(x.concat(a).map(Ut.cancel)),i(),x=x.concat(We(a).filter(ct=>!y(x,ct))),await Promise.resolve(),w.flush();const O=Ge(a,"style"),j=ue(a,["height","padding"]),[ne,de]=h1(a,x,S),ye=x.map(ct=>({style:Ge(ct,"style")}));x.forEach((ct,Ct)=>de[Ct]&&ue(ct,de[Ct])),ue(a,C),re(a,"scroll"),w.flush(),await Zf();const ot=x.map((ct,Ct)=>tt(ct)===a&&Ut.start(ct,ne[Ct],u,"ease")).concat(Ut.start(a,j,u,"ease"));try{await Promise.all(ot),x.forEach((ct,Ct)=>{Ge(ct,ye[Ct]),tt(ct)===a&&ue(ct,"display",ne[Ct].opacity===0?"none":"")}),Ge(a,"style",O)}catch{Ge(x,"style",""),u1(a,C)}}function Yf(i,a){const u=ue(i,"zIndex");return Q(i)?{display:"",opacity:a?ue(i,"opacity"):"0",pointerEvents:"none",position:"absolute",zIndex:u==="auto"?Ue(i):u,...qf(i)}:!1}function h1(i,a,u){const x=a.map((C,O)=>tt(C)&&O in u?u[O]?Q(C)?qf(C):{opacity:0}:{opacity:Q(C)?1:0}:!1),S=x.map((C,O)=>{const j=tt(a[O])===i&&(u[O]||Yf(a[O]));if(!j)return!1;if(!C)delete j.opacity;else if(!("opacity"in C)){const{opacity:ne}=j;ne%1?C.opacity=1:delete j.opacity}return j});return[x,S]}function u1(i,a){for(const u in a)ue(i,u,"")}function qf(i){const{height:a,width:u}=kt(i);return{height:a,width:u,transform:"",...st(i),...ue(i,["marginTop","marginLeft"])}}function Zf(){return new Promise(i=>requestAnimationFrame(i))}var Kf={props:{duration:Number,animation:Boolean},data:{duration:150,animation:"slide"},methods:{animate(i,a=this.$el){const u=this.animation;return(u==="fade"?$f:u==="delayed-fade"?(...S)=>$f(...S,40):u?c1:()=>(i(),Promise.resolve()))(i,a,this.duration).catch(Mt)}}};const Tn={TAB:9,ESC:27,SPACE:32,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40};var f1={mixins:[Kf],args:"target",props:{target:String,selActive:Boolean},data:{target:"",selActive:!1,attrItem:"uk-filter-control",cls:"uk-active",duration:250},computed:{toggles({attrItem:i},a){return $t(`[${i}],[data-${i}]`,a)},children({target:i},a){return $t(`${i} > *`,a)}},watch:{toggles(i){this.updateState();const a=$t(this.selActive,this.$el);for(const u of i){this.selActive!==!1&&Xe(u,this.cls,y(a,u));const x=x1(u);q(x,"a")&&Ge(x,"role","button")}},children(i,a){a&&this.updateState()}},events:{name:"click keydown",delegate(){return`[${this.attrItem}],[data-${this.attrItem}]`},handler(i){i.type==="keydown"&&i.keyCode!==Tn.SPACE||je(i.target,"a,button")&&(i.preventDefault(),this.apply(i.current))}},methods:{apply(i){const a=this.getState(),u=Qf(i,this.attrItem,this.getState());d1(a,u)||this.setState(u)},getState(){return this.toggles.filter(i=>Ne(i,this.cls)).reduce((i,a)=>Qf(a,this.attrItem,i),{filter:{"":""},sort:[]})},async setState(i,a=!0){i={filter:{"":""},sort:[],...i},re(this.$el,"beforeFilter",[this,i]);for(const u of this.toggles)Xe(u,this.cls,m1(u,this.attrItem,i));await Promise.all($t(this.target,this.$el).map(u=>{const x=()=>{p1(i,u,We(u)),this.$update(this.$el)};return a?this.animate(x,u):x()})),re(this.$el,"afterFilter",[this])},updateState(){w.write(()=>this.setState(this.getState(),!1))}}};function Jf(i,a){return Ae(Xt(i,a),["filter"])}function d1(i,a){return["filter","sort"].every(u=>ge(i[u],a[u]))}function p1(i,a,u){const x=g1(i);u.forEach(O=>ue(O,"display",x&&!K(O,x)?"none":""));const[S,C]=i.sort;if(S){const O=v1(u,S,C);ge(O,u)||ie(a,O)}}function Qf(i,a,u){const{filter:x,group:S,sort:C,order:O="asc"}=Jf(i,a);return(x||Z(C))&&(S?x?(delete u.filter[""],u.filter[S]=x):(delete u.filter[S],(ve(u.filter)||""in u.filter)&&(u.filter={"":x||""})):u.filter={"":x||""}),Z(C)||(u.sort=[C,O]),u}function m1(i,a,{filter:u={"":""},sort:[x,S]}){const{filter:C="",group:O="",sort:j,order:ne="asc"}=Jf(i,a);return Z(j)?O in u&&C===u[O]||!C&&O&&!(O in u)&&!u[""]:x===j&&S===ne}function g1({filter:i}){let a="";return nt(i,u=>a+=u||""),a}function v1(i,a,u){return[...i].sort((x,S)=>Xt(x,a).localeCompare(Xt(S,a),void 0,{numeric:!0})*(u==="asc"||-1))}function x1(i){return dt("a,button",i)||i}var rl={props:{container:Boolean},data:{container:!0},computed:{container({container:i}){return i===!0&&this.$container||i&&dt(i)}}};let Sh;function ed(i){const a=F(i,"touchmove",x=>{if(x.targetTouches.length!==1||K(x.target,'input[type="range"'))return;let{scrollHeight:S,clientHeight:C}=oi(x.target);C>=S&&x.cancelable&&x.preventDefault()},{passive:!1});if(Sh)return a;Sh=!0;const{scrollingElement:u}=document;return ue(u,{overflowY:CSS.supports("overflow","clip")?"clip":"hidden",touchAction:"none",paddingRight:ri(window)-u.clientWidth||""}),()=>{Sh=!1,a(),ue(u,{overflowY:"",touchAction:"",paddingRight:""})}}var wo={props:{cls:Boolean,animation:"list",duration:Number,velocity:Number,origin:String,transition:String},data:{cls:!1,animation:[!1],duration:200,velocity:.2,origin:!1,transition:"ease",clsEnter:"uk-togglabe-enter",clsLeave:"uk-togglabe-leave"},computed:{hasAnimation({animation:i}){return!!i[0]},hasTransition({animation:i}){return["slide","reveal"].some(a=>m(i[0],a))}},methods:{async toggleElement(i,a,u){try{return await Promise.all(Ee(i).map(x=>{const S=U(a)?a:!this.isToggled(x);if(!re(x,`before${S?"show":"hide"}`,[this]))return Promise.reject();const C=(b(u)?u:u===!1||!this.hasAnimation?y1:this.hasTransition?_1:b1)(x,S,this),O=S?this.clsEnter:this.clsLeave;W(x,O),re(x,S?"show":"hide",[this]);const j=()=>{k(x,O),re(x,S?"shown":"hidden",[this])};return C?C.then(j,()=>(k(x,O),Promise.reject())):j()})),!0}catch{return!1}},isToggled(i=this.$el){return i=Fe(i),Ne(i,this.clsEnter)?!0:Ne(i,this.clsLeave)?!1:this.cls?Ne(i,this.cls.split(" ")[0]):Q(i)},_toggle(i,a){if(!i)return;a=!!a;let u;this.cls?(u=y(this.cls," ")||a!==Ne(i,this.cls),u&&Xe(i,this.cls,y(this.cls," ")?void 0:a)):(u=a===i.hidden,u&&(i.hidden=!a)),$t("[autofocus]",i).some(x=>Q(x)?x.focus()||!0:x.blur()),u&&re(i,"toggled",[a,this])}}};function y1(i,a,{_toggle:u}){return Ii.cancel(i),Ut.cancel(i),u(i,a)}async function _1(i,a,{animation:u,duration:x,velocity:S,transition:C,_toggle:O}){var j;const[ne="reveal",de="top"]=((j=u[0])==null?void 0:j.split("-"))||[],ye=[["left","right"],["top","bottom"]],ot=ye[y(ye[0],de)?0:1],ct=ot[1]===de,nn=["width","height"][ye.indexOf(ot)],yn=`margin-${ot[0]}`,Kn=`margin-${de}`;let gi=Ot(i)[nn];const dl=Ut.inProgress(i);await Ut.cancel(i),a&&O(i,!0);const dc=Object.fromEntries(["padding","border","width","height","minWidth","minHeight","overflowY","overflowX",yn,Kn].map(pp=>[pp,i.style[pp]])),Wr=Ot(i),aa=fe(ue(i,yn)),up=fe(ue(i,Kn)),Co=Wr[nn]+up;!dl&&!a&&(gi+=up);const[pc]=Oe(i,"<div>");ue(pc,{boxSizing:"border-box",height:Wr.height,width:Wr.width,...ue(i,["overflow","padding","borderTop","borderRight","borderBottom","borderLeft","borderImage",Kn])}),ue(i,{padding:0,border:0,minWidth:0,minHeight:0,[Kn]:0,width:Wr.width,height:Wr.height,overflow:"hidden",[nn]:gi});const fp=gi/Co;x=(S*Co+x)*(a?1-fp:fp);const dp={[nn]:a?Co:0};ct&&(ue(i,yn,Co-gi+aa),dp[yn]=a?aa:Co+aa),!ct^ne==="reveal"&&(ue(pc,yn,-Co+gi),Ut.start(pc,{[yn]:a?0:-Co},x,C));try{await Ut.start(i,dp,x,C)}finally{ue(i,dc),ke(pc.firstChild),a||O(i,!1)}}function b1(i,a,u){const{animation:x,duration:S,_toggle:C}=u;return a?(C(i,!0),Ii.in(i,x[0],S,u.origin)):Ii.out(i,x[1]||x[0],S,u.origin).then(()=>C(i,!1))}const ar=[];var Th={mixins:[di,rl,wo],props:{selPanel:String,selClose:String,escClose:Boolean,bgClose:Boolean,stack:Boolean,role:String},data:{cls:"uk-open",escClose:!0,bgClose:!0,overlay:!0,stack:!1,role:"dialog"},computed:{panel({selPanel:i},a){return dt(i,a)},transitionElement(){return this.panel},bgClose({bgClose:i}){return i&&this.panel}},connected(){Ge(this.panel||this.$el,"role",this.role),this.overlay&&Ge(this.panel||this.$el,"aria-modal",!0)},beforeDisconnect(){y(ar,this)&&this.toggleElement(this.$el,!1,!1)},events:[{name:"click",delegate(){return`${this.selClose},a[href*="#"]`},handler(i){const{current:a,defaultPrevented:u}=i,{hash:x}=a;!u&&x&&qe(a)&&!Ie(x,this.$el)&&dt(x,document.body)?this.hide():K(a,this.selClose)&&(i.preventDefault(),this.hide())}},{name:"toggle",self:!0,handler(i){i.defaultPrevented||(i.preventDefault(),this.isToggled()===y(ar,this)&&this.toggle())}},{name:"beforeshow",self:!0,handler(i){if(y(ar,this))return!1;!this.stack&&ar.length?(Promise.all(ar.map(a=>a.hide())).then(this.show),i.preventDefault()):ar.push(this)}},{name:"show",self:!0,handler(){this.stack&&ue(this.$el,"zIndex",fe(ue(this.$el,"zIndex"))+ar.length);const i=[this.overlay&&M1(this),this.overlay&&ed(this.$el),this.bgClose&&E1(this),this.escClose&&S1(this)];we(this.$el,"hidden",()=>i.forEach(a=>a&&a()),{self:!0}),W(document.documentElement,this.clsPage)}},{name:"shown",self:!0,handler(){_t(this.$el)||Ge(this.$el,"tabindex","-1"),K(this.$el,":focus-within")||this.$el.focus()}},{name:"hidden",self:!0,handler(){y(ar,this)&&ar.splice(ar.indexOf(this),1),ue(this.$el,"zIndex",""),ar.some(i=>i.clsPage===this.clsPage)||k(document.documentElement,this.clsPage)}}],methods:{toggle(){return this.isToggled()?this.hide():this.show()},show(){return this.container&&tt(this.$el)!==this.container?(ie(this.container,this.$el),new Promise(i=>requestAnimationFrame(()=>this.show().then(i)))):this.toggleElement(this.$el,!0,td)},hide(){return this.toggleElement(this.$el,!1,td)}}};function td(i,a,{transitionElement:u,_toggle:x}){return new Promise((S,C)=>we(i,"show hide",()=>{var O;(O=i._reject)==null||O.call(i),i._reject=C,x(i,a);const j=we(u,"transitionstart",()=>{we(u,"transitionend transitioncancel",S,{self:!0}),clearTimeout(ne)},{self:!0}),ne=setTimeout(()=>{j(),S()},w1(ue(u,"transitionDuration")))})).then(()=>delete i._reject)}function w1(i){return i?v(i,"ms")?fe(i):fe(i)*1e3:0}function M1(i){return F(document,"focusin",a=>{Je(ar)===i&&!Ie(a.target,i.$el)&&i.$el.focus()})}function E1(i){return F(document,vr,({target:a})=>{Je(ar)!==i||i.overlay&&!Ie(a,i.$el)||Ie(a,i.panel)||we(document,`${hs} ${_} scroll`,({defaultPrevented:u,type:x,target:S})=>{!u&&x===hs&&a===S&&i.hide()},!0)})}function S1(i){return F(document,"keydown",a=>{a.keyCode===27&&Je(ar)===i&&i.hide()})}var Ah={slide:{show(i){return[{transform:ei(i*-100)},{transform:ei()}]},percent(i){return sl(i)},translate(i,a){return[{transform:ei(a*-100*i)},{transform:ei(a*100*(1-i))}]}}};function sl(i){return Math.abs(ue(i,"transform").split(",")[4]/i.offsetWidth)}function ei(i=0,a="%"){return i+=i?a:"",`translate3d(${i}, 0, 0)`}function ia(i){return`scale3d(${i}, ${i}, 1)`}function T1(i,a,u,{animation:x,easing:S}){const{percent:C,translate:O,show:j=Mt}=x,ne=j(u);let de;return{dir:u,show(ye,ot=0,ct){const Ct=ct?"linear":S;return ye-=Math.round(ye*Rt(ot,-1,1)),this.translate(ot),Kl(a,"itemin",{percent:ot,duration:ye,timing:Ct,dir:u}),Kl(i,"itemout",{percent:1-ot,duration:ye,timing:Ct,dir:u}),new Promise(nn=>{de||(de=nn),Promise.all([Ut.start(a,ne[1],ye,Ct),Ut.start(i,ne[0],ye,Ct)]).then(()=>{this.reset(),de()},Mt)})},cancel(){return Ut.cancel([a,i])},reset(){for(const ye in ne[0])ue([a,i],ye,"")},async forward(ye,ot=this.percent()){return await this.cancel(),this.show(ye,ot,!0)},translate(ye){this.reset();const ot=O(ye,u);ue(a,ot[1]),ue(i,ot[0]),Kl(a,"itemtranslatein",{percent:ye,dir:u}),Kl(i,"itemtranslateout",{percent:1-ye,dir:u})},percent(){return C(i||a,a,u)},getDistance(){return i==null?void 0:i.offsetWidth}}}function Kl(i,a,u){re(i,Re(a,!1,!1,u))}var Jl={props:{i18n:Object},data:{i18n:null},methods:{t(i,...a){var u,x,S;let C=0;return((S=((u=this.i18n)==null?void 0:u[i])||((x=this.$options.i18n)==null?void 0:x[i]))==null?void 0:S.replace(/%s/g,()=>a[C++]||""))||""}}},A1={props:{autoplay:Boolean,autoplayInterval:Number,pauseOnHover:Boolean},data:{autoplay:!1,autoplayInterval:7e3,pauseOnHover:!0},connected(){Ge(this.list,"aria-live",this.autoplay?"off":"polite"),this.autoplay&&this.startAutoplay()},disconnected(){this.stopAutoplay()},update(){Ge(this.slides,"tabindex","-1")},events:[{name:"visibilitychange",el(){return document},filter(){return this.autoplay},handler(){document.hidden?this.stopAutoplay():this.startAutoplay()}}],methods:{startAutoplay(){this.stopAutoplay(),this.interval=setInterval(()=>{this.stack.length||this.draggable&&K(this.$el,":focus-within")||this.pauseOnHover&&K(this.$el,":hover")||this.show("next")},this.autoplayInterval)},stopAutoplay(){clearInterval(this.interval)}}};const Ch={passive:!1,capture:!0},nd={passive:!0,capture:!0},C1="touchstart mousedown",Rh="touchmove mousemove",id="touchend touchcancel mouseup click input scroll";var R1={props:{draggable:Boolean},data:{draggable:!0,threshold:10},created(){for(const i of["start","move","end"]){const a=this[i];this[i]=u=>{const x=bn(u).x*(Un?-1:1);this.prevPos=x===this.pos?this.prevPos:this.pos,this.pos=x,a(u)}}},events:[{name:C1,passive:!0,delegate(){return`${this.selList} > *`},handler(i){!this.draggable||!Qt(i)&&L1(i.target)||je(i.target,Ze)||i.button>0||this.length<2||this.start(i)}},{name:"dragstart",handler(i){i.preventDefault()}},{name:Rh,el(){return this.list},handler:Mt,...Ch}],methods:{start(){this.drag=this.pos,this._transitioner?(this.percent=this._transitioner.percent(),this.drag+=this._transitioner.getDistance()*this.percent*this.dir,this._transitioner.cancel(),this._transitioner.translate(this.percent),this.dragging=!0,this.stack=[]):this.prevIndex=this.index,F(document,Rh,this.move,Ch),F(document,id,this.end,nd),ue(this.list,"userSelect","none")},move(i){const a=this.pos-this.drag;if(a===0||this.prevPos===this.pos||!this.dragging&&Math.abs(a)<this.threshold)return;ue(this.list,"pointerEvents","none"),i.cancelable&&i.preventDefault(),this.dragging=!0,this.dir=a<0?1:-1;let{slides:u,prevIndex:x}=this,S=Math.abs(a),C=this.getIndex(x+this.dir),O=this._getDistance(x,C);for(;C!==x&&S>O;)this.drag-=O*this.dir,x=C,S-=O,C=this.getIndex(x+this.dir),O=this._getDistance(x,C);this.percent=S/O;const j=u[x],ne=u[C],de=this.index!==C,ye=x===C;let ot;for(const ct of[this.index,this.prevIndex])y([C,x],ct)||(re(u[ct],"itemhidden",[this]),ye&&(ot=!0,this.prevIndex=x));(this.index===x&&this.prevIndex!==x||ot)&&re(u[this.index],"itemshown",[this]),de&&(this.prevIndex=x,this.index=C,!ye&&re(j,"beforeitemhide",[this]),re(ne,"beforeitemshow",[this])),this._transitioner=this._translate(Math.abs(this.percent),j,!ye&&ne),de&&(!ye&&re(j,"itemhide",[this]),re(ne,"itemshow",[this]))},end(){if(pe(document,Rh,this.move,Ch),pe(document,id,this.end,nd),this.dragging)if(this.dragging=null,this.index===this.prevIndex)this.percent=1-this.percent,this.dir*=-1,this._show(!1,this.index,!0),this._transitioner=null;else{const i=(Un?this.dir*(Un?1:-1):this.dir)<0==this.prevPos>this.pos;this.index=i?this.index:this.prevIndex,i&&(this.percent=1-this.percent),this.show(this.dir>0&&!i||this.dir<0&&i?"next":"previous",!0)}ue(this.list,{userSelect:"",pointerEvents:""}),this.drag=this.percent=null},_getDistance(i,a){return this._getTransitioner(i,i!==a&&a).getDistance()||this.slides[i].offsetWidth}}};function L1(i){return ue(i,"userSelect")!=="none"&&A(i.childNodes).some(a=>a.nodeType===3&&a.textContent.trim())}function D1(i){i._data={},i._updates=[...i.$options.update||[]]}function P1(i,a){i._updates.unshift(a)}function I1(i){delete i._data}function Ql(i,a="update"){i._connected&&i._updates.length&&(i._queued||(i._queued=new Set,w.read(()=>{i._connected&&N1(i,i._queued),delete i._queued})),i._queued.add(a.type||a))}function N1(i,a){for(const{read:u,write:x,events:S=[]}of i._updates){if(!a.has("update")&&!S.some(O=>a.has(O)))continue;let C;u&&(C=u.call(i,i._data,a),C&&I(C)&&E(i._data,C)),x&&C!==!1&&w.write(()=>{i._connected&&x.call(i,i._data,a)})}}function U1(i){i._watches=[];for(const a of i.$options.watch||[])for(const[u,x]of Object.entries(a))rd(i,x,u);i._initial=!0}function rd(i,a,u){i._watches.push({name:u,...I(a)?a:{handler:a}})}function O1(i,a){for(const{name:u,handler:x,immediate:S=!0}of i._watches)(i._initial&&S||r(a,u)&&!ge(a[u],i[u]))&&x.call(i,i[u],a[u]);i._initial=!1}function k1(i){const{computed:a}=i.$options;if(i._computed={},a)for(const u in a)sd(i,u,a[u])}function sd(i,a,u){i._hasComputed=!0,Object.defineProperty(i,a,{enumerable:!0,get(){const{_computed:x,$props:S,$el:C}=i;return r(x,a)||(x[a]=(u.get||u).call(i,S,C)),x[a]},set(x){const{_computed:S}=i;S[a]=u.set?u.set.call(i,x):x,Z(S[a])&&delete S[a]}})}function B1(i){i._hasComputed&&(P1(i,{read:()=>O1(i,od(i)),events:["resize","computed"]}),H1(),ol.add(i))}function F1(i){ol==null||ol.delete(i),od(i)}function od(i){const a={...i._computed};return i._computed={},a}let Lh,ol;function H1(){Lh||(ol=new Set,Lh=new MutationObserver(()=>{for(const i of ol)Ql(i,"computed")}),Lh.observe(document,{subtree:!0,childList:!0}))}function z1(i){i._events=[];for(const a of i.$options.events||[])if(r(a,"handler"))Dh(i,a);else for(const u in a)Dh(i,a[u],u)}function G1(i){i._events.forEach(a=>a()),delete i._events}function Dh(i,a,u){let{name:x,el:S,handler:C,capture:O,passive:j,delegate:ne,filter:de,self:ye}=I(a)?a:{name:u,handler:a};if(S=b(S)?S.call(i,i):S||i.$el,T(S)){S.forEach(ot=>Dh(i,{...a,el:ot},u));return}!S||de&&!de.call(i)||i._events.push(F(S,x,ne?V(ne)?ne:ne.call(i,i):null,V(C)?i[C]:C.bind(i),{passive:j,capture:O,self:ye}))}function V1(i){i._observers=[];for(const a of i.$options.observe||[])if(r(a,"handler"))ld(i,a);else for(const u of a)ld(i,u)}function ad(i,...a){i._observers.push(...a)}function W1(i){for(const a of i._observers)a.disconnect()}function ld(i,a){let{observe:u,target:x=i.$el,handler:S,options:C,filter:O,args:j}=a;if(O&&!O.call(i,i))return;const ne=`_observe${i._observers.length}`;b(x)&&!r(i,ne)&&sd(i,ne,()=>x.call(i,i)),S=V(S)?i[S]:S.bind(i),b(C)&&(C=C.call(i,i));const de=r(i,ne)?i[ne]:x,ye=u(de,S,C,j);b(x)&&T(i[ne])&&ye.unobserve&&rd(i,{handler:$1(ye),immediate:!1},ne),ad(i,ye)}function $1(i){return(a,u)=>{for(const x of u)!y(a,x)&&i.unobserve(x);for(const x of a)!y(u,x)&&i.observe(x)}}function X1(i){const a=cd(i.$options);for(let x in a)Z(a[x])||(i.$props[x]=a[x]);const u=[i.$options.computed,i.$options.methods];for(let x in i.$props)x in a&&j1(u,x)&&(i[x]=i.$props[x])}function cd(i){const a={},{args:u=[],props:x={},el:S,id:C}=i;if(!x)return a;for(const j in x){const ne=l(j);let de=Xt(S,ne);Z(de)||(de=x[j]===Boolean&&de===""?!0:Be(x[j],de),!(ne==="target"&&m(de,"_"))&&(a[j]=de))}const O=Ae(Xt(S,C),u);for(const j in O){const ne=f(j);Z(x[ne])||(a[ne]=Be(x[ne],O[j]))}return a}function j1(i,a){return i.every(u=>!u||!r(u,a))}function Y1(i){const{$options:a,$props:u}=i,{id:x,props:S,el:C}=a;if(!S)return;const O=Object.keys(S),j=O.map(de=>l(de)).concat(x),ne=new MutationObserver(de=>{const ye=cd(a);de.some(({attributeName:ot})=>{const ct=ot.replace("data-","");return(ct===x?O:[f(ct),f(ot)]).some(Ct=>!Z(ye[Ct])&&ye[Ct]!==u[Ct])})&&i.$reset()});ne.observe(C,{attributes:!0,attributeFilter:j.concat(j.map(de=>`data-${de}`))}),ad(i,ne)}function ra(i,a){var u;(u=i.$options[a])==null||u.forEach(x=>x.call(i))}function Ph(i){i._connected||(X1(i),ra(i,"beforeConnect"),i._connected=!0,z1(i),D1(i),U1(i),V1(i),Y1(i),B1(i),ra(i,"connected"),Ql(i))}function Ih(i){i._connected&&(ra(i,"beforeDisconnect"),G1(i),I1(i),W1(i),F1(i),ra(i,"disconnected"),i._connected=!1)}let q1=0;function hd(i,a={}){a.data=J1(a,i.constructor.options),i.$options=be(i.constructor.options,a,i),i.$props={},i._uid=q1++,Z1(i),K1(i),k1(i),ra(i,"created"),a.el&&i.$mount(a.el)}function Z1(i){const{data:a={}}=i.$options;for(const u in a)i.$props[u]=i[u]=a[u]}function K1(i){const{methods:a}=i.$options;if(a)for(const u in a)i[u]=a[u].bind(i)}function J1({data:i={}},{args:a=[],props:u={}}){T(i)&&(i=i.slice(0,a.length).reduce((x,S,C)=>(I(S)?E(x,S):x[a[C]]=S,x),{}));for(const x in i)Z(i[x])?delete i[x]:u[x]&&(i[x]=Be(u[x],i[x]));return i}const br=function(i){hd(this,i)};br.util=Mh,br.options={},br.version="3.17.0";const Q1="uk-",Mo="__uikit__",sa={};function ud(i,a){var u;const x=Q1+l(i);if(!a)return I(sa[x])&&(sa[x]=br.extend(sa[x])),sa[x];i=f(i),br[i]=(C,O)=>al(i,C,O);const S=I(a)?{...a}:a.options;return S.id=x,S.name=i,(u=S.install)==null||u.call(S,br,S,i),br._initialized&&!S.functional&&requestAnimationFrame(()=>al(i,`[${x}],[data-${x}]`)),sa[x]=S}function al(i,a,u,...x){const S=ud(i);return S.options.functional?new S({data:I(a)?a:[a,u,...x]}):a?$t(a).map(C)[0]:C();function C(O){const j=ec(O,i);if(j)if(u)j.$destroy();else return j;return new S({el:O,data:u})}}function Eo(i){return(i==null?void 0:i[Mo])||{}}function ec(i,a){return Eo(i)[a]}function ev(i,a){i[Mo]||(i[Mo]={}),i[Mo][a.$options.name]=a}function tv(i,a){var u;(u=i[Mo])==null||delete u[a.$options.name],ve(i[Mo])||delete i[Mo]}function nv(i){i.component=ud,i.getComponents=Eo,i.getComponent=ec,i.update=fd,i.use=function(u){if(!u.installed)return u.call(null,this),u.installed=!0,this},i.mixin=function(u,x){x=(V(x)?this.component(x):x)||this,x.options=be(x.options,u)},i.extend=function(u){u||(u={});const x=this,S=function(O){hd(this,O)};return S.prototype=Object.create(x.prototype),S.prototype.constructor=S,S.options=be(x.options,u),S.super=x,S.extend=x.extend,S};let a;Object.defineProperty(i,"container",{get(){return a||document.body},set(u){a=dt(u)}})}function fd(i,a){i=i?Fe(i):document.body;for(const u of rt(i).reverse())dd(u,a);fn(i,u=>dd(u,a))}function dd(i,a){const u=Eo(i);for(const x in u)Ql(u[x],a)}function iv(i){i.prototype.$mount=function(a){const u=this;ev(a,u),u.$options.el=a,Ie(a,document)&&Ph(u)},i.prototype.$destroy=function(a=!1){const u=this,{el:x}=u.$options;x&&Ih(u),ra(u,"destroy"),tv(x,u),a&&$e(u.$el)},i.prototype.$create=al,i.prototype.$emit=function(a){Ql(this,a)},i.prototype.$update=function(a=this.$el,u){fd(a,u)},i.prototype.$reset=function(){Ih(this),Ph(this)},i.prototype.$getComponent=ec,Object.defineProperties(i.prototype,{$el:{get(){return this.$options.el}},$container:Object.getOwnPropertyDescriptor(i,"container")})}function Zs(i,a=i.$el,u=""){if(a.id)return a.id;let x=`${i.$options.id}-${i._uid}${u}`;return dt(`#${x}`)&&(x=Zs(i,a,`${u}-2`)),x}var rv={i18n:{next:"Next slide",previous:"Previous slide",slideX:"Slide %s",slideLabel:"%s of %s",role:"String"},data:{selNav:!1,role:"region"},computed:{nav({selNav:i},a){return dt(i,a)},navChildren(){return We(this.nav)},selNavItem({attrItem:i}){return`[${i}],[data-${i}]`},navItems(i,a){return $t(this.selNavItem,a)}},watch:{nav(i,a){Ge(i,"role","tablist"),a&&this.$emit()},list(i){Ge(i,"role","presentation")},navChildren(i){Ge(i,"role","presentation")},navItems(i){for(const a of i){const u=Xt(a,this.attrItem),x=dt("a,button",a)||a;let S,C=null;if(Te(u)){const O=_e(u),j=this.slides[O];j&&(j.id||(j.id=Zs(this,j,`-item-${u}`)),C=j.id),S=this.t("slideX",fe(u)+1),Ge(x,"role","tab")}else this.list&&(this.list.id||(this.list.id=Zs(this,this.list,"-items")),C=this.list.id),S=this.t(u);Ge(x,{"aria-controls":C,"aria-label":Ge(x,"aria-label")||S})}},slides(i){i.forEach((a,u)=>Ge(a,{role:this.nav?"tabpanel":"group","aria-label":this.t("slideLabel",u+1,this.length),"aria-roledescription":this.nav?null:"slide"}))},length(i){const a=this.navChildren.length;if(this.nav&&i!==a){D(this.nav);for(let u=0;u<i;u++)ie(this.nav,`<li ${this.attrItem}="${u}"><a href></a></li>`)}}},connected(){Ge(this.$el,{role:this.role,"aria-roledescription":"carousel"})},update:[{write(){this.navItems.concat(this.nav).forEach(i=>i&&(i.hidden=!this.maxIndex)),this.updateNav()},events:["resize"]}],events:[{name:"click keydown",delegate(){return this.selNavItem},handler(i){je(i.target,"a,button")&&(i.type==="click"||i.keyCode===Tn.SPACE)&&(i.preventDefault(),this.show(Xt(i.current,this.attrItem)))}},{name:"itemshow",handler:"updateNav"},{name:"keydown",delegate(){return this.selNavItem},handler(i){const{current:a,keyCode:u}=i,x=Xt(a,this.attrItem);if(!Te(x))return;let S=u===Tn.HOME?0:u===Tn.END?"last":u===Tn.LEFT?"previous":u===Tn.RIGHT?"next":-1;~S&&(i.preventDefault(),this.show(S))}}],methods:{updateNav(){const i=this.getValidIndex();for(const a of this.navItems){const u=Xt(a,this.attrItem),x=dt("a,button",a)||a;if(Te(u)){const C=_e(u)===i;Xe(a,this.clsActive,C),Ge(x,{"aria-selected":C,tabindex:C?null:-1}),C&&x&&K(tt(a),":focus-within")&&x.focus()}else Xe(a,"uk-invisible",this.finite&&(u==="previous"&&i===0||u==="next"&&i>=this.maxIndex))}}}},pd={mixins:[A1,R1,rv,Jl],props:{clsActivated:Boolean,easing:String,index:Number,finite:Boolean,velocity:Number},data:()=>({easing:"ease",finite:!1,velocity:1,index:0,prevIndex:-1,stack:[],percent:0,clsActive:"uk-active",clsActivated:!1,Transitioner:!1,transitionOptions:{}}),connected(){this.prevIndex=-1,this.index=this.getValidIndex(this.$props.index),this.stack=[]},disconnected(){k(this.slides,this.clsActive)},computed:{duration({velocity:i},a){return md(a.offsetWidth/i)},list({selList:i},a){return dt(i,a)},maxIndex(){return this.length-1},slides(){return We(this.list)},length(){return this.slides.length}},watch:{slides(i,a){a&&this.$emit()}},observe:lt(),methods:{show(i,a=!1){var u;if(this.dragging||!this.length)return;const{stack:x}=this,S=a?0:x.length,C=()=>{x.splice(S,1),x.length&&this.show(x.shift(),!0)};if(x[a?"unshift":"push"](i),!a&&x.length>1){x.length===2&&((u=this._transitioner)==null||u.forward(Math.min(this.duration,200)));return}const O=this.getIndex(this.index),j=Ne(this.slides,this.clsActive)&&this.slides[O],ne=this.getIndex(i,this.index),de=this.slides[ne];if(j===de){C();return}if(this.dir=sv(i,O),this.prevIndex=O,this.index=ne,j&&!re(j,"beforeitemhide",[this])||!re(de,"beforeitemshow",[this,j])){this.index=this.prevIndex,C();return}const ye=this._show(j,de,a).then(()=>{j&&re(j,"itemhidden",[this]),re(de,"itemshown",[this]),x.shift(),this._transitioner=null,requestAnimationFrame(()=>x.length&&this.show(x.shift(),!0))});return j&&re(j,"itemhide",[this]),re(de,"itemshow",[this]),ye},getIndex(i=this.index,a=this.index){return Rt(qt(i,this.slides,a,this.finite),0,Math.max(0,this.maxIndex))},getValidIndex(i=this.index,a=this.prevIndex){return this.getIndex(i,a)},_show(i,a,u){if(this._transitioner=this._getTransitioner(i,a,this.dir,{easing:u?a.offsetWidth<600?"cubic-bezier(0.25, 0.46, 0.45, 0.94)":"cubic-bezier(0.165, 0.84, 0.44, 1)":this.easing,...this.transitionOptions}),!u&&!i)return this._translate(1),Promise.resolve();const{length:x}=this.stack;return this._transitioner[x>1?"forward":"show"](x>1?Math.min(this.duration,75+75/(x-1)):this.duration,this.percent)},_translate(i,a=this.prevIndex,u=this.index){const x=this._getTransitioner(a===u?!1:a,u);return x.translate(i),x},_getTransitioner(i=this.prevIndex,a=this.index,u=this.dir||1,x=this.transitionOptions){return new this.Transitioner(Me(i)?this.slides[i]:i,Me(a)?this.slides[a]:a,u*(Un?-1:1),x)}}};function sv(i,a){return i==="next"?1:i==="previous"||i<a?-1:1}function md(i){return .5*i+300}var gd={mixins:[pd],props:{animation:String},data:{animation:"slide",clsActivated:"uk-transition-active",Animations:Ah,Transitioner:T1},computed:{animation({animation:i,Animations:a}){return{...a[i]||a.slide,name:i}},transitionOptions(){return{animation:this.animation}}},events:{beforeitemshow({target:i}){W(i,this.clsActive)},itemshown({target:i}){W(i,this.clsActivated)},itemhidden({target:i}){k(i,this.clsActive,this.clsActivated)}}},vd={...Ah,fade:{show(){return[{opacity:0},{opacity:1}]},percent(i){return 1-ue(i,"opacity")},translate(i){return[{opacity:1-i},{opacity:i}]}},scale:{show(){return[{opacity:0,transform:ia(1-.2)},{opacity:1,transform:ia(1)}]},percent(i){return 1-ue(i,"opacity")},translate(i){return[{opacity:1-i,transform:ia(1-.2*i)},{opacity:i,transform:ia(1-.2+.2*i)}]}}},xd={mixins:[Th,gd],functional:!0,props:{delayControls:Number,preload:Number,videoAutoplay:Boolean,template:String},data:()=>({preload:1,videoAutoplay:!1,delayControls:3e3,items:[],cls:"uk-open",clsPage:"uk-lightbox-page",selList:".uk-lightbox-items",attrItem:"uk-lightbox-item",selClose:".uk-close-large",selCaption:".uk-lightbox-caption",pauseOnHover:!1,velocity:2,Animations:vd,template:'<div class="uk-lightbox uk-overflow-hidden"> <ul class="uk-lightbox-items"></ul> <div class="uk-lightbox-toolbar uk-position-top uk-text-right uk-transition-slide-top uk-transition-opaque"> <button class="uk-lightbox-toolbar-icon uk-close-large" type="button" uk-close></button> </div> <a class="uk-lightbox-button uk-position-center-left uk-position-medium uk-transition-fade" href uk-slidenav-previous uk-lightbox-item="previous"></a> <a class="uk-lightbox-button uk-position-center-right uk-position-medium uk-transition-fade" href uk-slidenav-next uk-lightbox-item="next"></a> <div class="uk-lightbox-toolbar uk-lightbox-caption uk-position-bottom uk-text-center uk-transition-slide-bottom uk-transition-opaque"></div> </div>'}),created(){const i=dt(this.template),a=dt(this.selList,i);this.items.forEach(()=>ie(a,"<li>"));const u=dt("[uk-close]",i),x=this.t("close");u&&x&&(u.dataset.i18n=JSON.stringify({label:x})),this.$mount(ie(this.container,i))},computed:{caption({selCaption:i},a){return dt(i,a)}},events:[{name:`${ea} ${vr} keydown`,handler:"showControls"},{name:"click",self:!0,delegate(){return`${this.selList} > *`},handler(i){i.defaultPrevented||this.hide()}},{name:"shown",self:!0,handler(){this.showControls()}},{name:"hide",self:!0,handler(){this.hideControls(),k(this.slides,this.clsActive),Ut.stop(this.slides)}},{name:"hidden",self:!0,handler(){this.$destroy(!0)}},{name:"keyup",el(){return document},handler({keyCode:i}){if(!this.isToggled(this.$el)||!this.draggable)return;let a=-1;i===Tn.LEFT?a="previous":i===Tn.RIGHT?a="next":i===Tn.HOME?a=0:i===Tn.END&&(a="last"),~a&&this.show(a)}},{name:"beforeitemshow",handler(i){this.isToggled()||(this.draggable=!1,i.preventDefault(),this.toggleElement(this.$el,!0,!1),this.animation=vd.scale,k(i.target,this.clsActive),this.stack.splice(1,0,this.index))}},{name:"itemshow",handler(){B(this.caption,this.getItem().caption||"");for(let i=-this.preload;i<=this.preload;i++)this.loadItem(this.index+i)}},{name:"itemshown",handler(){this.draggable=this.$props.draggable}},{name:"itemload",async handler(i,a){const{source:u,type:x,alt:S="",poster:C,attrs:O={}}=a;if(this.setItem(a,"<span uk-spinner></span>"),!u)return;let j;const ne={allowfullscreen:"",style:"max-width: 100%; box-sizing: border-box;","uk-responsive":"","uk-video":`${this.videoAutoplay}`};if(x==="image"||u.match(/\.(avif|jpe?g|jfif|a?png|gif|svg|webp)($|\?)/i)){const de=ll("img",{src:u,alt:S,...O});F(de,"load",()=>this.setItem(a,de)),F(de,"error",()=>this.setError(a))}else if(x==="video"||u.match(/\.(mp4|webm|ogv)($|\?)/i)){const de=ll("video",{src:u,poster:C,controls:"",playsinline:"","uk-video":`${this.videoAutoplay}`,...O});F(de,"loadedmetadata",()=>this.setItem(a,de)),F(de,"error",()=>this.setError(a))}else if(x==="iframe"||u.match(/\.(html|php)($|\?)/i))this.setItem(a,ll("iframe",{src:u,allowfullscreen:"",class:"uk-lightbox-iframe",...O}));else if(j=u.match(/\/\/(?:.*?youtube(-nocookie)?\..*?(?:[?&]v=|\/shorts\/)|youtu\.be\/)([\w-]{11})[&?]?(.*)?/))this.setItem(a,ll("iframe",{src:`https://www.youtube${j[1]||""}.com/embed/${j[2]}${j[3]?`?${j[3]}`:""}`,width:1920,height:1080,...ne,...O}));else if(j=u.match(/\/\/.*?vimeo\.[a-z]+\/(\d+)[&?]?(.*)?/))try{const{height:de,width:ye}=await(await fetch(`https://vimeo.com/api/oembed.json?maxwidth=1920&url=${encodeURI(u)}`,{credentials:"omit"})).json();this.setItem(a,ll("iframe",{src:`https://player.vimeo.com/video/${j[1]}${j[2]?`?${j[2]}`:""}`,width:ye,height:de,...ne,...O}))}catch{this.setError(a)}}}],methods:{loadItem(i=this.index){const a=this.getItem(i);this.getSlide(a).childElementCount||re(this.$el,"itemload",[a])},getItem(i=this.index){return this.items[qt(i,this.slides)]},setItem(i,a){re(this.$el,"itemloaded",[this,B(this.getSlide(i),a)])},getSlide(i){return this.slides[this.items.indexOf(i)]},setError(i){this.setItem(i,'<span uk-icon="icon: bolt; ratio: 2"></span>')},showControls(){clearTimeout(this.controlsTimer),this.controlsTimer=setTimeout(this.hideControls,this.delayControls),W(this.$el,"uk-active","uk-transition-active")},hideControls(){k(this.$el,"uk-active","uk-transition-active")}}};function ll(i,a){const u=Kt(`<${i}>`);return Ge(u,a),u}var ov={install:av,props:{toggle:String},data:{toggle:"a"},computed:{toggles({toggle:i},a){return $t(i,a)}},watch:{toggles(i){this.hide();for(const a of i)q(a,"a")&&Ge(a,"role","button")}},disconnected(){this.hide()},events:{name:"click",delegate(){return`${this.toggle}:not(.uk-disabled)`},handler(i){i.preventDefault(),this.show(i.current)}},methods:{show(i){const a=It(this.toggles.map(yd),"source");if(g(i)){const{source:u}=yd(i);i=M(a,({source:x})=>u===x)}return this.panel=this.panel||this.$create("lightboxPanel",{...this.$props,items:a}),F(this.panel.$el,"hidden",()=>this.panel=null),this.panel.show(i)},hide(){var i;return(i=this.panel)==null?void 0:i.hide()}}};function av(i,a){i.lightboxPanel||i.component("lightboxPanel",xd),E(a.props,i.component("lightboxPanel").options.props)}function yd(i){const a={};for(const u of["href","caption","type","poster","alt","attrs"])a[u==="href"?"source":u]=Xt(i,u);return a.attrs=Ae(a.attrs),a}var lv={mixins:[rl],functional:!0,args:["message","status"],data:{message:"",status:"",timeout:5e3,group:"",pos:"top-center",clsContainer:"uk-notification",clsClose:"uk-notification-close",clsMsg:"uk-notification-message"},install:cv,computed:{marginProp({pos:i}){return`margin${m(i,"top")?"Top":"Bottom"}`},startProps(){return{opacity:0,[this.marginProp]:-this.$el.offsetHeight}}},created(){const i=`${this.clsContainer}-${this.pos}`;let a=dt(`.${i}`,this.container);(!a||!Q(a))&&(a=ie(this.container,`<div class="${this.clsContainer} ${i}"></div>`)),this.$mount(ie(a,`<div class="${this.clsMsg}${this.status?` ${this.clsMsg}-${this.status}`:""}" role="alert"> <a href class="${this.clsClose}" data-uk-close></a> <div>${this.message}</div> </div>`))},async connected(){const i=fe(ue(this.$el,this.marginProp));await Ut.start(ue(this.$el,this.startProps),{opacity:1,[this.marginProp]:i}),this.timeout&&(this.timer=setTimeout(this.close,this.timeout))},events:{click(i){je(i.target,'a[href="#"],a[href=""]')&&i.preventDefault(),this.close()},[h](){this.timer&&clearTimeout(this.timer)},[p](){this.timeout&&(this.timer=setTimeout(this.close,this.timeout))}},methods:{async close(i){const a=u=>{const x=tt(u);re(u,"close",[this]),$e(u),x!=null&&x.hasChildNodes()||$e(x)};this.timer&&clearTimeout(this.timer),i||await Ut.start(this.$el,this.startProps),a(this.$el)}}};function cv(i){i.notification.closeAll=function(a,u){fn(document.body,x=>{const S=i.getComponent(x,"notification");S&&(!a||a===S.group)&&S.close(u)})}}var tc={props:{media:Boolean},data:{media:!1},connected(){const i=hv(this.media,this.$el);if(this.matchMedia=!0,i){this.mediaObj=window.matchMedia(i);const a=()=>{this.matchMedia=this.mediaObj.matches,re(this.$el,Re("mediachange",!1,!0,[this.mediaObj]))};this.offMediaObj=F(this.mediaObj,"change",()=>{a(),this.$emit("resize")}),a()}},disconnected(){var i;(i=this.offMediaObj)==null||i.call(this)}};function hv(i,a){if(V(i)){if(m(i,"@"))i=fe(ue(a,`--uk-breakpoint-${i.substr(1)}`));else if(isNaN(i))return i}return i&&Te(i)?`(min-width: ${i}px)`:""}function _d(i){return Math.ceil(Math.max(0,...$t("[stroke]",i).map(a=>{try{return a.getTotalLength()}catch{return 0}})))}const nc={x:ic,y:ic,rotate:ic,scale:ic,color:Nh,backgroundColor:Nh,borderColor:Nh,blur:So,hue:So,fopacity:So,grayscale:So,invert:So,saturate:So,sepia:So,opacity:fv,stroke:dv,bgx:Md,bgy:Md},{keys:bd}=Object;var wd={mixins:[tc],props:Ad(bd(nc),"list"),data:Ad(bd(nc),void 0),computed:{props(i,a){const u={};for(const S in i)S in nc&&!Z(i[S])&&(u[S]=i[S].slice());const x={};for(const S in u)x[S]=nc[S](S,a,u[S],u);return x}},events:{load(){this.$emit()}},methods:{reset(){for(const i in this.getCss(0))ue(this.$el,i,"")},getCss(i){const a={transform:"",filter:""};for(const u in this.props)this.props[u](a,Rt(i));return a.willChange=Object.keys(a).filter(u=>a[u]!=="").map(Pn).join(","),a}}};function ic(i,a,u){let x=sc(u)||{x:"px",y:"px",rotate:"deg"}[i]||"",S;return i==="x"||i==="y"?(i=`translate${d(i)}`,S=C=>fe(fe(C).toFixed(x==="px"?0:6))):i==="scale"&&(x="",S=C=>{var O;return sc([C])?Nn(C,"width",a,!0)/a[`offset${(O=C.endsWith)!=null&&O.call(C,"vh")?"Height":"Width"}`]:fe(C)}),u.length===1&&u.unshift(i==="scale"?1:0),u=oa(u,S),(C,O)=>{C.transform+=` ${i}(${cl(u,O)}${x})`}}function Nh(i,a,u){return u.length===1&&u.unshift(hl(a,i,"")),u=oa(u,x=>uv(a,x)),(x,S)=>{const[C,O,j]=Td(u,S),ne=C.map((de,ye)=>(de+=j*(O[ye]-de),ye===3?fe(de):parseInt(de,10))).join(",");x[i]=`rgba(${ne})`}}function uv(i,a){return hl(i,"color",a).split(/[(),]/g).slice(1,-1).concat(1).slice(0,4).map(fe)}function So(i,a,u){u.length===1&&u.unshift(0);const x=sc(u)||{blur:"px",hue:"deg"}[i]||"%";return i={fopacity:"opacity",hue:"hue-rotate"}[i]||i,u=oa(u),(S,C)=>{const O=cl(u,C);S.filter+=` ${i}(${O+x})`}}function fv(i,a,u){return u.length===1&&u.unshift(hl(a,i,"")),u=oa(u),(x,S)=>{x[i]=cl(u,S)}}function dv(i,a,u){u.length===1&&u.unshift(0);const x=sc(u),S=_d(a);return u=oa(u.reverse(),C=>(C=fe(C),x==="%"?C*S/100:C)),u.some(([C])=>C)?(ue(a,"strokeDasharray",S),(C,O)=>{C.strokeDashoffset=cl(u,O)}):Mt}function Md(i,a,u,x){u.length===1&&u.unshift(0);const S=i==="bgy"?"height":"width";x[i]=oa(u,j=>Nn(j,S,a));const C=["bgx","bgy"].filter(j=>j in x);if(C.length===2&&i==="bgx")return Mt;if(hl(a,"backgroundSize","")==="cover")return pv(i,a,u,x);const O={};for(const j of C)O[j]=Ed(a,j);return Sd(C,O,x)}function pv(i,a,u,x){const S=mv(a);if(!S.width)return Mt;const C={width:a.offsetWidth,height:a.offsetHeight},O=["bgx","bgy"].filter(ye=>ye in x),j={};for(const ye of O){const ot=x[ye].map(([Kn])=>Kn),ct=Math.min(...ot),Ct=Math.max(...ot),nn=ot.indexOf(ct)<ot.indexOf(Ct),yn=Ct-ct;j[ye]=`${(nn?-yn:0)-(nn?ct:Ct)}px`,C[ye==="bgy"?"height":"width"]+=yn}const ne=Lt.cover(S,C);for(const ye of O){const ot=ye==="bgy"?"height":"width",ct=ne[ot]-C[ot];j[ye]=`max(${Ed(a,ye)},-${ct}px) + ${j[ye]}`}const de=Sd(O,j,x);return(ye,ot)=>{de(ye,ot),ye.backgroundSize=`${ne.width}px ${ne.height}px`,ye.backgroundRepeat="no-repeat"}}function Ed(i,a){return hl(i,`background-position-${a.substr(-1)}`,"")}function Sd(i,a,u){return function(x,S){for(const C of i){const O=cl(u[C],S);x[`background-position-${C.substr(-1)}`]=`calc(${a[C]} + ${O}px)`}}}const rc={};function mv(i){const a=ue(i,"backgroundImage").replace(/^none|url\(["']?(.+?)["']?\)$/,"$1");if(rc[a])return rc[a];const u=new Image;return a&&(u.src=a,!u.naturalWidth)?(u.onload=()=>{rc[a]=Uh(u),re(i,Re("load",!1))},Uh(u)):rc[a]=Uh(u)}function Uh(i){return{width:i.naturalWidth,height:i.naturalHeight}}function oa(i,a=fe){const u=[],{length:x}=i;let S=0;for(let C=0;C<x;C++){let[O,j]=V(i[C])?i[C].trim().split(/ (?![^(]*\))/):[i[C]];if(O=a(O),j=j?fe(j)/100:null,C===0?j===null?j=0:j&&u.push([O,0]):C===x-1&&(j===null?j=1:j!==1&&(u.push([O,j]),j=1)),u.push([O,j]),j===null)S++;else if(S){const ne=u[C-S-1][1],de=(j-ne)/(S+1);for(let ye=S;ye>0;ye--)u[C-ye][1]=ne+de*(S-ye+1);S=0}}return u}function Td(i,a){const u=M(i.slice(1),([,x])=>a<=x)+1;return[i[u-1][0],i[u][0],(a-i[u-1][1])/(i[u][1]-i[u-1][1])]}function cl(i,a){const[u,x,S]=Td(i,a);return u+Math.abs(u-x)*S*(u<x?1:-1)}const gv=/^-?\d+(?:\.\d+)?(\S+)?/;function sc(i,a){var u;for(const x of i){const S=(u=x.match)==null?void 0:u.call(x,gv);if(S)return S[1]}return a}function hl(i,a,u){const x=i.style[a],S=ue(ue(i,a,u),a);return i.style[a]=x,S}function Ad(i,a){return i.reduce((u,x)=>(u[x]=a,u),{})}var vv={mixins:[wd],props:{target:String,viewport:Number,easing:Number,start:String,end:String},data:{target:!1,viewport:1,easing:1,start:0,end:0},computed:{target({target:i},a){return Cd(i&&Zt(i,a)||a)},start({start:i}){return Nn(i,"height",this.target,!0)},end({end:i,viewport:a}){return Nn(i||(a=(1-a)*100)&&`${a}vh+${a}%`,"height",this.target,!0)}},observe:[Bt(),zt({target:({target:i})=>i}),lt({target:({$el:i,target:a})=>[i,a,oi(a,!0)]})],update:{read({percent:i},a){if(a.has("scroll")||(i=!1),!Q(this.$el))return!1;if(!this.matchMedia)return;const u=i;return i=xv(Fi(this.target,this.start,this.end),this.easing),{percent:i,style:u===i?!1:this.getCss(i)}},write({style:i}){if(!this.matchMedia){this.reset();return}i&&ue(this.$el,i)},events:["scroll","resize"]}};function xv(i,a){return a>=0?Math.pow(i,a+1):1-Math.pow(1-i,1-a)}function Cd(i){return i?"offsetTop"in i?i:Cd(tt(i)):document.documentElement}var Rd={update:{write(){if(this.stack.length||this.dragging)return;const i=this.getValidIndex();!~this.prevIndex||this.index!==i?this.show(i):this._translate(1,this.prevIndex,this.index)},events:["resize"]}},Ld={observe:tn({target:({slides:i})=>i,targets:i=>i.getAdjacentSlides()})};function yv(i,a,u,{center:x,easing:S,list:C}){const O=i?ul(i,C,x):ul(a,C,x)+Ot(a).width*u,j=a?ul(a,C,x):O+Ot(i).width*u*(Un?-1:1);let ne;return{dir:u,show(de,ye=0,ot){const ct=ot?"linear":S;return de-=Math.round(de*Rt(ye,-1,1)),this.translate(ye),ye=i?ye:Rt(ye,0,1),Oh(this.getItemIn(),"itemin",{percent:ye,duration:de,timing:ct,dir:u}),i&&Oh(this.getItemIn(!0),"itemout",{percent:1-ye,duration:de,timing:ct,dir:u}),new Promise(Ct=>{ne||(ne=Ct),Ut.start(C,{transform:ei(-j*(Un?-1:1),"px")},de,ct).then(ne,Mt)})},cancel(){return Ut.cancel(C)},reset(){ue(C,"transform","")},async forward(de,ye=this.percent()){return await this.cancel(),this.show(de,ye,!0)},translate(de){const ye=this.getDistance()*u*(Un?-1:1);ue(C,"transform",ei(Rt(-j+(ye-ye*de),-oc(C),Ot(C).width)*(Un?-1:1),"px"));const ot=this.getActives(),ct=this.getItemIn(),Ct=this.getItemIn(!0);de=i?Rt(de,-1,1):0;for(const nn of We(C)){const yn=y(ot,nn),Kn=nn===ct,gi=nn===Ct,dl=Kn||!gi&&(yn||u*(Un?-1:1)===-1^ac(nn,C)>ac(i||a));Oh(nn,`itemtranslate${dl?"in":"out"}`,{dir:u,percent:gi?1-de:Kn?de:yn?1:0})}},percent(){return Math.abs((ue(C,"transform").split(",")[4]*(Un?-1:1)+O)/(j-O))},getDistance(){return Math.abs(j-O)},getItemIn(de=!1){let ye=this.getActives(),ot=Pd(C,ul(a||i,C,x));if(de){const ct=ye;ye=ot,ot=ct}return ot[M(ot,ct=>!y(ye,ct))]},getActives(){return Pd(C,ul(i||a,C,x))}}}function ul(i,a,u){const x=ac(i,a);return u?x-_v(i,a):Math.min(x,Dd(a))}function Dd(i){return Math.max(0,oc(i)-Ot(i).width)}function oc(i){return bt(We(i),a=>Ot(a).width)}function _v(i,a){return Ot(a).width/2-Ot(i).width/2}function ac(i,a){return i&&(st(i).left+(Un?Ot(i).width-Ot(a).width:0))*(Un?-1:1)||0}function Pd(i,a){a-=1;const u=Ot(i).width,x=a+u+2;return We(i).filter(S=>{const C=ac(S,i),O=C+Math.min(Ot(S).width,u);return C>=a&&O<=x})}function Oh(i,a,u){re(i,Re(a,!1,!1,u))}var bv={mixins:[di,pd,Rd,Ld],props:{center:Boolean,sets:Boolean},data:{center:!1,sets:!1,attrItem:"uk-slider-item",selList:".uk-slider-items",selNav:".uk-slider-nav",clsContainer:"uk-slider-container",Transitioner:yv},computed:{avgWidth(){return oc(this.list)/this.length},finite({finite:i}){return i||wv(this.list,this.center)},maxIndex(){if(!this.finite||this.center&&!this.sets)return this.length-1;if(this.center)return Je(this.sets);let i=0;const a=Dd(this.list),u=M(this.slides,x=>{if(i>=a)return!0;i+=Ot(x).width});return~u?u:this.length-1},sets({sets:i}){if(!i)return;let a=0;const u=[],x=Ot(this.list).width;for(let S=0;S<this.length;S++){const C=Ot(this.slides[S]).width;a+C>x&&(a=0),this.center?a<x/2&&a+C+Ot(qt(+S+1,this.slides)).width/2>x/2&&(u.push(+S),a=x/2-C/2):a===0&&u.push(Math.min(+S,this.maxIndex)),a+=C}if(u.length)return u},transitionOptions(){return{center:this.center,list:this.list}},slides(){return We(this.list).filter(Q)}},connected(){Xe(this.$el,this.clsContainer,!dt(`.${this.clsContainer}`,this.$el))},observe:lt({target:({slides:i})=>i}),update:{write(){for(const i of this.navItems){const a=_e(Xt(i,this.attrItem));a!==!1&&(i.hidden=!this.maxIndex||a>this.maxIndex||this.sets&&!y(this.sets,a))}this.length&&!this.dragging&&!this.stack.length&&(this.reorder(),this._translate(1)),this.updateActiveClasses()},events:["resize"]},events:{beforeitemshow(i){!this.dragging&&this.sets&&this.stack.length<2&&!y(this.sets,this.index)&&(this.index=this.getValidIndex());const a=Math.abs(this.index-this.prevIndex+(this.dir>0&&this.index<this.prevIndex||this.dir<0&&this.index>this.prevIndex?(this.maxIndex+1)*this.dir:0));if(!this.dragging&&a>1){for(let x=0;x<a;x++)this.stack.splice(1,0,this.dir>0?"next":"previous");i.preventDefault();return}const u=this.dir<0||!this.slides[this.prevIndex]?this.index:this.prevIndex;this.duration=md(this.avgWidth/this.velocity)*(Ot(this.slides[u]).width/this.avgWidth),this.reorder()},itemshow(){~this.prevIndex&&W(this._getTransitioner().getItemIn(),this.clsActive)},itemshown(){this.updateActiveClasses()}},methods:{reorder(){if(this.finite){ue(this.slides,"order","");return}const i=this.dir>0&&this.slides[this.prevIndex]?this.prevIndex:this.index;if(this.slides.forEach((S,C)=>ue(S,"order",this.dir>0&&C<i?1:this.dir<0&&C>=this.index?-1:"")),!this.center)return;const a=this.slides[i];let u=Ot(this.list).width/2-Ot(a).width/2,x=0;for(;u>0;){const S=this.getIndex(--x+i,i),C=this.slides[S];ue(C,"order",S>i?-2:-1),u-=Ot(C).width}},updateActiveClasses(){const i=this._getTransitioner(this.index).getActives(),a=[this.clsActive,(!this.sets||y(this.sets,fe(this.index)))&&this.clsActivated||""];for(const u of this.slides){const x=y(i,u);Xe(u,a,x),Ge(u,"aria-hidden",!x);for(const S of $t(et,u))r(S,"_tabindex")||(S._tabindex=Ge(S,"tabindex")),Ge(S,"tabindex",x?S._tabindex:-1)}},getValidIndex(i=this.index,a=this.prevIndex){if(i=this.getIndex(i,a),!this.sets)return i;let u;do{if(y(this.sets,i))return i;u=i,i=this.getIndex(i+this.dir,a)}while(i!==u);return i},getAdjacentSlides(){const{width:i}=Ot(this.list),a=-i,u=i*2,x=Ot(this.slides[this.index]).width,S=this.center?i/2-x/2:0,C=new Set;for(const O of[-1,1]){let j=S+(O>0?x:0),ne=0;do{const de=this.slides[this.getIndex(this.index+O+ne++*O)];j+=Ot(de).width*O,C.add(de)}while(this.length>ne&&j>a&&j<u)}return Array.from(C)}}};function wv(i,a){if(!i||i.length<2)return!0;const{width:u}=Ot(i);if(!a)return Math.ceil(oc(i))<Math.trunc(u+Mv(i));const x=We(i),S=Math.trunc(u/2);for(const C in x){const O=x[C],j=Ot(O).width,ne=new Set([O]);let de=0;for(const ye of[-1,1]){let ot=j/2,ct=0;for(;ot<S;){const Ct=x[qt(+C+ye+ct++*ye,x)];if(ne.has(Ct))return!0;ot+=Ot(Ct).width,ne.add(Ct)}de=Math.max(de,j/2+Ot(x[qt(+C+ye,x)]).width/2-(ot-S))}if(de>bt(x.filter(ye=>!ne.has(ye)),ye=>Ot(ye).width))return!0}return!1}function Mv(i){return Math.max(0,...We(i).map(a=>Ot(a).width))}var Id={mixins:[wd],data:{selItem:"!li"},beforeConnect(){this.item=Zt(this.selItem,this.$el)},disconnected(){this.item=null},events:[{name:"itemin itemout",self:!0,el(){return this.item},handler({type:i,detail:{percent:a,duration:u,timing:x,dir:S}}){w.read(()=>{if(!this.matchMedia)return;const C=this.getCss(Ud(i,S,a)),O=this.getCss(Nd(i)?.5:S>0?1:0);w.write(()=>{ue(this.$el,C),Ut.start(this.$el,O,u,x).catch(Mt)})})}},{name:"transitioncanceled transitionend",self:!0,el(){return this.item},handler(){Ut.cancel(this.$el)}},{name:"itemtranslatein itemtranslateout",self:!0,el(){return this.item},handler({type:i,detail:{percent:a,dir:u}}){w.read(()=>{if(!this.matchMedia){this.reset();return}const x=this.getCss(Ud(i,u,a));w.write(()=>ue(this.$el,x))})}}]};function Nd(i){return v(i,"in")}function Ud(i,a,u){return u/=2,Nd(i)^a<0?u:1-u}var Ev={...Ah,fade:{show(){return[{opacity:0,zIndex:0},{zIndex:-1}]},percent(i){return 1-ue(i,"opacity")},translate(i){return[{opacity:1-i,zIndex:0},{zIndex:-1}]}},scale:{show(){return[{opacity:0,transform:ia(1+.5),zIndex:0},{zIndex:-1}]},percent(i){return 1-ue(i,"opacity")},translate(i){return[{opacity:1-i,transform:ia(1+.5*i),zIndex:0},{zIndex:-1}]}},pull:{show(i){return i<0?[{transform:ei(30),zIndex:-1},{transform:ei(),zIndex:0}]:[{transform:ei(-100),zIndex:0},{transform:ei(),zIndex:-1}]},percent(i,a,u){return u<0?1-sl(a):sl(i)},translate(i,a){return a<0?[{transform:ei(30*i),zIndex:-1},{transform:ei(-100*(1-i)),zIndex:0}]:[{transform:ei(-i*100),zIndex:0},{transform:ei(30*(1-i)),zIndex:-1}]}},push:{show(i){return i<0?[{transform:ei(100),zIndex:0},{transform:ei(),zIndex:-1}]:[{transform:ei(-30),zIndex:-1},{transform:ei(),zIndex:0}]},percent(i,a,u){return u>0?1-sl(a):sl(i)},translate(i,a){return a<0?[{transform:ei(i*100),zIndex:0},{transform:ei(-30*(1-i)),zIndex:-1}]:[{transform:ei(-30*i),zIndex:-1},{transform:ei(100*(1-i)),zIndex:0}]}}};const Od=gr&&CSS.supports("aspect-ratio","1/1");var Sv={mixins:[di,gd,Rd,Ld],props:{ratio:String,minHeight:Number,maxHeight:Number},data:{ratio:"16:9",minHeight:!1,maxHeight:!1,selList:".uk-slideshow-items",attrItem:"uk-slideshow-item",selNav:".uk-slideshow-nav",Animations:Ev},watch:{list(i){i&&Od&&ue(i,{aspectRatio:this.ratio.replace(":","/"),minHeight:this.minHeight||"",maxHeight:this.maxHeight||"",minWidth:"100%",maxWidth:"100%"})}},update:{read(){if(!this.list||Od)return!1;let[i,a]=this.ratio.split(":").map(Number);return a=a*this.list.offsetWidth/i||0,this.minHeight&&(a=Math.max(this.minHeight,a)),this.maxHeight&&(a=Math.min(this.maxHeight,a)),{height:a-ki(this.list,"height","content-box")}},write({height:i}){i>0&&ue(this.list,"minHeight",i)},events:["resize"]},methods:{getAdjacentSlides(){return[1,-1].map(i=>this.slides[this.getIndex(this.index+i)])}}},Tv={mixins:[di,Kf],props:{group:String,threshold:Number,clsItem:String,clsPlaceholder:String,clsDrag:String,clsDragState:String,clsBase:String,clsNoDrag:String,clsEmpty:String,clsCustom:String,handle:String},data:{group:!1,threshold:5,clsItem:"uk-sortable-item",clsPlaceholder:"uk-sortable-placeholder",clsDrag:"uk-sortable-drag",clsDragState:"uk-drag",clsBase:"uk-sortable",clsNoDrag:"uk-sortable-nodrag",clsEmpty:"uk-sortable-empty",clsCustom:"",handle:!1,pos:{}},created(){for(const i of["init","start","move","end"]){const a=this[i];this[i]=u=>{E(this.pos,bn(u)),a(u)}}},events:{name:vr,passive:!1,handler:"init"},computed:{target(){return(this.$el.tBodies||[this.$el])[0]},items(){return We(this.target)},isEmpty(){return ve(this.items)},handles({handle:i},a){return i?$t(i,a):this.items}},watch:{isEmpty(i){Xe(this.target,this.clsEmpty,i)},handles(i,a){ue(a,{touchAction:"",userSelect:""}),ue(i,{touchAction:Fr?"none":"",userSelect:"none"})}},update:{write(i){if(!this.drag||!tt(this.placeholder))return;const{pos:{x:a,y:u},origin:{offsetTop:x,offsetLeft:S},placeholder:C}=this;ue(this.drag,{top:u-x,left:a-S});const O=this.getSortable(document.elementFromPoint(a,u));if(!O)return;const{items:j}=O;if(j.some(Ut.inProgress))return;const ne=Lv(j,{x:a,y:u});if(j.length&&(!ne||ne===C))return;const de=this.getSortable(C),ye=Dv(O.target,ne,C,a,u,O===de&&i.moved!==ne);ye!==!1&&(ye&&C===ye||(O!==de?(de.remove(C),i.moved=ne):delete i.moved,O.insert(C,ye),this.touched.add(O)))},events:["move"]},methods:{init(i){const{target:a,button:u,defaultPrevented:x}=i,[S]=this.items.filter(C=>Ie(a,C));!S||x||u>0||ze(a)||Ie(a,`.${this.clsNoDrag}`)||this.handle&&!Ie(a,this.handle)||(i.preventDefault(),this.touched=new Set([this]),this.placeholder=S,this.origin={target:a,index:Ue(S),...this.pos},F(document,ea,this.move),F(document,hs,this.end),this.threshold||this.start(i))},start(i){this.drag=Rv(this.$container,this.placeholder);const{left:a,top:u}=this.placeholder.getBoundingClientRect();E(this.origin,{offsetLeft:this.pos.x-a,offsetTop:this.pos.y-u}),W(this.drag,this.clsDrag,this.clsCustom),W(this.placeholder,this.clsPlaceholder),W(this.items,this.clsItem),W(document.documentElement,this.clsDragState),re(this.$el,"start",[this,this.placeholder]),Av(this.pos),this.move(i)},move(i){this.drag?this.$emit("move"):(Math.abs(this.pos.x-this.origin.x)>this.threshold||Math.abs(this.pos.y-this.origin.y)>this.threshold)&&this.start(i)},end(){if(pe(document,ea,this.move),pe(document,hs,this.end),!this.drag)return;Cv();const i=this.getSortable(this.placeholder);this===i?this.origin.index!==Ue(this.placeholder)&&re(this.$el,"moved",[this,this.placeholder]):(re(i.$el,"added",[i,this.placeholder]),re(this.$el,"removed",[this,this.placeholder])),re(this.$el,"stop",[this,this.placeholder]),$e(this.drag),this.drag=null;for(const{clsPlaceholder:a,clsItem:u}of this.touched)for(const x of this.touched)k(x.items,a,u);this.touched=null,k(document.documentElement,this.clsDragState)},insert(i,a){W(this.items,this.clsItem);const u=()=>a?ee(a,i):ie(this.target,i);this.animate(u)},remove(i){Ie(i,this.target)&&this.animate(()=>$e(i))},getSortable(i){do{const a=this.$getComponent(i,"sortable");if(a&&(a===this||this.group!==!1&&a.group===this.group))return a}while(i=tt(i))}}};let kd;function Av(i){let a=Date.now();kd=setInterval(()=>{let{x:u,y:x}=i;x+=document.scrollingElement.scrollTop;const S=(Date.now()-a)*.3;a=Date.now(),us(document.elementFromPoint(u,i.y)).reverse().some(C=>{let{scrollTop:O,scrollHeight:j}=C;const{top:ne,bottom:de,height:ye}=ji(C);if(ne<x&&ne+35>x)O-=S;else if(de>x&&de-35<x)O+=S;else return;if(O>0&&O<j-ye)return C.scrollTop=O,!0})},15)}function Cv(){clearInterval(kd)}function Rv(i,a){let u;if(q(a,"li","tr")){u=dt("<div>"),ie(u,a.cloneNode(!0).children);for(const x of a.getAttributeNames())Ge(u,x,a.getAttribute(x))}else u=a.cloneNode(!0);return ie(i,u),ue(u,"margin","0","important"),ue(u,{boxSizing:"border-box",width:a.offsetWidth,height:a.offsetHeight,padding:ue(a,"padding")}),dn(u.firstElementChild,dn(a.firstElementChild)),u}function Lv(i,a){return i[M(i,u=>xe(a,u.getBoundingClientRect()))]}function Dv(i,a,u,x,S,C){if(!We(i).length)return;const O=a.getBoundingClientRect();if(!C)return Pv(i,u)||S<O.top+O.height/2?a:a.nextElementSibling;const j=u.getBoundingClientRect(),ne=Bd([O.top,O.bottom],[j.top,j.bottom]),[de,ye,ot,ct]=ne?[x,"width","left","right"]:[S,"height","top","bottom"],Ct=j[ye]<O[ye]?O[ye]-j[ye]:0;return j[ot]<O[ot]?Ct&&de<O[ot]+Ct?!1:a.nextElementSibling:Ct&&de>O[ct]-Ct?!1:a}function Pv(i,a){const u=We(i).length===1;u&&ie(i,a);const x=We(i),S=x.some((C,O)=>{const j=C.getBoundingClientRect();return x.slice(O+1).some(ne=>{const de=ne.getBoundingClientRect();return!Bd([j.left,j.right],[de.left,de.right])})});return u&&$e(a),S}function Bd(i,a){return i[1]>a[0]&&a[1]>i[0]}var Fd={props:{pos:String,offset:null,flip:Boolean,shift:Boolean,inset:Boolean},data:{pos:`bottom-${Un?"right":"left"}`,offset:!1,flip:!0,shift:!0,inset:!1},connected(){this.pos=this.$props.pos.split("-").concat("center").slice(0,2),[this.dir,this.align]=this.pos,this.axis=y(["top","bottom"],this.dir)?"y":"x"},methods:{positionAt(i,a,u){let x=[this.getPositionOffset(i),this.getShiftOffset(i)];const S=[this.flip&&"flip",this.shift&&"shift"],C={element:[this.inset?this.dir:ir(this.dir),this.align],target:[this.dir,this.align]};if(this.axis==="y"){for(const ne in C)C[ne].reverse();x.reverse(),S.reverse()}const O=Iv(i),j=Ot(i);ue(i,{top:-j.height,left:-j.width}),En(i,a,{attach:C,offset:x,boundary:u,placement:S,viewportOffset:this.getViewportOffset(i)}),O()},getPositionOffset(i){return Nn(this.offset===!1?ue(i,"--uk-position-offset"):this.offset,this.axis==="x"?"width":"height",i)*(y(["left","top"],this.dir)?-1:1)*(this.inset?-1:1)},getShiftOffset(i){return this.align==="center"?0:Nn(ue(i,"--uk-position-shift-offset"),this.axis==="y"?"width":"height",i)*(y(["left","top"],this.align)?1:-1)},getViewportOffset(i){return Nn(ue(i,"--uk-position-viewport-offset"))}}};function Iv(i){const a=oi(i),{scrollTop:u}=a;return()=>{u!==a.scrollTop&&(a.scrollTop=u)}}var Nv={mixins:[rl,wo,Fd],args:"title",props:{delay:Number,title:String},data:{pos:"top",title:"",delay:0,animation:["uk-animation-scale-up"],duration:100,cls:"uk-active"},beforeConnect(){this.id=Zs(this,{}),this._hasTitle=Vt(this.$el,"title"),Ge(this.$el,{title:"","aria-describedby":this.id}),Uv(this.$el)},disconnected(){this.hide(),Ge(this.$el,"title")||Ge(this.$el,"title",this._hasTitle?this.title:null)},methods:{show(){this.isToggled(this.tooltip||null)||!this.title||(clearTimeout(this.showTimer),this.showTimer=setTimeout(this._show,this.delay))},async hide(){K(this.$el,"input:focus")||(clearTimeout(this.showTimer),this.isToggled(this.tooltip||null)&&await this.toggleElement(this.tooltip,!1,!1),$e(this.tooltip),this.tooltip=null)},async _show(){this.tooltip=ie(this.container,`<div id="${this.id}" class="uk-${this.$options.name}" role="tooltip"> <div class="uk-${this.$options.name}-inner">${this.title}</div> </div>`),F(this.tooltip,"toggled",(i,a)=>{if(!a)return;const u=()=>this.positionAt(this.tooltip,this.$el);u();const[x,S]=Ov(this.tooltip,this.$el,this.pos);this.origin=this.axis==="y"?`${ir(x)}-${S}`:`${S}-${ir(x)}`;const C=[we(document,`keydown ${vr}`,this.hide,!1,O=>O.type===vr&&!Ie(O.target,this.$el)||O.type==="keydown"&&O.keyCode===Tn.ESC),F([document,...Ni(this.$el)],"scroll",u,{passive:!0})];we(this.tooltip,"hide",()=>C.forEach(O=>O()),{self:!0})}),await this.toggleElement(this.tooltip,!0)||this.hide()}},events:{focus:"show",blur:"hide",[`${h} ${p}`](i){Qt(i)||this[i.type===h?"show":"hide"]()},[vr](i){Qt(i)&&this.show()}}};function Uv(i){_t(i)||Ge(i,"tabindex","0")}function Ov(i,a,[u,x]){const S=kt(i),C=kt(a),O=[["left","right"],["top","bottom"]];for(const ne of O){if(S[ne[0]]>=C[ne[1]]){u=ne[1];break}if(S[ne[1]]<=C[ne[0]]){u=ne[0];break}}const j=y(O[0],u)?O[1]:O[0];return S[j[0]]===C[j[0]]?x=j[0]:S[j[1]]===C[j[1]]?x=j[1]:x="center",[u,x]}var kv={mixins:[Jl],i18n:{invalidMime:"Invalid File Type: %s",invalidName:"Invalid File Name: %s",invalidSize:"Invalid File Size: %s Kilobytes Max"},props:{allow:String,clsDragover:String,concurrent:Number,maxSize:Number,method:String,mime:String,multiple:Boolean,name:String,params:Object,type:String,url:String},data:{allow:!1,clsDragover:"uk-dragover",concurrent:1,maxSize:0,method:"POST",mime:!1,multiple:!1,name:"files[]",params:{},type:"",url:"",abort:Mt,beforeAll:Mt,beforeSend:Mt,complete:Mt,completeAll:Mt,error:Mt,fail:Mt,load:Mt,loadEnd:Mt,loadStart:Mt,progress:Mt},events:{change(i){K(i.target,'input[type="file"]')&&(i.preventDefault(),i.target.files&&this.upload(i.target.files),i.target.value="")},drop(i){lc(i);const a=i.dataTransfer;a!=null&&a.files&&(k(this.$el,this.clsDragover),this.upload(a.files))},dragenter(i){lc(i)},dragover(i){lc(i),W(this.$el,this.clsDragover)},dragleave(i){lc(i),k(this.$el,this.clsDragover)}},methods:{async upload(i){if(i=A(i),!i.length)return;re(this.$el,"upload",[i]);for(const x of i){if(this.maxSize&&this.maxSize*1e3<x.size){this.fail(this.t("invalidSize",this.maxSize));return}if(this.allow&&!Hd(this.allow,x.name)){this.fail(this.t("invalidName",this.allow));return}if(this.mime&&!Hd(this.mime,x.type)){this.fail(this.t("invalidMime",this.mime));return}}this.multiple||(i=i.slice(0,1)),this.beforeAll(this,i);const a=Bv(i,this.concurrent),u=async x=>{const S=new FormData;x.forEach(C=>S.append(this.name,C));for(const C in this.params)S.append(C,this.params[C]);try{const C=await Fv(this.url,{data:S,method:this.method,responseType:this.type,beforeSend:O=>{const{xhr:j}=O;F(j.upload,"progress",this.progress);for(const ne of["loadStart","load","loadEnd","abort"])F(j,ne.toLowerCase(),this[ne]);return this.beforeSend(O)}});this.complete(C),a.length?await u(a.shift()):this.completeAll(C)}catch(C){this.error(C)}};await u(a.shift())}}};function Hd(i,a){return a.match(new RegExp(`^${i.replace(/\//g,"\\/").replace(/\*\*/g,"(\\/[^\\/]+)*").replace(/\*/g,"[^\\/]+").replace(/((?!\\))\?/g,"$1.")}$`,"i"))}function Bv(i,a){const u=[];for(let x=0;x<i.length;x+=a)u.push(i.slice(x,x+a));return u}function lc(i){i.preventDefault(),i.stopPropagation()}function Fv(i,a){const u={data:null,method:"GET",headers:{},xhr:new XMLHttpRequest,beforeSend:Mt,responseType:"",...a};return Promise.resolve().then(()=>u.beforeSend(u)).then(()=>Hv(i,u))}function Hv(i,a){return new Promise((u,x)=>{const{xhr:S}=a;for(const C in a)if(C in S)try{S[C]=a[C]}catch{}S.open(a.method.toUpperCase(),i);for(const C in a.headers)S.setRequestHeader(C,a.headers[C]);F(S,"load",()=>{S.status===0||S.status>=200&&S.status<300||S.status===304?u(S):x(E(Error(S.statusText),{xhr:S,status:S.status}))}),F(S,"error",()=>x(E(Error("Network Error"),{xhr:S}))),F(S,"timeout",()=>x(E(Error("Network Timeout"),{xhr:S}))),S.send(a.data)})}var zv=Object.freeze({__proto__:null,Countdown:nl,Filter:f1,Lightbox:ov,LightboxPanel:xd,Notification:lv,Parallax:vv,Slider:bv,SliderParallax:Id,Slideshow:Sv,SlideshowParallax:Id,Sortable:Tv,Tooltip:Nv,Upload:kv});function Gv(i){gr&&window.MutationObserver&&(document.body?requestAnimationFrame(()=>zd(i)):new MutationObserver((a,u)=>{document.body&&(zd(i),u.disconnect())}).observe(document.documentElement,{childList:!0}))}function zd(i){re(document,"uikit:init",i),document.body&&fn(document.body,Gd),new MutationObserver(a=>a.forEach(Vv)).observe(document,{subtree:!0,childList:!0}),new MutationObserver(a=>a.forEach(Wv)).observe(document,{subtree:!0,attributes:!0}),i._initialized=!0}function Vv({addedNodes:i,removedNodes:a}){for(const u of i)fn(u,Gd);for(const u of a)fn(u,$v)}function Wv({target:i,attributeName:a}){var u;const x=Vd(a);if(x){if(Vt(i,a)){al(x,i);return}(u=ec(i,x))==null||u.$destroy()}}function Gd(i){const a=Eo(i);for(const u in Eo(i))Ph(a[u]);for(const u of i.getAttributeNames()){const x=Vd(u);x&&al(x,i)}}function $v(i){const a=Eo(i);for(const u in Eo(i))Ih(a[u])}function Vd(i){m(i,"data-")&&(i=i.slice(5));const a=sa[i];return a&&(I(a)?a:a.options).name}nv(br),iv(br);var Wd={mixins:[di,wo],props:{animation:Boolean,targets:String,active:null,collapsible:Boolean,multiple:Boolean,toggle:String,content:String,offset:Number},data:{targets:"> *",active:!1,animation:!0,collapsible:!0,multiple:!1,clsOpen:"uk-open",toggle:"> .uk-accordion-title",content:"> .uk-accordion-content",offset:0},computed:{items({targets:i},a){return $t(i,a)},toggles({toggle:i}){return this.items.map(a=>dt(i,a))},contents({content:i}){return this.items.map(a=>{var u;return((u=a._wrapper)==null?void 0:u.firstElementChild)||dt(i,a)})}},watch:{items(i,a){if(a||Ne(i,this.clsOpen))return;const u=this.active!==!1&&i[Number(this.active)]||!this.collapsible&&i[0];u&&this.toggle(u,!1)},toggles(){this.$emit()},contents(i){for(const a of i){const u=Ne(this.items.find(x=>Ie(a,x)),this.clsOpen);cc(a,!u)}this.$emit()}},observe:tn(),events:[{name:"click keydown",delegate(){return`${this.targets} ${this.$props.toggle}`},async handler(i){var a;i.type==="keydown"&&i.keyCode!==Tn.SPACE||(i.preventDefault(),(a=this._off)==null||a.call(this),this._off=jv(i.target),await this.toggle(Ue(this.toggles,i.current)),this._off())}},{name:"shown hidden",self:!0,delegate(){return this.targets},handler(){this.$emit()}}],update(){const i=pt(this.items,`.${this.clsOpen}`);for(const a in this.items){const u=this.toggles[a],x=this.contents[a];if(!u||!x)continue;u.id=Zs(this,u,`-title-${a}`),x.id=Zs(this,x,`-content-${a}`);const S=y(i,this.items[a]);Ge(u,{role:q(u,"a")?"button":null,"aria-controls":x.id,"aria-expanded":S,"aria-disabled":!this.collapsible&&i.length<2&&S}),Ge(x,{role:"region","aria-labelledby":u.id}),q(x,"ul")&&Ge(We(x),"role","presentation")}},methods:{toggle(i,a){i=this.items[qt(i,this.items)];let u=[i];const x=pt(this.items,`.${this.clsOpen}`);if(!this.multiple&&!y(x,u[0])&&(u=u.concat(x)),!(!this.collapsible&&x.length<2&&y(x,i)))return Promise.all(u.map(S=>this.toggleElement(S,!y(x,S),(C,O)=>{if(Xe(C,this.clsOpen,O),a===!1||!this.animation){cc(dt(this.content,C),!O);return}return Xv(C,O,this)})))}}};function cc(i,a){i&&(i.hidden=a)}async function Xv(i,a,{content:u,duration:x,velocity:S,transition:C}){var O;u=((O=i._wrapper)==null?void 0:O.firstElementChild)||dt(u,i),i._wrapper||(i._wrapper=Ve(u,"<div>"));const j=i._wrapper;ue(j,"overflow","hidden");const ne=fe(ue(j,"height"));await Ut.cancel(j),cc(u,!1);const de=bt(["marginTop","marginBottom"],ot=>ue(u,ot))+Ot(u).height,ye=ne/de;x=(S*de+x)*(a?1-ye:ye),ue(j,"height",ne),await Ut.start(j,{height:a?de:0},x,C),ke(u),delete i._wrapper,a||cc(u,!0)}function jv(i){const a=oi(i,!0);let u;return function x(){u=requestAnimationFrame(()=>{const{top:S}=i.getBoundingClientRect();S<0&&(a.scrollTop+=S),x()})}(),()=>requestAnimationFrame(()=>cancelAnimationFrame(u))}var Yv={mixins:[di,wo],args:"animation",props:{animation:Boolean,close:String},data:{animation:!0,selClose:".uk-alert-close",duration:150},events:{name:"click",delegate(){return this.selClose},handler(i){i.preventDefault(),this.close()}},methods:{async close(){await this.toggleElement(this.$el,!1,qv),this.$destroy(!0)}}};function qv(i,a,{duration:u,transition:x,velocity:S}){const C=fe(ue(i,"height"));return ue(i,"height",C),Ut.start(i,{height:0,marginTop:0,marginBottom:0,paddingTop:0,paddingBottom:0,borderTop:0,borderBottom:0,opacity:0},S*C+u,x)}var $d={args:"autoplay",props:{automute:Boolean,autoplay:Boolean},data:{automute:!1,autoplay:!0},connected(){this.inView=this.autoplay==="inview",this.inView&&!Vt(this.$el,"preload")&&(this.$el.preload="none"),q(this.$el,"iframe")&&!Vt(this.$el,"allow")&&(this.$el.allow="autoplay"),this.automute&&xr(this.$el)},observe:[yt({args:{intersecting:!1}}),lt()],update:{read({visible:i}){return yr(this.$el)?{prev:i,visible:Q(this.$el),inView:this.inView&&Vr(this.$el)}:!1},write({prev:i,visible:a,inView:u}){!a||this.inView&&!u?Qn(this.$el):(this.autoplay===!0&&!i||u)&&si(this.$el)},events:["resize"]}};const Zv={top:0,left:0,width:"100%",height:"100%",transform:"none",objectFit:"cover",objectPosition:"center"};var Kv={mixins:[$d],props:{width:Number,height:Number},data:{automute:!0},events:{"load loadedmetadata"(){this.$emit("resize")}},observe:lt({target:({$el:i})=>[Xd(i)||tt(i)],filter:({_useObjectFit:i})=>!i}),connected(){this._useObjectFit=q(this.$el,"img","video"),this._useObjectFit&&ue(this.$el,Zv)},disconnected(){this._useObjectFit&&Ge(this.$el,"style","")},update:{read(){if(this._useObjectFit)return;const{ratio:i,cover:a}=Lt,{$el:u,width:x,height:S}=this;let C={width:x,height:S};if(!x||!S){const de={width:u.naturalWidth||u.videoWidth||u.clientWidth,height:u.naturalHeight||u.videoHeight||u.clientHeight};x?C=i(de,"width",x):S?C=i(de,"height",S):C=de}const{offsetHeight:O,offsetWidth:j}=Xd(u)||tt(u),ne=a(C,{width:j+(j%2?1:0),height:O+(O%2?1:0)});return!ne.width||!ne.height?!1:ne},write({height:i,width:a}){ue(this.$el,{height:i,width:a})},events:["resize"]}};function Xd(i){for(;i=tt(i);)if(ue(i,"position")!=="static")return i}let Ui;var jd={mixins:[rl,Fd,wo],args:"pos",props:{mode:"list",toggle:Boolean,boundary:Boolean,boundaryX:Boolean,boundaryY:Boolean,target:Boolean,targetX:Boolean,targetY:Boolean,stretch:Boolean,delayShow:Number,delayHide:Number,autoUpdate:Boolean,clsDrop:String,animateOut:Boolean,bgScroll:Boolean,closeOnScroll:Boolean},data:{mode:["click","hover"],toggle:"- *",boundary:!1,boundaryX:!1,boundaryY:!1,target:!1,targetX:!1,targetY:!1,stretch:!1,delayShow:0,delayHide:800,autoUpdate:!0,clsDrop:!1,animateOut:!1,bgScroll:!0,animation:["uk-animation-fade"],cls:"uk-open",container:!1,closeOnScroll:!1},computed:{boundary({boundary:i,boundaryX:a,boundaryY:u},x){return[Zt(a||i,x)||window,Zt(u||i,x)||window]},target({target:i,targetX:a,targetY:u},x){return a||(a=i||this.targetEl),u||(u=i||this.targetEl),[a===!0?window:Zt(a,x),u===!0?window:Zt(u,x)]}},created(){this.tracker=new he},beforeConnect(){this.clsDrop=this.$props.clsDrop||`uk-${this.$options.name}`},connected(){W(this.$el,"uk-drop",this.clsDrop),this.toggle&&!this.targetEl&&(this.targetEl=ex(this)),this._style=St(this.$el.style,["width","height"])},disconnected(){this.isActive()&&(this.hide(!1),Ui=null),ue(this.$el,this._style)},observe:tn({target:({toggle:i,$el:a})=>Zt(i,a),targets:({$el:i})=>i}),events:[{name:"click",delegate(){return".uk-drop-close"},handler(i){i.preventDefault(),this.hide(!1)}},{name:"click",delegate(){return'a[href*="#"]'},handler({defaultPrevented:i,current:a}){const{hash:u}=a;!i&&u&&qe(a)&&!Ie(u,this.$el)&&this.hide(!1)}},{name:"beforescroll",handler(){this.hide(!1)}},{name:"toggle",self:!0,handler(i,a){i.preventDefault(),this.isToggled()?this.hide(!1):this.show(a==null?void 0:a.$el,!1)}},{name:"toggleshow",self:!0,handler(i,a){i.preventDefault(),this.show(a==null?void 0:a.$el)}},{name:"togglehide",self:!0,handler(i){i.preventDefault(),K(this.$el,":focus,:hover")||this.hide()}},{name:`${h} focusin`,filter(){return y(this.mode,"hover")},handler(i){Qt(i)||this.clearTimers()}},{name:`${p} focusout`,filter(){return y(this.mode,"hover")},handler(i){!Qt(i)&&i.relatedTarget&&this.hide()}},{name:"toggled",self:!0,handler(i,a){a&&(this.clearTimers(),this.position())}},{name:"show",self:!0,handler(){Ui=this,this.tracker.init(),Ge(this.targetEl,"aria-expanded",!0);const i=[tx(this),nx(this),rx(this),this.autoUpdate&&Yd(this),this.closeOnScroll&&ix(this),!this.bgScroll&&ed(this.$el)];we(this.$el,"hide",()=>i.forEach(a=>a&&a()),{self:!0})}},{name:"beforehide",self:!0,handler(){this.clearTimers()}},{name:"hide",handler({target:i}){if(this.$el!==i){Ui=Ui===null&&Ie(i,this.$el)&&this.isToggled()?this:Ui;return}Ui=this.isActive()?null:Ui,this.tracker.cancel(),Ge(this.targetEl,"aria-expanded",null)}}],update:{write(){this.isToggled()&&!Ne(this.$el,this.clsEnter)&&this.position()}},methods:{show(i=this.targetEl,a=!0){if(this.isToggled()&&i&&this.targetEl&&i!==this.targetEl&&this.hide(!1,!1),this.targetEl=i,this.clearTimers(),!this.isActive()){if(Ui){if(a&&Ui.isDelaying){this.showTimer=setTimeout(()=>K(i,":hover")&&this.show(),10);return}let u;for(;Ui&&u!==Ui&&!Ie(this.$el,Ui.$el);)u=Ui,Ui.hide(!1,!1)}this.container&&tt(this.$el)!==this.container&&ie(this.container,this.$el),this.showTimer=setTimeout(()=>this.toggleElement(this.$el,!0),a&&this.delayShow||0)}},hide(i=!0,a=!0){const u=()=>this.toggleElement(this.$el,!1,this.animateOut&&a);this.clearTimers(),this.isDelayedHide=i,this.isDelaying=Jv(this.$el).some(x=>this.tracker.movesTo(x)),i&&this.isDelaying?this.hideTimer=setTimeout(this.hide,50):i&&this.delayHide?this.hideTimer=setTimeout(u,this.delayHide):u()},clearTimers(){clearTimeout(this.showTimer),clearTimeout(this.hideTimer),this.showTimer=null,this.hideTimer=null,this.isDelaying=!1},isActive(){return Ui===this},position(){k(this.$el,"uk-drop-stack"),ue(this.$el,this._style),this.$el.hidden=!0;const i=this.target.map(S=>Qv(this.$el,S)),a=this.getViewportOffset(this.$el),u=[[0,["x","width","left","right"]],[1,["y","height","top","bottom"]]];for(const[S,[C,O]]of u)this.axis!==C&&y([C,!0],this.stretch)&&ue(this.$el,{[O]:Math.min(kt(this.boundary[S])[O],i[S][O]-2*a),[`overflow-${C}`]:"auto"});const x=i[0].width-2*a;this.$el.hidden=!1,ue(this.$el,"maxWidth",""),this.$el.offsetWidth>x&&W(this.$el,"uk-drop-stack"),ue(this.$el,"maxWidth",x),this.positionAt(this.$el,this.target,this.boundary);for(const[S,[C,O,j,ne]]of u)if(this.axis===C&&y([C,!0],this.stretch)){const de=Math.abs(this.getPositionOffset(this.$el)),ye=kt(this.target[S]),ot=kt(this.$el);ue(this.$el,{[O]:(ye[j]>ot[j]?ye[this.inset?ne:j]-Math.max(kt(this.boundary[S])[j],i[S][j]+a):Math.min(kt(this.boundary[S])[ne],i[S][ne]-a)-ye[this.inset?j:ne])-de,[`overflow-${C}`]:"auto"}),this.positionAt(this.$el,this.target,this.boundary)}}}};function Jv(i){const a=[];return fn(i,u=>ue(u,"position")!=="static"&&a.push(u)),a}function Qv(i,a){return ji(Ni(a).find(u=>Ie(i,u)))}function ex(i){const{$el:a}=i.$create("toggle",Zt(i.toggle,i.$el),{target:i.$el,mode:i.mode});return Ge(a,"aria-haspopup",!0),a}function tx(i){const a=()=>i.$emit(),u=[Ht(a),Qe(Ni(i.$el).concat(i.target),a)];return()=>u.map(x=>x.disconnect())}function Yd(i,a=()=>i.$emit()){return F([document,...Ni(i.$el)],"scroll",a,{passive:!0})}function nx(i){return F(document,"keydown",a=>{a.keyCode===Tn.ESC&&i.hide(!1)})}function ix(i){return Yd(i,()=>i.hide(!1))}function rx(i){return F(document,vr,({target:a})=>{Ie(a,i.$el)||we(document,`${hs} ${_} scroll`,({defaultPrevented:u,type:x,target:S})=>{!u&&x===hs&&a===S&&!(i.targetEl&&Ie(a,i.targetEl))&&i.hide(!1)},!0)})}var qd={mixins:[di,rl],props:{align:String,clsDrop:String,boundary:Boolean,dropbar:Boolean,dropbarAnchor:Boolean,duration:Number,mode:Boolean,offset:Boolean,stretch:Boolean,delayShow:Boolean,delayHide:Boolean,target:Boolean,targetX:Boolean,targetY:Boolean,animation:Boolean,animateOut:Boolean,closeOnScroll:Boolean},data:{align:Un?"right":"left",clsDrop:"uk-dropdown",clsDropbar:"uk-dropnav-dropbar",boundary:!0,dropbar:!1,dropbarAnchor:!1,duration:200,container:!1,selNavItem:"> li > a, > ul > li > a"},computed:{dropbarAnchor({dropbarAnchor:i},a){return Zt(i,a)||a},dropbar({dropbar:i}){return i?(i=this._dropbar||Zt(i,this.$el)||dt(`+ .${this.clsDropbar}`,this.$el),i||(this._dropbar=dt("<div></div>"))):null},dropbarOffset(){return 0},dropContainer(i,a){return this.container||a},dropdowns({clsDrop:i},a){var u;const x=$t(`.${i}`,a);if(this.dropContainer!==a)for(const S of $t(`.${i}`,this.dropContainer)){const C=(u=this.getDropdown(S))==null?void 0:u.targetEl;!y(x,S)&&C&&Ie(C,this.$el)&&x.push(S)}return x},items({selNavItem:i},a){return $t(i,a)}},watch:{dropbar(i){W(i,"uk-dropbar","uk-dropbar-top",this.clsDropbar,`uk-${this.$options.name}-dropbar`)},dropdowns(){this.initializeDropdowns()}},connected(){this.initializeDropdowns()},disconnected(){$e(this._dropbar),delete this._dropbar},events:[{name:"mouseover focusin",delegate(){return this.selNavItem},handler({current:i}){const a=this.getActive();a&&y(a.mode,"hover")&&a.targetEl&&!Ie(a.targetEl,i)&&!a.isDelaying&&a.hide(!1)}},{name:"keydown",self:!0,delegate(){return this.selNavItem},handler(i){var a;const{current:u,keyCode:x}=i,S=this.getActive();x===Tn.DOWN&&(S==null?void 0:S.targetEl)===u&&(i.preventDefault(),(a=dt(et,S.$el))==null||a.focus()),Zd(i,this.items,S)}},{name:"keydown",el(){return this.dropContainer},delegate(){return`.${this.clsDrop}`},handler(i){var a;const{current:u,keyCode:x}=i;if(!y(this.dropdowns,u))return;const S=this.getActive();let C=-1;if(x===Tn.HOME?C=0:x===Tn.END?C="last":x===Tn.UP?C="previous":x===Tn.DOWN?C="next":x===Tn.ESC&&((a=S.targetEl)==null||a.focus()),~C){i.preventDefault();const O=$t(et,u);O[qt(C,O,M(O,j=>K(j,":focus")))].focus()}Zd(i,this.items,S)}},{name:"mouseleave",el(){return this.dropbar},filter(){return this.dropbar},handler(){const i=this.getActive();i&&y(i.mode,"hover")&&!this.dropdowns.some(a=>K(a,":hover"))&&i.hide()}},{name:"beforeshow",el(){return this.dropContainer},filter(){return this.dropbar},handler({target:i}){this.isDropbarDrop(i)&&(this.dropbar.previousElementSibling!==this.dropbarAnchor&&le(this.dropbarAnchor,this.dropbar),W(i,`${this.clsDrop}-dropbar`))}},{name:"show",el(){return this.dropContainer},filter(){return this.dropbar},handler({target:i}){if(!this.isDropbarDrop(i))return;const a=this.getDropdown(i),u=()=>{const x=rt(i,`.${this.clsDrop}`).concat(i).map(j=>kt(j)),S=Math.min(...x.map(({top:j})=>j)),C=Math.max(...x.map(({bottom:j})=>j)),O=kt(this.dropbar);ue(this.dropbar,"top",this.dropbar.offsetTop-(O.top-S)-this.dropbarOffset),this.transitionTo(C-S+fe(ue(i,"marginBottom"))+this.dropbarOffset,i)};this._observer=Qe([a.$el,...a.target],u),u()}},{name:"beforehide",el(){return this.dropContainer},filter(){return this.dropbar},handler(i){const a=this.getActive();K(this.dropbar,":hover")&&a.$el===i.target&&y(a.mode,"hover")&&a.isDelayedHide&&!this.items.some(u=>a.targetEl!==u&&K(u,":focus"))&&i.preventDefault()}},{name:"hide",el(){return this.dropContainer},filter(){return this.dropbar},handler({target:i}){var a;if(!this.isDropbarDrop(i))return;(a=this._observer)==null||a.disconnect();const u=this.getActive();(!u||u.$el===i)&&this.transitionTo(0)}}],methods:{getActive(){var i;return y(this.dropdowns,(i=Ui)==null?void 0:i.$el)&&Ui},async transitionTo(i,a){const{dropbar:u}=this,x=dn(u);a=x<i&&a,await Ut.cancel([a,u]),ue(a,"clipPath",`polygon(0 0,100% 0,100% ${x}px,0 ${x}px)`),dn(u,x),await Promise.all([Ut.start(u,{height:i},this.duration),Ut.start(a,{clipPath:`polygon(0 0,100% 0,100% ${i}px,0 ${i}px)`},this.duration).finally(()=>ue(a,{clipPath:""}))]).catch(Mt)},getDropdown(i){return this.$getComponent(i,"drop")||this.$getComponent(i,"dropdown")},isDropbarDrop(i){return this.getDropdown(i)&&Ne(i,this.clsDrop)},initializeDropdowns(){this.$create("drop",this.dropdowns.filter(i=>!this.getDropdown(i)),{...this.$props,flip:!1,shift:!0,pos:`bottom-${this.align}`,boundary:this.boundary===!0?this.$el:this.boundary})}}};function Zd(i,a,u){var x,S,C;const{current:O,keyCode:j}=i;let ne=-1;j===Tn.HOME?ne=0:j===Tn.END?ne="last":j===Tn.LEFT?ne="previous":j===Tn.RIGHT?ne="next":j===Tn.TAB&&((x=u.targetEl)==null||x.focus(),(S=u.hide)==null||S.call(u,!1)),~ne&&(i.preventDefault(),(C=u.hide)==null||C.call(u,!1),a[qt(ne,a,a.indexOf(u.targetEl||O))].focus())}var sx={mixins:[di],args:"target",props:{target:Boolean},data:{target:!1},computed:{input(i,a){return dt(Ze,a)},state(){return this.input.nextElementSibling},target({target:i},a){return i&&(i===!0&&tt(this.input)===a&&this.input.nextElementSibling||dt(i,a))}},update(){var i;const{target:a,input:u}=this;if(!a)return;let x;const S=ze(a)?"value":"textContent",C=a[S],O=(i=u.files)!=null&&i[0]?u.files[0].name:K(u,"select")&&(x=$t("option",u).filter(j=>j.selected)[0])?x.textContent:u.value;C!==O&&(a[S]=O)},events:[{name:"change",handler(){this.$emit()}},{name:"reset",el(){return je(this.$el,"form")},handler(){this.$emit()}}]},ox={extends:pi,mixins:[di],name:"grid",props:{masonry:Boolean,parallax:String,parallaxStart:String,parallaxEnd:String,parallaxJustify:Boolean},data:{margin:"uk-grid-margin",clsStack:"uk-grid-stack",masonry:!1,parallax:0,parallaxStart:0,parallaxEnd:0,parallaxJustify:!1},connected(){this.masonry&&W(this.$el,"uk-flex-top","uk-flex-wrap-top")},observe:zt({filter:({parallax:i,parallaxJustify:a})=>i||a}),update:[{write({rows:i}){Xe(this.$el,this.clsStack,!i[0][1])},events:["resize"]},{read(i){const{rows:a}=i;let{masonry:u,parallax:x,parallaxJustify:S,margin:C}=this;if(x=Math.max(0,Nn(x)),!(u||x||S)||Kd(a)||a[0].some((nn,yn)=>a.some(Kn=>Kn[yn]&&Kn[yn].offsetWidth!==nn.offsetWidth)))return i.translates=i.scrollColumns=!1;let O=lx(a,C),j,ne;u?[j,ne]=ax(a,O,u==="next"):j=cx(a);const de=j.map(nn=>bt(nn,"offsetHeight")+O*(nn.length-1)),ye=Math.max(0,...de);let ot,ct,Ct;return(x||S)&&(ot=de.map((nn,yn)=>S?ye-nn+x:x/(yn%2||8)),S||(x=Math.max(...de.map((nn,yn)=>nn+ot[yn]-ye))),ct=Nn(this.parallaxStart,"height",this.$el,!0),Ct=Nn(this.parallaxEnd,"height",this.$el,!0)),{columns:j,translates:ne,scrollColumns:ot,parallaxStart:ct,parallaxEnd:Ct,padding:x,height:ne?ye:""}},write({height:i,padding:a}){ue(this.$el,"paddingBottom",a||""),i!==!1&&ue(this.$el,"height",i)},events:["resize"]},{read({rows:i,scrollColumns:a,parallaxStart:u,parallaxEnd:x}){return a&&Kd(i)?!1:{scrolled:a?Fi(this.$el,u,x):!1}},write({columns:i,scrolled:a,scrollColumns:u,translates:x}){!a&&!x||i.forEach((S,C)=>S.forEach((O,j)=>{let[ne,de]=x&&x[C][j]||[0,0];a&&(de+=a*u[C]),ue(O,"transform",`translate(${ne}px, ${de}px)`)}))},events:["scroll","resize"]}]};function Kd(i){return i.flat().some(a=>ue(a,"position")==="absolute")}function ax(i,a,u){const x=[],S=[],C=Array(i[0].length).fill(0);let O=0;for(let j of i){Un&&(j=j.reverse());let ne=0;for(const de in j){const{offsetWidth:ye,offsetHeight:ot}=j[de],ct=u?de:C.indexOf(Math.min(...C));kh(x,ct,j[de]),kh(S,ct,[(ct-de)*ye*(Un?-1:1),C[ct]-O]),C[ct]+=ot+a,ne=Math.max(ne,ot)}O+=ne+a}return[x,S]}function lx(i,a){const u=i.flat().find(x=>Ne(x,a));return fe(u?ue(u,"marginTop"):ue(i[0][0],"paddingLeft"))}function cx(i){const a=[];for(const u of i)for(const x in u)kh(a,x,u[x]);return a}function kh(i,a,u){i[a]||(i[a]=[]),i[a].push(u)}var hx={args:"target",props:{target:String,row:Boolean},data:{target:"> *",row:!0},computed:{elements({target:i},a){return $t(i,a)}},observe:lt({target:({$el:i,elements:a})=>[i,...a]}),update:{read(){return{rows:(this.row?zi(this.elements):[this.elements]).map(ux)}},write({rows:i}){for(const{heights:a,elements:u}of i)u.forEach((x,S)=>ue(x,"minHeight",a[S]))},events:["resize"]}};function ux(i){if(i.length<2)return{heights:[""],elements:i};let a=i.map(fx);const u=Math.max(...a);return{heights:i.map((x,S)=>a[S].toFixed(2)===u.toFixed(2)?"":u),elements:i}}function fx(i){const a=St(i.style,["display","minHeight"]);Q(i)||ue(i,"display","block","important"),ue(i,"minHeight","");const u=Ot(i).height-ki(i,"height","content-box");return ue(i,a),u}var dx={props:{expand:Boolean,offsetTop:Boolean,offsetBottom:Boolean,minHeight:Number},data:{expand:!1,offsetTop:!1,offsetBottom:!1,minHeight:0},observe:[Bt({filter:({expand:i})=>i}),lt({target:({$el:i})=>us(i)})],update:{read(){if(!Q(this.$el))return!1;let i="";const a=ki(this.$el,"height","content-box"),{body:u,scrollingElement:x}=document,S=oi(this.$el),{height:C}=ji(S===u?x:S),O=x===S||u===S;if(i=`calc(${O?"100vh":`${C}px`}`,this.expand){const j=Ot(S).height-Ot(this.$el).height;i+=` - ${j}px`}else{if(this.offsetTop)if(O){const j=this.offsetTop===!0?this.$el:Zt(this.offsetTop,this.$el),ne=an(j)[0]-an(S)[0];i+=ne>0&&ne<C/2?` - ${ne}px`:""}else i+=` - ${ue(S,"paddingTop")}`;this.offsetBottom===!0?i+=` - ${Ot(this.$el.nextElementSibling).height}px`:Te(this.offsetBottom)?i+=` - ${this.offsetBottom}vh`:this.offsetBottom&&v(this.offsetBottom,"px")?i+=` - ${fe(this.offsetBottom)}px`:V(this.offsetBottom)&&(i+=` - ${Ot(Zt(this.offsetBottom,this.$el)).height}px`)}return i+=`${a?` - ${a}px`:""})`,{minHeight:i}},write({minHeight:i}){ue(this.$el,"minHeight",`max(${this.minHeight||0}px, ${i})`)},events:["resize"]}},px='<svg width="14" height="14" viewBox="0 0 14 14"><line fill="none" stroke="#000" stroke-width="1.1" x1="1" y1="1" x2="13" y2="13"/><line fill="none" stroke="#000" stroke-width="1.1" x1="13" y1="1" x2="1" y2="13"/></svg>',mx='<svg width="20" height="20" viewBox="0 0 20 20"><line fill="none" stroke="#000" stroke-width="1.4" x1="1" y1="1" x2="19" y2="19"/><line fill="none" stroke="#000" stroke-width="1.4" x1="19" y1="1" x2="1" y2="19"/></svg>',gx='<svg width="12" height="12" viewBox="0 0 12 12"><polyline fill="none" stroke="#000" stroke-width="1.1" points="1 3.5 6 8.5 11 3.5"/></svg>',vx='<svg width="20" height="20" viewBox="0 0 20 20"><rect x="9" y="4" width="1" height="11"/><rect x="4" y="9" width="11" height="1"/></svg>',xx='<svg width="14" height="14" viewBox="0 0 14 14"><polyline fill="none" stroke="#000" stroke-width="1.1" points="1 4 7 10 13 4"/></svg>',yx='<svg width="12" height="12" viewBox="0 0 12 12"><polyline fill="none" stroke="#000" stroke-width="1.1" points="1 3.5 6 8.5 11 3.5"/></svg>',_x='<svg width="12" height="12" viewBox="0 0 12 12"><polyline fill="none" stroke="#000" stroke-width="1.1" points="1 3.5 6 8.5 11 3.5"/></svg>',bx='<svg width="20" height="20" viewBox="0 0 20 20"><style>.uk-navbar-toggle-animate svg&gt;[class*=&quot;line-&quot;]{transition:0.2s ease-in-out;transition-property:transform, opacity;transform-origin:center;opacity:1}.uk-navbar-toggle svg&gt;.line-3{opacity:0}.uk-navbar-toggle-animate[aria-expanded=&quot;true&quot;] svg&gt;.line-3{opacity:1}.uk-navbar-toggle-animate[aria-expanded=&quot;true&quot;] svg&gt;.line-2{transform:rotate(45deg)}.uk-navbar-toggle-animate[aria-expanded=&quot;true&quot;] svg&gt;.line-3{transform:rotate(-45deg)}.uk-navbar-toggle-animate[aria-expanded=&quot;true&quot;] svg&gt;.line-1,.uk-navbar-toggle-animate[aria-expanded=&quot;true&quot;] svg&gt;.line-4{opacity:0}.uk-navbar-toggle-animate[aria-expanded=&quot;true&quot;] svg&gt;.line-1{transform:translateY(6px) scaleX(0)}.uk-navbar-toggle-animate[aria-expanded=&quot;true&quot;] svg&gt;.line-4{transform:translateY(-6px) scaleX(0)}</style><rect class="line-1" y="3" width="20" height="2"/><rect class="line-2" y="9" width="20" height="2"/><rect class="line-3" y="9" width="20" height="2"/><rect class="line-4" y="15" width="20" height="2"/></svg>',wx='<svg width="40" height="40" viewBox="0 0 40 40"><rect x="19" y="0" width="1" height="40"/><rect x="0" y="19" width="40" height="1"/></svg>',Mx='<svg width="7" height="12" viewBox="0 0 7 12"><polyline fill="none" stroke="#000" stroke-width="1.2" points="1 1 6 6 1 11"/></svg>',Ex='<svg width="7" height="12" viewBox="0 0 7 12"><polyline fill="none" stroke="#000" stroke-width="1.2" points="6 1 1 6 6 11"/></svg>',Sx='<svg width="20" height="20" viewBox="0 0 20 20"><circle fill="none" stroke="#000" stroke-width="1.1" cx="9" cy="9" r="7"/><path fill="none" stroke="#000" stroke-width="1.1" d="M14,14 L18,18 L14,14 Z"/></svg>',Tx='<svg width="40" height="40" viewBox="0 0 40 40"><circle fill="none" stroke="#000" stroke-width="1.8" cx="17.5" cy="17.5" r="16.5"/><line fill="none" stroke="#000" stroke-width="1.8" x1="38" y1="39" x2="29" y2="30"/></svg>',Ax='<svg width="24" height="24" viewBox="0 0 24 24"><circle fill="none" stroke="#000" stroke-width="1.1" cx="10.5" cy="10.5" r="9.5"/><line fill="none" stroke="#000" stroke-width="1.1" x1="23" y1="23" x2="17" y2="17"/></svg>',Cx='<svg width="25" height="40" viewBox="0 0 25 40"><polyline fill="none" stroke="#000" stroke-width="2" points="4.002,38.547 22.527,20.024 4,1.5"/></svg>',Rx='<svg width="14" height="24" viewBox="0 0 14 24"><polyline fill="none" stroke="#000" stroke-width="1.4" points="1.225,23 12.775,12 1.225,1"/></svg>',Lx='<svg width="25" height="40" viewBox="0 0 25 40"><polyline fill="none" stroke="#000" stroke-width="2" points="20.527,1.5 2,20.024 20.525,38.547"/></svg>',Dx='<svg width="14" height="24" viewBox="0 0 14 24"><polyline fill="none" stroke="#000" stroke-width="1.4" points="12.775,1 1.225,12 12.775,23"/></svg>',Px='<svg width="30" height="30" viewBox="0 0 30 30"><circle fill="none" stroke="#000" cx="15" cy="15" r="14"/></svg>',Ix='<svg width="18" height="10" viewBox="0 0 18 10"><polyline fill="none" stroke="#000" stroke-width="1.2" points="1 9 9 1 17 9"/></svg>',Jd={args:"src",props:{width:Number,height:Number,ratio:Number},data:{ratio:1},connected(){this.svg=this.getSvg().then(i=>{if(!this._connected)return;const a=Nx(i,this.$el);return this.svgEl&&a!==this.svgEl&&$e(this.svgEl),Ux.call(this,a,i),this.svgEl=a},Mt)},disconnected(){this.svg.then(i=>{this._connected||(ht(this.$el)&&(this.$el.hidden=!1),$e(i),this.svgEl=null)}),this.svg=null},methods:{async getSvg(){}}};function Nx(i,a){if(ht(a)||q(a,"canvas")){a.hidden=!0;const x=a.nextElementSibling;return Qd(i,x)?x:le(a,i)}const u=a.lastElementChild;return Qd(i,u)?u:ie(a,i)}function Qd(i,a){return q(i,"svg")&&q(a,"svg")&&i.innerHTML===a.innerHTML}function Ux(i,a){const u=["width","height"];let x=u.map(C=>this[C]);x.some(C=>C)||(x=u.map(C=>Ge(a,C)));const S=Ge(a,"viewBox");S&&!x.some(C=>C)&&(x=S.split(" ").slice(2)),x.forEach((C,O)=>Ge(i,u[O],fe(C)*this.ratio||null))}const hc={spinner:Px,totop:Ix,marker:vx,"close-icon":px,"close-large":mx,"drop-parent-icon":gx,"nav-parent-icon":yx,"nav-parent-icon-large":xx,"navbar-parent-icon":_x,"navbar-toggle-icon":bx,"overlay-icon":wx,"pagination-next":Mx,"pagination-previous":Ex,"search-icon":Sx,"search-large":Tx,"search-navbar":Ax,"slidenav-next":Rx,"slidenav-next-large":Cx,"slidenav-previous":Dx,"slidenav-previous-large":Lx},Bh={install:$x,mixins:[Jd],args:"icon",props:{icon:String},isIcon:!0,beforeConnect(){W(this.$el,"uk-icon")},methods:{async getSvg(){const i=Xx(this.icon);if(!i)throw"Icon not found.";return i}}},To={args:!1,extends:Bh,data:i=>({icon:l(i.constructor.options.name)}),beforeConnect(){W(this.$el,this.$options.id)}},Ox={extends:To,beforeConnect(){const i=this.$props.icon;this.icon=je(this.$el,".uk-nav-primary")?`${i}-large`:i}},kx={extends:To,mixins:[Jl],i18n:{toggle:"Open Search",submit:"Submit Search"},beforeConnect(){if(this.icon=Ne(this.$el,"uk-search-icon")&&rt(this.$el,".uk-search-large").length?"search-large":rt(this.$el,".uk-search-navbar").length?"search-navbar":this.$props.icon,!Vt(this.$el,"aria-label"))if(Ne(this.$el,"uk-search-toggle")||Ne(this.$el,"uk-navbar-toggle")){const i=this.t("toggle");Ge(this.$el,"aria-label",i)}else{const i=je(this.$el,"a,button");if(i){const a=this.t("submit");Ge(i,"aria-label",a)}}}},Bx={extends:To,beforeConnect(){Ge(this.$el,"role","status")},methods:{async getSvg(){const i=await Bh.methods.getSvg.call(this);return this.ratio!==1&&ue(dt("circle",i),"strokeWidth",1/this.ratio),i}}},Ao={extends:To,mixins:[Jl],beforeConnect(){const i=je(this.$el,"a,button");Ge(i,"role",this.role!==null&&q(i,"a")?"button":this.role);const a=this.t("label");a&&!Vt(i,"aria-label")&&Ge(i,"aria-label",a)}},ep={extends:Ao,beforeConnect(){W(this.$el,"uk-slidenav");const i=this.$props.icon;this.icon=Ne(this.$el,"uk-slidenav-large")?`${i}-large`:i}},Fx={extends:Ao,i18n:{label:"Open menu"}},Hx={extends:Ao,i18n:{label:"Close"},beforeConnect(){this.icon=`close-${Ne(this.$el,"uk-close-large")?"large":"icon"}`}},zx={extends:Ao,i18n:{label:"Open"}},Gx={extends:Ao,i18n:{label:"Back to top"}},Vx={extends:Ao,i18n:{label:"Next page"},data:{role:null}},Wx={extends:Ao,i18n:{label:"Previous page"},data:{role:null}},uc={};function $x(i){i.icon.add=(a,u)=>{const x=V(a)?{[a]:u}:a;nt(x,(S,C)=>{hc[C]=S,delete uc[C]}),i._initialized&&fn(document.body,S=>nt(i.getComponents(S),C=>{C.$options.isIcon&&C.icon in x&&C.$reset()}))}}function Xx(i){return hc[i]?(uc[i]||(uc[i]=dt((hc[jx(i)]||hc[i]).trim())),uc[i].cloneNode(!0)):null}function jx(i){return Un?Ce(Ce(i,"left","right"),"previous","next"):i}const Yx=gr&&"loading"in HTMLImageElement.prototype;var qx={args:"dataSrc",props:{dataSrc:String,sources:String,margin:String,target:String,loading:String},data:{dataSrc:"",sources:!1,margin:"50%",target:!1,loading:"lazy"},connected(){if(this.loading!=="lazy"){this.load();return}Yx&&fc(this.$el)&&(this.$el.loading="lazy",Fh(this.$el)),ey(this.$el)},disconnected(){this.img&&(this.img.onload=""),delete this.img},observe:yt({target:({$el:i,$props:a})=>[i,...xn(a.target,i)],handler(i,a){this.load(),a.disconnect()},options:({margin:i})=>({rootMargin:i}),filter:({loading:i})=>i==="lazy"}),methods:{load(){if(this.img)return this.img;const i=fc(this.$el)?this.$el:Kx(this.$el,this.dataSrc,this.sources);return Cn(i,"loading"),Fh(this.$el,i.currentSrc),this.img=i}}};function Fh(i,a){if(fc(i)){const u=tt(i);(q(u,"picture")?We(u):[i]).forEach(S=>tp(S,S))}else a&&!y(i.style.backgroundImage,a)&&(ue(i,"backgroundImage",`url(${ls(a)})`),re(i,Re("load",!1)))}const Zx=["data-src","data-srcset","sizes"];function tp(i,a){for(const u of Zx){const x=Xt(i,u);x&&Ge(a,u.replace(/^(data-)+/,""),x)}}function Kx(i,a,u){const x=new Image;return Jx(x,u),tp(i,x),x.onload=()=>{Fh(i,x.currentSrc)},Ge(x,"src",a),x}function Jx(i,a){if(a=Qx(a),a.length){const u=Kt("<picture>");for(const x of a){const S=Kt("<source>");Ge(S,x),ie(u,S)}ie(u,i)}}function Qx(i){if(!i)return[];if(m(i,"["))try{i=JSON.parse(i)}catch{i=[]}else i=Ae(i);return T(i)||(i=[i]),i.filter(a=>!ve(a))}function ey(i){fc(i)&&!Vt(i,"src")&&Ge(i,"src",'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg"></svg>')}function fc(i){return q(i,"img")}var ty={mixins:[di,tc],props:{fill:String},data:{fill:"",clsWrapper:"uk-leader-fill",clsHide:"uk-leader-hide",attrFill:"data-fill"},computed:{fill({fill:i}){return i||ue(this.$el,"--uk-leader-fill-content")}},connected(){[this.wrapper]=Oe(this.$el,`<span class="${this.clsWrapper}">`)},disconnected(){ke(this.wrapper.childNodes)},observe:lt(),update:{read(){return{width:Math.trunc(this.$el.offsetWidth/2),fill:this.fill,hide:!this.matchMedia}},write({width:i,fill:a,hide:u}){Xe(this.wrapper,this.clsHide,u),Ge(this.wrapper,this.attrFill,new Array(i).join(a))},events:["resize"]}},ny={install:iy,mixins:[Th],data:{clsPage:"uk-modal-page",selPanel:".uk-modal-dialog",selClose:".uk-modal-close, .uk-modal-close-default, .uk-modal-close-outside, .uk-modal-close-full"},events:[{name:"show",self:!0,handler(){Ne(this.panel,"uk-margin-auto-vertical")?W(this.$el,"uk-flex"):ue(this.$el,"display","block"),dn(this.$el)}},{name:"hidden",self:!0,handler(){ue(this.$el,"display",""),k(this.$el,"uk-flex")}}]};function iy({modal:i}){i.dialog=function(u,x){const S=i(`<div class="uk-modal"> <div class="uk-modal-dialog">${u}</div> </div>`,{stack:!0,role:"alertdialog",...x});return S.show(),F(S.$el,"hidden",async()=>{await Promise.resolve(),S.$destroy(!0)},{self:!0}),S},i.alert=function(u,x){return a(({i18n:S})=>`<div class="uk-modal-body">${V(u)?u:B(u)}</div> <div class="uk-modal-footer uk-text-right"> <button class="uk-button uk-button-primary uk-modal-close" autofocus>${S.ok}</button> </div>`,x)},i.confirm=function(u,x){return a(({i18n:S})=>`<form> <div class="uk-modal-body">${V(u)?u:B(u)}</div> <div class="uk-modal-footer uk-text-right"> <button class="uk-button uk-button-default uk-modal-close" type="button">${S.cancel}</button> <button class="uk-button uk-button-primary" autofocus>${S.ok}</button> </div> </form>`,x,()=>Promise.reject())},i.prompt=function(u,x,S){const C=a(({i18n:ne})=>`<form class="uk-form-stacked"> <div class="uk-modal-body"> <label>${V(u)?u:B(u)}</label> <input class="uk-input" value="${x||""}" autofocus> </div> <div class="uk-modal-footer uk-text-right"> <button class="uk-button uk-button-default uk-modal-close" type="button">${ne.cancel}</button> <button class="uk-button uk-button-primary">${ne.ok}</button> </div> </form>`,S,()=>null,()=>j.value),{$el:O}=C.dialog,j=dt("input",O);return F(O,"show",()=>j.select()),C},i.i18n={ok:"Ok",cancel:"Cancel"};function a(u,x,S=Mt,C=Mt){x={bgClose:!1,escClose:!0,...x,i18n:{...i.i18n,...x==null?void 0:x.i18n}};const O=i.dialog(u(x),x);return E(new Promise(j=>{const ne=F(O.$el,"hide",()=>j(S()));F(O.$el,"submit","form",de=>{de.preventDefault(),j(C(O)),ne(),O.hide()})}),{dialog:O})}}var ry={extends:Wd,data:{targets:"> .uk-parent",toggle:"> a",content:"> ul"}},sy={extends:qd,props:{dropbarTransparentMode:Boolean},data:{clsDrop:"uk-navbar-dropdown",selNavItem:".uk-navbar-nav > li > a,a.uk-navbar-item,button.uk-navbar-item,.uk-navbar-item a,.uk-navbar-item button,.uk-navbar-toggle",selTransparentTarget:'[class*="uk-section"]',dropbarTransparentMode:!1},computed:{dropbarOffset(){return this.dropbarTransparentMode==="behind"?this.$el.offsetHeight:0},navbarContainer(){return je(this.$el,".uk-navbar-container")}},watch:{items(){const i=Ne(this.$el,"uk-navbar-justify");for(const a of $t(".uk-navbar-nav, .uk-navbar-left, .uk-navbar-right",this.$el))ue(a,"flexGrow",i?$t(".uk-navbar-nav > li > a, .uk-navbar-item, .uk-navbar-toggle",a).length:"")}},disconnect(){var i;(i=this._colorListener)==null||i.call(this)},observe:[mt({target:({navbarContainer:i})=>i,handler(){this.registerColorListener()},options:{attributes:!0,attributeFilter:["class"],attributeOldValue:!0}}),yt({handler(i){this._isIntersecting=i[0].isIntersecting,this.registerColorListener()},args:{intersecting:!1}})],events:[{name:"show",el(){return this.dropContainer},handler({target:i}){const a=this.getTransparentMode(i);if(!a||this._mode)return;const u=()=>this._mode=oy(this.navbarContainer,"uk-light","uk-dark");if(a==="behind"){const x=np(this.$el);x&&(u(),W(this.navbarContainer,`uk-${x}`))}a==="remove"&&(u(),k(this.navbarContainer,"uk-navbar-transparent"))}},{name:"hide",el(){return this.dropContainer},async handler({target:i}){const a=this.getTransparentMode(i);if(!(!a||!this._mode)&&(await ay(),!this.getActive())){if(a==="behind"){const u=np(this.$el);u&&k(this.navbarContainer,`uk-${u}`)}W(this.navbarContainer,this._mode),a==="remove"&&W(this.navbarContainer,"uk-navbar-transparent"),this._mode=null}}}],methods:{getTransparentMode(i){if(!this.navbarContainer)return;if(this.dropbar&&this.isDropbarDrop(i))return this.dropbarTransparentMode;const a=this.getDropdown(i);if(!(!a||!Ne(i,"uk-dropbar")))return a.inset?"behind":"remove"},registerColorListener(){const i=this._isIntersecting&&Ne(this.navbarContainer,"uk-navbar-transparent")&&!cy(this.navbarContainer)&&!$t(".uk-drop",this.dropContainer).map(this.getDropdown).some(a=>a.isToggled()&&(a.inset||this.getTransparentMode(a.$el)==="behind"));if(this._colorListener){i||(this._colorListener(),this._colorListener=null);return}i&&(this._colorListener=ly(this.navbarContainer,()=>{const{left:a,top:u,height:x}=kt(this.navbarContainer),S={x:a,y:Math.max(0,u)+x/2},C=$t(this.selTransparentTarget).find(j=>xe(S,kt(j))),O=ue(C,"--uk-navbar-color");O&&Ye(this.navbarContainer,"uk-light,uk-dark",`uk-${O}`)}))}}};function oy(i,...a){for(const u of a)if(Ne(i,u))return k(i,u),u}async function ay(){return new Promise(i=>setTimeout(i))}function np(i){return ue(i,"--uk-navbar-dropbar-behind-color")}function ly(i,a){const u=oi(i,!0),x=u===document.documentElement?document:u,S=F(x,"scroll",a,{passive:!0}),C=Qe([i,u],a);return()=>{S(),C.disconnect()}}function cy(i){do if(ue(i,"mixBlendMode")!=="normal")return!0;while(i=tt(i))}var hy={mixins:[Th],args:"mode",props:{mode:String,flip:Boolean,overlay:Boolean,swiping:Boolean},data:{mode:"slide",flip:!1,overlay:!1,clsPage:"uk-offcanvas-page",clsContainer:"uk-offcanvas-container",selPanel:".uk-offcanvas-bar",clsFlip:"uk-offcanvas-flip",clsContainerAnimation:"uk-offcanvas-container-animation",clsSidebarAnimation:"uk-offcanvas-bar-animation",clsMode:"uk-offcanvas",clsOverlay:"uk-offcanvas-overlay",selClose:".uk-offcanvas-close",container:!1,swiping:!0},computed:{clsFlip({flip:i,clsFlip:a}){return i?a:""},clsOverlay({overlay:i,clsOverlay:a}){return i?a:""},clsMode({mode:i,clsMode:a}){return`${a}-${i}`},clsSidebarAnimation({mode:i,clsSidebarAnimation:a}){return i==="none"||i==="reveal"?"":a},clsContainerAnimation({mode:i,clsContainerAnimation:a}){return i!=="push"&&i!=="reveal"?"":a},transitionElement({mode:i}){return i==="reveal"?tt(this.panel):this.panel}},observe:ln({filter:({swiping:i})=>i}),update:{read(){this.isToggled()&&!Q(this.$el)&&this.hide()},events:["resize"]},events:[{name:"touchmove",self:!0,passive:!1,filter(){return this.overlay},handler(i){i.cancelable&&i.preventDefault()}},{name:"show",self:!0,handler(){this.mode==="reveal"&&!Ne(tt(this.panel),this.clsMode)&&(Ve(this.panel,"<div>"),W(tt(this.panel),this.clsMode));const{body:i,scrollingElement:a}=document;W(i,this.clsContainer,this.clsFlip),ue(i,"touch-action","pan-y pinch-zoom"),ue(this.$el,"display","block"),ue(this.panel,"maxWidth",a.clientWidth),W(this.$el,this.clsOverlay),W(this.panel,this.clsSidebarAnimation,this.mode==="reveal"?"":this.clsMode),dn(i),W(i,this.clsContainerAnimation),this.clsContainerAnimation&&uy()}},{name:"hide",self:!0,handler(){k(document.body,this.clsContainerAnimation),ue(document.body,"touch-action","")}},{name:"hidden",self:!0,handler(){this.clsContainerAnimation&&fy(),this.mode==="reveal"&&ke(this.panel),k(this.panel,this.clsSidebarAnimation,this.clsMode),k(this.$el,this.clsOverlay),ue(this.$el,"display",""),ue(this.panel,"maxWidth",""),k(document.body,this.clsContainer,this.clsFlip)}},{name:"swipeLeft swipeRight",handler(i){this.isToggled()&&v(i.type,"Left")^this.flip&&this.hide()}}]};function uy(){ip().content+=",user-scalable=0"}function fy(){const i=ip();i.content=i.content.replace(/,user-scalable=0$/,"")}function ip(){return dt('meta[name="viewport"]',document.head)||ie(document.head,'<meta name="viewport">')}var dy={mixins:[di],props:{selContainer:String,selContent:String,minHeight:Number},data:{selContainer:".uk-modal",selContent:".uk-modal-dialog",minHeight:150},computed:{container({selContainer:i},a){return je(a,i)},content({selContent:i},a){return je(a,i)}},observe:lt({target:({container:i,content:a})=>[i,a]}),update:{read(){return!this.content||!this.container||!Q(this.$el)?!1:{max:Math.max(this.minHeight,dn(this.container)-(Ot(this.content).height-dn(this.$el)))}},write({max:i}){ue(this.$el,{minHeight:this.minHeight,maxHeight:i})},events:["resize"]}},py={props:["width","height"],connected(){W(this.$el,"uk-responsive-width")},observe:lt({target:({$el:i})=>[i,tt(i)]}),update:{read(){return Q(this.$el)&&this.width&&this.height?{width:ri(tt(this.$el)),height:this.height}:!1},write(i){dn(this.$el,Lt.contain({height:this.height,width:this.width},i).height)},events:["resize"]}},my={props:{offset:Number},data:{offset:0},connected(){gy(this)},disconnected(){vy(this)},methods:{async scrollTo(i){i=i&&dt(i)||document.body,re(this.$el,"beforescroll",[this,i])&&(await Qr(i,{offset:this.offset}),re(this.$el,"scrolled",[this,i]))}}};const fl=new Set;function gy(i){fl.size||F(document,"click",rp),fl.add(i)}function vy(i){fl.delete(i),fl.size||pe(document,"click",rp)}function rp(i){if(!i.defaultPrevented)for(const a of fl)Ie(i.target,a.$el)&&qe(a.$el)&&(i.preventDefault(),window.location.href!==a.$el.href&&window.history.pushState({},"",a.$el.href),a.scrollTo(xt(a.$el)))}var xy={args:"cls",props:{cls:String,target:String,hidden:Boolean,margin:String,repeat:Boolean,delay:Number},data:()=>({cls:"",target:!1,hidden:!0,margin:"-1px",repeat:!1,delay:0,inViewClass:"uk-scrollspy-inview"}),computed:{elements({target:i},a){return i?$t(i,a):[a]}},watch:{elements(i){this.hidden&&ue(pt(i,`:not(.${this.inViewClass})`),"opacity",0)}},connected(){this.elementData=new Map},disconnected(){for(const[i,a]of this.elementData.entries())k(i,this.inViewClass,(a==null?void 0:a.cls)||"");delete this.elementData},observe:yt({target:({elements:i})=>i,handler(i){const a=this.elementData;for(const{target:u,isIntersecting:x}of i){a.has(u)||a.set(u,{cls:Xt(u,"uk-scrollspy-class")||this.cls});const S=a.get(u);!this.repeat&&S.show||(S.show=x)}this.$emit()},options:({margin:i})=>({rootMargin:i}),args:{intersecting:!1}}),update:[{write(i){for(const[a,u]of this.elementData.entries())u.show&&!u.inview&&!u.queued?(u.queued=!0,i.promise=(i.promise||Promise.resolve()).then(()=>new Promise(x=>setTimeout(x,this.delay))).then(()=>{this.toggle(a,!0),setTimeout(()=>{u.queued=!1,this.$emit()},300)})):!u.show&&u.inview&&!u.queued&&this.repeat&&this.toggle(a,!1)}}],methods:{toggle(i,a){var u;const x=this.elementData.get(i);if(x){if((u=x.off)==null||u.call(x),ue(i,"opacity",!a&&this.hidden?0:""),Xe(i,this.inViewClass,a),Xe(i,x.cls),/\buk-animation-/.test(x.cls)){const S=()=>se(i,"uk-animation-[\\w-]+");a?x.off=we(i,"animationcancel animationend",S):S()}re(i,a?"inview":"outview"),x.inview=a,this.$update(i)}}}},yy={props:{cls:String,closest:Boolean,scroll:Boolean,overflow:Boolean,offset:Number},data:{cls:"uk-active",closest:!1,scroll:!1,overflow:!0,offset:0},computed:{links(i,a){return $t('a[href*="#"]',a).filter(u=>u.hash&&qe(u))},elements({closest:i}){return this.links.map(a=>je(a,i||"*"))}},watch:{links(i){this.scroll&&this.$create("scroll",i,{offset:this.offset})}},observe:[yt(),zt()],update:[{read(){const i=this.links.map(xt).filter(Boolean),{length:a}=i;if(!a||!Q(this.$el))return!1;const u=oi(i,!0),{scrollTop:x,scrollHeight:S}=u,C=ji(u),O=S-C.height;let j=!1;if(x===O)j=a-1;else{for(let ne=0;ne<i.length;ne++){const de=_y(i[ne]),ye=this.offset+(de?kt(de).height:0);if(kt(i[ne]).top-C.top-ye>0)break;j=+ne}j===!1&&this.overflow&&(j=0)}return{active:j}},write({active:i}){const a=i!==!1&&!Ne(this.elements[i],this.cls);this.links.forEach(u=>u.blur());for(let u=0;u<this.elements.length;u++)Xe(this.elements[u],this.cls,+u===i);a&&re(this.$el,"active",[i,this.elements[i]])},events:["scroll","resize"]}]};function _y(i){return i.ownerDocument.elementsFromPoint(1,1).find(a=>["fixed","sticky"].includes(ue(a,"position"))&&!a.contains(i))}var by={mixins:[di,tc],props:{position:String,top:null,bottom:null,start:null,end:null,offset:String,overflowFlip:Boolean,animation:String,clsActive:String,clsInactive:String,clsFixed:String,clsBelow:String,selTarget:String,showOnUp:Boolean,targetOffset:Number},data:{position:"top",top:!1,bottom:!1,start:!1,end:!1,offset:0,overflowFlip:!1,animation:"",clsActive:"uk-active",clsInactive:"",clsFixed:"uk-sticky-fixed",clsBelow:"uk-sticky-below",selTarget:"",showOnUp:!1,targetOffset:!1},computed:{selTarget({selTarget:i},a){return i&&dt(i,a)||a}},connected(){this.start=sp(this.start||this.top),this.end=sp(this.end||this.bottom),this.placeholder=dt("+ .uk-sticky-placeholder",this.$el)||dt('<div class="uk-sticky-placeholder"></div>'),this.isFixed=!1,this.setActive(!1)},beforeDisconnect(){this.isFixed&&(this.hide(),k(this.selTarget,this.clsInactive)),op(this.$el),$e(this.placeholder),this.placeholder=null},observe:[Bt(),zt({target:()=>document.scrollingElement}),lt({target:({$el:i})=>[i,document.scrollingElement]})],events:[{name:"load hashchange popstate",el(){return window},filter(){return this.targetOffset!==!1},handler(){const{scrollingElement:i}=document;!location.hash||i.scrollTop===0||setTimeout(()=>{const a=kt(dt(location.hash)),u=kt(this.$el);this.isFixed&&Ft(a,u)&&(i.scrollTop=a.top-u.height-Nn(this.targetOffset,"height",this.placeholder)-Nn(this.offset,"height",this.placeholder))})}},{name:"transitionstart",handler(){this.transitionInProgress=we(this.$el,"transitionend transitioncancel",()=>this.transitionInProgress=null)}}],update:[{read({height:i,width:a,margin:u,sticky:x}){if(this.inactive=!this.matchMedia||!Q(this.$el),this.inactive)return;const S=this.isFixed&&!this.transitionInProgress;S&&(ap(this.selTarget),this.hide()),this.active||({height:i,width:a}=kt(this.$el),u=ue(this.$el,"margin")),S&&this.show();const C=Nn("100vh","height"),O=dn(window),j=document.scrollingElement.scrollHeight-C;let ne=this.position;this.overflowFlip&&i>C&&(ne=ne==="top"?"bottom":"top");const de=this.isFixed?this.placeholder:this.$el;let ye=Nn(this.offset,"height",x?this.$el:de);ne==="bottom"&&(i<O||this.overflowFlip)&&(ye+=O-i);const ot=this.overflowFlip?0:Math.max(0,i+ye-C),ct=kt(de).top,Ct=kt(this.$el).height,nn=(this.start===!1?ct:Hh(this.start,this.$el,ct))-ye,yn=this.end===!1?j:Math.min(j,Hh(this.end,this.$el,ct+i,!0)-Ct-ye+ot);return x=j&&!this.showOnUp&&nn+ye===ct&&yn===Math.min(j,Hh("!*",this.$el,0,!0)-Ct-ye+ot)&&ue(tt(this.$el),"overflowY")==="visible",{start:nn,end:yn,offset:ye,overflow:ot,topOffset:ct,height:i,elHeight:Ct,width:a,margin:u,top:an(de)[0],sticky:x}},write({height:i,width:a,margin:u,offset:x,sticky:S}){if((this.inactive||S||!this.isFixed)&&op(this.$el),this.inactive)return;S&&(i=a=u=0,ue(this.$el,{position:"sticky",top:x}));const{placeholder:C}=this;ue(C,{height:i,width:a,margin:u}),Ie(C,document)||(C.hidden=!0),(S?ee:le)(this.$el,C)},events:["resize"]},{read({scroll:i=0,dir:a="down",overflow:u,overflowScroll:x=0,start:S,end:C}){const O=document.scrollingElement.scrollTop;return{dir:i<=O?"down":"up",prevDir:a,scroll:O,prevScroll:i,offsetParentTop:kt((this.isFixed?this.placeholder:this.$el).offsetParent).top,overflowScroll:Rt(x+Rt(O,S,C)-Rt(i,S,C),0,u)}},write(i,a){const u=a.has("scroll"),{initTimestamp:x=0,dir:S,prevDir:C,scroll:O,prevScroll:j=0,top:ne,start:de,topOffset:ye,height:ot}=i;if(O<0||O===j&&u||this.showOnUp&&!u&&!this.isFixed)return;const ct=Date.now();if((ct-x>300||S!==C)&&(i.initScroll=O,i.initTimestamp=ct),!(this.showOnUp&&!this.isFixed&&Math.abs(i.initScroll-O)<=30&&Math.abs(j-O)<=10))if(this.inactive||O<de||this.showOnUp&&(O<=de||S==="down"&&u||S==="up"&&!this.isFixed&&O<=ye+ot)){if(!this.isFixed){Ii.inProgress(this.$el)&&ne>O&&(Ii.cancel(this.$el),this.hide());return}if(this.animation&&O>ye){if(Ne(this.$el,"uk-animation-leave"))return;Ii.out(this.$el,this.animation).then(()=>this.hide(),Mt)}else this.hide()}else this.isFixed?this.update():this.animation&&O>ye?(this.show(),Ii.in(this.$el,this.animation).catch(Mt)):(ap(this.selTarget),this.show())},events:["resize","resizeViewport","scroll"]}],methods:{show(){this.isFixed=!0,this.update(),this.placeholder.hidden=!1},hide(){const{offset:i,sticky:a}=this._data;this.setActive(!1),k(this.$el,this.clsFixed,this.clsBelow),a?ue(this.$el,"top",i):ue(this.$el,{position:"",top:"",width:"",marginTop:""}),this.placeholder.hidden=!0,this.isFixed=!1},update(){let{width:i,scroll:a=0,overflow:u,overflowScroll:x=0,start:S,end:C,offset:O,topOffset:j,height:ne,elHeight:de,offsetParentTop:ye,sticky:ot}=this._data;const ct=S!==0||a>S;if(!ot){let Ct="fixed";a>C&&(O+=C-ye,Ct="absolute"),ue(this.$el,{position:Ct,width:i,marginTop:0},"important")}u&&(O-=x),ue(this.$el,"top",O),this.setActive(ct),Xe(this.$el,this.clsBelow,a>j+(ot?Math.min(ne,de):ne)),W(this.$el,this.clsFixed)},setActive(i){const a=this.active;this.active=i,i?(Ye(this.selTarget,this.clsInactive,this.clsActive),a!==i&&re(this.$el,"active")):(Ye(this.selTarget,this.clsActive,this.clsInactive),a!==i&&re(this.$el,"inactive"))}}};function Hh(i,a,u,x){if(!i)return 0;if(Te(i)||V(i)&&i.match(/^-?\d/))return u+Nn(i,"height",a,!0);{const S=i===!0?tt(a):Zt(i,a);return kt(S).bottom-(x&&S&&Ie(a,S)?fe(ue(S,"paddingBottom")):0)}}function sp(i){return i==="true"?!0:i==="false"?!1:i}function op(i){ue(i,{position:"",top:"",marginTop:"",width:""})}function ap(i){ue(i,"transition","0s"),requestAnimationFrame(()=>ue(i,"transition",""))}var wy={mixins:[Jd],args:"src",props:{src:String,icon:String,attributes:"list",strokeAnimation:Boolean},data:{strokeAnimation:!1},observe:[mt({async handler(){const i=await this.svg;i&&lp.call(this,i)},options:{attributes:!0,attributeFilter:["id","class","style"]}})],async connected(){y(this.src,"#")&&([this.src,this.icon]=this.src.split("#"));const i=await this.svg;i&&(lp.call(this,i),this.strokeAnimation&&Ty(i))},methods:{async getSvg(){return q(this.$el,"img")&&!this.$el.complete&&this.$el.loading==="lazy"?new Promise(i=>we(this.$el,"load",()=>i(this.getSvg()))):Ey(await My(this.src),this.icon)||Promise.reject("SVG not found.")}}};function lp(i){const{$el:a}=this;W(i,Ge(a,"class"),"uk-svg");for(let u=0;u<a.style.length;u++){const x=a.style[u];ue(i,x,ue(a,x))}for(const u in this.attributes){const[x,S]=this.attributes[u].split(":",2);Ge(i,x,S)}this.$el.id||Cn(i,"id")}const My=wt(async i=>i?m(i,"data:")?decodeURIComponent(i.split(",")[1]):(await fetch(i)).text():Promise.reject());function Ey(i,a){return a&&y(i,"<symbol")&&(i=Sy(i)[a]||i),i=dt(i.substr(i.indexOf("<svg"))),(i==null?void 0:i.hasChildNodes())&&i}const cp=/<symbol([^]*?id=(['"])(.+?)\2[^]*?<\/)symbol>/g,Sy=wt(function(i){const a={};cp.lastIndex=0;let u;for(;u=cp.exec(i);)a[u[3]]=`<svg ${u[1]}svg>`;return a});function Ty(i){const a=_d(i);a&&ue(i,"--uk-animation-stroke",a)}const zh=".uk-disabled *, .uk-disabled, [disabled]";var hp={mixins:[wo],args:"connect",props:{connect:String,toggle:String,itemNav:String,active:Number,followFocus:Boolean,swiping:Boolean},data:{connect:"~.uk-switcher",toggle:"> * > :first-child",itemNav:!1,active:0,cls:"uk-active",attrItem:"uk-switcher-item",selVertical:".uk-nav",followFocus:!1,swiping:!0},computed:{connects({connect:i},a){return xn(i,a)},connectChildren(){return this.connects.map(i=>We(i)).flat()},toggles({toggle:i},a){return $t(i,a)},children(){return We(this.$el).filter(i=>this.toggles.some(a=>Ie(a,i)))}},watch:{connects(i){this.swiping&&ue(i,"touchAction","pan-y pinch-zoom"),this.$emit()},connectChildren(){let i=Math.max(0,this.index());for(const a of this.connects)We(a).forEach((u,x)=>Xe(u,this.cls,x===i));this.$emit()},toggles(i){this.$emit();const a=this.index();this.show(~a?a:i[this.active]||i[0])}},connected(){Ge(this.$el,"role","tablist")},observe:[tn({targets:({connectChildren:i})=>i}),ln({target:({connects:i})=>i,filter:({swiping:i})=>i})],events:[{name:"click keydown",delegate(){return this.toggle},handler(i){!K(i.current,zh)&&(i.type==="click"||i.keyCode===Tn.SPACE)&&(i.preventDefault(),this.show(i.current))}},{name:"keydown",delegate(){return this.toggle},handler(i){const{current:a,keyCode:u}=i,x=K(this.$el,this.selVertical);let S=u===Tn.HOME?0:u===Tn.END?"last":u===Tn.LEFT&&!x||u===Tn.UP&&x?"previous":u===Tn.RIGHT&&!x||u===Tn.DOWN&&x?"next":-1;if(~S){i.preventDefault();const C=this.toggles.filter(j=>!K(j,zh)),O=C[qt(S,C,C.indexOf(a))];O.focus(),this.followFocus&&this.show(O)}}},{name:"click",el(){return this.connects.concat(this.itemNav?xn(this.itemNav,this.$el):[])},delegate(){return`[${this.attrItem}],[data-${this.attrItem}]`},handler(i){je(i.target,"a,button")&&(i.preventDefault(),this.show(Xt(i.current,this.attrItem)))}},{name:"swipeRight swipeLeft",filter(){return this.swiping},el(){return this.connects},handler({type:i}){this.show(v(i,"Left")?"next":"previous")}}],update(){var i;Ge(this.connects,"role","presentation"),Ge(We(this.$el),"role","presentation");for(const a in this.toggles){const u=this.toggles[a],x=(i=this.connects[0])==null?void 0:i.children[a];Ge(u,"role","tab"),x&&(u.id=Zs(this,u,`-tab-${a}`),x.id=Zs(this,x,`-tabpanel-${a}`),Ge(u,"aria-controls",x.id),Ge(x,{role:"tabpanel","aria-labelledby":u.id}))}Ge(this.$el,"aria-orientation",K(this.$el,this.selVertical)?"vertical":null)},methods:{index(){return M(this.children,i=>Ne(i,this.cls))},show(i){const a=this.toggles.filter(O=>!K(O,zh)),u=this.index(),x=qt(!G(i)||y(a,i)?i:0,a,qt(this.toggles[u],a)),S=qt(a[x],this.toggles);this.children.forEach((O,j)=>{Xe(O,this.cls,S===j),Ge(this.toggles[j],{"aria-selected":S===j,tabindex:S===j?null:-1})});const C=u>=0&&u!==x;this.connects.forEach(async({children:O})=>{const j=A(O).filter((ne,de)=>de!==S&&Ne(ne,this.cls));await this.toggleElement(j,!1,C),await this.toggleElement(O[S],!0,C)})}}},Ay={mixins:[di],extends:hp,props:{media:Boolean},data:{media:960,attrItem:"uk-tab-item",selVertical:".uk-tab-left,.uk-tab-right"},connected(){const i=Ne(this.$el,"uk-tab-left")?"uk-tab-left":Ne(this.$el,"uk-tab-right")?"uk-tab-right":!1;i&&this.$create("toggle",this.$el,{cls:i,mode:"media",media:this.media})}};const Cy=32;var Ry={mixins:[tc,wo],args:"target",props:{href:String,target:null,mode:"list",queued:Boolean},data:{href:!1,target:!1,mode:"click",queued:!0},computed:{target({target:i},a){return i=xn(i||a.hash,a),i.length&&i||[a]}},connected(){y(this.mode,"media")||(_t(this.$el)||Ge(this.$el,"tabindex","0"),!this.cls&&q(this.$el,"a")&&Ge(this.$el,"role","button"))},observe:tn({target:({target:i})=>i}),events:[{name:vr,filter(){return y(this.mode,"hover")},handler(i){this._preventClick=null,!(!Qt(i)||U(this._showState)||this.$el.disabled)&&(re(this.$el,"focus"),we(document,vr,()=>re(this.$el,"blur"),!0,a=>!Ie(a.target,this.$el)),y(this.mode,"click")&&(this._preventClick=!0))}},{name:`mouseenter mouseleave ${h} ${p} focus blur`,filter(){return y(this.mode,"hover")},handler(i){if(Qt(i)||this.$el.disabled)return;const a=y(["mouseenter",h,"focus"],i.type),u=this.isToggled(this.target);if(!a&&(!U(this._showState)||i.type!=="blur"&&K(this.$el,":focus")||i.type==="blur"&&K(this.$el,":hover"))){u===this._showState&&(this._showState=null);return}a&&U(this._showState)&&u!==this._showState||(this._showState=a?u:null,this.toggle(`toggle${a?"show":"hide"}`))}},{name:"keydown",filter(){return y(this.mode,"click")&&!q(this.$el,"input")},handler(i){i.keyCode===Cy&&(i.preventDefault(),this.$el.click())}},{name:"click",filter(){return["click","hover"].some(i=>y(this.mode,i))},handler(i){let a;(this._preventClick||je(i.target,'a[href="#"], a[href=""]')||(a=je(i.target,"a[href]"))&&(!this.isToggled(this.target)||a.hash&&K(this.target,a.hash)))&&i.preventDefault(),!this._preventClick&&y(this.mode,"click")&&this.toggle()}},{name:"mediachange",filter(){return y(this.mode,"media")},el(){return this.target},handler(i,a){a.matches^this.isToggled(this.target)&&this.toggle()}}],methods:{async toggle(i){if(!re(this.target,i||"toggle",[this]))return;if(Vt(this.$el,"aria-expanded")&&Ge(this.$el,"aria-expanded",!this.isToggled(this.target)),!this.queued)return this.toggleElement(this.target);const a=this.target.filter(x=>Ne(x,this.clsLeave));if(a.length){for(const x of this.target){const S=y(a,x);this.toggleElement(x,S,S)}return}const u=this.target.filter(this.isToggled);await this.toggleElement(u,!1)&&await this.toggleElement(this.target.filter(x=>!y(u,x)),!0)}}},Ly=Object.freeze({__proto__:null,Accordion:Wd,Alert:Yv,Close:Hx,Cover:Kv,Drop:jd,DropParentIcon:To,Dropdown:jd,Dropnav:qd,FormCustom:sx,Grid:ox,HeightMatch:hx,HeightViewport:dx,Icon:Bh,Img:qx,Leader:ty,Margin:pi,Marker:zx,Modal:ny,Nav:ry,NavParentIcon:Ox,Navbar:sy,NavbarParentIcon:To,NavbarToggleIcon:Fx,Offcanvas:hy,OverflowAuto:dy,OverlayIcon:To,PaginationNext:Vx,PaginationPrevious:Wx,Responsive:py,Scroll:my,Scrollspy:xy,ScrollspyNav:yy,SearchIcon:kx,SlidenavNext:ep,SlidenavPrevious:ep,Spinner:Bx,Sticky:by,Svg:wy,Switcher:hp,Tab:Ay,Toggle:Ry,Totop:Gx,Video:$d});return nt(Ly,(i,a)=>br.component(a,i)),Gv(br),nt(zv,(i,a)=>br.component(a,i)),br})})(Gg);var Dy=Gg.exports;const Zc=mf(Dy);var Vg={exports:{}};/*! UIkit 3.17.0 | https://www.getuikit.com | (c) 2014 - 2023 YOOtheme | MIT License */(function(s,e){(function(t,n){s.exports=n()})(fh,function(){function t(n){t.installed||n.icon.add({youtube:'<svg width="20" height="20" viewBox="0 0 20 20"><path d="M15,4.1c1,0.1,2.3,0,3,0.8c0.8,0.8,0.9,2.1,0.9,3.1C19,9.2,19,10.9,19,12c-0.1,1.1,0,2.4-0.5,3.4c-0.5,1.1-1.4,1.5-2.5,1.6 c-1.2,0.1-8.6,0.1-11,0c-1.1-0.1-2.4-0.1-3.2-1c-0.7-0.8-0.7-2-0.8-3C1,11.8,1,10.1,1,8.9c0-1.1,0-2.4,0.5-3.4C2,4.5,3,4.3,4.1,4.2 C5.3,4.1,12.6,4,15,4.1z M8,7.5v6l5.5-3L8,7.5z"/></svg>',yootheme:'<svg width="20" height="20" viewBox="0 0 20 20"><path d="m16.15,5.48c-1.37,0-2.45.61-3.11,1.54-.66-.93-1.74-1.54-3.11-1.54-1.75,0-3.03,1-3.57,2.41v-2.22h-2.01v4.45c0,.85-.31,1.35-1.18,1.35s-1.18-.5-1.18-1.35v-4.45H0v4.86c0,.7.17,1.33.53,1.82.34.49.88.85,1.6,1v3.16h2.1v-3.16c1.28-.28,1.96-1.17,2.1-2.35.52,1.44,1.81,2.48,3.59,2.48,1.37,0,2.45-.61,3.11-1.54.66.93,1.74,1.54,3.11,1.54,2.37,0,3.85-1.82,3.85-4s-1.49-4-3.85-4Zm-6.22,5.99c-1.11,0-1.85-.72-1.85-1.99s.74-1.99,1.85-1.99,1.85.72,1.85,1.99-.74,1.99-1.85,1.99Zm6.22,0c-1.11,0-1.85-.72-1.85-1.99s.74-1.99,1.85-1.99,1.85.72,1.85,1.99-.74,1.99-1.85,1.99Z"/></svg>',yelp:'<svg width="20" height="20" viewBox="0 0 20 20"><path d="M17.175,14.971c-0.112,0.77-1.686,2.767-2.406,3.054c-0.246,0.1-0.487,0.076-0.675-0.069	c-0.122-0.096-2.446-3.859-2.446-3.859c-0.194-0.293-0.157-0.682,0.083-0.978c0.234-0.284,0.581-0.393,0.881-0.276	c0.016,0.01,4.21,1.394,4.332,1.482c0.178,0.148,0.263,0.379,0.225,0.646L17.175,14.971L17.175,14.971z M11.464,10.789	c-0.203-0.307-0.199-0.666,0.009-0.916c0,0,2.625-3.574,2.745-3.657c0.203-0.135,0.452-0.141,0.69-0.025	c0.691,0.335,2.085,2.405,2.167,3.199v0.027c0.024,0.271-0.082,0.491-0.273,0.623c-0.132,0.083-4.43,1.155-4.43,1.155	c-0.322,0.096-0.68-0.06-0.882-0.381L11.464,10.789z M9.475,9.563C9.32,9.609,8.848,9.757,8.269,8.817c0,0-3.916-6.16-4.007-6.351	c-0.057-0.212,0.011-0.455,0.202-0.65C5.047,1.211,8.21,0.327,9.037,0.529c0.27,0.069,0.457,0.238,0.522,0.479	c0.047,0.266,0.433,5.982,0.488,7.264C10.098,9.368,9.629,9.517,9.475,9.563z M9.927,19.066c-0.083,0.225-0.273,0.373-0.54,0.421	c-0.762,0.13-3.15-0.751-3.647-1.342c-0.096-0.131-0.155-0.262-0.167-0.394c-0.011-0.095,0-0.189,0.036-0.272	c0.061-0.155,2.917-3.538,2.917-3.538c0.214-0.272,0.595-0.355,0.952-0.213c0.345,0.13,0.56,0.428,0.536,0.749	C10.014,14.479,9.977,18.923,9.927,19.066z M3.495,13.912c-0.235-0.009-0.444-0.148-0.568-0.382c-0.089-0.17-0.151-0.453-0.19-0.794	C2.63,11.701,2.761,10.144,3.07,9.648c0.145-0.226,0.357-0.345,0.592-0.336c0.154,0,4.255,1.667,4.255,1.667	c0.321,0.118,0.521,0.453,0.5,0.833c-0.023,0.37-0.236,0.655-0.551,0.738L3.495,13.912z"/></svg>',xing:'<svg width="20" height="20" viewBox="0 0 20 20"><path d="M4.4,4.56 C4.24,4.56 4.11,4.61 4.05,4.72 C3.98,4.83 3.99,4.97 4.07,5.12 L5.82,8.16 L5.82,8.17 L3.06,13.04 C2.99,13.18 2.99,13.33 3.06,13.44 C3.12,13.55 3.24,13.62 3.4,13.62 L6,13.62 C6.39,13.62 6.57,13.36 6.71,13.12 C6.71,13.12 9.41,8.35 9.51,8.16 C9.49,8.14 7.72,5.04 7.72,5.04 C7.58,4.81 7.39,4.56 6.99,4.56 L4.4,4.56 L4.4,4.56 Z"/><path d="M15.3,1 C14.91,1 14.74,1.25 14.6,1.5 C14.6,1.5 9.01,11.42 8.82,11.74 C8.83,11.76 12.51,18.51 12.51,18.51 C12.64,18.74 12.84,19 13.23,19 L15.82,19 C15.98,19 16.1,18.94 16.16,18.83 C16.23,18.72 16.23,18.57 16.16,18.43 L12.5,11.74 L12.5,11.72 L18.25,1.56 C18.32,1.42 18.32,1.27 18.25,1.16 C18.21,1.06 18.08,1 17.93,1 L15.3,1 L15.3,1 Z"/></svg>',world:'<svg width="20" height="20" viewBox="0 0 20 20"><path fill="none" stroke="#000" d="M1,10.5 L19,10.5"/><path fill="none" stroke="#000" d="M2.35,15.5 L17.65,15.5"/><path fill="none" stroke="#000" d="M2.35,5.5 L17.523,5.5"/><path fill="none" stroke="#000" d="M10,19.46 L9.98,19.46 C7.31,17.33 5.61,14.141 5.61,10.58 C5.61,7.02 7.33,3.83 10,1.7 C10.01,1.7 9.99,1.7 10,1.7 L10,1.7 C12.67,3.83 14.4,7.02 14.4,10.58 C14.4,14.141 12.67,17.33 10,19.46 L10,19.46 L10,19.46 L10,19.46 Z"/><circle fill="none" stroke="#000" cx="10" cy="10.5" r="9"/></svg>',wordpress:'<svg width="20" height="20" viewBox="0 0 20 20"><path d="M10,0.5c-5.2,0-9.5,4.3-9.5,9.5s4.3,9.5,9.5,9.5c5.2,0,9.5-4.3,9.5-9.5S15.2,0.5,10,0.5L10,0.5L10,0.5z M15.6,3.9h-0.1 c-0.8,0-1.4,0.7-1.4,1.5c0,0.7,0.4,1.3,0.8,1.9c0.3,0.6,0.7,1.3,0.7,2.3c0,0.7-0.3,1.5-0.6,2.7L14.1,15l-3-8.9 c0.5,0,0.9-0.1,0.9-0.1C12.5,6,12.5,5.3,12,5.4c0,0-1.3,0.1-2.2,0.1C9,5.5,7.7,5.4,7.7,5.4C7.2,5.3,7.2,6,7.6,6c0,0,0.4,0.1,0.9,0.1 l1.3,3.5L8,15L5,6.1C5.5,6.1,5.9,6,5.9,6C6.4,6,6.3,5.3,5.9,5.4c0,0-1.3,0.1-2.2,0.1c-0.2,0-0.3,0-0.5,0c1.5-2.2,4-3.7,6.9-3.7 C12.2,1.7,14.1,2.6,15.6,3.9L15.6,3.9L15.6,3.9z M2.5,6.6l3.9,10.8c-2.7-1.3-4.6-4.2-4.6-7.4C1.8,8.8,2,7.6,2.5,6.6L2.5,6.6L2.5,6.6 z M10.2,10.7l2.5,6.9c0,0,0,0.1,0.1,0.1C11.9,18,11,18.2,10,18.2c-0.8,0-1.6-0.1-2.3-0.3L10.2,10.7L10.2,10.7L10.2,10.7z M14.2,17.1 l2.5-7.3c0.5-1.2,0.6-2.1,0.6-2.9c0-0.3,0-0.6-0.1-0.8c0.6,1.2,1,2.5,1,4C18.3,13,16.6,15.7,14.2,17.1L14.2,17.1L14.2,17.1z"/></svg>',whatsapp:'<svg width="20" height="20" viewBox="0 0 20 20"><path d="M16.7,3.3c-1.8-1.8-4.1-2.8-6.7-2.8c-5.2,0-9.4,4.2-9.4,9.4c0,1.7,0.4,3.3,1.3,4.7l-1.3,4.9l5-1.3c1.4,0.8,2.9,1.2,4.5,1.2 l0,0l0,0c5.2,0,9.4-4.2,9.4-9.4C19.5,7.4,18.5,5,16.7,3.3 M10.1,17.7L10.1,17.7c-1.4,0-2.8-0.4-4-1.1l-0.3-0.2l-3,0.8l0.8-2.9 l-0.2-0.3c-0.8-1.2-1.2-2.7-1.2-4.2c0-4.3,3.5-7.8,7.8-7.8c2.1,0,4.1,0.8,5.5,2.3c1.5,1.5,2.3,3.4,2.3,5.5 C17.9,14.2,14.4,17.7,10.1,17.7 M14.4,11.9c-0.2-0.1-1.4-0.7-1.6-0.8c-0.2-0.1-0.4-0.1-0.5,0.1c-0.2,0.2-0.6,0.8-0.8,0.9 c-0.1,0.2-0.3,0.2-0.5,0.1c-0.2-0.1-1-0.4-1.9-1.2c-0.7-0.6-1.2-1.4-1.3-1.6c-0.1-0.2,0-0.4,0.1-0.5C8,8.8,8.1,8.7,8.2,8.5 c0.1-0.1,0.2-0.2,0.2-0.4c0.1-0.2,0-0.3,0-0.4C8.4,7.6,7.9,6.5,7.7,6C7.5,5.5,7.3,5.6,7.2,5.6c-0.1,0-0.3,0-0.4,0 c-0.2,0-0.4,0.1-0.6,0.3c-0.2,0.2-0.8,0.8-0.8,2c0,1.2,0.8,2.3,1,2.4c0.1,0.2,1.7,2.5,4,3.5c0.6,0.2,1,0.4,1.3,0.5 c0.6,0.2,1.1,0.2,1.5,0.1c0.5-0.1,1.4-0.6,1.6-1.1c0.2-0.5,0.2-1,0.1-1.1C14.8,12.1,14.6,12,14.4,11.9"/></svg>',warning:'<svg width="20" height="20" viewBox="0 0 20 20"><circle cx="10" cy="14" r="1"/><circle fill="none" stroke="#000" stroke-width="1.1" cx="10" cy="10" r="9"/><path d="M10.97,7.72 C10.85,9.54 10.56,11.29 10.56,11.29 C10.51,11.87 10.27,12 9.99,12 C9.69,12 9.49,11.87 9.43,11.29 C9.43,11.29 9.16,9.54 9.03,7.72 C8.96,6.54 9.03,6 9.03,6 C9.03,5.45 9.46,5.02 9.99,5 C10.53,5.01 10.97,5.44 10.97,6 C10.97,6 11.04,6.54 10.97,7.72 L10.97,7.72 Z"/></svg>',vimeo:'<svg width="20" height="20" viewBox="0 0 20 20"><path d="M2.065,7.59C1.84,7.367,1.654,7.082,1.468,6.838c-0.332-0.42-0.137-0.411,0.274-0.772c1.026-0.91,2.004-1.896,3.127-2.688 c1.017-0.713,2.365-1.173,3.286-0.039c0.849,1.045,0.869,2.629,1.084,3.891c0.215,1.309,0.421,2.648,0.88,3.901 c0.127,0.352,0.37,1.018,0.81,1.074c0.567,0.078,1.145-0.917,1.408-1.289c0.684-0.987,1.611-2.317,1.494-3.587 c-0.115-1.349-1.572-1.095-2.482-0.773c0.146-1.514,1.555-3.216,2.912-3.792c1.439-0.597,3.579-0.587,4.302,1.036 c0.772,1.759,0.078,3.802-0.763,5.396c-0.918,1.731-2.1,3.333-3.363,4.829c-1.114,1.329-2.432,2.787-4.093,3.422 c-1.897,0.723-3.021-0.686-3.667-2.318c-0.705-1.777-1.056-3.771-1.565-5.621C4.898,8.726,4.644,7.836,4.136,7.191 C3.473,6.358,2.72,7.141,2.065,7.59C1.977,7.502,2.115,7.551,2.065,7.59L2.065,7.59z"/></svg>',"video-camera":'<svg width="20" height="20" viewBox="0 0 20 20"><polygon fill="none" stroke="#000" points="19.5 5.9 19.5 14.1 14.5 10.4 14.5 15.5 .5 15.5 .5 4.5 14.5 4.5 14.5 9.6 19.5 5.9"/></svg>',users:'<svg width="20" height="20" viewBox="0 0 20 20"><circle fill="none" stroke="#000" stroke-width="1.1" cx="7.7" cy="8.6" r="3.5"/><path fill="none" stroke="#000" stroke-width="1.1" d="M1,18.1 C1.7,14.6 4.4,12.1 7.6,12.1 C10.9,12.1 13.7,14.8 14.3,18.3"/><path fill="none" stroke="#000" stroke-width="1.1" d="M11.4,4 C12.8,2.4 15.4,2.8 16.3,4.7 C17.2,6.6 15.7,8.9 13.6,8.9 C16.5,8.9 18.8,11.3 19.2,14.1"/></svg>',user:'<svg width="20" height="20" viewBox="0 0 20 20"><circle fill="none" stroke="#000" stroke-width="1.1" cx="9.9" cy="6.4" r="4.4"/><path fill="none" stroke="#000" stroke-width="1.1" d="M1.5,19 C2.3,14.5 5.8,11.2 10,11.2 C14.2,11.2 17.7,14.6 18.5,19.2"/></svg>',upload:'<svg width="20" height="20" viewBox="0 0 20 20"><polyline fill="none" stroke="#000" points="5 8 9.5 3.5 14 8"/><rect x="3" y="17" width="13" height="1"/><line fill="none" stroke="#000" x1="9.5" y1="15" x2="9.5" y2="4"/></svg>',unlock:'<svg width="20" height="20" viewBox="0 0 20 20"><rect fill="none" stroke="#000" x="3.5" y="8.5" width="13" height="10"/><path fill="none" stroke="#000" d="M6.5,8.5 L6.5,4.9 C6.5,3 8.1,1.5 10,1.5 C11.9,1.5 13.5,3 13.5,4.9"/></svg>',uikit:'<svg width="20" height="20" viewBox="0 0 20 20"><polygon points="14.4,3.1 11.3,5.1 15,7.3 15,12.9 10,15.7 5,12.9 5,8.5 2,6.8 2,14.8 9.9,19.5 18,14.8 18,5.3"/><polygon points="9.8,4.2 6.7,2.4 9.8,0.4 12.9,2.3"/></svg>',twitter:'<svg width="20" height="20" viewBox="0 0 20 20"><path d="M19,4.74 C18.339,5.029 17.626,5.229 16.881,5.32 C17.644,4.86 18.227,4.139 18.503,3.28 C17.79,3.7 17.001,4.009 16.159,4.17 C15.485,3.45 14.526,3 13.464,3 C11.423,3 9.771,4.66 9.771,6.7 C9.771,6.99 9.804,7.269 9.868,7.539 C6.795,7.38 4.076,5.919 2.254,3.679 C1.936,4.219 1.754,4.86 1.754,5.539 C1.754,6.82 2.405,7.95 3.397,8.61 C2.79,8.589 2.22,8.429 1.723,8.149 L1.723,8.189 C1.723,9.978 2.997,11.478 4.686,11.82 C4.376,11.899 4.049,11.939 3.713,11.939 C3.475,11.939 3.245,11.919 3.018,11.88 C3.49,13.349 4.852,14.419 6.469,14.449 C5.205,15.429 3.612,16.019 1.882,16.019 C1.583,16.019 1.29,16.009 1,15.969 C2.635,17.019 4.576,17.629 6.662,17.629 C13.454,17.629 17.17,12 17.17,7.129 C17.17,6.969 17.166,6.809 17.157,6.649 C17.879,6.129 18.504,5.478 19,4.74"/></svg>',twitch:'<svg width="20" height="20" viewBox="0 0 20 20"><path d="M5.23,1,2,4.23V15.85H5.88v3.23L9.1,15.85h2.59L17.5,10V1Zm11,8.4L13.62,12H11L8.78,14.24V12H5.88V2.29H16.21Z"/><rect x="12.98" y="4.55" width="1.29" height="3.88"/><rect x="9.43" y="4.55" width="1.29" height="3.88"/></svg>',tv:'<svg width="20" height="20" viewBox="0 0 20 20"><rect x="7" y="16" width="6" height="1"/><rect fill="none" stroke="#000" x=".5" y="3.5" width="19" height="11"/></svg>',tumblr:'<svg width="20" height="20" viewBox="0 0 20 20"><path d="M6.885,8.598c0,0,0,3.393,0,4.996c0,0.282,0,0.66,0.094,0.942c0.377,1.509,1.131,2.545,2.545,3.11 c1.319,0.472,2.356,0.472,3.676,0c0.565-0.188,1.132-0.659,1.132-0.659l-0.849-2.263c0,0-1.036,0.378-1.603,0.283 c-0.565-0.094-1.226-0.66-1.226-1.508c0-1.603,0-4.902,0-4.902h2.828V5.771h-2.828V2H8.205c0,0-0.094,0.66-0.188,0.942 C7.828,3.791,7.262,4.733,6.603,5.394C5.848,6.147,5,6.43,5,6.43v2.168H6.885z"/></svg>',tripadvisor:'<svg width="20" height="20" viewBox="0 0 20 20"><path d="M19.021,7.866C19.256,6.862,20,5.854,20,5.854h-3.346C14.781,4.641,12.504,4,9.98,4C7.363,4,4.999,4.651,3.135,5.876H0	c0,0,0.738,0.987,0.976,1.988c-0.611,0.837-0.973,1.852-0.973,2.964c0,2.763,2.249,5.009,5.011,5.009	c1.576,0,2.976-0.737,3.901-1.879l1.063,1.599l1.075-1.615c0.475,0.611,1.1,1.111,1.838,1.451c1.213,0.547,2.574,0.612,3.825,0.15	c2.589-0.963,3.913-3.852,2.964-6.439c-0.175-0.463-0.4-0.876-0.675-1.238H19.021z M16.38,14.594	c-1.002,0.371-2.088,0.328-3.06-0.119c-0.688-0.317-1.252-0.817-1.657-1.438c-0.164-0.25-0.313-0.52-0.417-0.811	c-0.124-0.328-0.186-0.668-0.217-1.014c-0.063-0.689,0.037-1.396,0.339-2.043c0.448-0.971,1.251-1.71,2.25-2.079	c2.075-0.765,4.375,0.3,5.14,2.366c0.762,2.066-0.301,4.37-2.363,5.134L16.38,14.594L16.38,14.594z M8.322,13.066	c-0.72,1.059-1.935,1.76-3.309,1.76c-2.207,0-4.001-1.797-4.001-3.996c0-2.203,1.795-4.002,4.001-4.002	c2.204,0,3.999,1.8,3.999,4.002c0,0.137-0.024,0.261-0.04,0.396c-0.067,0.678-0.284,1.313-0.648,1.853v-0.013H8.322z M2.472,10.775	c0,1.367,1.112,2.479,2.476,2.479c1.363,0,2.472-1.11,2.472-2.479c0-1.359-1.11-2.468-2.472-2.468	C3.584,8.306,2.473,9.416,2.472,10.775L2.472,10.775z M12.514,10.775c0,1.367,1.104,2.479,2.471,2.479	c1.363,0,2.474-1.108,2.474-2.479c0-1.359-1.11-2.468-2.474-2.468c-1.364,0-2.477,1.109-2.477,2.468H12.514z M3.324,10.775	c0-0.893,0.726-1.618,1.614-1.618c0.889,0,1.625,0.727,1.625,1.618c0,0.898-0.725,1.627-1.625,1.627	c-0.901,0-1.625-0.729-1.625-1.627H3.324z M13.354,10.775c0-0.893,0.726-1.618,1.627-1.618c0.886,0,1.61,0.727,1.61,1.618	c0,0.898-0.726,1.627-1.626,1.627s-1.625-0.729-1.625-1.627H13.354z M9.977,4.875c1.798,0,3.425,0.324,4.849,0.968	c-0.535,0.015-1.061,0.108-1.586,0.3c-1.264,0.463-2.264,1.388-2.815,2.604c-0.262,0.551-0.398,1.133-0.448,1.72	C9.79,7.905,7.677,5.873,5.076,5.82C6.501,5.208,8.153,4.875,9.94,4.875H9.977z"/></svg>',"triangle-up":'<svg width="20" height="20" viewBox="0 0 20 20"><polygon points="5 13 10 8 15 13"/></svg>',"triangle-right":'<svg width="20" height="20" viewBox="0 0 20 20"><polygon points="8 5 13 10 8 15"/></svg>',"triangle-left":'<svg width="20" height="20" viewBox="0 0 20 20"><polygon points="12 5 7 10 12 15"/></svg>',"triangle-down":'<svg width="20" height="20" viewBox="0 0 20 20"><polygon points="5 7 15 7 10 12"/></svg>',trash:'<svg width="20" height="20" viewBox="0 0 20 20"><polyline fill="none" stroke="#000" points="6.5 3 6.5 1.5 13.5 1.5 13.5 3"/><polyline fill="none" stroke="#000" points="4.5 4 4.5 18.5 15.5 18.5 15.5 4"/><rect x="8" y="7" width="1" height="9"/><rect x="11" y="7" width="1" height="9"/><rect x="2" y="3" width="16" height="1"/></svg>',tiktok:'<svg width="20" height="20" viewBox="0 0 20 20"><path d="M17.24,6V8.82a6.79,6.79,0,0,1-4-1.28v5.81A5.26,5.26,0,1,1,8,8.1a4.36,4.36,0,0,1,.72.05v2.9A2.57,2.57,0,0,0,7.64,11a2.4,2.4,0,1,0,2.77,2.38V2h2.86a4,4,0,0,0,1.84,3.38A4,4,0,0,0,17.24,6Z"/></svg>',thumbnails:'<svg width="20" height="20" viewBox="0 0 20 20"><rect fill="none" stroke="#000" x="3.5" y="3.5" width="5" height="5"/><rect fill="none" stroke="#000" x="11.5" y="3.5" width="5" height="5"/><rect fill="none" stroke="#000" x="11.5" y="11.5" width="5" height="5"/><rect fill="none" stroke="#000" x="3.5" y="11.5" width="5" height="5"/></svg>',tag:'<svg width="20" height="20" viewBox="0 0 20 20"><path fill="none" stroke="#000" stroke-width="1.1" d="M17.5,3.71 L17.5,7.72 C17.5,7.96 17.4,8.2 17.21,8.39 L8.39,17.2 C7.99,17.6 7.33,17.6 6.93,17.2 L2.8,13.07 C2.4,12.67 2.4,12.01 2.8,11.61 L11.61,2.8 C11.81,2.6 12.08,2.5 12.34,2.5 L16.19,2.5 C16.52,2.5 16.86,2.63 17.11,2.88 C17.35,3.11 17.48,3.4 17.5,3.71 L17.5,3.71 Z"/><circle cx="14" cy="6" r="1"/></svg>',tablet:'<svg width="20" height="20" viewBox="0 0 20 20"><path fill="none" stroke="#000" d="M5,18.5 C4.2,18.5 3.5,17.8 3.5,17 L3.5,3 C3.5,2.2 4.2,1.5 5,1.5 L16,1.5 C16.8,1.5 17.5,2.2 17.5,3 L17.5,17 C17.5,17.8 16.8,18.5 16,18.5 L5,18.5 L5,18.5 L5,18.5 Z"/><circle cx="10.5" cy="16.3" r=".8"/></svg>',"tablet-landscape":'<svg width="20" height="20" viewBox="0 0 20 20"><path fill="none" stroke="#000" d="M1.5,5 C1.5,4.2 2.2,3.5 3,3.5 L17,3.5 C17.8,3.5 18.5,4.2 18.5,5 L18.5,16 C18.5,16.8 17.8,17.5 17,17.5 L3,17.5 C2.2,17.5 1.5,16.8 1.5,16 L1.5,5 L1.5,5 L1.5,5 Z"/><circle cx="3.7" cy="10.5" r=".8"/></svg>',table:'<svg width="20" height="20" viewBox="0 0 20 20"><rect x="1" y="3" width="18" height="1"/><rect x="1" y="7" width="18" height="1"/><rect x="1" y="11" width="18" height="1"/><rect x="1" y="15" width="18" height="1"/></svg>',strikethrough:'<svg width="20" height="20" viewBox="0 0 20 20"><path d="M6,13.02 L6.65,13.02 C7.64,15.16 8.86,16.12 10.41,16.12 C12.22,16.12 12.92,14.93 12.92,13.89 C12.92,12.55 11.99,12.03 9.74,11.23 C8.05,10.64 6.23,10.11 6.23,7.83 C6.23,5.5 8.09,4.09 10.4,4.09 C11.44,4.09 12.13,4.31 12.72,4.54 L13.33,4 L13.81,4 L13.81,7.59 L13.16,7.59 C12.55,5.88 11.52,4.89 10.07,4.89 C8.84,4.89 7.89,5.69 7.89,7.03 C7.89,8.29 8.89,8.78 10.88,9.45 C12.57,10.03 14.38,10.6 14.38,12.91 C14.38,14.75 13.27,16.93 10.18,16.93 C9.18,16.93 8.17,16.69 7.46,16.39 L6.52,17 L6,17 L6,13.02 L6,13.02 Z"/><rect x="3" y="10" width="15" height="1"/></svg>',star:'<svg width="20" height="20" viewBox="0 0 20 20"><polygon fill="none" stroke="#000" stroke-width="1.01" points="10 2 12.63 7.27 18.5 8.12 14.25 12.22 15.25 18 10 15.27 4.75 18 5.75 12.22 1.5 8.12 7.37 7.27"/></svg>',soundcloud:'<svg width="20" height="20" viewBox="0 0 20 20"><path d="M17.2,9.4c-0.4,0-0.8,0.1-1.101,0.2c-0.199-2.5-2.399-4.5-5-4.5c-0.6,0-1.2,0.1-1.7,0.3C9.2,5.5,9.1,5.6,9.1,5.6V15h8 c1.601,0,2.801-1.2,2.801-2.8C20,10.7,18.7,9.4,17.2,9.4L17.2,9.4z"/><rect x="6" y="6.5" width="1.5" height="8.5"/><rect x="3" y="8" width="1.5" height="7"/><rect y="10" width="1.5" height="5"/></svg>',social:'<svg width="20" height="20" viewBox="0 0 20 20"><line fill="none" stroke="#000" stroke-width="1.1" x1="13.4" y1="14" x2="6.3" y2="10.7"/><line fill="none" stroke="#000" stroke-width="1.1" x1="13.5" y1="5.5" x2="6.5" y2="8.8"/><circle fill="none" stroke="#000" stroke-width="1.1" cx="15.5" cy="4.6" r="2.3"/><circle fill="none" stroke="#000" stroke-width="1.1" cx="15.5" cy="14.8" r="2.3"/><circle fill="none" stroke="#000" stroke-width="1.1" cx="4.5" cy="9.8" r="2.3"/></svg>',"sign-out":'<svg width="20" height="20" viewBox="0 0 20 20"><polygon points="13.1 13.4 12.5 12.8 15.28 10 8 10 8 9 15.28 9 12.5 6.2 13.1 5.62 17 9.5"/><polygon points="13 2 3 2 3 17 13 17 13 16 4 16 4 3 13 3"/></svg>',"sign-in":'<svg width="20" height="20" viewBox="0 0 20 20"><polygon points="7 2 17 2 17 17 7 17 7 16 16 16 16 3 7 3"/><polygon points="9.1 13.4 8.5 12.8 11.28 10 4 10 4 9 11.28 9 8.5 6.2 9.1 5.62 13 9.5"/></svg>',shrink:'<svg width="20" height="20" viewBox="0 0 20 20"><polygon points="11 4 12 4 12 8 16 8 16 9 11 9"/><polygon points="4 11 9 11 9 16 8 16 8 12 4 12"/><path fill="none" stroke="#000" stroke-width="1.1" d="M12,8 L18,2"/><path fill="none" stroke="#000" stroke-width="1.1" d="M2,18 L8,12"/></svg>',settings:'<svg width="20" height="20" viewBox="0 0 20 20"><ellipse fill="none" stroke="#000" cx="6.11" cy="3.55" rx="2.11" ry="2.15"/><ellipse fill="none" stroke="#000" cx="6.11" cy="15.55" rx="2.11" ry="2.15"/><circle fill="none" stroke="#000" cx="13.15" cy="9.55" r="2.15"/><rect x="1" y="3" width="3" height="1"/><rect x="10" y="3" width="8" height="1"/><rect x="1" y="9" width="8" height="1"/><rect x="15" y="9" width="3" height="1"/><rect x="1" y="15" width="3" height="1"/><rect x="10" y="15" width="8" height="1"/></svg>',server:'<svg width="20" height="20" viewBox="0 0 20 20"><rect x="3" y="3" width="1" height="2"/><rect x="5" y="3" width="1" height="2"/><rect x="7" y="3" width="1" height="2"/><rect x="16" y="3" width="1" height="1"/><rect x="16" y="10" width="1" height="1"/><circle fill="none" stroke="#000" cx="9.9" cy="17.4" r="1.4"/><rect x="3" y="10" width="1" height="2"/><rect x="5" y="10" width="1" height="2"/><rect x="9.5" y="14" width="1" height="2"/><rect x="3" y="17" width="6" height="1"/><rect x="11" y="17" width="6" height="1"/><rect fill="none" stroke="#000" x="1.5" y="1.5" width="17" height="5"/><rect fill="none" stroke="#000" x="1.5" y="8.5" width="17" height="5"/></svg>',search:'<svg width="20" height="20" viewBox="0 0 20 20"><circle fill="none" stroke="#000" stroke-width="1.1" cx="9" cy="9" r="7"/><path fill="none" stroke="#000" stroke-width="1.1" d="M14,14 L18,18 L14,14 Z"/></svg>',rss:'<svg width="20" height="20" viewBox="0 0 20 20"><circle cx="3.12" cy="16.8" r="1.85"/><path fill="none" stroke="#000" stroke-width="1.1" d="M1.5,8.2 C1.78,8.18 2.06,8.16 2.35,8.16 C7.57,8.16 11.81,12.37 11.81,17.57 C11.81,17.89 11.79,18.19 11.76,18.5"/><path fill="none" stroke="#000" stroke-width="1.1" d="M1.5,2.52 C1.78,2.51 2.06,2.5 2.35,2.5 C10.72,2.5 17.5,9.24 17.5,17.57 C17.5,17.89 17.49,18.19 17.47,18.5"/></svg>',reply:'<svg width="20" height="20" viewBox="0 0 20 20"><path d="M17.7,13.11 C16.12,10.02 13.84,7.85 11.02,6.61 C10.57,6.41 9.75,6.13 9,5.91 L9,2 L1,9 L9,16 L9,12.13 C10.78,12.47 12.5,13.19 14.09,14.25 C17.13,16.28 18.56,18.54 18.56,18.54 C18.56,18.54 18.81,15.28 17.7,13.11 L17.7,13.11 Z M14.82,13.53 C13.17,12.4 11.01,11.4 8,10.92 L8,13.63 L2.55,9 L8,4.25 L8,6.8 C8.3,6.86 9.16,7.02 10.37,7.49 C13.3,8.65 15.54,10.96 16.65,13.08 C16.97,13.7 17.48,14.86 17.68,16 C16.87,15.05 15.73,14.15 14.82,13.53 L14.82,13.53 Z"/></svg>',refresh:'<svg width="20" height="20" viewBox="0 0 20 20"><path fill="none" stroke="#000" stroke-width="1.1" d="M17.08,11.15 C17.09,11.31 17.1,11.47 17.1,11.64 C17.1,15.53 13.94,18.69 10.05,18.69 C6.16,18.68 3,15.53 3,11.63 C3,7.74 6.16,4.58 10.05,4.58 C10.9,4.58 11.71,4.73 12.46,5"/><polyline fill="none" stroke="#000" points="9.9 2 12.79 4.89 9.79 7.9"/></svg>',reddit:'<svg width="20" height="20" viewBox="0 0 20 20"><path d="M19 9.05a2.56 2.56 0 0 0-2.56-2.56 2.59 2.59 0 0 0-1.88.82 10.63 10.63 0 0 0-4.14-1v-.08c.58-1.62 1.58-3.89 2.7-4.1.38-.08.77.12 1.19.57a1.15 1.15 0 0 0-.06.37 1.48 1.48 0 1 0 1.51-1.45 1.43 1.43 0 0 0-.76.19A2.29 2.29 0 0 0 12.91 1c-2.11.43-3.39 4.38-3.63 5.19 0 0 0 .11-.06.11a10.65 10.65 0 0 0-3.75 1A2.56 2.56 0 0 0 1 9.05a2.42 2.42 0 0 0 .72 1.76A5.18 5.18 0 0 0 1.24 13c0 3.66 3.92 6.64 8.73 6.64s8.74-3 8.74-6.64a5.23 5.23 0 0 0-.46-2.13A2.58 2.58 0 0 0 19 9.05zm-16.88 0a1.44 1.44 0 0 1 2.27-1.19 7.68 7.68 0 0 0-2.07 1.91 1.33 1.33 0 0 1-.2-.72zM10 18.4c-4.17 0-7.55-2.4-7.55-5.4S5.83 7.53 10 7.53 17.5 10 17.5 13s-3.38 5.4-7.5 5.4zm7.69-8.61a7.62 7.62 0 0 0-2.09-1.91 1.41 1.41 0 0 1 .84-.28 1.47 1.47 0 0 1 1.44 1.45 1.34 1.34 0 0 1-.21.72z"/><path d="M6.69 12.58a1.39 1.39 0 1 1 1.39-1.39 1.38 1.38 0 0 1-1.38 1.39z"/><path d="M14.26 11.2a1.39 1.39 0 1 1-1.39-1.39 1.39 1.39 0 0 1 1.39 1.39z"/><path d="M13.09 14.88a.54.54 0 0 1-.09.77 5.3 5.3 0 0 1-3.26 1.19 5.61 5.61 0 0 1-3.4-1.22.55.55 0 1 1 .73-.83 4.09 4.09 0 0 0 5.25 0 .56.56 0 0 1 .77.09z"/></svg>',receiver:'<svg width="20" height="20" viewBox="0 0 20 20"><path fill="none" stroke="#000" stroke-width="1.01" d="M6.189,13.611C8.134,15.525 11.097,18.239 13.867,18.257C16.47,18.275 18.2,16.241 18.2,16.241L14.509,12.551L11.539,13.639L6.189,8.29L7.313,5.355L3.76,1.8C3.76,1.8 1.732,3.537 1.7,6.092C1.667,8.809 4.347,11.738 6.189,13.611"/></svg>',"quote-right":'<svg width="20" height="20" viewBox="0 0 20 20"><path d="M17.27,7.79 C17.27,9.45 16.97,10.43 15.99,12.02 C14.98,13.64 13,15.23 11.56,15.97 L11.1,15.08 C12.34,14.2 13.14,13.51 14.02,11.82 C14.27,11.34 14.41,10.92 14.49,10.54 C14.3,10.58 14.09,10.6 13.88,10.6 C12.06,10.6 10.59,9.12 10.59,7.3 C10.59,5.48 12.06,4 13.88,4 C15.39,4 16.67,5.02 17.05,6.42 C17.19,6.82 17.27,7.27 17.27,7.79 L17.27,7.79 Z"/><path d="M8.68,7.79 C8.68,9.45 8.38,10.43 7.4,12.02 C6.39,13.64 4.41,15.23 2.97,15.97 L2.51,15.08 C3.75,14.2 4.55,13.51 5.43,11.82 C5.68,11.34 5.82,10.92 5.9,10.54 C5.71,10.58 5.5,10.6 5.29,10.6 C3.47,10.6 2,9.12 2,7.3 C2,5.48 3.47,4 5.29,4 C6.8,4 8.08,5.02 8.46,6.42 C8.6,6.82 8.68,7.27 8.68,7.79 L8.68,7.79 Z"/></svg>',question:'<svg width="20" height="20" viewBox="0 0 20 20"><circle fill="none" stroke="#000" stroke-width="1.1" cx="10" cy="10" r="9"/><circle cx="9.99" cy="14.24" r="1.05"/><path fill="none" stroke="#000" stroke-width="1.2" d="m7.72,7.61c0-3.04,4.55-3.06,4.55-.07,0,.95-.91,1.43-1.49,2.03-.48.49-.72.98-.78,1.65-.01.13-.02.24-.02.35"/></svg>',push:'<svg width="20" height="20" viewBox="0 0 20 20"><polygon points="12.15,4 9.5,1.4 6.85,4 6.15,3.3 9.5,0 12.85,3.3"/><line fill="none" stroke="#000" x1="9.5" y1="10" x2="9.5" y2="1"/><polyline fill="none" stroke="#000" points="6 5.5 3.5 5.5 3.5 18.5 15.5 18.5 15.5 5.5 13 5.5"/></svg>',pull:'<svg width="20" height="20" viewBox="0 0 20 20"><polygon points="6.85,8 9.5,10.6 12.15,8 12.85,8.7 9.5,12 6.15,8.7"/><line fill="none" stroke="#000" x1="9.5" y1="11" x2="9.5" y2="2"/><polyline fill="none" stroke="#000" points="6,5.5 3.5,5.5 3.5,18.5 15.5,18.5 15.5,5.5 13,5.5"/></svg>',print:'<svg width="20" height="20" viewBox="0 0 20 20"><polyline fill="none" stroke="#000" points="4.5 13.5 1.5 13.5 1.5 6.5 18.5 6.5 18.5 13.5 15.5 13.5"/><polyline fill="none" stroke="#000" points="15.5 6.5 15.5 2.5 4.5 2.5 4.5 6.5"/><rect fill="none" stroke="#000" width="11" height="6" x="4.5" y="11.5"/><rect width="8" height="1" x="6" y="13"/><rect width="8" height="1" x="6" y="15"/></svg>',plus:'<svg width="20" height="20" viewBox="0 0 20 20"><rect x="9" y="1" width="1" height="17"/><rect x="1" y="9" width="17" height="1"/></svg>',"plus-circle":'<svg width="20" height="20" viewBox="0 0 20 20"><circle fill="none" stroke="#000" stroke-width="1.1" cx="9.5" cy="9.5" r="9"/><line fill="none" stroke="#000" x1="9.5" y1="5" x2="9.5" y2="14"/><line fill="none" stroke="#000" x1="5" y1="9.5" x2="14" y2="9.5"/></svg>',play:'<svg width="20" height="20" viewBox="0 0 20 20"><polygon fill="none" stroke="#000" points="6.5,5 14.5,10 6.5,15"/></svg>',"play-circle":'<svg width="20" height="20" viewBox="0 0 20 20"><polygon fill="none" stroke="#000" stroke-width="1.1" points="8.5 7 13.5 10 8.5 13"/><circle fill="none" stroke="#000" stroke-width="1.1" cx="10" cy="10" r="9"/></svg>',pinterest:'<svg width="20" height="20" viewBox="0 0 20 20"><path d="M10.21,1 C5.5,1 3,4.16 3,7.61 C3,9.21 3.85,11.2 5.22,11.84 C5.43,11.94 5.54,11.89 5.58,11.69 C5.62,11.54 5.8,10.8 5.88,10.45 C5.91,10.34 5.89,10.24 5.8,10.14 C5.36,9.59 5,8.58 5,7.65 C5,5.24 6.82,2.91 9.93,2.91 C12.61,2.91 14.49,4.74 14.49,7.35 C14.49,10.3 13,12.35 11.06,12.35 C9.99,12.35 9.19,11.47 9.44,10.38 C9.75,9.08 10.35,7.68 10.35,6.75 C10.35,5.91 9.9,5.21 8.97,5.21 C7.87,5.21 6.99,6.34 6.99,7.86 C6.99,8.83 7.32,9.48 7.32,9.48 C7.32,9.48 6.24,14.06 6.04,14.91 C5.7,16.35 6.08,18.7 6.12,18.9 C6.14,19.01 6.26,19.05 6.33,18.95 C6.44,18.81 7.74,16.85 8.11,15.44 C8.24,14.93 8.79,12.84 8.79,12.84 C9.15,13.52 10.19,14.09 11.29,14.09 C14.58,14.09 16.96,11.06 16.96,7.3 C16.94,3.7 14,1 10.21,1"/></svg>',phone:'<svg width="20" height="20" viewBox="0 0 20 20"><path fill="none" stroke="#000" d="M15.5,17 C15.5,17.8 14.8,18.5 14,18.5 L7,18.5 C6.2,18.5 5.5,17.8 5.5,17 L5.5,3 C5.5,2.2 6.2,1.5 7,1.5 L14,1.5 C14.8,1.5 15.5,2.2 15.5,3 L15.5,17 L15.5,17 L15.5,17 Z"/><circle cx="10.5" cy="16.5" r=".8"/></svg>',"phone-landscape":'<svg width="20" height="20" viewBox="0 0 20 20"><path fill="none" stroke="#000" d="M17,5.5 C17.8,5.5 18.5,6.2 18.5,7 L18.5,14 C18.5,14.8 17.8,15.5 17,15.5 L3,15.5 C2.2,15.5 1.5,14.8 1.5,14 L1.5,7 C1.5,6.2 2.2,5.5 3,5.5 L17,5.5 L17,5.5 L17,5.5 Z"/><circle cx="3.8" cy="10.5" r=".8"/></svg>',pencil:'<svg width="20" height="20" viewBox="0 0 20 20"><path fill="none" stroke="#000" d="M17.25,6.01 L7.12,16.1 L3.82,17.2 L5.02,13.9 L15.12,3.88 C15.71,3.29 16.66,3.29 17.25,3.88 C17.83,4.47 17.83,5.42 17.25,6.01 L17.25,6.01 Z"/><path fill="none" stroke="#000" d="M15.98,7.268 L13.851,5.148"/></svg>',"paint-bucket":'<svg width="20" height="20" viewBox="0 0 20 20"><path fill="none" stroke="#000" stroke-width="1.1" d="m6.42,2.16l5.28,5.28"/><path d="m18.49,11.83s1.51,2.06,1.51,3.36c0,.92-.76,1.64-1.51,1.64h0c-.75,0-1.49-.72-1.49-1.64,0-1.3,1.49-3.36,1.49-3.36h0Z"/><line fill="none" stroke="#000" x1="1.26" y1="10.5" x2="16" y2="10.5"/><polygon fill="none" stroke="#000" stroke-width="1.1" points="10.2 1.55 17.6 8.93 8.08 18.45 .7 11.07 10.2 1.55"/></svg>',pagekit:'<svg width="20" height="20" viewBox="0 0 20 20"><polygon points="3,1 17,1 17,16 10,16 10,13 14,13 14,4 6,4 6,16 10,16 10,19 3,19"/></svg>',nut:'<svg width="20" height="20" viewBox="0 0 20 20"><polygon fill="none" stroke="#000" points="2.5,5.7 10,1.3 17.5,5.7 17.5,14.3 10,18.7 2.5,14.3"/><circle fill="none" stroke="#000" cx="10" cy="10" r="3.5"/></svg>',move:'<svg width="20" height="20" viewBox="0 0 20 20"><polygon points="4,5 1,5 1,9 2,9 2,6 4,6"/><polygon points="1,16 2,16 2,18 4,18 4,19 1,19"/><polygon points="14,16 14,19 11,19 11,18 13,18 13,16"/><rect fill="none" stroke="#000" x="5.5" y="1.5" width="13" height="13"/><rect x="1" y="11" width="1" height="3"/><rect x="6" y="18" width="3" height="1"/></svg>',more:'<svg width="20" height="20" viewBox="0 0 20 20"><circle cx="3" cy="10" r="2"/><circle cx="10" cy="10" r="2"/><circle cx="17" cy="10" r="2"/></svg>',"more-vertical":'<svg width="20" height="20" viewBox="0 0 20 20"><circle cx="10" cy="3" r="2"/><circle cx="10" cy="10" r="2"/><circle cx="10" cy="17" r="2"/></svg>',minus:'<svg width="20" height="20" viewBox="0 0 20 20"><rect height="1" width="18" y="9" x="1"/></svg>',"minus-circle":'<svg width="20" height="20" viewBox="0 0 20 20"><circle fill="none" stroke="#000" stroke-width="1.1" cx="9.5" cy="9.5" r="9"/><line fill="none" stroke="#000" x1="5" y1="9.5" x2="14" y2="9.5"/></svg>',microsoft:'<svg width="20" height="20" viewBox="0 0 20 20"><path d="m2,2h7.58v7.58H2V2Zm8.42,0h7.58v7.58h-7.58V2ZM2,10.42h7.58v7.58H2v-7.58Zm8.42,0h7.58v7.58h-7.58"/></svg>',microphone:'<svg width="20" height="20" viewBox="0 0 20 20"><line fill="none" stroke="#000" x1="10" x2="10" y1="16.44" y2="18.5"/><line fill="none" stroke="#000" x1="7" x2="13" y1="18.5" y2="18.5"/><path fill="none" stroke="#000" stroke-width="1.1" d="M13.5 4.89v5.87a3.5 3.5 0 0 1-7 0V4.89a3.5 3.5 0 0 1 7 0z"/><path fill="none" stroke="#000" stroke-width="1.1" d="M15.5 10.36V11a5.5 5.5 0 0 1-11 0v-.6"/></svg>',menu:'<svg width="20" height="20" viewBox="0 0 20 20"><rect x="2" y="4" width="16" height="1"/><rect x="2" y="9" width="16" height="1"/><rect x="2" y="14" width="16" height="1"/></svg>',mastodon:'<svg width="20" height="20" viewBox="0 0 20 20"><path d="m18.5,6.87c0-3.95-2.59-5.11-2.59-5.11-1.31-.6-3.55-.85-5.88-.87h-.06c-2.33.02-4.57.27-5.88.87,0,0-2.59,1.16-2.59,5.11,0,.91-.02,1.99.01,3.14.09,3.87.71,7.68,4.28,8.62,1.65.44,3.06.53,4.2.47,2.07-.11,3.23-.74,3.23-.74l-.07-1.5s-1.48.47-3.14.41c-1.64-.06-3.38-.18-3.64-2.2-.02-.18-.04-.37-.04-.57,0,0,1.61.39,3.66.49,1.25.06,2.42-.07,3.61-.22,2.28-.27,4.27-1.68,4.52-2.97.39-2.02.36-4.94.36-4.94Zm-3.05,5.09h-1.9v-4.65c0-.98-.41-1.48-1.24-1.48-.91,0-1.37.59-1.37,1.76v2.54h-1.89v-2.54c0-1.17-.46-1.76-1.37-1.76-.82,0-1.24.5-1.24,1.48v4.65h-1.9v-4.79c0-.98.25-1.76.75-2.33.52-.58,1.19-.87,2.03-.87.97,0,1.71.37,2.19,1.12l.47.79.47-.79c.49-.75,1.22-1.12,2.19-1.12.84,0,1.51.29,2.03.87.5.58.75,1.35.75,2.33v4.79Z"/></svg>',mail:'<svg width="20" height="20" viewBox="0 0 20 20"><polyline fill="none" stroke="#000" points="1.4,6.5 10,11 18.6,6.5"/><path d="M 1,4 1,16 19,16 19,4 1,4 Z M 18,15 2,15 2,5 18,5 18,15 Z"/></svg>',lock:'<svg width="20" height="20" viewBox="0 0 20 20"><rect fill="none" stroke="#000" height="10" width="13" y="8.5" x="3.5"/><path fill="none" stroke="#000" d="M6.5,8 L6.5,4.88 C6.5,3.01 8.07,1.5 10,1.5 C11.93,1.5 13.5,3.01 13.5,4.88 L13.5,8"/></svg>',location:'<svg width="20" height="20" viewBox="0 0 20 20"><path fill="none" stroke="#000" stroke-width="1.01" d="M10,0.5 C6.41,0.5 3.5,3.39 3.5,6.98 C3.5,11.83 10,19 10,19 C10,19 16.5,11.83 16.5,6.98 C16.5,3.39 13.59,0.5 10,0.5 L10,0.5 Z"/><circle fill="none" stroke="#000" cx="10" cy="6.8" r="2.3"/></svg>',list:'<svg width="20" height="20" viewBox="0 0 20 20"><rect x="6" y="4" width="12" height="1"/><rect x="6" y="9" width="12" height="1"/><rect x="6" y="14" width="12" height="1"/><rect x="2" y="4" width="2" height="1"/><rect x="2" y="9" width="2" height="1"/><rect x="2" y="14" width="2" height="1"/></svg>',linkedin:'<svg width="20" height="20" viewBox="0 0 20 20"><path d="M5.77,17.89 L5.77,7.17 L2.21,7.17 L2.21,17.89 L5.77,17.89 L5.77,17.89 Z M3.99,5.71 C5.23,5.71 6.01,4.89 6.01,3.86 C5.99,2.8 5.24,2 4.02,2 C2.8,2 2,2.8 2,3.85 C2,4.88 2.77,5.7 3.97,5.7 L3.99,5.7 L3.99,5.71 L3.99,5.71 Z"/><path d="M7.75,17.89 L11.31,17.89 L11.31,11.9 C11.31,11.58 11.33,11.26 11.43,11.03 C11.69,10.39 12.27,9.73 13.26,9.73 C14.55,9.73 15.06,10.71 15.06,12.15 L15.06,17.89 L18.62,17.89 L18.62,11.74 C18.62,8.45 16.86,6.92 14.52,6.92 C12.6,6.92 11.75,7.99 11.28,8.73 L11.3,8.73 L11.3,7.17 L7.75,7.17 C7.79,8.17 7.75,17.89 7.75,17.89 L7.75,17.89 L7.75,17.89 Z"/></svg>',link:'<svg width="20" height="20" viewBox="0 0 20 20"><path fill="none" stroke="#000" stroke-width="1.1" d="M10.625,12.375 L7.525,15.475 C6.825,16.175 5.925,16.175 5.225,15.475 L4.525,14.775 C3.825,14.074 3.825,13.175 4.525,12.475 L7.625,9.375"/><path fill="none" stroke="#000" stroke-width="1.1" d="M9.325,7.375 L12.425,4.275 C13.125,3.575 14.025,3.575 14.724,4.275 L15.425,4.975 C16.125,5.675 16.125,6.575 15.425,7.275 L12.325,10.375"/><path fill="none" stroke="#000" stroke-width="1.1" d="M7.925,11.875 L11.925,7.975"/></svg>',lifesaver:'<svg width="20" height="20" viewBox="0 0 20 20"><circle fill="none" stroke="#000" cx="10" cy="10" r="9"/><circle fill="none" stroke="#000" cx="10" cy="10" r="5"/><line fill="none" stroke="#000" stroke-width="1.1" x1="5.17" y1="2.39" x2="8.11" y2="5.33"/><line fill="none" stroke="#000" stroke-width="1.1" x1="5.33" y1="8.11" x2="2.39" y2="5.17"/><line fill="none" stroke="#000" stroke-width="1.1" x1="14.83" y1="17.61" x2="11.89" y2="14.67"/><line fill="none" stroke="#000" stroke-width="1.1" x1="14.67" y1="11.89" x2="17.61" y2="14.83"/><line fill="none" stroke="#000" stroke-width="1.1" x1="17.61" y1="5.17" x2="14.67" y2="8.11"/><line fill="none" stroke="#000" stroke-width="1.1" x1="11.89" y1="5.33" x2="14.83" y2="2.39"/><line fill="none" stroke="#000" stroke-width="1.1" x1="8.11" y1="14.67" x2="5.17" y2="17.61"/><line fill="none" stroke="#000" stroke-width="1.1" x1="2.39" y1="14.83" x2="5.33" y2="11.89"/></svg>',laptop:'<svg width="20" height="20" viewBox="0 0 20 20"><rect y="16" width="20" height="1"/><rect fill="none" stroke="#000" x="2.5" y="4.5" width="15" height="10"/></svg>',joomla:'<svg width="20" height="20" viewBox="0 0 20 20"><path d="M7.8,13.4l1.7-1.7L5.9,8c-0.6-0.5-0.6-1.5,0-2c0.6-0.6,1.4-0.6,2,0l1.7-1.7c-1-1-2.3-1.3-3.6-1C5.8,2.2,4.8,1.4,3.7,1.4 c-1.3,0-2.3,1-2.3,2.3c0,1.1,0.8,2,1.8,2.3c-0.4,1.3-0.1,2.8,1,3.8L7.8,13.4L7.8,13.4z"/><path d="M10.2,4.3c1-1,2.5-1.4,3.8-1c0.2-1.1,1.1-2,2.3-2c1.3,0,2.3,1,2.3,2.3c0,1.2-0.9,2.2-2,2.3c0.4,1.3,0,2.8-1,3.8L13.9,8 c0.6-0.5,0.6-1.5,0-2c-0.5-0.6-1.5-0.6-2,0L8.2,9.7L6.5,8"/><path d="M14.1,16.8c-1.3,0.4-2.8,0.1-3.8-1l1.7-1.7c0.6,0.6,1.5,0.6,2,0c0.5-0.6,0.6-1.5,0-2l-3.7-3.7L12,6.7l3.7,3.7 c1,1,1.3,2.4,1,3.6c1.1,0.2,2,1.1,2,2.3c0,1.3-1,2.3-2.3,2.3C15.2,18.6,14.3,17.8,14.1,16.8"/><path d="M13.2,12.2l-3.7,3.7c-1,1-2.4,1.3-3.6,1c-0.2,1-1.2,1.8-2.2,1.8c-1.3,0-2.3-1-2.3-2.3c0-1.1,0.8-2,1.8-2.3 c-0.3-1.3,0-2.7,1-3.7l1.7,1.7c-0.6,0.6-0.6,1.5,0,2c0.6,0.6,1.4,0.6,2,0l3.7-3.7"/></svg>',italic:'<svg width="20" height="20" viewBox="0 0 20 20"><path d="M12.63,5.48 L10.15,14.52 C10,15.08 10.37,15.25 11.92,15.3 L11.72,16 L6,16 L6.2,15.31 C7.78,15.26 8.19,15.09 8.34,14.53 L10.82,5.49 C10.97,4.92 10.63,4.76 9.09,4.71 L9.28,4 L15,4 L14.81,4.69 C13.23,4.75 12.78,4.91 12.63,5.48 L12.63,5.48 Z"/></svg>',instagram:'<svg width="20" height="20" viewBox="0 0 20 20"><path d="M13.55,1H6.46C3.45,1,1,3.44,1,6.44v7.12c0,3,2.45,5.44,5.46,5.44h7.08c3.02,0,5.46-2.44,5.46-5.44V6.44 C19.01,3.44,16.56,1,13.55,1z M17.5,14c0,1.93-1.57,3.5-3.5,3.5H6c-1.93,0-3.5-1.57-3.5-3.5V6c0-1.93,1.57-3.5,3.5-3.5h8 c1.93,0,3.5,1.57,3.5,3.5V14z"/><circle cx="14.87" cy="5.26" r="1.09"/><path d="M10.03,5.45c-2.55,0-4.63,2.06-4.63,4.6c0,2.55,2.07,4.61,4.63,4.61c2.56,0,4.63-2.061,4.63-4.61 C14.65,7.51,12.58,5.45,10.03,5.45L10.03,5.45L10.03,5.45z M10.08,13c-1.66,0-3-1.34-3-2.99c0-1.65,1.34-2.99,3-2.99s3,1.34,3,2.99 C13.08,11.66,11.74,13,10.08,13L10.08,13L10.08,13z"/></svg>',info:'<svg width="20" height="20" viewBox="0 0 20 20"><path d="M12.13,11.59 C11.97,12.84 10.35,14.12 9.1,14.16 C6.17,14.2 9.89,9.46 8.74,8.37 C9.3,8.16 10.62,7.83 10.62,8.81 C10.62,9.63 10.12,10.55 9.88,11.32 C8.66,15.16 12.13,11.15 12.14,11.18 C12.16,11.21 12.16,11.35 12.13,11.59 C12.08,11.95 12.16,11.35 12.13,11.59 L12.13,11.59 Z M11.56,5.67 C11.56,6.67 9.36,7.15 9.36,6.03 C9.36,5 11.56,4.54 11.56,5.67 L11.56,5.67 Z"/><circle fill="none" stroke="#000" stroke-width="1.1" cx="10" cy="10" r="9"/></svg>',image:'<svg width="20" height="20" viewBox="0 0 20 20"><circle cx="16.1" cy="6.1" r="1.1"/><rect fill="none" stroke="#000" x=".5" y="2.5" width="19" height="15"/><polyline fill="none" stroke="#000" stroke-width="1.01" points="4,13 8,9 13,14"/><polyline fill="none" stroke="#000" stroke-width="1.01" points="11,12 12.5,10.5 16,14"/></svg>',home:'<svg width="20" height="20" viewBox="0 0 20 20"><polygon points="18.65 11.35 10 2.71 1.35 11.35 0.65 10.65 10 1.29 19.35 10.65"/><polygon points="15 4 18 4 18 7 17 7 17 5 15 5"/><polygon points="3 11 4 11 4 18 7 18 7 12 12 12 12 18 16 18 16 11 17 11 17 19 11 19 11 13 8 13 8 19 3 19"/></svg>',history:'<svg width="20" height="20" viewBox="0 0 20 20"><polyline fill="#000" points="1 2 2 2 2 6 6 6 6 7 1 7 1 2"/><path fill="none" stroke="#000" stroke-width="1.1" d="M2.1,6.548 C3.391,3.29 6.746,1 10.5,1 C15.5,1 19.5,5 19.5,10 C19.5,15 15.5,19 10.5,19 C5.5,19 1.5,15 1.5,10"/><rect x="9" y="4" width="1" height="7"/><path fill="none" stroke="#000" stroke-width="1.1" d="M13.018,14.197 L9.445,10.625"/></svg>',heart:'<svg width="20" height="20" viewBox="0 0 20 20"><path fill="none" stroke="#000" stroke-width="1.03" d="M10,4 C10,4 8.1,2 5.74,2 C3.38,2 1,3.55 1,6.73 C1,8.84 2.67,10.44 2.67,10.44 L10,18 L17.33,10.44 C17.33,10.44 19,8.84 19,6.73 C19,3.55 16.62,2 14.26,2 C11.9,2 10,4 10,4 L10,4 Z"/></svg>',hashtag:'<svg width="20" height="20" viewBox="0 0 20 20"><path d="M15.431,8 L15.661,7 L12.911,7 L13.831,3 L12.901,3 L11.98,7 L9.29,7 L10.21,3 L9.281,3 L8.361,7 L5.23,7 L5,8 L8.13,8 L7.21,12 L4.23,12 L4,13 L6.98,13 L6.061,17 L6.991,17 L7.911,13 L10.601,13 L9.681,17 L10.611,17 L11.531,13 L14.431,13 L14.661,12 L11.76,12 L12.681,8 L15.431,8 Z M10.831,12 L8.141,12 L9.061,8 L11.75,8 L10.831,12 Z"/></svg>',happy:'<svg width="20" height="20" viewBox="0 0 20 20"><circle cx="13" cy="7" r="1"/><circle cx="7" cy="7" r="1"/><circle fill="none" stroke="#000" cx="10" cy="10" r="8.5"/><path fill="none" stroke="#000" d="M14.6,11.4 C13.9,13.3 12.1,14.5 10,14.5 C7.9,14.5 6.1,13.3 5.4,11.4"/></svg>',grid:'<svg width="20" height="20" viewBox="0 0 20 20"><rect x="2" y="2" width="3" height="3"/><rect x="8" y="2" width="3" height="3"/><rect x="14" y="2" width="3" height="3"/><rect x="2" y="8" width="3" height="3"/><rect x="8" y="8" width="3" height="3"/><rect x="14" y="8" width="3" height="3"/><rect x="2" y="14" width="3" height="3"/><rect x="8" y="14" width="3" height="3"/><rect x="14" y="14" width="3" height="3"/></svg>',google:'<svg width="20" height="20" viewBox="0 0 20 20"><path d="M17.86,9.09 C18.46,12.12 17.14,16.05 13.81,17.56 C9.45,19.53 4.13,17.68 2.47,12.87 C0.68,7.68 4.22,2.42 9.5,2.03 C11.57,1.88 13.42,2.37 15.05,3.65 C15.22,3.78 15.37,3.93 15.61,4.14 C14.9,4.81 14.23,5.45 13.5,6.14 C12.27,5.08 10.84,4.72 9.28,4.98 C8.12,5.17 7.16,5.76 6.37,6.63 C4.88,8.27 4.62,10.86 5.76,12.82 C6.95,14.87 9.17,15.8 11.57,15.25 C13.27,14.87 14.76,13.33 14.89,11.75 L10.51,11.75 L10.51,9.09 L17.86,9.09 L17.86,9.09 Z"/></svg>',gitter:'<svg width="20" height="20" viewBox="0 0 20 20"><rect x="3.5" y="1" width="1.531" height="11.471"/><rect x="7.324" y="4.059" width="1.529" height="15.294"/><rect x="11.148" y="4.059" width="1.527" height="15.294"/><rect x="14.971" y="4.059" width="1.529" height="8.412"/></svg>',github:'<svg width="20" height="20" viewBox="0 0 20 20"><path d="M10,1 C5.03,1 1,5.03 1,10 C1,13.98 3.58,17.35 7.16,18.54 C7.61,18.62 7.77,18.34 7.77,18.11 C7.77,17.9 7.76,17.33 7.76,16.58 C5.26,17.12 4.73,15.37 4.73,15.37 C4.32,14.33 3.73,14.05 3.73,14.05 C2.91,13.5 3.79,13.5 3.79,13.5 C4.69,13.56 5.17,14.43 5.17,14.43 C5.97,15.8 7.28,15.41 7.79,15.18 C7.87,14.6 8.1,14.2 8.36,13.98 C6.36,13.75 4.26,12.98 4.26,9.53 C4.26,8.55 4.61,7.74 5.19,7.11 C5.1,6.88 4.79,5.97 5.28,4.73 C5.28,4.73 6.04,4.49 7.75,5.65 C8.47,5.45 9.24,5.35 10,5.35 C10.76,5.35 11.53,5.45 12.25,5.65 C13.97,4.48 14.72,4.73 14.72,4.73 C15.21,5.97 14.9,6.88 14.81,7.11 C15.39,7.74 15.73,8.54 15.73,9.53 C15.73,12.99 13.63,13.75 11.62,13.97 C11.94,14.25 12.23,14.8 12.23,15.64 C12.23,16.84 12.22,17.81 12.22,18.11 C12.22,18.35 12.38,18.63 12.84,18.54 C16.42,17.35 19,13.98 19,10 C19,5.03 14.97,1 10,1 L10,1 Z"/></svg>',"github-alt":'<svg width="20" height="20" viewBox="0 0 20 20"><path d="M10,0.5 C4.75,0.5 0.5,4.76 0.5,10.01 C0.5,15.26 4.75,19.51 10,19.51 C15.24,19.51 19.5,15.26 19.5,10.01 C19.5,4.76 15.25,0.5 10,0.5 L10,0.5 Z M12.81,17.69 C12.81,17.69 12.81,17.7 12.79,17.69 C12.47,17.75 12.35,17.59 12.35,17.36 L12.35,16.17 C12.35,15.45 12.09,14.92 11.58,14.56 C12.2,14.51 12.77,14.39 13.26,14.21 C13.87,13.98 14.36,13.69 14.74,13.29 C15.42,12.59 15.76,11.55 15.76,10.17 C15.76,9.25 15.45,8.46 14.83,7.8 C15.1,7.08 15.07,6.29 14.75,5.44 L14.51,5.42 C14.34,5.4 14.06,5.46 13.67,5.61 C13.25,5.78 12.79,6.03 12.31,6.35 C11.55,6.16 10.81,6.05 10.09,6.05 C9.36,6.05 8.61,6.15 7.88,6.35 C7.28,5.96 6.75,5.68 6.26,5.54 C6.07,5.47 5.9,5.44 5.78,5.44 L5.42,5.44 C5.06,6.29 5.04,7.08 5.32,7.8 C4.7,8.46 4.4,9.25 4.4,10.17 C4.4,11.94 4.96,13.16 6.08,13.84 C6.53,14.13 7.05,14.32 7.69,14.43 C8.03,14.5 8.32,14.54 8.55,14.55 C8.07,14.89 7.82,15.42 7.82,16.16 L7.82,17.51 C7.8,17.69 7.7,17.8 7.51,17.8 C4.21,16.74 1.82,13.65 1.82,10.01 C1.82,5.5 5.49,1.83 10,1.83 C14.5,1.83 18.17,5.5 18.17,10.01 C18.18,13.53 15.94,16.54 12.81,17.69 L12.81,17.69 Z"/></svg>',"git-fork":'<svg width="20" height="20" viewBox="0 0 20 20"><circle fill="none" stroke="#000" stroke-width="1.2" cx="5.79" cy="2.79" r="1.79"/><circle fill="none" stroke="#000" stroke-width="1.2" cx="14.19" cy="2.79" r="1.79"/><circle fill="none" stroke="#000" stroke-width="1.2" cx="10.03" cy="16.79" r="1.79"/><path fill="none" stroke="#000" stroke-width="2" d="M5.79,4.57 L5.79,6.56 C5.79,9.19 10.03,10.22 10.03,13.31 C10.03,14.86 10.04,14.55 10.04,14.55 C10.04,14.37 10.04,14.86 10.04,13.31 C10.04,10.22 14.2,9.19 14.2,6.56 L14.2,4.57"/></svg>',"git-branch":'<svg width="20" height="20" viewBox="0 0 20 20"><circle fill="none" stroke="#000" stroke-width="1.2" cx="7" cy="3" r="2"/><circle fill="none" stroke="#000" stroke-width="1.2" cx="14" cy="6" r="2"/><circle fill="none" stroke="#000" stroke-width="1.2" cx="7" cy="17" r="2"/><path fill="none" stroke="#000" stroke-width="2" d="M14,8 C14,10.41 12.43,10.87 10.56,11.25 C9.09,11.54 7,12.06 7,15 L7,5"/></svg>',future:'<svg width="20" height="20" viewBox="0 0 20 20"><polyline points="19 2 18 2 18 6 14 6 14 7 19 7 19 2"/><path fill="none" stroke="#000" stroke-width="1.1" d="M18,6.548 C16.709,3.29 13.354,1 9.6,1 C4.6,1 0.6,5 0.6,10 C0.6,15 4.6,19 9.6,19 C14.6,19 18.6,15 18.6,10"/><rect x="9" y="4" width="1" height="7"/><path d="M13.018,14.197 L9.445,10.625" fill="none" stroke="#000" stroke-width="1.1"/></svg>',foursquare:'<svg width="20" height="20" viewBox="0 0 20 20"><path d="M15.23,2 C15.96,2 16.4,2.41 16.5,2.86 C16.57,3.15 16.56,3.44 16.51,3.73 C16.46,4.04 14.86,11.72 14.75,12.03 C14.56,12.56 14.16,12.82 13.61,12.83 C13.03,12.84 11.09,12.51 10.69,13 C10.38,13.38 7.79,16.39 6.81,17.53 C6.61,17.76 6.4,17.96 6.08,17.99 C5.68,18.04 5.29,17.87 5.17,17.45 C5.12,17.28 5.1,17.09 5.1,16.91 C5.1,12.4 4.86,7.81 5.11,3.31 C5.17,2.5 5.81,2.12 6.53,2 L15.23,2 L15.23,2 Z M9.76,11.42 C9.94,11.19 10.17,11.1 10.45,11.1 L12.86,11.1 C13.12,11.1 13.31,10.94 13.36,10.69 C13.37,10.64 13.62,9.41 13.74,8.83 C13.81,8.52 13.53,8.28 13.27,8.28 C12.35,8.29 11.42,8.28 10.5,8.28 C9.84,8.28 9.83,7.69 9.82,7.21 C9.8,6.85 10.13,6.55 10.5,6.55 C11.59,6.56 12.67,6.55 13.76,6.55 C14.03,6.55 14.23,6.4 14.28,6.14 C14.34,5.87 14.67,4.29 14.67,4.29 C14.67,4.29 14.82,3.74 14.19,3.74 L7.34,3.74 C7,3.75 6.84,4.02 6.84,4.33 C6.84,7.58 6.85,14.95 6.85,14.99 C6.87,15 8.89,12.51 9.76,11.42 L9.76,11.42 Z"/></svg>',forward:'<svg width="20" height="20" viewBox="0 0 20 20"><path d="M2.47,13.11 C4.02,10.02 6.27,7.85 9.04,6.61 C9.48,6.41 10.27,6.13 11,5.91 L11,2 L18.89,9 L11,16 L11,12.13 C9.25,12.47 7.58,13.19 6.02,14.25 C3.03,16.28 1.63,18.54 1.63,18.54 C1.63,18.54 1.38,15.28 2.47,13.11 L2.47,13.11 Z M5.3,13.53 C6.92,12.4 9.04,11.4 12,10.92 L12,13.63 L17.36,9 L12,4.25 L12,6.8 C11.71,6.86 10.86,7.02 9.67,7.49 C6.79,8.65 4.58,10.96 3.49,13.08 C3.18,13.7 2.68,14.87 2.49,16 C3.28,15.05 4.4,14.15 5.3,13.53 L5.3,13.53 Z"/></svg>',folder:'<svg width="20" height="20" viewBox="0 0 20 20"><polygon fill="none" stroke="#000" points="9.5 5.5 8.5 3.5 1.5 3.5 1.5 16.5 18.5 16.5 18.5 5.5"/></svg>',flickr:'<svg width="20" height="20" viewBox="0 0 20 20"><circle cx="5.5" cy="9.5" r="3.5"/><circle cx="14.5" cy="9.5" r="3.5"/></svg>',file:'<svg width="20" height="20" viewBox="0 0 20 20"><rect fill="none" stroke="#000" x="3.5" y="1.5" width="13" height="17"/></svg>',"file-text":'<svg width="20" height="20" viewBox="0 0 20 20"><rect fill="none" stroke="#000" width="13" height="17" x="3.5" y="1.5"/><line fill="none" stroke="#000" x1="6" x2="12" y1="12.5" y2="12.5"/><line fill="none" stroke="#000" x1="6" x2="14" y1="8.5" y2="8.5"/><line fill="none" stroke="#000" x1="6" x2="14" y1="6.5" y2="6.5"/><line fill="none" stroke="#000" x1="6" x2="14" y1="10.5" y2="10.5"/></svg>',"file-pdf":'<svg width="20" height="20" viewBox="0 0 20 20"><rect fill="none" stroke="#000" width="13" height="17" x="3.5" y="1.5"/><path d="M14.65 11.67c-.48.3-1.37-.19-1.79-.37a4.65 4.65 0 0 1 1.49.06c.35.1.36.28.3.31zm-6.3.06l.43-.79a14.7 14.7 0 0 0 .75-1.64 5.48 5.48 0 0 0 1.25 1.55l.2.15a16.36 16.36 0 0 0-2.63.73zM9.5 5.32c.2 0 .32.5.32.97a1.99 1.99 0 0 1-.23 1.04 5.05 5.05 0 0 1-.17-1.3s0-.71.08-.71zm-3.9 9a4.35 4.35 0 0 1 1.21-1.46l.24-.22a4.35 4.35 0 0 1-1.46 1.68zm9.23-3.3a2.05 2.05 0 0 0-1.32-.3 11.07 11.07 0 0 0-1.58.11 4.09 4.09 0 0 1-.74-.5 5.39 5.39 0 0 1-1.32-2.06 10.37 10.37 0 0 0 .28-2.62 1.83 1.83 0 0 0-.07-.25.57.57 0 0 0-.52-.4H9.4a.59.59 0 0 0-.6.38 6.95 6.95 0 0 0 .37 3.14c-.26.63-1 2.12-1 2.12-.3.58-.57 1.08-.82 1.5l-.8.44A3.11 3.11 0 0 0 5 14.16a.39.39 0 0 0 .15.42l.24.13c1.15.56 2.28-1.74 2.66-2.42a23.1 23.1 0 0 1 3.59-.85 4.56 4.56 0 0 0 2.91.8.5.5 0 0 0 .3-.21 1.1 1.1 0 0 0 .12-.75.84.84 0 0 0-.14-.25z"/></svg>',"file-edit":'<svg width="20" height="20" viewBox="0 0 20 20"><path fill="none" stroke="#000" d="M18.65,1.68 C18.41,1.45 18.109,1.33 17.81,1.33 C17.499,1.33 17.209,1.45 16.98,1.68 L8.92,9.76 L8,12.33 L10.55,11.41 L18.651,3.34 C19.12,2.87 19.12,2.15 18.65,1.68 L18.65,1.68 L18.65,1.68 Z"/><polyline fill="none" stroke="#000" points="16.5 8.482 16.5 18.5 3.5 18.5 3.5 1.5 14.211 1.5"/></svg>',facebook:'<svg width="20" height="20" viewBox="0 0 20 20"><path d="M11,10h2.6l0.4-3H11V5.3c0-0.9,0.2-1.5,1.5-1.5H14V1.1c-0.3,0-1-0.1-2.1-0.1C9.6,1,8,2.4,8,5v2H5.5v3H8v8h3V10z"/></svg>',eye:'<svg width="20" height="20" viewBox="0 0 20 20"><circle fill="none" stroke="#000" cx="10" cy="10" r="3.45"/><path fill="none" stroke="#000" d="m19.5,10c-2.4,3.66-5.26,7-9.5,7h0,0,0c-4.24,0-7.1-3.34-9.49-7C2.89,6.34,5.75,3,9.99,3h0,0,0c4.25,0,7.11,3.34,9.5,7Z"/></svg>',"eye-slash":'<svg width="20" height="20" viewBox="0 0 20 20"><path fill="none" stroke="#000" d="m7.56,7.56c.62-.62,1.49-1.01,2.44-1.01,1.91,0,3.45,1.54,3.45,3.45,0,.95-.39,1.82-1.01,2.44"/><path fill="none" stroke="#000" d="m19.5,10c-2.4,3.66-5.26,7-9.5,7h0,0,0c-4.24,0-7.1-3.34-9.49-7C2.89,6.34,5.75,3,9.99,3h0,0,0c4.25,0,7.11,3.34,9.5,7Z"/><line fill="none" stroke="#000" x1="2.5" y1="2.5" x2="17.5" y2="17.5"/></svg>',expand:'<svg width="20" height="20" viewBox="0 0 20 20"><polygon points="13 2 18 2 18 7 17 7 17 3 13 3"/><polygon points="2 13 3 13 3 17 7 17 7 18 2 18"/><path fill="none" stroke="#000" stroke-width="1.1" d="M11,9 L17,3"/><path fill="none" stroke="#000" stroke-width="1.1" d="M3,17 L9,11"/></svg>',etsy:'<svg width="20" height="20" viewBox="0 0 20 20"><path d="M8,4.26C8,4.07,8,4,8.31,4h4.46c.79,0,1.22.67,1.53,1.91l.25,1h.76c.14-2.82.26-4,.26-4S13.65,3,12.52,3H6.81L3.75,2.92v.84l1,.2c.73.11.9.27,1,1,0,0,.06,2,.06,5.17s-.06,5.14-.06,5.14c0,.59-.23.81-1,.94l-1,.2v.84l3.06-.1h5.11c1.15,0,3.82.1,3.82.1,0-.7.45-3.88.51-4.22h-.73l-.76,1.69a2.25,2.25,0,0,1-2.45,1.47H9.4c-1,0-1.44-.4-1.44-1.24V10.44s2.16,0,2.86.06c.55,0,.85.19,1.06,1l.23,1H13L12.9,9.94,13,7.41h-.85l-.28,1.13c-.16.74-.28.84-1,1-1,.1-2.89.09-2.89.09Z"/></svg>',dribbble:'<svg width="20" height="20" viewBox="0 0 20 20"><path fill="none" stroke="#000" stroke-width="1.4" d="M1.3,8.9c0,0,5,0.1,8.6-1c1.4-0.4,2.6-0.9,4-1.9 c1.4-1.1,2.5-2.5,2.5-2.5"/><path fill="none" stroke="#000" stroke-width="1.4" d="M3.9,16.6c0,0,1.7-2.8,3.5-4.2 c1.8-1.3,4-2,5.7-2.2C16,10,19,10.6,19,10.6"/><path fill="none" stroke="#000" stroke-width="1.4" d="M6.9,1.6c0,0,3.3,4.6,4.2,6.8 c0.4,0.9,1.3,3.1,1.9,5.2c0.6,2,0.9,4.4,0.9,4.4"/><circle fill="none" stroke="#000" stroke-width="1.4" cx="10" cy="10" r="9"/></svg>',download:'<svg width="20" height="20" viewBox="0 0 20 20"><polyline fill="none" stroke="#000" points="14,10 9.5,14.5 5,10"/><rect x="3" y="17" width="13" height="1"/><line fill="none" stroke="#000" x1="9.5" y1="13.91" x2="9.5" y2="3"/></svg>',discord:'<svg width="20" height="20" viewBox="0 0 20 20"><path d="M16.074,4.361a14.243,14.243,0,0,0-3.61-1.134,10.61,10.61,0,0,0-.463.96,13.219,13.219,0,0,0-4,0,10.138,10.138,0,0,0-.468-.96A14.206,14.206,0,0,0,3.919,4.364,15.146,15.146,0,0,0,1.324,14.5a14.435,14.435,0,0,0,4.428,2.269A10.982,10.982,0,0,0,6.7,15.21a9.294,9.294,0,0,1-1.494-.727c.125-.093.248-.19.366-.289a10.212,10.212,0,0,0,8.854,0c.119.1.242.2.366.289a9.274,9.274,0,0,1-1.5.728,10.8,10.8,0,0,0,.948,1.562,14.419,14.419,0,0,0,4.431-2.27A15.128,15.128,0,0,0,16.074,4.361Zm-8.981,8.1a1.7,1.7,0,0,1-1.573-1.79A1.689,1.689,0,0,1,7.093,8.881a1.679,1.679,0,0,1,1.573,1.791A1.687,1.687,0,0,1,7.093,12.462Zm5.814,0a1.7,1.7,0,0,1-1.573-1.79,1.689,1.689,0,0,1,1.573-1.791,1.679,1.679,0,0,1,1.573,1.791A1.688,1.688,0,0,1,12.907,12.462Z"/></svg>',desktop:'<svg width="20" height="20" viewBox="0 0 20 20"><rect x="8" y="15" width="1" height="2"/><rect x="11" y="15" width="1" height="2"/><rect x="5" y="16" width="10" height="1"/><rect fill="none" stroke="#000" x="1.5" y="3.5" width="17" height="11"/></svg>',database:'<svg width="20" height="20" viewBox="0 0 20 20"><ellipse fill="none" stroke="#000" cx="10" cy="4.64" rx="7.5" ry="3.14"/><path fill="none" stroke="#000" d="M17.5,8.11 C17.5,9.85 14.14,11.25 10,11.25 C5.86,11.25 2.5,9.84 2.5,8.11"/><path fill="none" stroke="#000" d="M17.5,11.25 C17.5,12.99 14.14,14.39 10,14.39 C5.86,14.39 2.5,12.98 2.5,11.25"/><path fill="none" stroke="#000" d="M17.49,4.64 L17.5,14.36 C17.5,16.1 14.14,17.5 10,17.5 C5.86,17.5 2.5,16.09 2.5,14.36 L2.5,4.64"/></svg>',crosshairs:'<svg width="20" height="20" viewBox="0 0 20 20"><circle fill="none" stroke="#000" cx="10" cy="10" r="7.5"/><line fill="none" stroke="#000" x1="10" x2="10" y2="8"/><line fill="none" stroke="#000" x1="10" y1="12" x2="10" y2="20"/><line fill="none" stroke="#000" y1="10" x2="8" y2="10"/><line fill="none" stroke="#000" x1="12" y1="10" x2="20" y2="10"/></svg>',"credit-card":'<svg width="20" height="20" viewBox="0 0 20 20"><rect fill="none" stroke="#000" x="1.5" y="4.5" width="17" height="12"/><rect x="1" y="7" width="18" height="3"/></svg>',copy:'<svg width="20" height="20" viewBox="0 0 20 20"><rect fill="none" stroke="#000" x="3.5" y="2.5" width="12" height="16"/><polyline fill="none" stroke="#000" points="5 0.5 17.5 0.5 17.5 17"/></svg>',comments:'<svg width="20" height="20" viewBox="0 0 20 20"><polyline fill="none" stroke="#000" points="2 0.5 19.5 0.5 19.5 13"/><path d="M5,19.71 L5,15 L0,15 L0,2 L18,2 L18,15 L9.71,15 L5,19.71 L5,19.71 L5,19.71 Z M1,14 L6,14 L6,17.29 L9.29,14 L17,14 L17,3 L1,3 L1,14 L1,14 L1,14 Z"/></svg>',commenting:'<svg width="20" height="20" viewBox="0 0 20 20"><polygon fill="none" stroke="#000" points="1.5,1.5 18.5,1.5 18.5,13.5 10.5,13.5 6.5,17.5 6.5,13.5 1.5,13.5"/><circle cx="10" cy="8" r="1"/><circle cx="6" cy="8" r="1"/><circle cx="14" cy="8" r="1"/></svg>',comment:'<svg width="20" height="20" viewBox="0 0 20 20"><path d="M6,18.71 L6,14 L1,14 L1,1 L19,1 L19,14 L10.71,14 L6,18.71 L6,18.71 Z M2,13 L7,13 L7,16.29 L10.29,13 L18,13 L18,2 L2,2 L2,13 L2,13 Z"/></svg>',cog:'<svg width="20" height="20" viewBox="0 0 20 20"><circle fill="none" stroke="#000" cx="9.997" cy="10" r="3.31"/><path fill="none" stroke="#000" d="M18.488,12.285 L16.205,16.237 C15.322,15.496 14.185,15.281 13.303,15.791 C12.428,16.289 12.047,17.373 12.246,18.5 L7.735,18.5 C7.938,17.374 7.553,16.299 6.684,15.791 C5.801,15.27 4.655,15.492 3.773,16.237 L1.5,12.285 C2.573,11.871 3.317,10.999 3.317,9.991 C3.305,8.98 2.573,8.121 1.5,7.716 L3.765,3.784 C4.645,4.516 5.794,4.738 6.687,4.232 C7.555,3.722 7.939,2.637 7.735,1.5 L12.263,1.5 C12.072,2.637 12.441,3.71 13.314,4.22 C14.206,4.73 15.343,4.516 16.225,3.794 L18.487,7.714 C17.404,8.117 16.661,8.988 16.67,10.009 C16.672,11.018 17.415,11.88 18.488,12.285 L18.488,12.285 Z"/></svg>',code:'<svg width="20" height="20" viewBox="0 0 20 20"><polyline fill="none" stroke="#000" stroke-width="1.01" points="13,4 19,10 13,16"/><polyline fill="none" stroke="#000" stroke-width="1.01" points="7,4 1,10 7,16"/></svg>',"cloud-upload":'<svg width="20" height="20" viewBox="0 0 20 20"><path fill="none" stroke="#000" stroke-width="1.1" d="M6.5,14.61 L3.75,14.61 C1.96,14.61 0.5,13.17 0.5,11.39 C0.5,9.76 1.72,8.41 3.31,8.2 C3.38,5.31 5.75,3 8.68,3 C11.19,3 13.31,4.71 13.89,7.02 C14.39,6.8 14.93,6.68 15.5,6.68 C17.71,6.68 19.5,8.45 19.5,10.64 C19.5,12.83 17.71,14.6 15.5,14.6 L12.5,14.6"/><polyline fill="none" stroke="#000" points="7.25 11.75 9.5 9.5 11.75 11.75"/><path fill="none" stroke="#000" d="M9.5,18 L9.5,9.5"/></svg>',"cloud-download":'<svg width="20" height="20" viewBox="0 0 20 20"><path fill="none" stroke="#000" stroke-width="1.1" d="M6.5,14.61 L3.75,14.61 C1.96,14.61 0.5,13.17 0.5,11.39 C0.5,9.76 1.72,8.41 3.3,8.2 C3.38,5.31 5.75,3 8.68,3 C11.19,3 13.31,4.71 13.89,7.02 C14.39,6.8 14.93,6.68 15.5,6.68 C17.71,6.68 19.5,8.45 19.5,10.64 C19.5,12.83 17.71,14.6 15.5,14.6 L12.5,14.6"/><polyline fill="none" stroke="#000" points="11.75 16 9.5 18.25 7.25 16"/><path fill="none" stroke="#000" d="M9.5,18 L9.5,9.5"/></svg>',close:'<svg width="20" height="20" viewBox="0 0 20 20"><path fill="none" stroke="#000" stroke-width="1.06" d="M16,16 L4,4"/><path fill="none" stroke="#000" stroke-width="1.06" d="M16,4 L4,16"/></svg>',clock:'<svg width="20" height="20" viewBox="0 0 20 20"><circle fill="none" stroke="#000" stroke-width="1.1" cx="10" cy="10" r="9"/><rect x="9" y="4" width="1" height="7"/><path fill="none" stroke="#000" stroke-width="1.1" d="M13.018,14.197 L9.445,10.625"/></svg>',"chevron-up":'<svg width="20" height="20" viewBox="0 0 20 20"><polyline fill="none" stroke="#000" stroke-width="1.03" points="4 13 10 7 16 13"/></svg>',"chevron-right":'<svg width="20" height="20" viewBox="0 0 20 20"><polyline fill="none" stroke="#000" stroke-width="1.03" points="7 4 13 10 7 16"/></svg>',"chevron-left":'<svg width="20" height="20" viewBox="0 0 20 20"><polyline fill="none" stroke="#000" stroke-width="1.03" points="13 16 7 10 13 4"/></svg>',"chevron-down":'<svg width="20" height="20" viewBox="0 0 20 20"><polyline fill="none" stroke="#000" stroke-width="1.03" points="16 7 10 13 4 7"/></svg>',"chevron-double-right":'<svg width="20" height="20" viewBox="0 0 20 20"><polyline fill="none" stroke="#000" stroke-width="1.03" points="10 6 14 10 10 14"/><polyline fill="none" stroke="#000" stroke-width="1.03" points="6 6 10 10 6 14"/></svg>',"chevron-double-left":'<svg width="20" height="20" viewBox="0 0 20 20"><polyline fill="none" stroke="#000" stroke-width="1.03" points="10 14 6 10 10 6"/><polyline fill="none" stroke="#000" stroke-width="1.03" points="14 14 10 10 14 6"/></svg>',check:'<svg width="20" height="20" viewBox="0 0 20 20"><polyline fill="none" stroke="#000" stroke-width="1.1" points="4,10 8,15 17,4"/></svg>',cart:'<svg width="20" height="20" viewBox="0 0 20 20"><circle cx="7.3" cy="17.3" r="1.4"/><circle cx="13.3" cy="17.3" r="1.4"/><polyline fill="none" stroke="#000" points="0 2 3.2 4 5.3 12.5 16 12.5 18 6.5 8 6.5"/></svg>',camera:'<svg width="20" height="20" viewBox="0 0 20 20"><circle fill="none" stroke="#000" stroke-width="1.1" cx="10" cy="10.8" r="3.8"/><path fill="none" stroke="#000" d="M1,4.5 C0.7,4.5 0.5,4.7 0.5,5 L0.5,17 C0.5,17.3 0.7,17.5 1,17.5 L19,17.5 C19.3,17.5 19.5,17.3 19.5,17 L19.5,5 C19.5,4.7 19.3,4.5 19,4.5 L13.5,4.5 L13.5,2.9 C13.5,2.6 13.3,2.5 13,2.5 L7,2.5 C6.7,2.5 6.5,2.6 6.5,2.9 L6.5,4.5 L1,4.5 L1,4.5 Z"/></svg>',calendar:'<svg width="20" height="20" viewBox="0 0 20 20"><path d="M 2,3 2,17 18,17 18,3 2,3 Z M 17,16 3,16 3,8 17,8 17,16 Z M 17,7 3,7 3,4 17,4 17,7 Z"/><rect width="1" height="3" x="6" y="2"/><rect width="1" height="3" x="13" y="2"/></svg>',bookmark:'<svg width="20" height="20" viewBox="0 0 20 20"><polygon fill="none" stroke="#000" points="5.5 1.5 15.5 1.5 15.5 17.5 10.5 12.5 5.5 17.5"/></svg>',bolt:'<svg width="20" height="20" viewBox="0 0 20 20"><path d="M4.74,20 L7.73,12 L3,12 L15.43,1 L12.32,9 L17.02,9 L4.74,20 L4.74,20 L4.74,20 Z M9.18,11 L7.1,16.39 L14.47,10 L10.86,10 L12.99,4.67 L5.61,11 L9.18,11 L9.18,11 L9.18,11 Z"/></svg>',bold:'<svg width="20" height="20" viewBox="0 0 20 20"><path d="M5,15.3 C5.66,15.3 5.9,15 5.9,14.53 L5.9,5.5 C5.9,4.92 5.56,4.7 5,4.7 L5,4 L8.95,4 C12.6,4 13.7,5.37 13.7,6.9 C13.7,7.87 13.14,9.17 10.86,9.59 L10.86,9.7 C13.25,9.86 14.29,11.28 14.3,12.54 C14.3,14.47 12.94,16 9,16 L5,16 L5,15.3 Z M9,9.3 C11.19,9.3 11.8,8.5 11.85,7 C11.85,5.65 11.3,4.8 9,4.8 L7.67,4.8 L7.67,9.3 L9,9.3 Z M9.185,15.22 C11.97,15 12.39,14 12.4,12.58 C12.4,11.15 11.39,10 9,10 L7.67,10 L7.67,15 L9.18,15 Z"/></svg>',bell:'<svg width="20" height="20" viewBox="0 0 20 20"><path fill="none" stroke="#000" stroke-width="1.1" d="M17,15.5 L3,15.5 C2.99,14.61 3.79,13.34 4.1,12.51 C4.58,11.3 4.72,10.35 5.19,7.01 C5.54,4.53 5.89,3.2 7.28,2.16 C8.13,1.56 9.37,1.5 9.81,1.5 L9.96,1.5 C9.96,1.5 11.62,1.41 12.67,2.17 C14.08,3.2 14.42,4.54 14.77,7.02 C15.26,10.35 15.4,11.31 15.87,12.52 C16.2,13.34 17.01,14.61 17,15.5 L17,15.5 Z"/><path fill="none" stroke="#000" d="M12.39,16 C12.39,17.37 11.35,18.43 9.91,18.43 C8.48,18.43 7.42,17.37 7.42,16"/></svg>',behance:'<svg width="20" height="20" viewBox="0 0 20 20"><path d="M9.5,10.6c-0.4-0.5-0.9-0.9-1.6-1.1c1.7-1,2.2-3.2,0.7-4.7C7.8,4,6.3,4,5.2,4C3.5,4,1.7,4,0,4v12c1.7,0,3.4,0,5.2,0 c1,0,2.1,0,3.1-0.5C10.2,14.6,10.5,12.3,9.5,10.6L9.5,10.6z M5.6,6.1c1.8,0,1.8,2.7-0.1,2.7c-1,0-2,0-2.9,0V6.1H5.6z M2.6,13.8v-3.1 c1.1,0,2.1,0,3.2,0c2.1,0,2.1,3.2,0.1,3.2L2.6,13.8z"/><path d="M19.9,10.9C19.7,9.2,18.7,7.6,17,7c-4.2-1.3-7.3,3.4-5.3,7.1c0.9,1.7,2.8,2.3,4.7,2.1c1.7-0.2,2.9-1.3,3.4-2.9h-2.2 c-0.4,1.3-2.4,1.5-3.5,0.6c-0.4-0.4-0.6-1.1-0.6-1.7H20C20,11.7,19.9,10.9,19.9,10.9z M13.5,10.6c0-1.6,2.3-2.7,3.5-1.4 c0.4,0.4,0.5,0.9,0.6,1.4H13.5L13.5,10.6z"/><rect x="13" y="4" width="5" height="1.4"/></svg>',ban:'<svg width="20" height="20" viewBox="0 0 20 20"><circle fill="none" stroke="#000" stroke-width="1.1" cx="10" cy="10" r="9"/><line fill="none" stroke="#000" stroke-width="1.1" x1="4" y1="3.5" x2="16" y2="16.5"/></svg>',bag:'<svg width="20" height="20" viewBox="0 0 20 20"><path fill="none" stroke="#000" d="M7.5,7.5V4A2.48,2.48,0,0,1,10,1.5,2.54,2.54,0,0,1,12.5,4V7.5"/><polygon fill="none" stroke="#000" points="16.5 7.5 3.5 7.5 2.5 18.5 17.5 18.5 16.5 7.5"/></svg>',"arrow-up":'<svg width="20" height="20" viewBox="0 0 20 20"><polygon points="10.5,4 15.37,9.4 14.63,10.08 10.5,5.49 6.37,10.08 5.63,9.4"/><line fill="none" stroke="#000" x1="10.5" y1="16" x2="10.5" y2="5"/></svg>',"arrow-right":'<svg width="20" height="20" viewBox="0 0 20 20"><polyline fill="none" stroke="#000" points="10 5 15 9.5 10 14"/><line fill="none" stroke="#000" x1="4" y1="9.5" x2="15" y2="9.5"/></svg>',"arrow-left":'<svg width="20" height="20" viewBox="0 0 20 20"><polyline fill="none" stroke="#000" points="10 14 5 9.5 10 5"/><line fill="none" stroke="#000" x1="16" y1="9.5" x2="5" y2="9.52"/></svg>',"arrow-down":'<svg width="20" height="20" viewBox="0 0 20 20"><polygon points="10.5,16.08 5.63,10.66 6.37,10 10.5,14.58 14.63,10 15.37,10.66"/><line fill="none" stroke="#000" x1="10.5" y1="4" x2="10.5" y2="15"/></svg>',apple:'<svg width="20" height="20" viewBox="0 0 20 20"><path d="m17.23,6.93c-.1.08-1.95,1.12-1.95,3.43,0,2.67,2.35,3.62,2.42,3.64-.01.06-.37,1.29-1.24,2.55-.77,1.11-1.58,2.22-2.8,2.22s-1.54-.71-2.95-.71-1.87.73-2.99.73-1.9-1.03-2.8-2.29c-1.04-1.48-1.88-3.78-1.88-5.96,0-3.5,2.28-5.36,4.51-5.36,1.19,0,2.18.78,2.93.78s1.82-.83,3.17-.83c.51,0,2.36.05,3.57,1.79h0Zm-4.21-3.27c.56-.66.96-1.59.96-2.51,0-.13-.01-.26-.03-.36-.91.03-1.99.61-2.65,1.36-.51.58-.99,1.5-.99,2.44,0,.14.02.28.03.33.06.01.15.02.24.02.82,0,1.85-.55,2.44-1.28h0Z"/></svg>',android:'<svg width="20" height="20" viewBox="0 0 20 20"><path d="m14.88,6.77l1.66-2.87c.09-.16.04-.37-.12-.46-.16-.09-.37-.04-.46.12l-1.68,2.91c-1.28-.59-2.73-.91-4.28-.91s-3,.33-4.28.91l-1.68-2.91c-.09-.16-.3-.22-.46-.12-.16.09-.22.3-.12.46l1.66,2.87C2.26,8.32.32,11.22,0,14.61h20c-.32-3.39-2.26-6.29-5.12-7.84h0Zm-9.47,5.03c-.46,0-.84-.38-.84-.84s.38-.84.84-.84.84.38.84.84c0,.46-.37.84-.84.84Zm9.18,0c-.46,0-.84-.38-.84-.84s.38-.84.84-.84.84.38.84.84c0,.46-.37.84-.84.84Z"/></svg>',"android-robot":'<svg width="20" height="20" viewBox="0 0 20 20"><path d="m17.61,7.96v4.64c-.06,1.48-2.17,1.48-2.23,0v-4.64c.06-1.48,2.17-1.48,2.23,0Z"/><path d="m4.62,7.96v4.64c-.06,1.48-2.17,1.48-2.23,0v-4.64c.06-1.48,2.17-1.48,2.23,0Z"/><path d="m12.78,2.85c-.11-.07-.23-.13-.34-.19.13-.23.65-1.17.79-1.42.07-.12-.05-.27-.18-.23-.04.01-.07.04-.09.08l-.79,1.43c-1.32-.6-2.98-.6-4.3,0-.13-.23-.65-1.18-.79-1.43-.04-.07-.14-.1-.21-.06-.08.04-.1.14-.06.21,0,0,.79,1.42.79,1.42-1.49.77-2.53,2.28-2.53,3.99-.02,0,9.93,0,9.93,0,.01-1.55-.87-2.98-2.19-3.8Zm-5.07,1.98c-.23,0-.41-.19-.41-.41.01-.27.21-.41.41-.41s.4.14.42.41c0,.22-.18.42-.41.41Zm4.58,0c-.23,0-.42-.19-.41-.41.01-.28.21-.41.41-.41s.4.14.41.41c0,.23-.19.41-.41.41Z"/><path d="m14.97,7.03v7.2c0,.66-.54,1.2-1.2,1.2h-.8v2.46c-.06,1.48-2.16,1.48-2.23,0,0,0,0-2.46,0-2.46h-1.48v2.46c0,.61-.5,1.11-1.11,1.11s-1.11-.5-1.11-1.11v-2.46h-.8c-.66,0-1.2-.54-1.2-1.2,0,0,0-7.2,0-7.2h9.93Z"/></svg>',album:'<svg width="20" height="20" viewBox="0 0 20 20"><rect x="5" y="2" width="10" height="1"/><rect x="3" y="4" width="14" height="1"/><rect fill="none" stroke="#000" x="1.5" y="6.5" width="17" height="11"/></svg>',"500px":'<svg width="20" height="20" viewBox="0 0 20 20"><path d="M9.624,11.866c-0.141,0.132,0.479,0.658,0.662,0.418c0.051-0.046,0.607-0.61,0.662-0.664c0,0,0.738,0.719,0.814,0.719 c0.1,0,0.207-0.055,0.322-0.17c0.27-0.269,0.135-0.416,0.066-0.495l-0.631-0.616l0.658-0.668c0.146-0.156,0.021-0.314-0.1-0.449 c-0.182-0.18-0.359-0.226-0.471-0.125l-0.656,0.654l-0.654-0.654c-0.033-0.034-0.08-0.045-0.124-0.045 c-0.079,0-0.191,0.068-0.307,0.181c-0.202,0.202-0.247,0.351-0.133,0.462l0.665,0.665L9.624,11.866z"/><path d="M11.066,2.884c-1.061,0-2.185,0.248-3.011,0.604c-0.087,0.034-0.141,0.106-0.15,0.205C7.893,3.784,7.919,3.909,7.982,4.066 c0.05,0.136,0.187,0.474,0.452,0.372c0.844-0.326,1.779-0.507,2.633-0.507c0.963,0,1.9,0.191,2.781,0.564 c0.695,0.292,1.357,0.719,2.078,1.34c0.051,0.044,0.105,0.068,0.164,0.068c0.143,0,0.273-0.137,0.389-0.271 c0.191-0.214,0.324-0.395,0.135-0.575c-0.686-0.654-1.436-1.138-2.363-1.533C13.24,3.097,12.168,2.884,11.066,2.884z"/><path d="M16.43,15.747c-0.092-0.028-0.242,0.05-0.309,0.119l0,0c-0.652,0.652-1.42,1.169-2.268,1.521 c-0.877,0.371-1.814,0.551-2.779,0.551c-0.961,0-1.896-0.189-2.775-0.564c-0.848-0.36-1.612-0.879-2.268-1.53 c-0.682-0.688-1.196-1.455-1.529-2.268c-0.325-0.799-0.471-1.643-0.471-1.643c-0.045-0.24-0.258-0.249-0.567-0.203 c-0.128,0.021-0.519,0.079-0.483,0.36v0.01c0.105,0.644,0.289,1.284,0.545,1.895c0.417,0.969,1.002,1.849,1.756,2.604 c0.757,0.754,1.636,1.34,2.604,1.757C8.901,18.785,9.97,19,11.088,19c1.104,0,2.186-0.215,3.188-0.645 c1.838-0.896,2.604-1.757,2.604-1.757c0.182-0.204,0.227-0.317-0.1-0.643C16.779,15.956,16.525,15.774,16.43,15.747z"/><path d="M5.633,13.287c0.293,0.71,0.723,1.341,1.262,1.882c0.54,0.54,1.172,0.971,1.882,1.264c0.731,0.303,1.509,0.461,2.298,0.461 c0.801,0,1.578-0.158,2.297-0.461c0.711-0.293,1.344-0.724,1.883-1.264c0.543-0.541,0.971-1.172,1.264-1.882 c0.314-0.721,0.463-1.5,0.463-2.298c0-0.79-0.148-1.569-0.463-2.289c-0.293-0.699-0.721-1.329-1.264-1.881 c-0.539-0.541-1.172-0.959-1.867-1.263c-0.721-0.303-1.5-0.461-2.299-0.461c-0.802,0-1.613,0.159-2.322,0.461 c-0.577,0.25-1.544,0.867-2.119,1.454v0.012V2.108h8.16C15.1,2.104,15.1,1.69,15.1,1.552C15.1,1.417,15.1,1,14.809,1H5.915 C5.676,1,5.527,1.192,5.527,1.384v6.84c0,0.214,0.273,0.372,0.529,0.428c0.5,0.105,0.614-0.056,0.737-0.224l0,0 c0.18-0.273,0.776-0.884,0.787-0.894c0.901-0.905,2.117-1.408,3.416-1.408c1.285,0,2.5,0.501,3.412,1.408 c0.914,0.914,1.408,2.122,1.408,3.405c0,1.288-0.508,2.496-1.408,3.405c-0.9,0.896-2.152,1.406-3.438,1.406 c-0.877,0-1.711-0.229-2.433-0.671v-4.158c0-0.553,0.237-1.151,0.643-1.614c0.462-0.519,1.094-0.799,1.782-0.799 c0.664,0,1.293,0.253,1.758,0.715c0.459,0.459,0.709,1.071,0.709,1.723c0,1.385-1.094,2.468-2.488,2.468 c-0.273,0-0.769-0.121-0.781-0.125c-0.281-0.087-0.405,0.306-0.438,0.436c-0.159,0.496,0.079,0.585,0.123,0.607 c0.452,0.137,0.743,0.157,1.129,0.157c1.973,0,3.572-1.6,3.572-3.57c0-1.964-1.6-3.552-3.572-3.552c-0.97,0-1.872,0.36-2.546,1.038 c-0.656,0.631-1.027,1.487-1.027,2.322v3.438v-0.011c-0.372-0.42-0.732-1.041-0.981-1.682c-0.102-0.248-0.315-0.202-0.607-0.113 c-0.135,0.035-0.519,0.157-0.44,0.439C5.372,12.799,5.577,13.164,5.633,13.287z"/></svg>'})}return typeof window<"u"&&window.UIkit&&window.UIkit.use(t),t})})(Vg);var Py=Vg.exports;const Iy=mf(Py);var Ny={exports:{}};/*!
 * Cropper.js v1.6.1
 * https://fengyuanchen.github.io/cropperjs
 *
 * Copyright 2015-present Chen Fengyuan
 * Released under the MIT license
 *
 * Date: 2023-09-17T03:44:19.860Z
 */(function(s,e){(function(t,n){s.exports=n()})(fh,function(){function t(q,D){var B=Object.keys(q);if(Object.getOwnPropertySymbols){var P=Object.getOwnPropertySymbols(q);D&&(P=P.filter(function(ie){return Object.getOwnPropertyDescriptor(q,ie).enumerable})),B.push.apply(B,P)}return B}function n(q){for(var D=1;D<arguments.length;D++){var B=arguments[D]!=null?arguments[D]:{};D%2?t(Object(B),!0).forEach(function(P){f(q,P,B[P])}):Object.getOwnPropertyDescriptors?Object.defineProperties(q,Object.getOwnPropertyDescriptors(B)):t(Object(B)).forEach(function(P){Object.defineProperty(q,P,Object.getOwnPropertyDescriptor(B,P))})}return q}function r(q){"@babel/helpers - typeof";return r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(D){return typeof D}:function(D){return D&&typeof Symbol=="function"&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":typeof D},r(q)}function o(q,D){if(!(q instanceof D))throw new TypeError("Cannot call a class as a function")}function l(q,D){for(var B=0;B<D.length;B++){var P=D[B];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(q,E(P.key),P)}}function c(q,D,B){return D&&l(q.prototype,D),B&&l(q,B),Object.defineProperty(q,"prototype",{writable:!1}),q}function f(q,D,B){return D=E(D),D in q?Object.defineProperty(q,D,{value:B,enumerable:!0,configurable:!0,writable:!0}):q[D]=B,q}function d(q){return m(q)||v(q)||y(q)||T()}function m(q){if(Array.isArray(q))return M(q)}function v(q){if(typeof Symbol<"u"&&q[Symbol.iterator]!=null||q["@@iterator"]!=null)return Array.from(q)}function y(q,D){if(q){if(typeof q=="string")return M(q,D);var B=Object.prototype.toString.call(q).slice(8,-1);if(B==="Object"&&q.constructor&&(B=q.constructor.name),B==="Map"||B==="Set")return Array.from(q);if(B==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(B))return M(q,D)}}function M(q,D){(D==null||D>q.length)&&(D=q.length);for(var B=0,P=new Array(D);B<D;B++)P[B]=q[B];return P}function T(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function A(q,D){if(typeof q!="object"||q===null)return q;var B=q[Symbol.toPrimitive];if(B!==void 0){var P=B.call(q,D||"default");if(typeof P!="object")return P;throw new TypeError("@@toPrimitive must return a primitive value.")}return(D==="string"?String:Number)(q)}function E(q){var D=A(q,"string");return typeof D=="symbol"?D:String(D)}var b=typeof window<"u"&&typeof window.document<"u",z=b?window:{},I=b&&z.document.documentElement?"ontouchstart"in z.document.documentElement:!1,H=b?"PointerEvent"in z:!1,X="cropper",G="all",g="crop",oe="move",U="zoom",V="e",Me="w",Te="s",ve="n",Z="ne",me="nw",_e="se",fe="sw",Fe="".concat(X,"-crop"),Ee="".concat(X,"-disabled"),Le="".concat(X,"-hidden"),ge="".concat(X,"-hide"),Ce="".concat(X,"-invisible"),Je="".concat(X,"-modal"),nt="".concat(X,"-move"),ut="".concat(X,"Action"),bt="".concat(X,"Preview"),It="crop",St="move",Rt="none",Mt="crop",Ft="cropend",xe="cropmove",Mn="cropstart",Tt="dblclick",Gt=I?"touchstart":"mousedown",Lt=I?"touchmove":"mousemove",qt=I?"touchend touchcancel":"mouseup",wt=H?"pointerdown":Gt,Ge=H?"pointermove":Lt,Vt=H?"pointerup pointercancel":qt,Cn="ready",Xt="resize",W="wheel",k="zoom",se="image/jpeg",Ye=/^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/,Ne=/^data:/,Xe=/^data:image\/jpeg;base64,/,vt=/^img|canvas$/i,it=200,ht=100,Q={viewMode:0,dragMode:It,initialAspectRatio:NaN,aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:it,minContainerHeight:ht,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},Ze='<div class="cropper-container" touch-action="none"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-cropper-action="e"></span><span class="cropper-line line-n" data-cropper-action="n"></span><span class="cropper-line line-w" data-cropper-action="w"></span><span class="cropper-line line-s" data-cropper-action="s"></span><span class="cropper-point point-e" data-cropper-action="e"></span><span class="cropper-point point-n" data-cropper-action="n"></span><span class="cropper-point point-w" data-cropper-action="w"></span><span class="cropper-point point-s" data-cropper-action="s"></span><span class="cropper-point point-ne" data-cropper-action="ne"></span><span class="cropper-point point-nw" data-cropper-action="nw"></span><span class="cropper-point point-sw" data-cropper-action="sw"></span><span class="cropper-point point-se" data-cropper-action="se"></span></div></div>',ze=Number.isNaN||z.isNaN;function et(q){return typeof q=="number"&&!ze(q)}var _t=function(D){return D>0&&D<1/0};function tt(q){return typeof q>"u"}function pt(q){return r(q)==="object"&&q!==null}var K=Object.prototype.hasOwnProperty;function je(q){if(!pt(q))return!1;try{var D=q.constructor,B=D.prototype;return D&&B&&K.call(B,"isPrototypeOf")}catch{return!1}}function Ie(q){return typeof q=="function"}var rt=Array.prototype.slice;function We(q){return Array.from?Array.from(q):rt.call(q)}function Ue(q,D){return q&&Ie(D)&&(Array.isArray(q)||et(q.length)?We(q).forEach(function(B,P){D.call(q,B,P,q)}):pt(q)&&Object.keys(q).forEach(function(B){D.call(q,q[B],B,q)})),q}var qe=Object.assign||function(D){for(var B=arguments.length,P=new Array(B>1?B-1:0),ie=1;ie<B;ie++)P[ie-1]=arguments[ie];return pt(D)&&P.length>0&&P.forEach(function(ee){pt(ee)&&Object.keys(ee).forEach(function(le){D[le]=ee[le]})}),D},xt=/\.\d*(?:0|9){12}\d*$/;function Zt(q){var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e11;return xt.test(q)?Math.round(q*D)/D:q}var xn=/^width|height|left|top|marginLeft|marginTop$/;function Fn(q,D){var B=q.style;Ue(D,function(P,ie){xn.test(ie)&&et(P)&&(P="".concat(P,"px")),B[ie]=P})}function Hn(q,D){return q.classList?q.classList.contains(D):q.className.indexOf(D)>-1}function Rn(q,D){if(D){if(et(q.length)){Ue(q,function(P){Rn(P,D)});return}if(q.classList){q.classList.add(D);return}var B=q.className.trim();B?B.indexOf(D)<0&&(q.className="".concat(B," ").concat(D)):q.className=D}}function qn(q,D){if(D){if(et(q.length)){Ue(q,function(B){qn(B,D)});return}if(q.classList){q.classList.remove(D);return}q.className.indexOf(D)>=0&&(q.className=q.className.replace(D,""))}}function Xi(q,D,B){if(D){if(et(q.length)){Ue(q,function(P){Xi(P,D,B)});return}B?Rn(q,D):qn(q,D)}}var fr=/([a-z\d])([A-Z])/g;function as(q){return q.replace(fr,"$1-$2").toLowerCase()}function dr(q,D){return pt(q[D])?q[D]:q.dataset?q.dataset[D]:q.getAttribute("data-".concat(as(D)))}function kr(q,D,B){pt(B)?q[D]=B:q.dataset?q.dataset[D]=B:q.setAttribute("data-".concat(as(D)),B)}function js(q,D){if(pt(q[D]))try{delete q[D]}catch{q[D]=void 0}else if(q.dataset)try{delete q.dataset[D]}catch{q.dataset[D]=void 0}else q.removeAttribute("data-".concat(as(D)))}var Ys=/\s\s*/,ls=function(){var q=!1;if(b){var D=!1,B=function(){},P=Object.defineProperty({},"once",{get:function(){return q=!0,D},set:function(ee){D=ee}});z.addEventListener("test",B,P),z.removeEventListener("test",B,P)}return q}();function F(q,D,B){var P=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},ie=B;D.trim().split(Ys).forEach(function(ee){if(!ls){var le=q.listeners;le&&le[ee]&&le[ee][B]&&(ie=le[ee][B],delete le[ee][B],Object.keys(le[ee]).length===0&&delete le[ee],Object.keys(le).length===0&&delete q.listeners)}q.removeEventListener(ee,ie,P)})}function pe(q,D,B){var P=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},ie=B;D.trim().split(Ys).forEach(function(ee){if(P.once&&!ls){var le=q.listeners,Pe=le===void 0?{}:le;ie=function(){delete Pe[ee][B],q.removeEventListener(ee,ie,P);for(var Ve=arguments.length,Oe=new Array(Ve),ke=0;ke<Ve;ke++)Oe[ke]=arguments[ke];B.apply(q,Oe)},Pe[ee]||(Pe[ee]={}),Pe[ee][B]&&q.removeEventListener(ee,Pe[ee][B],P),Pe[ee][B]=ie,q.listeners=Pe}q.addEventListener(ee,ie,P)})}function we(q,D,B){var P;return Ie(Event)&&Ie(CustomEvent)?P=new CustomEvent(D,{detail:B,bubbles:!0,cancelable:!0}):(P=document.createEvent("CustomEvent"),P.initCustomEvent(D,!0,!0,B)),q.dispatchEvent(P)}function re(q){var D=q.getBoundingClientRect();return{left:D.left+(window.pageXOffset-document.documentElement.clientLeft),top:D.top+(window.pageYOffset-document.documentElement.clientTop)}}var Re=z.location,gt=/^(\w+:)\/\/([^:/?#]*):?(\d*)/i;function Et(q){var D=q.match(gt);return D!==null&&(D[1]!==Re.protocol||D[2]!==Re.hostname||D[3]!==Re.port)}function Nt(q){var D="timestamp=".concat(new Date().getTime());return q+(q.indexOf("?")===-1?"?":"&")+D}function Pt(q){var D=q.rotate,B=q.scaleX,P=q.scaleY,ie=q.translateX,ee=q.translateY,le=[];et(ie)&&ie!==0&&le.push("translateX(".concat(ie,"px)")),et(ee)&&ee!==0&&le.push("translateY(".concat(ee,"px)")),et(D)&&D!==0&&le.push("rotate(".concat(D,"deg)")),et(B)&&B!==1&&le.push("scaleX(".concat(B,")")),et(P)&&P!==1&&le.push("scaleY(".concat(P,")"));var Pe=le.length?le.join(" "):"none";return{WebkitTransform:Pe,msTransform:Pe,transform:Pe}}function jt(q){var D=n({},q),B=0;return Ue(q,function(P,ie){delete D[ie],Ue(D,function(ee){var le=Math.abs(P.startX-ee.startX),Pe=Math.abs(P.startY-ee.startY),$e=Math.abs(P.endX-ee.endX),Ve=Math.abs(P.endY-ee.endY),Oe=Math.sqrt(le*le+Pe*Pe),ke=Math.sqrt($e*$e+Ve*Ve),Ke=(ke-Oe)/Oe;Math.abs(Ke)>Math.abs(B)&&(B=Ke)})}),B}function Dt(q,D){var B=q.pageX,P=q.pageY,ie={endX:B,endY:P};return D?ie:n({startX:B,startY:P},ie)}function Wt(q){var D=0,B=0,P=0;return Ue(q,function(ie){var ee=ie.startX,le=ie.startY;D+=ee,B+=le,P+=1}),D/=P,B/=P,{pageX:D,pageY:B}}function Qt(q){var D=q.aspectRatio,B=q.height,P=q.width,ie=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"contain",ee=_t(P),le=_t(B);if(ee&&le){var Pe=B*D;ie==="contain"&&Pe>P||ie==="cover"&&Pe<P?B=P/D:P=B*D}else ee?B=P/D:le&&(P=B*D);return{width:P,height:B}}function bn(q){var D=q.width,B=q.height,P=q.degree;if(P=Math.abs(P)%180,P===90)return{width:B,height:D};var ie=P%90*Math.PI/180,ee=Math.sin(ie),le=Math.cos(ie),Pe=D*le+B*ee,$e=D*ee+B*le;return P>90?{width:$e,height:Pe}:{width:Pe,height:$e}}function Mi(q,D,B,P){var ie=D.aspectRatio,ee=D.naturalWidth,le=D.naturalHeight,Pe=D.rotate,$e=Pe===void 0?0:Pe,Ve=D.scaleX,Oe=Ve===void 0?1:Ve,ke=D.scaleY,Ke=ke===void 0?1:ke,Kt=B.aspectRatio,sn=B.naturalWidth,fn=B.naturalHeight,dt=P.fillColor,$t=dt===void 0?"transparent":dt,$n=P.imageSmoothingEnabled,Ln=$n===void 0?!0:$n,Ot=P.imageSmoothingQuality,kt=Ot===void 0?"low":Ot,st=P.maxWidth,an=st===void 0?1/0:st,dn=P.maxHeight,ri=dn===void 0?1/0:dn,nr=P.minWidth,ki=nr===void 0?0:nr,ir=P.minHeight,Nn=ir===void 0?0:ir,Bi=document.createElement("canvas"),fi=Bi.getContext("2d"),pr=Qt({aspectRatio:Kt,width:an,height:ri}),As=Qt({aspectRatio:Kt,width:ki,height:Nn},"cover"),qs=Math.min(pr.width,Math.max(As.width,sn)),mr=Math.min(pr.height,Math.max(As.height,fn)),Jr=Qt({aspectRatio:ie,width:an,height:ri}),Qo=Qt({aspectRatio:ie,width:ki,height:Nn},"cover"),gr=Math.min(Jr.width,Math.max(Qo.width,ee)),Un=Math.min(Jr.height,Math.max(Qo.height,le)),Fr=[-gr/2,-Un/2,gr,Un];return Bi.width=Zt(qs),Bi.height=Zt(mr),fi.fillStyle=$t,fi.fillRect(0,0,qs,mr),fi.save(),fi.translate(qs/2,mr/2),fi.rotate($e*Math.PI/180),fi.scale(Oe,Ke),fi.imageSmoothingEnabled=Ln,fi.imageSmoothingQuality=kt,fi.drawImage.apply(fi,[q].concat(d(Fr.map(function(Hr){return Math.floor(Zt(Hr))})))),fi.restore(),Bi}var ue=String.fromCharCode;function Pn(q,D,B){var P="";B+=D;for(var ie=D;ie<B;ie+=1)P+=ue(q.getUint8(ie));return P}var rn=/^data:.*,/;function Br(q){var D=q.replace(rn,""),B=atob(D),P=new ArrayBuffer(B.length),ie=new Uint8Array(P);return Ue(ie,function(ee,le){ie[le]=B.charCodeAt(le)}),P}function In(q,D){for(var B=[],P=8192,ie=new Uint8Array(q);ie.length>0;)B.push(ue.apply(null,We(ie.subarray(0,P)))),ie=ie.subarray(P);return"data:".concat(D,";base64,").concat(btoa(B.join("")))}function Pi(q){var D=new DataView(q),B;try{var P,ie,ee;if(D.getUint8(0)===255&&D.getUint8(1)===216)for(var le=D.byteLength,Pe=2;Pe+1<le;){if(D.getUint8(Pe)===255&&D.getUint8(Pe+1)===225){ie=Pe;break}Pe+=1}if(ie){var $e=ie+4,Ve=ie+10;if(Pn(D,$e,4)==="Exif"){var Oe=D.getUint16(Ve);if(P=Oe===18761,(P||Oe===19789)&&D.getUint16(Ve+2,P)===42){var ke=D.getUint32(Ve+4,P);ke>=8&&(ee=Ve+ke)}}}if(ee){var Ke=D.getUint16(ee,P),Kt,sn;for(sn=0;sn<Ke;sn+=1)if(Kt=ee+sn*12+2,D.getUint16(Kt,P)===274){Kt+=8,B=D.getUint16(Kt,P),D.setUint16(Kt,1,P);break}}}catch{B=1}return B}function Ts(q){var D=0,B=1,P=1;switch(q){case 2:B=-1;break;case 3:D=-180;break;case 4:P=-1;break;case 5:D=90,P=-1;break;case 6:D=90;break;case 7:D=90,B=-1;break;case 8:D=-90;break}return{rotate:D,scaleX:B,scaleY:P}}var Ut={render:function(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.cropped&&this.renderCropBox()},initContainer:function(){var D=this.element,B=this.options,P=this.container,ie=this.cropper,ee=Number(B.minContainerWidth),le=Number(B.minContainerHeight);Rn(ie,Le),qn(D,Le);var Pe={width:Math.max(P.offsetWidth,ee>=0?ee:it),height:Math.max(P.offsetHeight,le>=0?le:ht)};this.containerData=Pe,Fn(ie,{width:Pe.width,height:Pe.height}),Rn(D,Le),qn(ie,Le)},initCanvas:function(){var D=this.containerData,B=this.imageData,P=this.options.viewMode,ie=Math.abs(B.rotate)%180===90,ee=ie?B.naturalHeight:B.naturalWidth,le=ie?B.naturalWidth:B.naturalHeight,Pe=ee/le,$e=D.width,Ve=D.height;D.height*Pe>D.width?P===3?$e=D.height*Pe:Ve=D.width/Pe:P===3?Ve=D.width/Pe:$e=D.height*Pe;var Oe={aspectRatio:Pe,naturalWidth:ee,naturalHeight:le,width:$e,height:Ve};this.canvasData=Oe,this.limited=P===1||P===2,this.limitCanvas(!0,!0),Oe.width=Math.min(Math.max(Oe.width,Oe.minWidth),Oe.maxWidth),Oe.height=Math.min(Math.max(Oe.height,Oe.minHeight),Oe.maxHeight),Oe.left=(D.width-Oe.width)/2,Oe.top=(D.height-Oe.height)/2,Oe.oldLeft=Oe.left,Oe.oldTop=Oe.top,this.initialCanvasData=qe({},Oe)},limitCanvas:function(D,B){var P=this.options,ie=this.containerData,ee=this.canvasData,le=this.cropBoxData,Pe=P.viewMode,$e=ee.aspectRatio,Ve=this.cropped&&le;if(D){var Oe=Number(P.minCanvasWidth)||0,ke=Number(P.minCanvasHeight)||0;Pe>1?(Oe=Math.max(Oe,ie.width),ke=Math.max(ke,ie.height),Pe===3&&(ke*$e>Oe?Oe=ke*$e:ke=Oe/$e)):Pe>0&&(Oe?Oe=Math.max(Oe,Ve?le.width:0):ke?ke=Math.max(ke,Ve?le.height:0):Ve&&(Oe=le.width,ke=le.height,ke*$e>Oe?Oe=ke*$e:ke=Oe/$e));var Ke=Qt({aspectRatio:$e,width:Oe,height:ke});Oe=Ke.width,ke=Ke.height,ee.minWidth=Oe,ee.minHeight=ke,ee.maxWidth=1/0,ee.maxHeight=1/0}if(B)if(Pe>(Ve?0:1)){var Kt=ie.width-ee.width,sn=ie.height-ee.height;ee.minLeft=Math.min(0,Kt),ee.minTop=Math.min(0,sn),ee.maxLeft=Math.max(0,Kt),ee.maxTop=Math.max(0,sn),Ve&&this.limited&&(ee.minLeft=Math.min(le.left,le.left+(le.width-ee.width)),ee.minTop=Math.min(le.top,le.top+(le.height-ee.height)),ee.maxLeft=le.left,ee.maxTop=le.top,Pe===2&&(ee.width>=ie.width&&(ee.minLeft=Math.min(0,Kt),ee.maxLeft=Math.max(0,Kt)),ee.height>=ie.height&&(ee.minTop=Math.min(0,sn),ee.maxTop=Math.max(0,sn))))}else ee.minLeft=-ee.width,ee.minTop=-ee.height,ee.maxLeft=ie.width,ee.maxTop=ie.height},renderCanvas:function(D,B){var P=this.canvasData,ie=this.imageData;if(B){var ee=bn({width:ie.naturalWidth*Math.abs(ie.scaleX||1),height:ie.naturalHeight*Math.abs(ie.scaleY||1),degree:ie.rotate||0}),le=ee.width,Pe=ee.height,$e=P.width*(le/P.naturalWidth),Ve=P.height*(Pe/P.naturalHeight);P.left-=($e-P.width)/2,P.top-=(Ve-P.height)/2,P.width=$e,P.height=Ve,P.aspectRatio=le/Pe,P.naturalWidth=le,P.naturalHeight=Pe,this.limitCanvas(!0,!1)}(P.width>P.maxWidth||P.width<P.minWidth)&&(P.left=P.oldLeft),(P.height>P.maxHeight||P.height<P.minHeight)&&(P.top=P.oldTop),P.width=Math.min(Math.max(P.width,P.minWidth),P.maxWidth),P.height=Math.min(Math.max(P.height,P.minHeight),P.maxHeight),this.limitCanvas(!1,!0),P.left=Math.min(Math.max(P.left,P.minLeft),P.maxLeft),P.top=Math.min(Math.max(P.top,P.minTop),P.maxTop),P.oldLeft=P.left,P.oldTop=P.top,Fn(this.canvas,qe({width:P.width,height:P.height},Pt({translateX:P.left,translateY:P.top}))),this.renderImage(D),this.cropped&&this.limited&&this.limitCropBox(!0,!0)},renderImage:function(D){var B=this.canvasData,P=this.imageData,ie=P.naturalWidth*(B.width/B.naturalWidth),ee=P.naturalHeight*(B.height/B.naturalHeight);qe(P,{width:ie,height:ee,left:(B.width-ie)/2,top:(B.height-ee)/2}),Fn(this.image,qe({width:P.width,height:P.height},Pt(qe({translateX:P.left,translateY:P.top},P)))),D&&this.output()},initCropBox:function(){var D=this.options,B=this.canvasData,P=D.aspectRatio||D.initialAspectRatio,ie=Number(D.autoCropArea)||.8,ee={width:B.width,height:B.height};P&&(B.height*P>B.width?ee.height=ee.width/P:ee.width=ee.height*P),this.cropBoxData=ee,this.limitCropBox(!0,!0),ee.width=Math.min(Math.max(ee.width,ee.minWidth),ee.maxWidth),ee.height=Math.min(Math.max(ee.height,ee.minHeight),ee.maxHeight),ee.width=Math.max(ee.minWidth,ee.width*ie),ee.height=Math.max(ee.minHeight,ee.height*ie),ee.left=B.left+(B.width-ee.width)/2,ee.top=B.top+(B.height-ee.height)/2,ee.oldLeft=ee.left,ee.oldTop=ee.top,this.initialCropBoxData=qe({},ee)},limitCropBox:function(D,B){var P=this.options,ie=this.containerData,ee=this.canvasData,le=this.cropBoxData,Pe=this.limited,$e=P.aspectRatio;if(D){var Ve=Number(P.minCropBoxWidth)||0,Oe=Number(P.minCropBoxHeight)||0,ke=Pe?Math.min(ie.width,ee.width,ee.width+ee.left,ie.width-ee.left):ie.width,Ke=Pe?Math.min(ie.height,ee.height,ee.height+ee.top,ie.height-ee.top):ie.height;Ve=Math.min(Ve,ie.width),Oe=Math.min(Oe,ie.height),$e&&(Ve&&Oe?Oe*$e>Ve?Oe=Ve/$e:Ve=Oe*$e:Ve?Oe=Ve/$e:Oe&&(Ve=Oe*$e),Ke*$e>ke?Ke=ke/$e:ke=Ke*$e),le.minWidth=Math.min(Ve,ke),le.minHeight=Math.min(Oe,Ke),le.maxWidth=ke,le.maxHeight=Ke}B&&(Pe?(le.minLeft=Math.max(0,ee.left),le.minTop=Math.max(0,ee.top),le.maxLeft=Math.min(ie.width,ee.left+ee.width)-le.width,le.maxTop=Math.min(ie.height,ee.top+ee.height)-le.height):(le.minLeft=0,le.minTop=0,le.maxLeft=ie.width-le.width,le.maxTop=ie.height-le.height))},renderCropBox:function(){var D=this.options,B=this.containerData,P=this.cropBoxData;(P.width>P.maxWidth||P.width<P.minWidth)&&(P.left=P.oldLeft),(P.height>P.maxHeight||P.height<P.minHeight)&&(P.top=P.oldTop),P.width=Math.min(Math.max(P.width,P.minWidth),P.maxWidth),P.height=Math.min(Math.max(P.height,P.minHeight),P.maxHeight),this.limitCropBox(!1,!0),P.left=Math.min(Math.max(P.left,P.minLeft),P.maxLeft),P.top=Math.min(Math.max(P.top,P.minTop),P.maxTop),P.oldLeft=P.left,P.oldTop=P.top,D.movable&&D.cropBoxMovable&&kr(this.face,ut,P.width>=B.width&&P.height>=B.height?oe:G),Fn(this.cropBox,qe({width:P.width,height:P.height},Pt({translateX:P.left,translateY:P.top}))),this.cropped&&this.limited&&this.limitCanvas(!0,!0),this.disabled||this.output()},output:function(){this.preview(),we(this.element,Mt,this.getData())}},Ei={initPreview:function(){var D=this.element,B=this.crossOrigin,P=this.options.preview,ie=B?this.crossOriginUrl:this.url,ee=D.alt||"The image to preview",le=document.createElement("img");if(B&&(le.crossOrigin=B),le.src=ie,le.alt=ee,this.viewBox.appendChild(le),this.viewBoxImage=le,!!P){var Pe=P;typeof P=="string"?Pe=D.ownerDocument.querySelectorAll(P):P.querySelector&&(Pe=[P]),this.previews=Pe,Ue(Pe,function($e){var Ve=document.createElement("img");kr($e,bt,{width:$e.offsetWidth,height:$e.offsetHeight,html:$e.innerHTML}),B&&(Ve.crossOrigin=B),Ve.src=ie,Ve.alt=ee,Ve.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',$e.innerHTML="",$e.appendChild(Ve)})}},resetPreview:function(){Ue(this.previews,function(D){var B=dr(D,bt);Fn(D,{width:B.width,height:B.height}),D.innerHTML=B.html,js(D,bt)})},preview:function(){var D=this.imageData,B=this.canvasData,P=this.cropBoxData,ie=P.width,ee=P.height,le=D.width,Pe=D.height,$e=P.left-B.left-D.left,Ve=P.top-B.top-D.top;!this.cropped||this.disabled||(Fn(this.viewBoxImage,qe({width:le,height:Pe},Pt(qe({translateX:-$e,translateY:-Ve},D)))),Ue(this.previews,function(Oe){var ke=dr(Oe,bt),Ke=ke.width,Kt=ke.height,sn=Ke,fn=Kt,dt=1;ie&&(dt=Ke/ie,fn=ee*dt),ee&&fn>Kt&&(dt=Kt/ee,sn=ie*dt,fn=Kt),Fn(Oe,{width:sn,height:fn}),Fn(Oe.getElementsByTagName("img")[0],qe({width:le*dt,height:Pe*dt},Pt(qe({translateX:-$e*dt,translateY:-Ve*dt},D))))}))}},Gn={bind:function(){var D=this.element,B=this.options,P=this.cropper;Ie(B.cropstart)&&pe(D,Mn,B.cropstart),Ie(B.cropmove)&&pe(D,xe,B.cropmove),Ie(B.cropend)&&pe(D,Ft,B.cropend),Ie(B.crop)&&pe(D,Mt,B.crop),Ie(B.zoom)&&pe(D,k,B.zoom),pe(P,wt,this.onCropStart=this.cropStart.bind(this)),B.zoomable&&B.zoomOnWheel&&pe(P,W,this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),B.toggleDragModeOnDblclick&&pe(P,Tt,this.onDblclick=this.dblclick.bind(this)),pe(D.ownerDocument,Ge,this.onCropMove=this.cropMove.bind(this)),pe(D.ownerDocument,Vt,this.onCropEnd=this.cropEnd.bind(this)),B.responsive&&pe(window,Xt,this.onResize=this.resize.bind(this))},unbind:function(){var D=this.element,B=this.options,P=this.cropper;Ie(B.cropstart)&&F(D,Mn,B.cropstart),Ie(B.cropmove)&&F(D,xe,B.cropmove),Ie(B.cropend)&&F(D,Ft,B.cropend),Ie(B.crop)&&F(D,Mt,B.crop),Ie(B.zoom)&&F(D,k,B.zoom),F(P,wt,this.onCropStart),B.zoomable&&B.zoomOnWheel&&F(P,W,this.onWheel,{passive:!1,capture:!0}),B.toggleDragModeOnDblclick&&F(P,Tt,this.onDblclick),F(D.ownerDocument,Ge,this.onCropMove),F(D.ownerDocument,Vt,this.onCropEnd),B.responsive&&F(window,Xt,this.onResize)}},Oi={resize:function(){if(!this.disabled){var D=this.options,B=this.container,P=this.containerData,ie=B.offsetWidth/P.width,ee=B.offsetHeight/P.height,le=Math.abs(ie-1)>Math.abs(ee-1)?ie:ee;if(le!==1){var Pe,$e;D.restore&&(Pe=this.getCanvasData(),$e=this.getCropBoxData()),this.render(),D.restore&&(this.setCanvasData(Ue(Pe,function(Ve,Oe){Pe[Oe]=Ve*le})),this.setCropBoxData(Ue($e,function(Ve,Oe){$e[Oe]=Ve*le})))}}},dblclick:function(){this.disabled||this.options.dragMode===Rt||this.setDragMode(Hn(this.dragBox,Fe)?St:It)},wheel:function(D){var B=this,P=Number(this.options.wheelZoomRatio)||.1,ie=1;this.disabled||(D.preventDefault(),!this.wheeling&&(this.wheeling=!0,setTimeout(function(){B.wheeling=!1},50),D.deltaY?ie=D.deltaY>0?1:-1:D.wheelDelta?ie=-D.wheelDelta/120:D.detail&&(ie=D.detail>0?1:-1),this.zoom(-ie*P,D)))},cropStart:function(D){var B=D.buttons,P=D.button;if(!(this.disabled||(D.type==="mousedown"||D.type==="pointerdown"&&D.pointerType==="mouse")&&(et(B)&&B!==1||et(P)&&P!==0||D.ctrlKey))){var ie=this.options,ee=this.pointers,le;D.changedTouches?Ue(D.changedTouches,function(Pe){ee[Pe.identifier]=Dt(Pe)}):ee[D.pointerId||0]=Dt(D),Object.keys(ee).length>1&&ie.zoomable&&ie.zoomOnTouch?le=U:le=dr(D.target,ut),Ye.test(le)&&we(this.element,Mn,{originalEvent:D,action:le})!==!1&&(D.preventDefault(),this.action=le,this.cropping=!1,le===g&&(this.cropping=!0,Rn(this.dragBox,Je)))}},cropMove:function(D){var B=this.action;if(!(this.disabled||!B)){var P=this.pointers;D.preventDefault(),we(this.element,xe,{originalEvent:D,action:B})!==!1&&(D.changedTouches?Ue(D.changedTouches,function(ie){qe(P[ie.identifier]||{},Dt(ie,!0))}):qe(P[D.pointerId||0]||{},Dt(D,!0)),this.change(D))}},cropEnd:function(D){if(!this.disabled){var B=this.action,P=this.pointers;D.changedTouches?Ue(D.changedTouches,function(ie){delete P[ie.identifier]}):delete P[D.pointerId||0],B&&(D.preventDefault(),Object.keys(P).length||(this.action=""),this.cropping&&(this.cropping=!1,Xi(this.dragBox,Je,this.cropped&&this.options.modal)),we(this.element,Ft,{originalEvent:D,action:B}))}}},cs={change:function(D){var B=this.options,P=this.canvasData,ie=this.containerData,ee=this.cropBoxData,le=this.pointers,Pe=this.action,$e=B.aspectRatio,Ve=ee.left,Oe=ee.top,ke=ee.width,Ke=ee.height,Kt=Ve+ke,sn=Oe+Ke,fn=0,dt=0,$t=ie.width,$n=ie.height,Ln=!0,Ot;!$e&&D.shiftKey&&($e=ke&&Ke?ke/Ke:1),this.limited&&(fn=ee.minLeft,dt=ee.minTop,$t=fn+Math.min(ie.width,P.width,P.left+P.width),$n=dt+Math.min(ie.height,P.height,P.top+P.height));var kt=le[Object.keys(le)[0]],st={x:kt.endX-kt.startX,y:kt.endY-kt.startY},an=function(ri){switch(ri){case V:Kt+st.x>$t&&(st.x=$t-Kt);break;case Me:Ve+st.x<fn&&(st.x=fn-Ve);break;case ve:Oe+st.y<dt&&(st.y=dt-Oe);break;case Te:sn+st.y>$n&&(st.y=$n-sn);break}};switch(Pe){case G:Ve+=st.x,Oe+=st.y;break;case V:if(st.x>=0&&(Kt>=$t||$e&&(Oe<=dt||sn>=$n))){Ln=!1;break}an(V),ke+=st.x,ke<0&&(Pe=Me,ke=-ke,Ve-=ke),$e&&(Ke=ke/$e,Oe+=(ee.height-Ke)/2);break;case ve:if(st.y<=0&&(Oe<=dt||$e&&(Ve<=fn||Kt>=$t))){Ln=!1;break}an(ve),Ke-=st.y,Oe+=st.y,Ke<0&&(Pe=Te,Ke=-Ke,Oe-=Ke),$e&&(ke=Ke*$e,Ve+=(ee.width-ke)/2);break;case Me:if(st.x<=0&&(Ve<=fn||$e&&(Oe<=dt||sn>=$n))){Ln=!1;break}an(Me),ke-=st.x,Ve+=st.x,ke<0&&(Pe=V,ke=-ke,Ve-=ke),$e&&(Ke=ke/$e,Oe+=(ee.height-Ke)/2);break;case Te:if(st.y>=0&&(sn>=$n||$e&&(Ve<=fn||Kt>=$t))){Ln=!1;break}an(Te),Ke+=st.y,Ke<0&&(Pe=ve,Ke=-Ke,Oe-=Ke),$e&&(ke=Ke*$e,Ve+=(ee.width-ke)/2);break;case Z:if($e){if(st.y<=0&&(Oe<=dt||Kt>=$t)){Ln=!1;break}an(ve),Ke-=st.y,Oe+=st.y,ke=Ke*$e}else an(ve),an(V),st.x>=0?Kt<$t?ke+=st.x:st.y<=0&&Oe<=dt&&(Ln=!1):ke+=st.x,st.y<=0?Oe>dt&&(Ke-=st.y,Oe+=st.y):(Ke-=st.y,Oe+=st.y);ke<0&&Ke<0?(Pe=fe,Ke=-Ke,ke=-ke,Oe-=Ke,Ve-=ke):ke<0?(Pe=me,ke=-ke,Ve-=ke):Ke<0&&(Pe=_e,Ke=-Ke,Oe-=Ke);break;case me:if($e){if(st.y<=0&&(Oe<=dt||Ve<=fn)){Ln=!1;break}an(ve),Ke-=st.y,Oe+=st.y,ke=Ke*$e,Ve+=ee.width-ke}else an(ve),an(Me),st.x<=0?Ve>fn?(ke-=st.x,Ve+=st.x):st.y<=0&&Oe<=dt&&(Ln=!1):(ke-=st.x,Ve+=st.x),st.y<=0?Oe>dt&&(Ke-=st.y,Oe+=st.y):(Ke-=st.y,Oe+=st.y);ke<0&&Ke<0?(Pe=_e,Ke=-Ke,ke=-ke,Oe-=Ke,Ve-=ke):ke<0?(Pe=Z,ke=-ke,Ve-=ke):Ke<0&&(Pe=fe,Ke=-Ke,Oe-=Ke);break;case fe:if($e){if(st.x<=0&&(Ve<=fn||sn>=$n)){Ln=!1;break}an(Me),ke-=st.x,Ve+=st.x,Ke=ke/$e}else an(Te),an(Me),st.x<=0?Ve>fn?(ke-=st.x,Ve+=st.x):st.y>=0&&sn>=$n&&(Ln=!1):(ke-=st.x,Ve+=st.x),st.y>=0?sn<$n&&(Ke+=st.y):Ke+=st.y;ke<0&&Ke<0?(Pe=Z,Ke=-Ke,ke=-ke,Oe-=Ke,Ve-=ke):ke<0?(Pe=_e,ke=-ke,Ve-=ke):Ke<0&&(Pe=me,Ke=-Ke,Oe-=Ke);break;case _e:if($e){if(st.x>=0&&(Kt>=$t||sn>=$n)){Ln=!1;break}an(V),ke+=st.x,Ke=ke/$e}else an(Te),an(V),st.x>=0?Kt<$t?ke+=st.x:st.y>=0&&sn>=$n&&(Ln=!1):ke+=st.x,st.y>=0?sn<$n&&(Ke+=st.y):Ke+=st.y;ke<0&&Ke<0?(Pe=me,Ke=-Ke,ke=-ke,Oe-=Ke,Ve-=ke):ke<0?(Pe=fe,ke=-ke,Ve-=ke):Ke<0&&(Pe=Z,Ke=-Ke,Oe-=Ke);break;case oe:this.move(st.x,st.y),Ln=!1;break;case U:this.zoom(jt(le),D),Ln=!1;break;case g:if(!st.x||!st.y){Ln=!1;break}Ot=re(this.cropper),Ve=kt.startX-Ot.left,Oe=kt.startY-Ot.top,ke=ee.minWidth,Ke=ee.minHeight,st.x>0?Pe=st.y>0?_e:Z:st.x<0&&(Ve-=ke,Pe=st.y>0?fe:me),st.y<0&&(Oe-=Ke),this.cropped||(qn(this.cropBox,Le),this.cropped=!0,this.limited&&this.limitCropBox(!0,!0));break}Ln&&(ee.width=ke,ee.height=Ke,ee.left=Ve,ee.top=Oe,this.action=Pe,this.renderCropBox()),Ue(le,function(dn){dn.startX=dn.endX,dn.startY=dn.endY})}},ni={crop:function(){return this.ready&&!this.cropped&&!this.disabled&&(this.cropped=!0,this.limitCropBox(!0,!0),this.options.modal&&Rn(this.dragBox,Je),qn(this.cropBox,Le),this.setCropBoxData(this.initialCropBoxData)),this},reset:function(){return this.ready&&!this.disabled&&(this.imageData=qe({},this.initialImageData),this.canvasData=qe({},this.initialCanvasData),this.cropBoxData=qe({},this.initialCropBoxData),this.renderCanvas(),this.cropped&&this.renderCropBox()),this},clear:function(){return this.cropped&&!this.disabled&&(qe(this.cropBoxData,{left:0,top:0,width:0,height:0}),this.cropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),qn(this.dragBox,Je),Rn(this.cropBox,Le)),this},replace:function(D){var B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return!this.disabled&&D&&(this.isImg&&(this.element.src=D),B?(this.url=D,this.image.src=D,this.ready&&(this.viewBoxImage.src=D,Ue(this.previews,function(P){P.getElementsByTagName("img")[0].src=D}))):(this.isImg&&(this.replaced=!0),this.options.data=null,this.uncreate(),this.load(D))),this},enable:function(){return this.ready&&this.disabled&&(this.disabled=!1,qn(this.cropper,Ee)),this},disable:function(){return this.ready&&!this.disabled&&(this.disabled=!0,Rn(this.cropper,Ee)),this},destroy:function(){var D=this.element;return D[X]?(D[X]=void 0,this.isImg&&this.replaced&&(D.src=this.originalUrl),this.uncreate(),this):this},move:function(D){var B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:D,P=this.canvasData,ie=P.left,ee=P.top;return this.moveTo(tt(D)?D:ie+Number(D),tt(B)?B:ee+Number(B))},moveTo:function(D){var B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:D,P=this.canvasData,ie=!1;return D=Number(D),B=Number(B),this.ready&&!this.disabled&&this.options.movable&&(et(D)&&(P.left=D,ie=!0),et(B)&&(P.top=B,ie=!0),ie&&this.renderCanvas(!0)),this},zoom:function(D,B){var P=this.canvasData;return D=Number(D),D<0?D=1/(1-D):D=1+D,this.zoomTo(P.width*D/P.naturalWidth,null,B)},zoomTo:function(D,B,P){var ie=this.options,ee=this.canvasData,le=ee.width,Pe=ee.height,$e=ee.naturalWidth,Ve=ee.naturalHeight;if(D=Number(D),D>=0&&this.ready&&!this.disabled&&ie.zoomable){var Oe=$e*D,ke=Ve*D;if(we(this.element,k,{ratio:D,oldRatio:le/$e,originalEvent:P})===!1)return this;if(P){var Ke=this.pointers,Kt=re(this.cropper),sn=Ke&&Object.keys(Ke).length?Wt(Ke):{pageX:P.pageX,pageY:P.pageY};ee.left-=(Oe-le)*((sn.pageX-Kt.left-ee.left)/le),ee.top-=(ke-Pe)*((sn.pageY-Kt.top-ee.top)/Pe)}else je(B)&&et(B.x)&&et(B.y)?(ee.left-=(Oe-le)*((B.x-ee.left)/le),ee.top-=(ke-Pe)*((B.y-ee.top)/Pe)):(ee.left-=(Oe-le)/2,ee.top-=(ke-Pe)/2);ee.width=Oe,ee.height=ke,this.renderCanvas(!0)}return this},rotate:function(D){return this.rotateTo((this.imageData.rotate||0)+Number(D))},rotateTo:function(D){return D=Number(D),et(D)&&this.ready&&!this.disabled&&this.options.rotatable&&(this.imageData.rotate=D%360,this.renderCanvas(!0,!0)),this},scaleX:function(D){var B=this.imageData.scaleY;return this.scale(D,et(B)?B:1)},scaleY:function(D){var B=this.imageData.scaleX;return this.scale(et(B)?B:1,D)},scale:function(D){var B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:D,P=this.imageData,ie=!1;return D=Number(D),B=Number(B),this.ready&&!this.disabled&&this.options.scalable&&(et(D)&&(P.scaleX=D,ie=!0),et(B)&&(P.scaleY=B,ie=!0),ie&&this.renderCanvas(!0,!0)),this},getData:function(){var D=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,B=this.options,P=this.imageData,ie=this.canvasData,ee=this.cropBoxData,le;if(this.ready&&this.cropped){le={x:ee.left-ie.left,y:ee.top-ie.top,width:ee.width,height:ee.height};var Pe=P.width/P.naturalWidth;if(Ue(le,function(Oe,ke){le[ke]=Oe/Pe}),D){var $e=Math.round(le.y+le.height),Ve=Math.round(le.x+le.width);le.x=Math.round(le.x),le.y=Math.round(le.y),le.width=Ve-le.x,le.height=$e-le.y}}else le={x:0,y:0,width:0,height:0};return B.rotatable&&(le.rotate=P.rotate||0),B.scalable&&(le.scaleX=P.scaleX||1,le.scaleY=P.scaleY||1),le},setData:function(D){var B=this.options,P=this.imageData,ie=this.canvasData,ee={};if(this.ready&&!this.disabled&&je(D)){var le=!1;B.rotatable&&et(D.rotate)&&D.rotate!==P.rotate&&(P.rotate=D.rotate,le=!0),B.scalable&&(et(D.scaleX)&&D.scaleX!==P.scaleX&&(P.scaleX=D.scaleX,le=!0),et(D.scaleY)&&D.scaleY!==P.scaleY&&(P.scaleY=D.scaleY,le=!0)),le&&this.renderCanvas(!0,!0);var Pe=P.width/P.naturalWidth;et(D.x)&&(ee.left=D.x*Pe+ie.left),et(D.y)&&(ee.top=D.y*Pe+ie.top),et(D.width)&&(ee.width=D.width*Pe),et(D.height)&&(ee.height=D.height*Pe),this.setCropBoxData(ee)}return this},getContainerData:function(){return this.ready?qe({},this.containerData):{}},getImageData:function(){return this.sized?qe({},this.imageData):{}},getCanvasData:function(){var D=this.canvasData,B={};return this.ready&&Ue(["left","top","width","height","naturalWidth","naturalHeight"],function(P){B[P]=D[P]}),B},setCanvasData:function(D){var B=this.canvasData,P=B.aspectRatio;return this.ready&&!this.disabled&&je(D)&&(et(D.left)&&(B.left=D.left),et(D.top)&&(B.top=D.top),et(D.width)?(B.width=D.width,B.height=D.width/P):et(D.height)&&(B.height=D.height,B.width=D.height*P),this.renderCanvas(!0)),this},getCropBoxData:function(){var D=this.cropBoxData,B;return this.ready&&this.cropped&&(B={left:D.left,top:D.top,width:D.width,height:D.height}),B||{}},setCropBoxData:function(D){var B=this.cropBoxData,P=this.options.aspectRatio,ie,ee;return this.ready&&this.cropped&&!this.disabled&&je(D)&&(et(D.left)&&(B.left=D.left),et(D.top)&&(B.top=D.top),et(D.width)&&D.width!==B.width&&(ie=!0,B.width=D.width),et(D.height)&&D.height!==B.height&&(ee=!0,B.height=D.height),P&&(ie?B.height=B.width/P:ee&&(B.width=B.height*P)),this.renderCropBox()),this},getCroppedCanvas:function(){var D=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!this.ready||!window.HTMLCanvasElement)return null;var B=this.canvasData,P=Mi(this.image,this.imageData,B,D);if(!this.cropped)return P;var ie=this.getData(D.rounded),ee=ie.x,le=ie.y,Pe=ie.width,$e=ie.height,Ve=P.width/Math.floor(B.naturalWidth);Ve!==1&&(ee*=Ve,le*=Ve,Pe*=Ve,$e*=Ve);var Oe=Pe/$e,ke=Qt({aspectRatio:Oe,width:D.maxWidth||1/0,height:D.maxHeight||1/0}),Ke=Qt({aspectRatio:Oe,width:D.minWidth||0,height:D.minHeight||0},"cover"),Kt=Qt({aspectRatio:Oe,width:D.width||(Ve!==1?P.width:Pe),height:D.height||(Ve!==1?P.height:$e)}),sn=Kt.width,fn=Kt.height;sn=Math.min(ke.width,Math.max(Ke.width,sn)),fn=Math.min(ke.height,Math.max(Ke.height,fn));var dt=document.createElement("canvas"),$t=dt.getContext("2d");dt.width=Zt(sn),dt.height=Zt(fn),$t.fillStyle=D.fillColor||"transparent",$t.fillRect(0,0,sn,fn);var $n=D.imageSmoothingEnabled,Ln=$n===void 0?!0:$n,Ot=D.imageSmoothingQuality;$t.imageSmoothingEnabled=Ln,Ot&&($t.imageSmoothingQuality=Ot);var kt=P.width,st=P.height,an=ee,dn=le,ri,nr,ki,ir,Nn,Bi;an<=-Pe||an>kt?(an=0,ri=0,ki=0,Nn=0):an<=0?(ki=-an,an=0,ri=Math.min(kt,Pe+an),Nn=ri):an<=kt&&(ki=0,ri=Math.min(Pe,kt-an),Nn=ri),ri<=0||dn<=-$e||dn>st?(dn=0,nr=0,ir=0,Bi=0):dn<=0?(ir=-dn,dn=0,nr=Math.min(st,$e+dn),Bi=nr):dn<=st&&(ir=0,nr=Math.min($e,st-dn),Bi=nr);var fi=[an,dn,ri,nr];if(Nn>0&&Bi>0){var pr=sn/Pe;fi.push(ki*pr,ir*pr,Nn*pr,Bi*pr)}return $t.drawImage.apply($t,[P].concat(d(fi.map(function(As){return Math.floor(Zt(As))})))),dt},setAspectRatio:function(D){var B=this.options;return!this.disabled&&!tt(D)&&(B.aspectRatio=Math.max(0,D)||NaN,this.ready&&(this.initCropBox(),this.cropped&&this.renderCropBox())),this},setDragMode:function(D){var B=this.options,P=this.dragBox,ie=this.face;if(this.ready&&!this.disabled){var ee=D===It,le=B.movable&&D===St;D=ee||le?D:Rt,B.dragMode=D,kr(P,ut,D),Xi(P,Fe,ee),Xi(P,nt,le),B.cropBoxMovable||(kr(ie,ut,D),Xi(ie,Fe,ee),Xi(ie,nt,le))}return this}},Ii=z.Cropper,Kr=function(){function q(D){var B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(o(this,q),!D||!vt.test(D.tagName))throw new Error("The first argument is required and must be an <img> or <canvas> element.");this.element=D,this.options=qe({},Q,je(B)&&B),this.cropped=!1,this.disabled=!1,this.pointers={},this.ready=!1,this.reloading=!1,this.replaced=!1,this.sized=!1,this.sizing=!1,this.init()}return c(q,[{key:"init",value:function(){var B=this.element,P=B.tagName.toLowerCase(),ie;if(!B[X]){if(B[X]=this,P==="img"){if(this.isImg=!0,ie=B.getAttribute("src")||"",this.originalUrl=ie,!ie)return;ie=B.src}else P==="canvas"&&window.HTMLCanvasElement&&(ie=B.toDataURL());this.load(ie)}}},{key:"load",value:function(B){var P=this;if(B){this.url=B,this.imageData={};var ie=this.element,ee=this.options;if(!ee.rotatable&&!ee.scalable&&(ee.checkOrientation=!1),!ee.checkOrientation||!window.ArrayBuffer){this.clone();return}if(Ne.test(B)){Xe.test(B)?this.read(Br(B)):this.clone();return}var le=new XMLHttpRequest,Pe=this.clone.bind(this);this.reloading=!0,this.xhr=le,le.onabort=Pe,le.onerror=Pe,le.ontimeout=Pe,le.onprogress=function(){le.getResponseHeader("content-type")!==se&&le.abort()},le.onload=function(){P.read(le.response)},le.onloadend=function(){P.reloading=!1,P.xhr=null},ee.checkCrossOrigin&&Et(B)&&ie.crossOrigin&&(B=Nt(B)),le.open("GET",B,!0),le.responseType="arraybuffer",le.withCredentials=ie.crossOrigin==="use-credentials",le.send()}}},{key:"read",value:function(B){var P=this.options,ie=this.imageData,ee=Pi(B),le=0,Pe=1,$e=1;if(ee>1){this.url=In(B,se);var Ve=Ts(ee);le=Ve.rotate,Pe=Ve.scaleX,$e=Ve.scaleY}P.rotatable&&(ie.rotate=le),P.scalable&&(ie.scaleX=Pe,ie.scaleY=$e),this.clone()}},{key:"clone",value:function(){var B=this.element,P=this.url,ie=B.crossOrigin,ee=P;this.options.checkCrossOrigin&&Et(P)&&(ie||(ie="anonymous"),ee=Nt(P)),this.crossOrigin=ie,this.crossOriginUrl=ee;var le=document.createElement("img");ie&&(le.crossOrigin=ie),le.src=ee||P,le.alt=B.alt||"The image to crop",this.image=le,le.onload=this.start.bind(this),le.onerror=this.stop.bind(this),Rn(le,ge),B.parentNode.insertBefore(le,B.nextSibling)}},{key:"start",value:function(){var B=this,P=this.image;P.onload=null,P.onerror=null,this.sizing=!0;var ie=z.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(z.navigator.userAgent),ee=function(Ve,Oe){qe(B.imageData,{naturalWidth:Ve,naturalHeight:Oe,aspectRatio:Ve/Oe}),B.initialImageData=qe({},B.imageData),B.sizing=!1,B.sized=!0,B.build()};if(P.naturalWidth&&!ie){ee(P.naturalWidth,P.naturalHeight);return}var le=document.createElement("img"),Pe=document.body||document.documentElement;this.sizingImage=le,le.onload=function(){ee(le.width,le.height),ie||Pe.removeChild(le)},le.src=P.src,ie||(le.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",Pe.appendChild(le))}},{key:"stop",value:function(){var B=this.image;B.onload=null,B.onerror=null,B.parentNode.removeChild(B),this.image=null}},{key:"build",value:function(){if(!(!this.sized||this.ready)){var B=this.element,P=this.options,ie=this.image,ee=B.parentNode,le=document.createElement("div");le.innerHTML=Ze;var Pe=le.querySelector(".".concat(X,"-container")),$e=Pe.querySelector(".".concat(X,"-canvas")),Ve=Pe.querySelector(".".concat(X,"-drag-box")),Oe=Pe.querySelector(".".concat(X,"-crop-box")),ke=Oe.querySelector(".".concat(X,"-face"));this.container=ee,this.cropper=Pe,this.canvas=$e,this.dragBox=Ve,this.cropBox=Oe,this.viewBox=Pe.querySelector(".".concat(X,"-view-box")),this.face=ke,$e.appendChild(ie),Rn(B,Le),ee.insertBefore(Pe,B.nextSibling),qn(ie,ge),this.initPreview(),this.bind(),P.initialAspectRatio=Math.max(0,P.initialAspectRatio)||NaN,P.aspectRatio=Math.max(0,P.aspectRatio)||NaN,P.viewMode=Math.max(0,Math.min(3,Math.round(P.viewMode)))||0,Rn(Oe,Le),P.guides||Rn(Oe.getElementsByClassName("".concat(X,"-dashed")),Le),P.center||Rn(Oe.getElementsByClassName("".concat(X,"-center")),Le),P.background&&Rn(Pe,"".concat(X,"-bg")),P.highlight||Rn(ke,Ce),P.cropBoxMovable&&(Rn(ke,nt),kr(ke,ut,G)),P.cropBoxResizable||(Rn(Oe.getElementsByClassName("".concat(X,"-line")),Le),Rn(Oe.getElementsByClassName("".concat(X,"-point")),Le)),this.render(),this.ready=!0,this.setDragMode(P.dragMode),P.autoCrop&&this.crop(),this.setData(P.data),Ie(P.ready)&&pe(B,Cn,P.ready,{once:!0}),we(B,Cn)}}},{key:"unbuild",value:function(){if(this.ready){this.ready=!1,this.unbind(),this.resetPreview();var B=this.cropper.parentNode;B&&B.removeChild(this.cropper),qn(this.element,Le)}}},{key:"uncreate",value:function(){this.ready?(this.unbuild(),this.ready=!1,this.cropped=!1):this.sizing?(this.sizingImage.onload=null,this.sizing=!1,this.sized=!1):this.reloading?(this.xhr.onabort=null,this.xhr.abort()):this.image&&this.stop()}}],[{key:"noConflict",value:function(){return window.Cropper=Ii,q}},{key:"setDefaults",value:function(B){qe(Q,je(B)&&B)}}]),q}();return qe(Kr.prototype,Ut,Ei,Gn,Oi,cs,ni),Kr})})(Ny);var Wg={exports:{}};/*!
 * jQuery JavaScript Library v3.7.1
 * https://jquery.com/
 *
 * Copyright OpenJS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2023-08-28T13:37Z
 */(function(s){(function(e,t){s.exports=e.document?t(e,!0):function(n){if(!n.document)throw new Error("jQuery requires a window with a document");return t(n)}})(typeof window<"u"?window:fh,function(e,t){var n=[],r=Object.getPrototypeOf,o=n.slice,l=n.flat?function(h){return n.flat.call(h)}:function(h){return n.concat.apply([],h)},c=n.push,f=n.indexOf,d={},m=d.toString,v=d.hasOwnProperty,y=v.toString,M=y.call(Object),T={},A=function(p){return typeof p=="function"&&typeof p.nodeType!="number"&&typeof p.item!="function"},E=function(p){return p!=null&&p===p.window},b=e.document,z={type:!0,src:!0,nonce:!0,noModule:!0};function I(h,p,_){_=_||b;var w,R,L=_.createElement("script");if(L.text=h,p)for(w in z)R=p[w]||p.getAttribute&&p.getAttribute(w),R&&L.setAttribute(w,R);_.head.appendChild(L).parentNode.removeChild(L)}function H(h){return h==null?h+"":typeof h=="object"||typeof h=="function"?d[m.call(h)]||"object":typeof h}var X="3.7.1",G=/HTML$/i,g=function(h,p){return new g.fn.init(h,p)};g.fn=g.prototype={jquery:X,constructor:g,length:0,toArray:function(){return o.call(this)},get:function(h){return h==null?o.call(this):h<0?this[h+this.length]:this[h]},pushStack:function(h){var p=g.merge(this.constructor(),h);return p.prevObject=this,p},each:function(h){return g.each(this,h)},map:function(h){return this.pushStack(g.map(this,function(p,_){return h.call(p,_,p)}))},slice:function(){return this.pushStack(o.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(g.grep(this,function(h,p){return(p+1)%2}))},odd:function(){return this.pushStack(g.grep(this,function(h,p){return p%2}))},eq:function(h){var p=this.length,_=+h+(h<0?p:0);return this.pushStack(_>=0&&_<p?[this[_]]:[])},end:function(){return this.prevObject||this.constructor()},push:c,sort:n.sort,splice:n.splice},g.extend=g.fn.extend=function(){var h,p,_,w,R,L,N=arguments[0]||{},te=1,J=arguments.length,he=!1;for(typeof N=="boolean"&&(he=N,N=arguments[te]||{},te++),typeof N!="object"&&!A(N)&&(N={}),te===J&&(N=this,te--);te<J;te++)if((h=arguments[te])!=null)for(p in h)w=h[p],!(p==="__proto__"||N===w)&&(he&&w&&(g.isPlainObject(w)||(R=Array.isArray(w)))?(_=N[p],R&&!Array.isArray(_)?L=[]:!R&&!g.isPlainObject(_)?L={}:L=_,R=!1,N[p]=g.extend(he,L,w)):w!==void 0&&(N[p]=w));return N},g.extend({expando:"jQuery"+(X+Math.random()).replace(/\D/g,""),isReady:!0,error:function(h){throw new Error(h)},noop:function(){},isPlainObject:function(h){var p,_;return!h||m.call(h)!=="[object Object]"?!1:(p=r(h),p?(_=v.call(p,"constructor")&&p.constructor,typeof _=="function"&&y.call(_)===M):!0)},isEmptyObject:function(h){var p;for(p in h)return!1;return!0},globalEval:function(h,p,_){I(h,{nonce:p&&p.nonce},_)},each:function(h,p){var _,w=0;if(oe(h))for(_=h.length;w<_&&p.call(h[w],w,h[w])!==!1;w++);else for(w in h)if(p.call(h[w],w,h[w])===!1)break;return h},text:function(h){var p,_="",w=0,R=h.nodeType;if(!R)for(;p=h[w++];)_+=g.text(p);return R===1||R===11?h.textContent:R===9?h.documentElement.textContent:R===3||R===4?h.nodeValue:_},makeArray:function(h,p){var _=p||[];return h!=null&&(oe(Object(h))?g.merge(_,typeof h=="string"?[h]:h):c.call(_,h)),_},inArray:function(h,p,_){return p==null?-1:f.call(p,h,_)},isXMLDoc:function(h){var p=h&&h.namespaceURI,_=h&&(h.ownerDocument||h).documentElement;return!G.test(p||_&&_.nodeName||"HTML")},merge:function(h,p){for(var _=+p.length,w=0,R=h.length;w<_;w++)h[R++]=p[w];return h.length=R,h},grep:function(h,p,_){for(var w,R=[],L=0,N=h.length,te=!_;L<N;L++)w=!p(h[L],L),w!==te&&R.push(h[L]);return R},map:function(h,p,_){var w,R,L=0,N=[];if(oe(h))for(w=h.length;L<w;L++)R=p(h[L],L,_),R!=null&&N.push(R);else for(L in h)R=p(h[L],L,_),R!=null&&N.push(R);return l(N)},guid:1,support:T}),typeof Symbol=="function"&&(g.fn[Symbol.iterator]=n[Symbol.iterator]),g.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(h,p){d["[object "+p+"]"]=p.toLowerCase()});function oe(h){var p=!!h&&"length"in h&&h.length,_=H(h);return A(h)||E(h)?!1:_==="array"||p===0||typeof p=="number"&&p>0&&p-1 in h}function U(h,p){return h.nodeName&&h.nodeName.toLowerCase()===p.toLowerCase()}var V=n.pop,Me=n.sort,Te=n.splice,ve="[\\x20\\t\\r\\n\\f]",Z=new RegExp("^"+ve+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ve+"+$","g");g.contains=function(h,p){var _=p&&p.parentNode;return h===_||!!(_&&_.nodeType===1&&(h.contains?h.contains(_):h.compareDocumentPosition&&h.compareDocumentPosition(_)&16))};var me=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function _e(h,p){return p?h==="\0"?" ":h.slice(0,-1)+"\\"+h.charCodeAt(h.length-1).toString(16)+" ":"\\"+h}g.escapeSelector=function(h){return(h+"").replace(me,_e)};var fe=b,Fe=c;(function(){var h,p,_,w,R,L=Fe,N,te,J,he,De,He=g.expando,Se=0,Qe=0,Ht=xo(),pn=xo(),en=xo(),si=xo(),Qn=function(Y,ae){return Y===ae&&(R=!0),0},xr="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",yr="(?:\\\\[\\da-fA-F]{1,6}"+ve+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",on="\\["+ve+"*("+yr+")(?:"+ve+"*([*^$|!~]?=)"+ve+`*(?:'((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)"|(`+yr+"))|)"+ve+"*\\]",zr=":("+yr+`)(?:\\((('((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)")|((?:\\\\.|[^\\\\()[\\]]|`+on+")*)|.*)\\)|)",mn=new RegExp(ve+"+","g"),Vn=new RegExp("^"+ve+"*,"+ve+"*"),Cs=new RegExp("^"+ve+"*([>+~]|"+ve+")"+ve+"*"),ta=new RegExp(ve+"|>"),rr=new RegExp(zr),vo=new RegExp("^"+yr+"$"),Gr={ID:new RegExp("^#("+yr+")"),CLASS:new RegExp("^\\.("+yr+")"),TAG:new RegExp("^("+yr+"|[*])"),ATTR:new RegExp("^"+on),PSEUDO:new RegExp("^"+zr),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ve+"*(even|odd|(([+-]|)(\\d*)n|)"+ve+"*(?:([+-]|)"+ve+"*(\\d+)|))"+ve+"*\\)|)","i"),bool:new RegExp("^(?:"+xr+")$","i"),needsContext:new RegExp("^"+ve+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ve+"*((?:-\\d)?\\d*)"+ve+"*\\)|)(?=[^-]|$)","i")},Vr=/^(?:input|select|textarea|button)$/i,Qr=/^h\d$/i,Fi=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,us=/[+~]/,oi=new RegExp("\\\\[\\da-fA-F]{1,6}"+ve+"?|\\\\([^\\r\\n\\f])","g"),Ni=function(Y,ae){var be="0x"+Y.slice(1)-65536;return ae||(be<0?String.fromCharCode(be+65536):String.fromCharCode(be>>10|55296,be&1023|56320))},ji=function(){_r()},Xl=bo(function(Y){return Y.disabled===!0&&U(Y,"fieldset")},{dir:"parentNode",next:"legend"});function Yi(){try{return N.activeElement}catch{}}try{L.apply(n=o.call(fe.childNodes),fe.childNodes),n[fe.childNodes.length].nodeType}catch{L={apply:function(ae,be){Fe.apply(ae,o.call(be))},call:function(ae){Fe.apply(ae,o.call(arguments,1))}}}function En(Y,ae,be,Ae){var Be,at,lt,yt,mt,tn,Bt,zt=ae&&ae.ownerDocument,ln=ae?ae.nodeType:9;if(be=be||[],typeof Y!="string"||!Y||ln!==1&&ln!==9&&ln!==11)return be;if(!Ae&&(_r(ae),ae=ae||N,J)){if(ln!==11&&(mt=Fi.exec(Y)))if(Be=mt[1]){if(ln===9)if(lt=ae.getElementById(Be)){if(lt.id===Be)return L.call(be,lt),be}else return be;else if(zt&&(lt=zt.getElementById(Be))&&En.contains(ae,lt)&&lt.id===Be)return L.call(be,lt),be}else{if(mt[2])return L.apply(be,ae.getElementsByTagName(Y)),be;if((Be=mt[3])&&ae.getElementsByClassName)return L.apply(be,ae.getElementsByClassName(Be)),be}if(!si[Y+" "]&&(!he||!he.test(Y))){if(Bt=Y,zt=ae,ln===1&&(ta.test(Y)||Cs.test(Y))){for(zt=us.test(Y)&&na(ae.parentNode)||ae,(zt!=ae||!T.scope)&&((yt=ae.getAttribute("id"))?yt=g.escapeSelector(yt):ae.setAttribute("id",yt=He)),tn=yo(Y),at=tn.length;at--;)tn[at]=(yt?"#"+yt:":scope")+" "+_o(tn[at]);Bt=tn.join(",")}try{return L.apply(be,zt.querySelectorAll(Bt)),be}catch{si(Y,!0)}finally{yt===He&&ae.removeAttribute("id")}}}return il(Y.replace(Z,"$1"),ae,be,Ae)}function xo(){var Y=[];function ae(be,Ae){return Y.push(be+" ")>p.cacheLength&&delete ae[Y.shift()],ae[be+" "]=Ae}return ae}function sr(Y){return Y[He]=!0,Y}function fs(Y){var ae=N.createElement("fieldset");try{return!!Y(ae)}catch{return!1}finally{ae.parentNode&&ae.parentNode.removeChild(ae),ae=null}}function jl(Y){return function(ae){return U(ae,"input")&&ae.type===Y}}function wh(Y){return function(ae){return(U(ae,"input")||U(ae,"button"))&&ae.type===Y}}function Yl(Y){return function(ae){return"form"in ae?ae.parentNode&&ae.disabled===!1?"label"in ae?"label"in ae.parentNode?ae.parentNode.disabled===Y:ae.disabled===Y:ae.isDisabled===Y||ae.isDisabled!==!Y&&Xl(ae)===Y:ae.disabled===Y:"label"in ae?ae.disabled===Y:!1}}function ds(Y){return sr(function(ae){return ae=+ae,sr(function(be,Ae){for(var Be,at=Y([],be.length,ae),lt=at.length;lt--;)be[Be=at[lt]]&&(be[Be]=!(Ae[Be]=be[Be]))})})}function na(Y){return Y&&typeof Y.getElementsByTagName<"u"&&Y}function _r(Y){var ae,be=Y?Y.ownerDocument||Y:fe;return be==N||be.nodeType!==9||!be.documentElement||(N=be,te=N.documentElement,J=!g.isXMLDoc(N),De=te.matches||te.webkitMatchesSelector||te.msMatchesSelector,te.msMatchesSelector&&fe!=N&&(ae=N.defaultView)&&ae.top!==ae&&ae.addEventListener("unload",ji),T.getById=fs(function(Ae){return te.appendChild(Ae).id=g.expando,!N.getElementsByName||!N.getElementsByName(g.expando).length}),T.disconnectedMatch=fs(function(Ae){return De.call(Ae,"*")}),T.scope=fs(function(){return N.querySelectorAll(":scope")}),T.cssHas=fs(function(){try{return N.querySelector(":has(*,:jqfake)"),!1}catch{return!0}}),T.getById?(p.filter.ID=function(Ae){var Be=Ae.replace(oi,Ni);return function(at){return at.getAttribute("id")===Be}},p.find.ID=function(Ae,Be){if(typeof Be.getElementById<"u"&&J){var at=Be.getElementById(Ae);return at?[at]:[]}}):(p.filter.ID=function(Ae){var Be=Ae.replace(oi,Ni);return function(at){var lt=typeof at.getAttributeNode<"u"&&at.getAttributeNode("id");return lt&&lt.value===Be}},p.find.ID=function(Ae,Be){if(typeof Be.getElementById<"u"&&J){var at,lt,yt,mt=Be.getElementById(Ae);if(mt){if(at=mt.getAttributeNode("id"),at&&at.value===Ae)return[mt];for(yt=Be.getElementsByName(Ae),lt=0;mt=yt[lt++];)if(at=mt.getAttributeNode("id"),at&&at.value===Ae)return[mt]}return[]}}),p.find.TAG=function(Ae,Be){return typeof Be.getElementsByTagName<"u"?Be.getElementsByTagName(Ae):Be.querySelectorAll(Ae)},p.find.CLASS=function(Ae,Be){if(typeof Be.getElementsByClassName<"u"&&J)return Be.getElementsByClassName(Ae)},he=[],fs(function(Ae){var Be;te.appendChild(Ae).innerHTML="<a id='"+He+"' href='' disabled='disabled'></a><select id='"+He+"-\r\\' disabled='disabled'><option selected=''></option></select>",Ae.querySelectorAll("[selected]").length||he.push("\\["+ve+"*(?:value|"+xr+")"),Ae.querySelectorAll("[id~="+He+"-]").length||he.push("~="),Ae.querySelectorAll("a#"+He+"+*").length||he.push(".#.+[+~]"),Ae.querySelectorAll(":checked").length||he.push(":checked"),Be=N.createElement("input"),Be.setAttribute("type","hidden"),Ae.appendChild(Be).setAttribute("name","D"),te.appendChild(Ae).disabled=!0,Ae.querySelectorAll(":disabled").length!==2&&he.push(":enabled",":disabled"),Be=N.createElement("input"),Be.setAttribute("name",""),Ae.appendChild(Be),Ae.querySelectorAll("[name='']").length||he.push("\\["+ve+"*name"+ve+"*="+ve+`*(?:''|"")`)}),T.cssHas||he.push(":has"),he=he.length&&new RegExp(he.join("|")),Qn=function(Ae,Be){if(Ae===Be)return R=!0,0;var at=!Ae.compareDocumentPosition-!Be.compareDocumentPosition;return at||(at=(Ae.ownerDocument||Ae)==(Be.ownerDocument||Be)?Ae.compareDocumentPosition(Be):1,at&1||!T.sortDetached&&Be.compareDocumentPosition(Ae)===at?Ae===N||Ae.ownerDocument==fe&&En.contains(fe,Ae)?-1:Be===N||Be.ownerDocument==fe&&En.contains(fe,Be)?1:w?f.call(w,Ae)-f.call(w,Be):0:at&4?-1:1)}),N}En.matches=function(Y,ae){return En(Y,null,null,ae)},En.matchesSelector=function(Y,ae){if(_r(Y),J&&!si[ae+" "]&&(!he||!he.test(ae)))try{var be=De.call(Y,ae);if(be||T.disconnectedMatch||Y.document&&Y.document.nodeType!==11)return be}catch{si(ae,!0)}return En(ae,N,null,[Y]).length>0},En.contains=function(Y,ae){return(Y.ownerDocument||Y)!=N&&_r(Y),g.contains(Y,ae)},En.attr=function(Y,ae){(Y.ownerDocument||Y)!=N&&_r(Y);var be=p.attrHandle[ae.toLowerCase()],Ae=be&&v.call(p.attrHandle,ae.toLowerCase())?be(Y,ae,!J):void 0;return Ae!==void 0?Ae:Y.getAttribute(ae)},En.error=function(Y){throw new Error("Syntax error, unrecognized expression: "+Y)},g.uniqueSort=function(Y){var ae,be=[],Ae=0,Be=0;if(R=!T.sortStable,w=!T.sortStable&&o.call(Y,0),Me.call(Y,Qn),R){for(;ae=Y[Be++];)ae===Y[Be]&&(Ae=be.push(Be));for(;Ae--;)Te.call(Y,be[Ae],1)}return w=null,Y},g.fn.uniqueSort=function(){return this.pushStack(g.uniqueSort(o.apply(this)))},p=g.expr={cacheLength:50,createPseudo:sr,match:Gr,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(Y){return Y[1]=Y[1].replace(oi,Ni),Y[3]=(Y[3]||Y[4]||Y[5]||"").replace(oi,Ni),Y[2]==="~="&&(Y[3]=" "+Y[3]+" "),Y.slice(0,4)},CHILD:function(Y){return Y[1]=Y[1].toLowerCase(),Y[1].slice(0,3)==="nth"?(Y[3]||En.error(Y[0]),Y[4]=+(Y[4]?Y[5]+(Y[6]||1):2*(Y[3]==="even"||Y[3]==="odd")),Y[5]=+(Y[7]+Y[8]||Y[3]==="odd")):Y[3]&&En.error(Y[0]),Y},PSEUDO:function(Y){var ae,be=!Y[6]&&Y[2];return Gr.CHILD.test(Y[0])?null:(Y[3]?Y[2]=Y[4]||Y[5]||"":be&&rr.test(be)&&(ae=yo(be,!0))&&(ae=be.indexOf(")",be.length-ae)-be.length)&&(Y[0]=Y[0].slice(0,ae),Y[2]=be.slice(0,ae)),Y.slice(0,3))}},filter:{TAG:function(Y){var ae=Y.replace(oi,Ni).toLowerCase();return Y==="*"?function(){return!0}:function(be){return U(be,ae)}},CLASS:function(Y){var ae=Ht[Y+" "];return ae||(ae=new RegExp("(^|"+ve+")"+Y+"("+ve+"|$)"))&&Ht(Y,function(be){return ae.test(typeof be.className=="string"&&be.className||typeof be.getAttribute<"u"&&be.getAttribute("class")||"")})},ATTR:function(Y,ae,be){return function(Ae){var Be=En.attr(Ae,Y);return Be==null?ae==="!=":ae?(Be+="",ae==="="?Be===be:ae==="!="?Be!==be:ae==="^="?be&&Be.indexOf(be)===0:ae==="*="?be&&Be.indexOf(be)>-1:ae==="$="?be&&Be.slice(-be.length)===be:ae==="~="?(" "+Be.replace(mn," ")+" ").indexOf(be)>-1:ae==="|="?Be===be||Be.slice(0,be.length+1)===be+"-":!1):!0}},CHILD:function(Y,ae,be,Ae,Be){var at=Y.slice(0,3)!=="nth",lt=Y.slice(-4)!=="last",yt=ae==="of-type";return Ae===1&&Be===0?function(mt){return!!mt.parentNode}:function(mt,tn,Bt){var zt,ln,At,On,Hi,pi=at!==lt?"nextSibling":"previousSibling",zi=mt.parentNode,or=yt&&mt.nodeName.toLowerCase(),ps=!Bt&&!yt,mi=!1;if(zi){if(at){for(;pi;){for(At=mt;At=At[pi];)if(yt?U(At,or):At.nodeType===1)return!1;Hi=pi=Y==="only"&&!Hi&&"nextSibling"}return!0}if(Hi=[lt?zi.firstChild:zi.lastChild],lt&&ps){for(ln=zi[He]||(zi[He]={}),zt=ln[Y]||[],On=zt[0]===Se&&zt[1],mi=On&&zt[2],At=On&&zi.childNodes[On];At=++On&&At&&At[pi]||(mi=On=0)||Hi.pop();)if(At.nodeType===1&&++mi&&At===mt){ln[Y]=[Se,On,mi];break}}else if(ps&&(ln=mt[He]||(mt[He]={}),zt=ln[Y]||[],On=zt[0]===Se&&zt[1],mi=On),mi===!1)for(;(At=++On&&At&&At[pi]||(mi=On=0)||Hi.pop())&&!((yt?U(At,or):At.nodeType===1)&&++mi&&(ps&&(ln=At[He]||(At[He]={}),ln[Y]=[Se,mi]),At===mt)););return mi-=Be,mi===Ae||mi%Ae===0&&mi/Ae>=0}}},PSEUDO:function(Y,ae){var be,Ae=p.pseudos[Y]||p.setFilters[Y.toLowerCase()]||En.error("unsupported pseudo: "+Y);return Ae[He]?Ae(ae):Ae.length>1?(be=[Y,Y,"",ae],p.setFilters.hasOwnProperty(Y.toLowerCase())?sr(function(Be,at){for(var lt,yt=Ae(Be,ae),mt=yt.length;mt--;)lt=f.call(Be,yt[mt]),Be[lt]=!(at[lt]=yt[mt])}):function(Be){return Ae(Be,0,be)}):Ae}},pseudos:{not:sr(function(Y){var ae=[],be=[],Ae=Zn(Y.replace(Z,"$1"));return Ae[He]?sr(function(Be,at,lt,yt){for(var mt,tn=Ae(Be,null,yt,[]),Bt=Be.length;Bt--;)(mt=tn[Bt])&&(Be[Bt]=!(at[Bt]=mt))}):function(Be,at,lt){return ae[0]=Be,Ae(ae,null,lt,be),ae[0]=null,!be.pop()}}),has:sr(function(Y){return function(ae){return En(Y,ae).length>0}}),contains:sr(function(Y){return Y=Y.replace(oi,Ni),function(ae){return(ae.textContent||g.text(ae)).indexOf(Y)>-1}}),lang:sr(function(Y){return vo.test(Y||"")||En.error("unsupported lang: "+Y),Y=Y.replace(oi,Ni).toLowerCase(),function(ae){var be;do if(be=J?ae.lang:ae.getAttribute("xml:lang")||ae.getAttribute("lang"))return be=be.toLowerCase(),be===Y||be.indexOf(Y+"-")===0;while((ae=ae.parentNode)&&ae.nodeType===1);return!1}}),target:function(Y){var ae=e.location&&e.location.hash;return ae&&ae.slice(1)===Y.id},root:function(Y){return Y===te},focus:function(Y){return Y===Yi()&&N.hasFocus()&&!!(Y.type||Y.href||~Y.tabIndex)},enabled:Yl(!1),disabled:Yl(!0),checked:function(Y){return U(Y,"input")&&!!Y.checked||U(Y,"option")&&!!Y.selected},selected:function(Y){return Y.parentNode&&Y.parentNode.selectedIndex,Y.selected===!0},empty:function(Y){for(Y=Y.firstChild;Y;Y=Y.nextSibling)if(Y.nodeType<6)return!1;return!0},parent:function(Y){return!p.pseudos.empty(Y)},header:function(Y){return Qr.test(Y.nodeName)},input:function(Y){return Vr.test(Y.nodeName)},button:function(Y){return U(Y,"input")&&Y.type==="button"||U(Y,"button")},text:function(Y){var ae;return U(Y,"input")&&Y.type==="text"&&((ae=Y.getAttribute("type"))==null||ae.toLowerCase()==="text")},first:ds(function(){return[0]}),last:ds(function(Y,ae){return[ae-1]}),eq:ds(function(Y,ae,be){return[be<0?be+ae:be]}),even:ds(function(Y,ae){for(var be=0;be<ae;be+=2)Y.push(be);return Y}),odd:ds(function(Y,ae){for(var be=1;be<ae;be+=2)Y.push(be);return Y}),lt:ds(function(Y,ae,be){var Ae;for(be<0?Ae=be+ae:be>ae?Ae=ae:Ae=be;--Ae>=0;)Y.push(Ae);return Y}),gt:ds(function(Y,ae,be){for(var Ae=be<0?be+ae:be;++Ae<ae;)Y.push(Ae);return Y})}},p.pseudos.nth=p.pseudos.eq;for(h in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})p.pseudos[h]=jl(h);for(h in{submit:!0,reset:!0})p.pseudos[h]=wh(h);function ql(){}ql.prototype=p.filters=p.pseudos,p.setFilters=new ql;function yo(Y,ae){var be,Ae,Be,at,lt,yt,mt,tn=pn[Y+" "];if(tn)return ae?0:tn.slice(0);for(lt=Y,yt=[],mt=p.preFilter;lt;){(!be||(Ae=Vn.exec(lt)))&&(Ae&&(lt=lt.slice(Ae[0].length)||lt),yt.push(Be=[])),be=!1,(Ae=Cs.exec(lt))&&(be=Ae.shift(),Be.push({value:be,type:Ae[0].replace(Z," ")}),lt=lt.slice(be.length));for(at in p.filter)(Ae=Gr[at].exec(lt))&&(!mt[at]||(Ae=mt[at](Ae)))&&(be=Ae.shift(),Be.push({value:be,type:at,matches:Ae}),lt=lt.slice(be.length));if(!be)break}return ae?lt.length:lt?En.error(Y):pn(Y,yt).slice(0)}function _o(Y){for(var ae=0,be=Y.length,Ae="";ae<be;ae++)Ae+=Y[ae].value;return Ae}function bo(Y,ae,be){var Ae=ae.dir,Be=ae.next,at=Be||Ae,lt=be&&at==="parentNode",yt=Qe++;return ae.first?function(mt,tn,Bt){for(;mt=mt[Ae];)if(mt.nodeType===1||lt)return Y(mt,tn,Bt);return!1}:function(mt,tn,Bt){var zt,ln,At=[Se,yt];if(Bt){for(;mt=mt[Ae];)if((mt.nodeType===1||lt)&&Y(mt,tn,Bt))return!0}else for(;mt=mt[Ae];)if(mt.nodeType===1||lt)if(ln=mt[He]||(mt[He]={}),Be&&U(mt,Be))mt=mt[Ae]||mt;else{if((zt=ln[at])&&zt[0]===Se&&zt[1]===yt)return At[2]=zt[2];if(ln[at]=At,At[2]=Y(mt,tn,Bt))return!0}return!1}}function el(Y){return Y.length>1?function(ae,be,Ae){for(var Be=Y.length;Be--;)if(!Y[Be](ae,be,Ae))return!1;return!0}:Y[0]}function Mh(Y,ae,be){for(var Ae=0,Be=ae.length;Ae<Be;Ae++)En(Y,ae[Ae],be);return be}function di(Y,ae,be,Ae,Be){for(var at,lt=[],yt=0,mt=Y.length,tn=ae!=null;yt<mt;yt++)(at=Y[yt])&&(!be||be(at,Ae,Be))&&(lt.push(at),tn&&ae.push(yt));return lt}function tl(Y,ae,be,Ae,Be,at){return Ae&&!Ae[He]&&(Ae=tl(Ae)),Be&&!Be[He]&&(Be=tl(Be,at)),sr(function(lt,yt,mt,tn){var Bt,zt,ln,At,On=[],Hi=[],pi=yt.length,zi=lt||Mh(ae||"*",mt.nodeType?[mt]:mt,[]),or=Y&&(lt||!ae)?di(zi,On,Y,mt,tn):zi;if(be?(At=Be||(lt?Y:pi||Ae)?[]:yt,be(or,At,mt,tn)):At=or,Ae)for(Bt=di(At,Hi),Ae(Bt,[],mt,tn),zt=Bt.length;zt--;)(ln=Bt[zt])&&(At[Hi[zt]]=!(or[Hi[zt]]=ln));if(lt){if(Be||Y){if(Be){for(Bt=[],zt=At.length;zt--;)(ln=At[zt])&&Bt.push(or[zt]=ln);Be(null,At=[],Bt,tn)}for(zt=At.length;zt--;)(ln=At[zt])&&(Bt=Be?f.call(lt,ln):On[zt])>-1&&(lt[Bt]=!(yt[Bt]=ln))}}else At=di(At===yt?At.splice(pi,At.length):At),Be?Be(null,yt,At,tn):L.apply(yt,At)})}function nl(Y){for(var ae,be,Ae,Be=Y.length,at=p.relative[Y[0].type],lt=at||p.relative[" "],yt=at?1:0,mt=bo(function(zt){return zt===ae},lt,!0),tn=bo(function(zt){return f.call(ae,zt)>-1},lt,!0),Bt=[function(zt,ln,At){var On=!at&&(At||ln!=_)||((ae=ln).nodeType?mt(zt,ln,At):tn(zt,ln,At));return ae=null,On}];yt<Be;yt++)if(be=p.relative[Y[yt].type])Bt=[bo(el(Bt),be)];else{if(be=p.filter[Y[yt].type].apply(null,Y[yt].matches),be[He]){for(Ae=++yt;Ae<Be&&!p.relative[Y[Ae].type];Ae++);return tl(yt>1&&el(Bt),yt>1&&_o(Y.slice(0,yt-1).concat({value:Y[yt-2].type===" "?"*":""})).replace(Z,"$1"),be,yt<Ae&&nl(Y.slice(yt,Ae)),Ae<Be&&nl(Y=Y.slice(Ae)),Ae<Be&&_o(Y))}Bt.push(be)}return el(Bt)}function Eh(Y,ae){var be=ae.length>0,Ae=Y.length>0,Be=function(at,lt,yt,mt,tn){var Bt,zt,ln,At=0,On="0",Hi=at&&[],pi=[],zi=_,or=at||Ae&&p.find.TAG("*",tn),ps=Se+=zi==null?1:Math.random()||.1,mi=or.length;for(tn&&(_=lt==N||lt||tn);On!==mi&&(Bt=or[On])!=null;On++){if(Ae&&Bt){for(zt=0,!lt&&Bt.ownerDocument!=N&&(_r(Bt),yt=!J);ln=Y[zt++];)if(ln(Bt,lt||N,yt)){L.call(mt,Bt);break}tn&&(Se=ps)}be&&((Bt=!ln&&Bt)&&At--,at&&Hi.push(Bt))}if(At+=On,be&&On!==At){for(zt=0;ln=ae[zt++];)ln(Hi,pi,lt,yt);if(at){if(At>0)for(;On--;)Hi[On]||pi[On]||(pi[On]=V.call(mt));pi=di(pi)}L.apply(mt,pi),tn&&!at&&pi.length>0&&At+ae.length>1&&g.uniqueSort(mt)}return tn&&(Se=ps,_=zi),Hi};return be?sr(Be):Be}function Zn(Y,ae){var be,Ae=[],Be=[],at=en[Y+" "];if(!at){for(ae||(ae=yo(Y)),be=ae.length;be--;)at=nl(ae[be]),at[He]?Ae.push(at):Be.push(at);at=en(Y,Eh(Be,Ae)),at.selector=Y}return at}function il(Y,ae,be,Ae){var Be,at,lt,yt,mt,tn=typeof Y=="function"&&Y,Bt=!Ae&&yo(Y=tn.selector||Y);if(be=be||[],Bt.length===1){if(at=Bt[0]=Bt[0].slice(0),at.length>2&&(lt=at[0]).type==="ID"&&ae.nodeType===9&&J&&p.relative[at[1].type]){if(ae=(p.find.ID(lt.matches[0].replace(oi,Ni),ae)||[])[0],ae)tn&&(ae=ae.parentNode);else return be;Y=Y.slice(at.shift().value.length)}for(Be=Gr.needsContext.test(Y)?0:at.length;Be--&&(lt=at[Be],!p.relative[yt=lt.type]);)if((mt=p.find[yt])&&(Ae=mt(lt.matches[0].replace(oi,Ni),us.test(at[0].type)&&na(ae.parentNode)||ae))){if(at.splice(Be,1),Y=Ae.length&&_o(at),!Y)return L.apply(be,Ae),be;break}}return(tn||Zn(Y,Bt))(Ae,ae,!J,be,!ae||us.test(Y)&&na(ae.parentNode)||ae),be}T.sortStable=He.split("").sort(Qn).join("")===He,_r(),T.sortDetached=fs(function(Y){return Y.compareDocumentPosition(N.createElement("fieldset"))&1}),g.find=En,g.expr[":"]=g.expr.pseudos,g.unique=g.uniqueSort,En.compile=Zn,En.select=il,En.setDocument=_r,En.tokenize=yo,En.escape=g.escapeSelector,En.getText=g.text,En.isXML=g.isXMLDoc,En.selectors=g.expr,En.support=g.support,En.uniqueSort=g.uniqueSort})();var Ee=function(h,p,_){for(var w=[],R=_!==void 0;(h=h[p])&&h.nodeType!==9;)if(h.nodeType===1){if(R&&g(h).is(_))break;w.push(h)}return w},Le=function(h,p){for(var _=[];h;h=h.nextSibling)h.nodeType===1&&h!==p&&_.push(h);return _},ge=g.expr.match.needsContext,Ce=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function Je(h,p,_){return A(p)?g.grep(h,function(w,R){return!!p.call(w,R,w)!==_}):p.nodeType?g.grep(h,function(w){return w===p!==_}):typeof p!="string"?g.grep(h,function(w){return f.call(p,w)>-1!==_}):g.filter(p,h,_)}g.filter=function(h,p,_){var w=p[0];return _&&(h=":not("+h+")"),p.length===1&&w.nodeType===1?g.find.matchesSelector(w,h)?[w]:[]:g.find.matches(h,g.grep(p,function(R){return R.nodeType===1}))},g.fn.extend({find:function(h){var p,_,w=this.length,R=this;if(typeof h!="string")return this.pushStack(g(h).filter(function(){for(p=0;p<w;p++)if(g.contains(R[p],this))return!0}));for(_=this.pushStack([]),p=0;p<w;p++)g.find(h,R[p],_);return w>1?g.uniqueSort(_):_},filter:function(h){return this.pushStack(Je(this,h||[],!1))},not:function(h){return this.pushStack(Je(this,h||[],!0))},is:function(h){return!!Je(this,typeof h=="string"&&ge.test(h)?g(h):h||[],!1).length}});var nt,ut=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,bt=g.fn.init=function(h,p,_){var w,R;if(!h)return this;if(_=_||nt,typeof h=="string")if(h[0]==="<"&&h[h.length-1]===">"&&h.length>=3?w=[null,h,null]:w=ut.exec(h),w&&(w[1]||!p))if(w[1]){if(p=p instanceof g?p[0]:p,g.merge(this,g.parseHTML(w[1],p&&p.nodeType?p.ownerDocument||p:b,!0)),Ce.test(w[1])&&g.isPlainObject(p))for(w in p)A(this[w])?this[w](p[w]):this.attr(w,p[w]);return this}else return R=b.getElementById(w[2]),R&&(this[0]=R,this.length=1),this;else return!p||p.jquery?(p||_).find(h):this.constructor(p).find(h);else{if(h.nodeType)return this[0]=h,this.length=1,this;if(A(h))return _.ready!==void 0?_.ready(h):h(g)}return g.makeArray(h,this)};bt.prototype=g.fn,nt=g(b);var It=/^(?:parents|prev(?:Until|All))/,St={children:!0,contents:!0,next:!0,prev:!0};g.fn.extend({has:function(h){var p=g(h,this),_=p.length;return this.filter(function(){for(var w=0;w<_;w++)if(g.contains(this,p[w]))return!0})},closest:function(h,p){var _,w=0,R=this.length,L=[],N=typeof h!="string"&&g(h);if(!ge.test(h)){for(;w<R;w++)for(_=this[w];_&&_!==p;_=_.parentNode)if(_.nodeType<11&&(N?N.index(_)>-1:_.nodeType===1&&g.find.matchesSelector(_,h))){L.push(_);break}}return this.pushStack(L.length>1?g.uniqueSort(L):L)},index:function(h){return h?typeof h=="string"?f.call(g(h),this[0]):f.call(this,h.jquery?h[0]:h):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(h,p){return this.pushStack(g.uniqueSort(g.merge(this.get(),g(h,p))))},addBack:function(h){return this.add(h==null?this.prevObject:this.prevObject.filter(h))}});function Rt(h,p){for(;(h=h[p])&&h.nodeType!==1;);return h}g.each({parent:function(h){var p=h.parentNode;return p&&p.nodeType!==11?p:null},parents:function(h){return Ee(h,"parentNode")},parentsUntil:function(h,p,_){return Ee(h,"parentNode",_)},next:function(h){return Rt(h,"nextSibling")},prev:function(h){return Rt(h,"previousSibling")},nextAll:function(h){return Ee(h,"nextSibling")},prevAll:function(h){return Ee(h,"previousSibling")},nextUntil:function(h,p,_){return Ee(h,"nextSibling",_)},prevUntil:function(h,p,_){return Ee(h,"previousSibling",_)},siblings:function(h){return Le((h.parentNode||{}).firstChild,h)},children:function(h){return Le(h.firstChild)},contents:function(h){return h.contentDocument!=null&&r(h.contentDocument)?h.contentDocument:(U(h,"template")&&(h=h.content||h),g.merge([],h.childNodes))}},function(h,p){g.fn[h]=function(_,w){var R=g.map(this,p,_);return h.slice(-5)!=="Until"&&(w=_),w&&typeof w=="string"&&(R=g.filter(w,R)),this.length>1&&(St[h]||g.uniqueSort(R),It.test(h)&&R.reverse()),this.pushStack(R)}});var Mt=/[^\x20\t\r\n\f]+/g;function Ft(h){var p={};return g.each(h.match(Mt)||[],function(_,w){p[w]=!0}),p}g.Callbacks=function(h){h=typeof h=="string"?Ft(h):g.extend({},h);var p,_,w,R,L=[],N=[],te=-1,J=function(){for(R=R||h.once,w=p=!0;N.length;te=-1)for(_=N.shift();++te<L.length;)L[te].apply(_[0],_[1])===!1&&h.stopOnFalse&&(te=L.length,_=!1);h.memory||(_=!1),p=!1,R&&(_?L=[]:L="")},he={add:function(){return L&&(_&&!p&&(te=L.length-1,N.push(_)),function De(He){g.each(He,function(Se,Qe){A(Qe)?(!h.unique||!he.has(Qe))&&L.push(Qe):Qe&&Qe.length&&H(Qe)!=="string"&&De(Qe)})}(arguments),_&&!p&&J()),this},remove:function(){return g.each(arguments,function(De,He){for(var Se;(Se=g.inArray(He,L,Se))>-1;)L.splice(Se,1),Se<=te&&te--}),this},has:function(De){return De?g.inArray(De,L)>-1:L.length>0},empty:function(){return L&&(L=[]),this},disable:function(){return R=N=[],L=_="",this},disabled:function(){return!L},lock:function(){return R=N=[],!_&&!p&&(L=_=""),this},locked:function(){return!!R},fireWith:function(De,He){return R||(He=He||[],He=[De,He.slice?He.slice():He],N.push(He),p||J()),this},fire:function(){return he.fireWith(this,arguments),this},fired:function(){return!!w}};return he};function xe(h){return h}function Mn(h){throw h}function Tt(h,p,_,w){var R;try{h&&A(R=h.promise)?R.call(h).done(p).fail(_):h&&A(R=h.then)?R.call(h,p,_):p.apply(void 0,[h].slice(w))}catch(L){_.apply(void 0,[L])}}g.extend({Deferred:function(h){var p=[["notify","progress",g.Callbacks("memory"),g.Callbacks("memory"),2],["resolve","done",g.Callbacks("once memory"),g.Callbacks("once memory"),0,"resolved"],["reject","fail",g.Callbacks("once memory"),g.Callbacks("once memory"),1,"rejected"]],_="pending",w={state:function(){return _},always:function(){return R.done(arguments).fail(arguments),this},catch:function(L){return w.then(null,L)},pipe:function(){var L=arguments;return g.Deferred(function(N){g.each(p,function(te,J){var he=A(L[J[4]])&&L[J[4]];R[J[1]](function(){var De=he&&he.apply(this,arguments);De&&A(De.promise)?De.promise().progress(N.notify).done(N.resolve).fail(N.reject):N[J[0]+"With"](this,he?[De]:arguments)})}),L=null}).promise()},then:function(L,N,te){var J=0;function he(De,He,Se,Qe){return function(){var Ht=this,pn=arguments,en=function(){var Qn,xr;if(!(De<J)){if(Qn=Se.apply(Ht,pn),Qn===He.promise())throw new TypeError("Thenable self-resolution");xr=Qn&&(typeof Qn=="object"||typeof Qn=="function")&&Qn.then,A(xr)?Qe?xr.call(Qn,he(J,He,xe,Qe),he(J,He,Mn,Qe)):(J++,xr.call(Qn,he(J,He,xe,Qe),he(J,He,Mn,Qe),he(J,He,xe,He.notifyWith))):(Se!==xe&&(Ht=void 0,pn=[Qn]),(Qe||He.resolveWith)(Ht,pn))}},si=Qe?en:function(){try{en()}catch(Qn){g.Deferred.exceptionHook&&g.Deferred.exceptionHook(Qn,si.error),De+1>=J&&(Se!==Mn&&(Ht=void 0,pn=[Qn]),He.rejectWith(Ht,pn))}};De?si():(g.Deferred.getErrorHook?si.error=g.Deferred.getErrorHook():g.Deferred.getStackHook&&(si.error=g.Deferred.getStackHook()),e.setTimeout(si))}}return g.Deferred(function(De){p[0][3].add(he(0,De,A(te)?te:xe,De.notifyWith)),p[1][3].add(he(0,De,A(L)?L:xe)),p[2][3].add(he(0,De,A(N)?N:Mn))}).promise()},promise:function(L){return L!=null?g.extend(L,w):w}},R={};return g.each(p,function(L,N){var te=N[2],J=N[5];w[N[1]]=te.add,J&&te.add(function(){_=J},p[3-L][2].disable,p[3-L][3].disable,p[0][2].lock,p[0][3].lock),te.add(N[3].fire),R[N[0]]=function(){return R[N[0]+"With"](this===R?void 0:this,arguments),this},R[N[0]+"With"]=te.fireWith}),w.promise(R),h&&h.call(R,R),R},when:function(h){var p=arguments.length,_=p,w=Array(_),R=o.call(arguments),L=g.Deferred(),N=function(te){return function(J){w[te]=this,R[te]=arguments.length>1?o.call(arguments):J,--p||L.resolveWith(w,R)}};if(p<=1&&(Tt(h,L.done(N(_)).resolve,L.reject,!p),L.state()==="pending"||A(R[_]&&R[_].then)))return L.then();for(;_--;)Tt(R[_],N(_),L.reject);return L.promise()}});var Gt=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;g.Deferred.exceptionHook=function(h,p){e.console&&e.console.warn&&h&&Gt.test(h.name)&&e.console.warn("jQuery.Deferred exception: "+h.message,h.stack,p)},g.readyException=function(h){e.setTimeout(function(){throw h})};var Lt=g.Deferred();g.fn.ready=function(h){return Lt.then(h).catch(function(p){g.readyException(p)}),this},g.extend({isReady:!1,readyWait:1,ready:function(h){(h===!0?--g.readyWait:g.isReady)||(g.isReady=!0,!(h!==!0&&--g.readyWait>0)&&Lt.resolveWith(b,[g]))}}),g.ready.then=Lt.then;function qt(){b.removeEventListener("DOMContentLoaded",qt),e.removeEventListener("load",qt),g.ready()}b.readyState==="complete"||b.readyState!=="loading"&&!b.documentElement.doScroll?e.setTimeout(g.ready):(b.addEventListener("DOMContentLoaded",qt),e.addEventListener("load",qt));var wt=function(h,p,_,w,R,L,N){var te=0,J=h.length,he=_==null;if(H(_)==="object"){R=!0;for(te in _)wt(h,p,te,_[te],!0,L,N)}else if(w!==void 0&&(R=!0,A(w)||(N=!0),he&&(N?(p.call(h,w),p=null):(he=p,p=function(De,He,Se){return he.call(g(De),Se)})),p))for(;te<J;te++)p(h[te],_,N?w:w.call(h[te],te,p(h[te],_)));return R?h:he?p.call(h):J?p(h[0],_):L},Ge=/^-ms-/,Vt=/-([a-z])/g;function Cn(h,p){return p.toUpperCase()}function Xt(h){return h.replace(Ge,"ms-").replace(Vt,Cn)}var W=function(h){return h.nodeType===1||h.nodeType===9||!+h.nodeType};function k(){this.expando=g.expando+k.uid++}k.uid=1,k.prototype={cache:function(h){var p=h[this.expando];return p||(p={},W(h)&&(h.nodeType?h[this.expando]=p:Object.defineProperty(h,this.expando,{value:p,configurable:!0}))),p},set:function(h,p,_){var w,R=this.cache(h);if(typeof p=="string")R[Xt(p)]=_;else for(w in p)R[Xt(w)]=p[w];return R},get:function(h,p){return p===void 0?this.cache(h):h[this.expando]&&h[this.expando][Xt(p)]},access:function(h,p,_){return p===void 0||p&&typeof p=="string"&&_===void 0?this.get(h,p):(this.set(h,p,_),_!==void 0?_:p)},remove:function(h,p){var _,w=h[this.expando];if(w!==void 0){if(p!==void 0)for(Array.isArray(p)?p=p.map(Xt):(p=Xt(p),p=p in w?[p]:p.match(Mt)||[]),_=p.length;_--;)delete w[p[_]];(p===void 0||g.isEmptyObject(w))&&(h.nodeType?h[this.expando]=void 0:delete h[this.expando])}},hasData:function(h){var p=h[this.expando];return p!==void 0&&!g.isEmptyObject(p)}};var se=new k,Ye=new k,Ne=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Xe=/[A-Z]/g;function vt(h){return h==="true"?!0:h==="false"?!1:h==="null"?null:h===+h+""?+h:Ne.test(h)?JSON.parse(h):h}function it(h,p,_){var w;if(_===void 0&&h.nodeType===1)if(w="data-"+p.replace(Xe,"-$&").toLowerCase(),_=h.getAttribute(w),typeof _=="string"){try{_=vt(_)}catch{}Ye.set(h,p,_)}else _=void 0;return _}g.extend({hasData:function(h){return Ye.hasData(h)||se.hasData(h)},data:function(h,p,_){return Ye.access(h,p,_)},removeData:function(h,p){Ye.remove(h,p)},_data:function(h,p,_){return se.access(h,p,_)},_removeData:function(h,p){se.remove(h,p)}}),g.fn.extend({data:function(h,p){var _,w,R,L=this[0],N=L&&L.attributes;if(h===void 0){if(this.length&&(R=Ye.get(L),L.nodeType===1&&!se.get(L,"hasDataAttrs"))){for(_=N.length;_--;)N[_]&&(w=N[_].name,w.indexOf("data-")===0&&(w=Xt(w.slice(5)),it(L,w,R[w])));se.set(L,"hasDataAttrs",!0)}return R}return typeof h=="object"?this.each(function(){Ye.set(this,h)}):wt(this,function(te){var J;if(L&&te===void 0)return J=Ye.get(L,h),J!==void 0||(J=it(L,h),J!==void 0)?J:void 0;this.each(function(){Ye.set(this,h,te)})},null,p,arguments.length>1,null,!0)},removeData:function(h){return this.each(function(){Ye.remove(this,h)})}}),g.extend({queue:function(h,p,_){var w;if(h)return p=(p||"fx")+"queue",w=se.get(h,p),_&&(!w||Array.isArray(_)?w=se.access(h,p,g.makeArray(_)):w.push(_)),w||[]},dequeue:function(h,p){p=p||"fx";var _=g.queue(h,p),w=_.length,R=_.shift(),L=g._queueHooks(h,p),N=function(){g.dequeue(h,p)};R==="inprogress"&&(R=_.shift(),w--),R&&(p==="fx"&&_.unshift("inprogress"),delete L.stop,R.call(h,N,L)),!w&&L&&L.empty.fire()},_queueHooks:function(h,p){var _=p+"queueHooks";return se.get(h,_)||se.access(h,_,{empty:g.Callbacks("once memory").add(function(){se.remove(h,[p+"queue",_])})})}}),g.fn.extend({queue:function(h,p){var _=2;return typeof h!="string"&&(p=h,h="fx",_--),arguments.length<_?g.queue(this[0],h):p===void 0?this:this.each(function(){var w=g.queue(this,h,p);g._queueHooks(this,h),h==="fx"&&w[0]!=="inprogress"&&g.dequeue(this,h)})},dequeue:function(h){return this.each(function(){g.dequeue(this,h)})},clearQueue:function(h){return this.queue(h||"fx",[])},promise:function(h,p){var _,w=1,R=g.Deferred(),L=this,N=this.length,te=function(){--w||R.resolveWith(L,[L])};for(typeof h!="string"&&(p=h,h=void 0),h=h||"fx";N--;)_=se.get(L[N],h+"queueHooks"),_&&_.empty&&(w++,_.empty.add(te));return te(),R.promise(p)}});var ht=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Q=new RegExp("^(?:([+-])=|)("+ht+")([a-z%]*)$","i"),Ze=["Top","Right","Bottom","Left"],ze=b.documentElement,et=function(h){return g.contains(h.ownerDocument,h)},_t={composed:!0};ze.getRootNode&&(et=function(h){return g.contains(h.ownerDocument,h)||h.getRootNode(_t)===h.ownerDocument});var tt=function(h,p){return h=p||h,h.style.display==="none"||h.style.display===""&&et(h)&&g.css(h,"display")==="none"};function pt(h,p,_,w){var R,L,N=20,te=w?function(){return w.cur()}:function(){return g.css(h,p,"")},J=te(),he=_&&_[3]||(g.cssNumber[p]?"":"px"),De=h.nodeType&&(g.cssNumber[p]||he!=="px"&&+J)&&Q.exec(g.css(h,p));if(De&&De[3]!==he){for(J=J/2,he=he||De[3],De=+J||1;N--;)g.style(h,p,De+he),(1-L)*(1-(L=te()/J||.5))<=0&&(N=0),De=De/L;De=De*2,g.style(h,p,De+he),_=_||[]}return _&&(De=+De||+J||0,R=_[1]?De+(_[1]+1)*_[2]:+_[2],w&&(w.unit=he,w.start=De,w.end=R)),R}var K={};function je(h){var p,_=h.ownerDocument,w=h.nodeName,R=K[w];return R||(p=_.body.appendChild(_.createElement(w)),R=g.css(p,"display"),p.parentNode.removeChild(p),R==="none"&&(R="block"),K[w]=R,R)}function Ie(h,p){for(var _,w,R=[],L=0,N=h.length;L<N;L++)w=h[L],w.style&&(_=w.style.display,p?(_==="none"&&(R[L]=se.get(w,"display")||null,R[L]||(w.style.display="")),w.style.display===""&&tt(w)&&(R[L]=je(w))):_!=="none"&&(R[L]="none",se.set(w,"display",_)));for(L=0;L<N;L++)R[L]!=null&&(h[L].style.display=R[L]);return h}g.fn.extend({show:function(){return Ie(this,!0)},hide:function(){return Ie(this)},toggle:function(h){return typeof h=="boolean"?h?this.show():this.hide():this.each(function(){tt(this)?g(this).show():g(this).hide()})}});var rt=/^(?:checkbox|radio)$/i,We=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,Ue=/^$|^module$|\/(?:java|ecma)script/i;(function(){var h=b.createDocumentFragment(),p=h.appendChild(b.createElement("div")),_=b.createElement("input");_.setAttribute("type","radio"),_.setAttribute("checked","checked"),_.setAttribute("name","t"),p.appendChild(_),T.checkClone=p.cloneNode(!0).cloneNode(!0).lastChild.checked,p.innerHTML="<textarea>x</textarea>",T.noCloneChecked=!!p.cloneNode(!0).lastChild.defaultValue,p.innerHTML="<option></option>",T.option=!!p.lastChild})();var qe={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};qe.tbody=qe.tfoot=qe.colgroup=qe.caption=qe.thead,qe.th=qe.td,T.option||(qe.optgroup=qe.option=[1,"<select multiple='multiple'>","</select>"]);function xt(h,p){var _;return typeof h.getElementsByTagName<"u"?_=h.getElementsByTagName(p||"*"):typeof h.querySelectorAll<"u"?_=h.querySelectorAll(p||"*"):_=[],p===void 0||p&&U(h,p)?g.merge([h],_):_}function Zt(h,p){for(var _=0,w=h.length;_<w;_++)se.set(h[_],"globalEval",!p||se.get(p[_],"globalEval"))}var xn=/<|&#?\w+;/;function Fn(h,p,_,w,R){for(var L,N,te,J,he,De,He=p.createDocumentFragment(),Se=[],Qe=0,Ht=h.length;Qe<Ht;Qe++)if(L=h[Qe],L||L===0)if(H(L)==="object")g.merge(Se,L.nodeType?[L]:L);else if(!xn.test(L))Se.push(p.createTextNode(L));else{for(N=N||He.appendChild(p.createElement("div")),te=(We.exec(L)||["",""])[1].toLowerCase(),J=qe[te]||qe._default,N.innerHTML=J[1]+g.htmlPrefilter(L)+J[2],De=J[0];De--;)N=N.lastChild;g.merge(Se,N.childNodes),N=He.firstChild,N.textContent=""}for(He.textContent="",Qe=0;L=Se[Qe++];){if(w&&g.inArray(L,w)>-1){R&&R.push(L);continue}if(he=et(L),N=xt(He.appendChild(L),"script"),he&&Zt(N),_)for(De=0;L=N[De++];)Ue.test(L.type||"")&&_.push(L)}return He}var Hn=/^([^.]*)(?:\.(.+)|)/;function Rn(){return!0}function qn(){return!1}function Xi(h,p,_,w,R,L){var N,te;if(typeof p=="object"){typeof _!="string"&&(w=w||_,_=void 0);for(te in p)Xi(h,te,_,w,p[te],L);return h}if(w==null&&R==null?(R=_,w=_=void 0):R==null&&(typeof _=="string"?(R=w,w=void 0):(R=w,w=_,_=void 0)),R===!1)R=qn;else if(!R)return h;return L===1&&(N=R,R=function(J){return g().off(J),N.apply(this,arguments)},R.guid=N.guid||(N.guid=g.guid++)),h.each(function(){g.event.add(this,p,R,w,_)})}g.event={global:{},add:function(h,p,_,w,R){var L,N,te,J,he,De,He,Se,Qe,Ht,pn,en=se.get(h);if(W(h))for(_.handler&&(L=_,_=L.handler,R=L.selector),R&&g.find.matchesSelector(ze,R),_.guid||(_.guid=g.guid++),(J=en.events)||(J=en.events=Object.create(null)),(N=en.handle)||(N=en.handle=function(si){return typeof g<"u"&&g.event.triggered!==si.type?g.event.dispatch.apply(h,arguments):void 0}),p=(p||"").match(Mt)||[""],he=p.length;he--;)te=Hn.exec(p[he])||[],Qe=pn=te[1],Ht=(te[2]||"").split(".").sort(),Qe&&(He=g.event.special[Qe]||{},Qe=(R?He.delegateType:He.bindType)||Qe,He=g.event.special[Qe]||{},De=g.extend({type:Qe,origType:pn,data:w,handler:_,guid:_.guid,selector:R,needsContext:R&&g.expr.match.needsContext.test(R),namespace:Ht.join(".")},L),(Se=J[Qe])||(Se=J[Qe]=[],Se.delegateCount=0,(!He.setup||He.setup.call(h,w,Ht,N)===!1)&&h.addEventListener&&h.addEventListener(Qe,N)),He.add&&(He.add.call(h,De),De.handler.guid||(De.handler.guid=_.guid)),R?Se.splice(Se.delegateCount++,0,De):Se.push(De),g.event.global[Qe]=!0)},remove:function(h,p,_,w,R){var L,N,te,J,he,De,He,Se,Qe,Ht,pn,en=se.hasData(h)&&se.get(h);if(!(!en||!(J=en.events))){for(p=(p||"").match(Mt)||[""],he=p.length;he--;){if(te=Hn.exec(p[he])||[],Qe=pn=te[1],Ht=(te[2]||"").split(".").sort(),!Qe){for(Qe in J)g.event.remove(h,Qe+p[he],_,w,!0);continue}for(He=g.event.special[Qe]||{},Qe=(w?He.delegateType:He.bindType)||Qe,Se=J[Qe]||[],te=te[2]&&new RegExp("(^|\\.)"+Ht.join("\\.(?:.*\\.|)")+"(\\.|$)"),N=L=Se.length;L--;)De=Se[L],(R||pn===De.origType)&&(!_||_.guid===De.guid)&&(!te||te.test(De.namespace))&&(!w||w===De.selector||w==="**"&&De.selector)&&(Se.splice(L,1),De.selector&&Se.delegateCount--,He.remove&&He.remove.call(h,De));N&&!Se.length&&((!He.teardown||He.teardown.call(h,Ht,en.handle)===!1)&&g.removeEvent(h,Qe,en.handle),delete J[Qe])}g.isEmptyObject(J)&&se.remove(h,"handle events")}},dispatch:function(h){var p,_,w,R,L,N,te=new Array(arguments.length),J=g.event.fix(h),he=(se.get(this,"events")||Object.create(null))[J.type]||[],De=g.event.special[J.type]||{};for(te[0]=J,p=1;p<arguments.length;p++)te[p]=arguments[p];if(J.delegateTarget=this,!(De.preDispatch&&De.preDispatch.call(this,J)===!1)){for(N=g.event.handlers.call(this,J,he),p=0;(R=N[p++])&&!J.isPropagationStopped();)for(J.currentTarget=R.elem,_=0;(L=R.handlers[_++])&&!J.isImmediatePropagationStopped();)(!J.rnamespace||L.namespace===!1||J.rnamespace.test(L.namespace))&&(J.handleObj=L,J.data=L.data,w=((g.event.special[L.origType]||{}).handle||L.handler).apply(R.elem,te),w!==void 0&&(J.result=w)===!1&&(J.preventDefault(),J.stopPropagation()));return De.postDispatch&&De.postDispatch.call(this,J),J.result}},handlers:function(h,p){var _,w,R,L,N,te=[],J=p.delegateCount,he=h.target;if(J&&he.nodeType&&!(h.type==="click"&&h.button>=1)){for(;he!==this;he=he.parentNode||this)if(he.nodeType===1&&!(h.type==="click"&&he.disabled===!0)){for(L=[],N={},_=0;_<J;_++)w=p[_],R=w.selector+" ",N[R]===void 0&&(N[R]=w.needsContext?g(R,this).index(he)>-1:g.find(R,this,null,[he]).length),N[R]&&L.push(w);L.length&&te.push({elem:he,handlers:L})}}return he=this,J<p.length&&te.push({elem:he,handlers:p.slice(J)}),te},addProp:function(h,p){Object.defineProperty(g.Event.prototype,h,{enumerable:!0,configurable:!0,get:A(p)?function(){if(this.originalEvent)return p(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[h]},set:function(_){Object.defineProperty(this,h,{enumerable:!0,configurable:!0,writable:!0,value:_})}})},fix:function(h){return h[g.expando]?h:new g.Event(h)},special:{load:{noBubble:!0},click:{setup:function(h){var p=this||h;return rt.test(p.type)&&p.click&&U(p,"input")&&fr(p,"click",!0),!1},trigger:function(h){var p=this||h;return rt.test(p.type)&&p.click&&U(p,"input")&&fr(p,"click"),!0},_default:function(h){var p=h.target;return rt.test(p.type)&&p.click&&U(p,"input")&&se.get(p,"click")||U(p,"a")}},beforeunload:{postDispatch:function(h){h.result!==void 0&&h.originalEvent&&(h.originalEvent.returnValue=h.result)}}}};function fr(h,p,_){if(!_){se.get(h,p)===void 0&&g.event.add(h,p,Rn);return}se.set(h,p,!1),g.event.add(h,p,{namespace:!1,handler:function(w){var R,L=se.get(this,p);if(w.isTrigger&1&&this[p]){if(L)(g.event.special[p]||{}).delegateType&&w.stopPropagation();else if(L=o.call(arguments),se.set(this,p,L),this[p](),R=se.get(this,p),se.set(this,p,!1),L!==R)return w.stopImmediatePropagation(),w.preventDefault(),R}else L&&(se.set(this,p,g.event.trigger(L[0],L.slice(1),this)),w.stopPropagation(),w.isImmediatePropagationStopped=Rn)}})}g.removeEvent=function(h,p,_){h.removeEventListener&&h.removeEventListener(p,_)},g.Event=function(h,p){if(!(this instanceof g.Event))return new g.Event(h,p);h&&h.type?(this.originalEvent=h,this.type=h.type,this.isDefaultPrevented=h.defaultPrevented||h.defaultPrevented===void 0&&h.returnValue===!1?Rn:qn,this.target=h.target&&h.target.nodeType===3?h.target.parentNode:h.target,this.currentTarget=h.currentTarget,this.relatedTarget=h.relatedTarget):this.type=h,p&&g.extend(this,p),this.timeStamp=h&&h.timeStamp||Date.now(),this[g.expando]=!0},g.Event.prototype={constructor:g.Event,isDefaultPrevented:qn,isPropagationStopped:qn,isImmediatePropagationStopped:qn,isSimulated:!1,preventDefault:function(){var h=this.originalEvent;this.isDefaultPrevented=Rn,h&&!this.isSimulated&&h.preventDefault()},stopPropagation:function(){var h=this.originalEvent;this.isPropagationStopped=Rn,h&&!this.isSimulated&&h.stopPropagation()},stopImmediatePropagation:function(){var h=this.originalEvent;this.isImmediatePropagationStopped=Rn,h&&!this.isSimulated&&h.stopImmediatePropagation(),this.stopPropagation()}},g.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},g.event.addProp),g.each({focus:"focusin",blur:"focusout"},function(h,p){function _(w){if(b.documentMode){var R=se.get(this,"handle"),L=g.event.fix(w);L.type=w.type==="focusin"?"focus":"blur",L.isSimulated=!0,R(w),L.target===L.currentTarget&&R(L)}else g.event.simulate(p,w.target,g.event.fix(w))}g.event.special[h]={setup:function(){var w;if(fr(this,h,!0),b.documentMode)w=se.get(this,p),w||this.addEventListener(p,_),se.set(this,p,(w||0)+1);else return!1},trigger:function(){return fr(this,h),!0},teardown:function(){var w;if(b.documentMode)w=se.get(this,p)-1,w?se.set(this,p,w):(this.removeEventListener(p,_),se.remove(this,p));else return!1},_default:function(w){return se.get(w.target,h)},delegateType:p},g.event.special[p]={setup:function(){var w=this.ownerDocument||this.document||this,R=b.documentMode?this:w,L=se.get(R,p);L||(b.documentMode?this.addEventListener(p,_):w.addEventListener(h,_,!0)),se.set(R,p,(L||0)+1)},teardown:function(){var w=this.ownerDocument||this.document||this,R=b.documentMode?this:w,L=se.get(R,p)-1;L?se.set(R,p,L):(b.documentMode?this.removeEventListener(p,_):w.removeEventListener(h,_,!0),se.remove(R,p))}}}),g.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(h,p){g.event.special[h]={delegateType:p,bindType:p,handle:function(_){var w,R=this,L=_.relatedTarget,N=_.handleObj;return(!L||L!==R&&!g.contains(R,L))&&(_.type=N.origType,w=N.handler.apply(this,arguments),_.type=p),w}}}),g.fn.extend({on:function(h,p,_,w){return Xi(this,h,p,_,w)},one:function(h,p,_,w){return Xi(this,h,p,_,w,1)},off:function(h,p,_){var w,R;if(h&&h.preventDefault&&h.handleObj)return w=h.handleObj,g(h.delegateTarget).off(w.namespace?w.origType+"."+w.namespace:w.origType,w.selector,w.handler),this;if(typeof h=="object"){for(R in h)this.off(R,p,h[R]);return this}return(p===!1||typeof p=="function")&&(_=p,p=void 0),_===!1&&(_=qn),this.each(function(){g.event.remove(this,h,_,p)})}});var as=/<script|<style|<link/i,dr=/checked\s*(?:[^=]|=\s*.checked.)/i,kr=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function js(h,p){return U(h,"table")&&U(p.nodeType!==11?p:p.firstChild,"tr")&&g(h).children("tbody")[0]||h}function Ys(h){return h.type=(h.getAttribute("type")!==null)+"/"+h.type,h}function ls(h){return(h.type||"").slice(0,5)==="true/"?h.type=h.type.slice(5):h.removeAttribute("type"),h}function F(h,p){var _,w,R,L,N,te,J;if(p.nodeType===1){if(se.hasData(h)&&(L=se.get(h),J=L.events,J)){se.remove(p,"handle events");for(R in J)for(_=0,w=J[R].length;_<w;_++)g.event.add(p,R,J[R][_])}Ye.hasData(h)&&(N=Ye.access(h),te=g.extend({},N),Ye.set(p,te))}}function pe(h,p){var _=p.nodeName.toLowerCase();_==="input"&&rt.test(h.type)?p.checked=h.checked:(_==="input"||_==="textarea")&&(p.defaultValue=h.defaultValue)}function we(h,p,_,w){p=l(p);var R,L,N,te,J,he,De=0,He=h.length,Se=He-1,Qe=p[0],Ht=A(Qe);if(Ht||He>1&&typeof Qe=="string"&&!T.checkClone&&dr.test(Qe))return h.each(function(pn){var en=h.eq(pn);Ht&&(p[0]=Qe.call(this,pn,en.html())),we(en,p,_,w)});if(He&&(R=Fn(p,h[0].ownerDocument,!1,h,w),L=R.firstChild,R.childNodes.length===1&&(R=L),L||w)){for(N=g.map(xt(R,"script"),Ys),te=N.length;De<He;De++)J=R,De!==Se&&(J=g.clone(J,!0,!0),te&&g.merge(N,xt(J,"script"))),_.call(h[De],J,De);if(te)for(he=N[N.length-1].ownerDocument,g.map(N,ls),De=0;De<te;De++)J=N[De],Ue.test(J.type||"")&&!se.access(J,"globalEval")&&g.contains(he,J)&&(J.src&&(J.type||"").toLowerCase()!=="module"?g._evalUrl&&!J.noModule&&g._evalUrl(J.src,{nonce:J.nonce||J.getAttribute("nonce")},he):I(J.textContent.replace(kr,""),J,he))}return h}function re(h,p,_){for(var w,R=p?g.filter(p,h):h,L=0;(w=R[L])!=null;L++)!_&&w.nodeType===1&&g.cleanData(xt(w)),w.parentNode&&(_&&et(w)&&Zt(xt(w,"script")),w.parentNode.removeChild(w));return h}g.extend({htmlPrefilter:function(h){return h},clone:function(h,p,_){var w,R,L,N,te=h.cloneNode(!0),J=et(h);if(!T.noCloneChecked&&(h.nodeType===1||h.nodeType===11)&&!g.isXMLDoc(h))for(N=xt(te),L=xt(h),w=0,R=L.length;w<R;w++)pe(L[w],N[w]);if(p)if(_)for(L=L||xt(h),N=N||xt(te),w=0,R=L.length;w<R;w++)F(L[w],N[w]);else F(h,te);return N=xt(te,"script"),N.length>0&&Zt(N,!J&&xt(h,"script")),te},cleanData:function(h){for(var p,_,w,R=g.event.special,L=0;(_=h[L])!==void 0;L++)if(W(_)){if(p=_[se.expando]){if(p.events)for(w in p.events)R[w]?g.event.remove(_,w):g.removeEvent(_,w,p.handle);_[se.expando]=void 0}_[Ye.expando]&&(_[Ye.expando]=void 0)}}}),g.fn.extend({detach:function(h){return re(this,h,!0)},remove:function(h){return re(this,h)},text:function(h){return wt(this,function(p){return p===void 0?g.text(this):this.empty().each(function(){(this.nodeType===1||this.nodeType===11||this.nodeType===9)&&(this.textContent=p)})},null,h,arguments.length)},append:function(){return we(this,arguments,function(h){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var p=js(this,h);p.appendChild(h)}})},prepend:function(){return we(this,arguments,function(h){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var p=js(this,h);p.insertBefore(h,p.firstChild)}})},before:function(){return we(this,arguments,function(h){this.parentNode&&this.parentNode.insertBefore(h,this)})},after:function(){return we(this,arguments,function(h){this.parentNode&&this.parentNode.insertBefore(h,this.nextSibling)})},empty:function(){for(var h,p=0;(h=this[p])!=null;p++)h.nodeType===1&&(g.cleanData(xt(h,!1)),h.textContent="");return this},clone:function(h,p){return h=h??!1,p=p??h,this.map(function(){return g.clone(this,h,p)})},html:function(h){return wt(this,function(p){var _=this[0]||{},w=0,R=this.length;if(p===void 0&&_.nodeType===1)return _.innerHTML;if(typeof p=="string"&&!as.test(p)&&!qe[(We.exec(p)||["",""])[1].toLowerCase()]){p=g.htmlPrefilter(p);try{for(;w<R;w++)_=this[w]||{},_.nodeType===1&&(g.cleanData(xt(_,!1)),_.innerHTML=p);_=0}catch{}}_&&this.empty().append(p)},null,h,arguments.length)},replaceWith:function(){var h=[];return we(this,arguments,function(p){var _=this.parentNode;g.inArray(this,h)<0&&(g.cleanData(xt(this)),_&&_.replaceChild(p,this))},h)}}),g.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(h,p){g.fn[h]=function(_){for(var w,R=[],L=g(_),N=L.length-1,te=0;te<=N;te++)w=te===N?this:this.clone(!0),g(L[te])[p](w),c.apply(R,w.get());return this.pushStack(R)}});var Re=new RegExp("^("+ht+")(?!px)[a-z%]+$","i"),gt=/^--/,Et=function(h){var p=h.ownerDocument.defaultView;return(!p||!p.opener)&&(p=e),p.getComputedStyle(h)},Nt=function(h,p,_){var w,R,L={};for(R in p)L[R]=h.style[R],h.style[R]=p[R];w=_.call(h);for(R in p)h.style[R]=L[R];return w},Pt=new RegExp(Ze.join("|"),"i");(function(){function h(){if(he){J.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",he.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",ze.appendChild(J).appendChild(he);var De=e.getComputedStyle(he);_=De.top!=="1%",te=p(De.marginLeft)===12,he.style.right="60%",L=p(De.right)===36,w=p(De.width)===36,he.style.position="absolute",R=p(he.offsetWidth/3)===12,ze.removeChild(J),he=null}}function p(De){return Math.round(parseFloat(De))}var _,w,R,L,N,te,J=b.createElement("div"),he=b.createElement("div");he.style&&(he.style.backgroundClip="content-box",he.cloneNode(!0).style.backgroundClip="",T.clearCloneStyle=he.style.backgroundClip==="content-box",g.extend(T,{boxSizingReliable:function(){return h(),w},pixelBoxStyles:function(){return h(),L},pixelPosition:function(){return h(),_},reliableMarginLeft:function(){return h(),te},scrollboxSize:function(){return h(),R},reliableTrDimensions:function(){var De,He,Se,Qe;return N==null&&(De=b.createElement("table"),He=b.createElement("tr"),Se=b.createElement("div"),De.style.cssText="position:absolute;left:-11111px;border-collapse:separate",He.style.cssText="box-sizing:content-box;border:1px solid",He.style.height="1px",Se.style.height="9px",Se.style.display="block",ze.appendChild(De).appendChild(He).appendChild(Se),Qe=e.getComputedStyle(He),N=parseInt(Qe.height,10)+parseInt(Qe.borderTopWidth,10)+parseInt(Qe.borderBottomWidth,10)===He.offsetHeight,ze.removeChild(De)),N}}))})();function jt(h,p,_){var w,R,L,N,te=gt.test(p),J=h.style;return _=_||Et(h),_&&(N=_.getPropertyValue(p)||_[p],te&&N&&(N=N.replace(Z,"$1")||void 0),N===""&&!et(h)&&(N=g.style(h,p)),!T.pixelBoxStyles()&&Re.test(N)&&Pt.test(p)&&(w=J.width,R=J.minWidth,L=J.maxWidth,J.minWidth=J.maxWidth=J.width=N,N=_.width,J.width=w,J.minWidth=R,J.maxWidth=L)),N!==void 0?N+"":N}function Dt(h,p){return{get:function(){if(h()){delete this.get;return}return(this.get=p).apply(this,arguments)}}}var Wt=["Webkit","Moz","ms"],Qt=b.createElement("div").style,bn={};function Mi(h){for(var p=h[0].toUpperCase()+h.slice(1),_=Wt.length;_--;)if(h=Wt[_]+p,h in Qt)return h}function ue(h){var p=g.cssProps[h]||bn[h];return p||(h in Qt?h:bn[h]=Mi(h)||h)}var Pn=/^(none|table(?!-c[ea]).+)/,rn={position:"absolute",visibility:"hidden",display:"block"},Br={letterSpacing:"0",fontWeight:"400"};function In(h,p,_){var w=Q.exec(p);return w?Math.max(0,w[2]-(_||0))+(w[3]||"px"):p}function Pi(h,p,_,w,R,L){var N=p==="width"?1:0,te=0,J=0,he=0;if(_===(w?"border":"content"))return 0;for(;N<4;N+=2)_==="margin"&&(he+=g.css(h,_+Ze[N],!0,R)),w?(_==="content"&&(J-=g.css(h,"padding"+Ze[N],!0,R)),_!=="margin"&&(J-=g.css(h,"border"+Ze[N]+"Width",!0,R))):(J+=g.css(h,"padding"+Ze[N],!0,R),_!=="padding"?J+=g.css(h,"border"+Ze[N]+"Width",!0,R):te+=g.css(h,"border"+Ze[N]+"Width",!0,R));return!w&&L>=0&&(J+=Math.max(0,Math.ceil(h["offset"+p[0].toUpperCase()+p.slice(1)]-L-J-te-.5))||0),J+he}function Ts(h,p,_){var w=Et(h),R=!T.boxSizingReliable()||_,L=R&&g.css(h,"boxSizing",!1,w)==="border-box",N=L,te=jt(h,p,w),J="offset"+p[0].toUpperCase()+p.slice(1);if(Re.test(te)){if(!_)return te;te="auto"}return(!T.boxSizingReliable()&&L||!T.reliableTrDimensions()&&U(h,"tr")||te==="auto"||!parseFloat(te)&&g.css(h,"display",!1,w)==="inline")&&h.getClientRects().length&&(L=g.css(h,"boxSizing",!1,w)==="border-box",N=J in h,N&&(te=h[J])),te=parseFloat(te)||0,te+Pi(h,p,_||(L?"border":"content"),N,w,te)+"px"}g.extend({cssHooks:{opacity:{get:function(h,p){if(p){var _=jt(h,"opacity");return _===""?"1":_}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(h,p,_,w){if(!(!h||h.nodeType===3||h.nodeType===8||!h.style)){var R,L,N,te=Xt(p),J=gt.test(p),he=h.style;if(J||(p=ue(te)),N=g.cssHooks[p]||g.cssHooks[te],_!==void 0){if(L=typeof _,L==="string"&&(R=Q.exec(_))&&R[1]&&(_=pt(h,p,R),L="number"),_==null||_!==_)return;L==="number"&&!J&&(_+=R&&R[3]||(g.cssNumber[te]?"":"px")),!T.clearCloneStyle&&_===""&&p.indexOf("background")===0&&(he[p]="inherit"),(!N||!("set"in N)||(_=N.set(h,_,w))!==void 0)&&(J?he.setProperty(p,_):he[p]=_)}else return N&&"get"in N&&(R=N.get(h,!1,w))!==void 0?R:he[p]}},css:function(h,p,_,w){var R,L,N,te=Xt(p),J=gt.test(p);return J||(p=ue(te)),N=g.cssHooks[p]||g.cssHooks[te],N&&"get"in N&&(R=N.get(h,!0,_)),R===void 0&&(R=jt(h,p,w)),R==="normal"&&p in Br&&(R=Br[p]),_===""||_?(L=parseFloat(R),_===!0||isFinite(L)?L||0:R):R}}),g.each(["height","width"],function(h,p){g.cssHooks[p]={get:function(_,w,R){if(w)return Pn.test(g.css(_,"display"))&&(!_.getClientRects().length||!_.getBoundingClientRect().width)?Nt(_,rn,function(){return Ts(_,p,R)}):Ts(_,p,R)},set:function(_,w,R){var L,N=Et(_),te=!T.scrollboxSize()&&N.position==="absolute",J=te||R,he=J&&g.css(_,"boxSizing",!1,N)==="border-box",De=R?Pi(_,p,R,he,N):0;return he&&te&&(De-=Math.ceil(_["offset"+p[0].toUpperCase()+p.slice(1)]-parseFloat(N[p])-Pi(_,p,"border",!1,N)-.5)),De&&(L=Q.exec(w))&&(L[3]||"px")!=="px"&&(_.style[p]=w,w=g.css(_,p)),In(_,w,De)}}}),g.cssHooks.marginLeft=Dt(T.reliableMarginLeft,function(h,p){if(p)return(parseFloat(jt(h,"marginLeft"))||h.getBoundingClientRect().left-Nt(h,{marginLeft:0},function(){return h.getBoundingClientRect().left}))+"px"}),g.each({margin:"",padding:"",border:"Width"},function(h,p){g.cssHooks[h+p]={expand:function(_){for(var w=0,R={},L=typeof _=="string"?_.split(" "):[_];w<4;w++)R[h+Ze[w]+p]=L[w]||L[w-2]||L[0];return R}},h!=="margin"&&(g.cssHooks[h+p].set=In)}),g.fn.extend({css:function(h,p){return wt(this,function(_,w,R){var L,N,te={},J=0;if(Array.isArray(w)){for(L=Et(_),N=w.length;J<N;J++)te[w[J]]=g.css(_,w[J],!1,L);return te}return R!==void 0?g.style(_,w,R):g.css(_,w)},h,p,arguments.length>1)}});function Ut(h,p,_,w,R){return new Ut.prototype.init(h,p,_,w,R)}g.Tween=Ut,Ut.prototype={constructor:Ut,init:function(h,p,_,w,R,L){this.elem=h,this.prop=_,this.easing=R||g.easing._default,this.options=p,this.start=this.now=this.cur(),this.end=w,this.unit=L||(g.cssNumber[_]?"":"px")},cur:function(){var h=Ut.propHooks[this.prop];return h&&h.get?h.get(this):Ut.propHooks._default.get(this)},run:function(h){var p,_=Ut.propHooks[this.prop];return this.options.duration?this.pos=p=g.easing[this.easing](h,this.options.duration*h,0,1,this.options.duration):this.pos=p=h,this.now=(this.end-this.start)*p+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),_&&_.set?_.set(this):Ut.propHooks._default.set(this),this}},Ut.prototype.init.prototype=Ut.prototype,Ut.propHooks={_default:{get:function(h){var p;return h.elem.nodeType!==1||h.elem[h.prop]!=null&&h.elem.style[h.prop]==null?h.elem[h.prop]:(p=g.css(h.elem,h.prop,""),!p||p==="auto"?0:p)},set:function(h){g.fx.step[h.prop]?g.fx.step[h.prop](h):h.elem.nodeType===1&&(g.cssHooks[h.prop]||h.elem.style[ue(h.prop)]!=null)?g.style(h.elem,h.prop,h.now+h.unit):h.elem[h.prop]=h.now}}},Ut.propHooks.scrollTop=Ut.propHooks.scrollLeft={set:function(h){h.elem.nodeType&&h.elem.parentNode&&(h.elem[h.prop]=h.now)}},g.easing={linear:function(h){return h},swing:function(h){return .5-Math.cos(h*Math.PI)/2},_default:"swing"},g.fx=Ut.prototype.init,g.fx.step={};var Ei,Gn,Oi=/^(?:toggle|show|hide)$/,cs=/queueHooks$/;function ni(){Gn&&(b.hidden===!1&&e.requestAnimationFrame?e.requestAnimationFrame(ni):e.setTimeout(ni,g.fx.interval),g.fx.tick())}function Ii(){return e.setTimeout(function(){Ei=void 0}),Ei=Date.now()}function Kr(h,p){var _,w=0,R={height:h};for(p=p?1:0;w<4;w+=2-p)_=Ze[w],R["margin"+_]=R["padding"+_]=h;return p&&(R.opacity=R.width=h),R}function q(h,p,_){for(var w,R=(P.tweeners[p]||[]).concat(P.tweeners["*"]),L=0,N=R.length;L<N;L++)if(w=R[L].call(_,p,h))return w}function D(h,p,_){var w,R,L,N,te,J,he,De,He="width"in p||"height"in p,Se=this,Qe={},Ht=h.style,pn=h.nodeType&&tt(h),en=se.get(h,"fxshow");_.queue||(N=g._queueHooks(h,"fx"),N.unqueued==null&&(N.unqueued=0,te=N.empty.fire,N.empty.fire=function(){N.unqueued||te()}),N.unqueued++,Se.always(function(){Se.always(function(){N.unqueued--,g.queue(h,"fx").length||N.empty.fire()})}));for(w in p)if(R=p[w],Oi.test(R)){if(delete p[w],L=L||R==="toggle",R===(pn?"hide":"show"))if(R==="show"&&en&&en[w]!==void 0)pn=!0;else continue;Qe[w]=en&&en[w]||g.style(h,w)}if(J=!g.isEmptyObject(p),!(!J&&g.isEmptyObject(Qe))){He&&h.nodeType===1&&(_.overflow=[Ht.overflow,Ht.overflowX,Ht.overflowY],he=en&&en.display,he==null&&(he=se.get(h,"display")),De=g.css(h,"display"),De==="none"&&(he?De=he:(Ie([h],!0),he=h.style.display||he,De=g.css(h,"display"),Ie([h]))),(De==="inline"||De==="inline-block"&&he!=null)&&g.css(h,"float")==="none"&&(J||(Se.done(function(){Ht.display=he}),he==null&&(De=Ht.display,he=De==="none"?"":De)),Ht.display="inline-block")),_.overflow&&(Ht.overflow="hidden",Se.always(function(){Ht.overflow=_.overflow[0],Ht.overflowX=_.overflow[1],Ht.overflowY=_.overflow[2]})),J=!1;for(w in Qe)J||(en?"hidden"in en&&(pn=en.hidden):en=se.access(h,"fxshow",{display:he}),L&&(en.hidden=!pn),pn&&Ie([h],!0),Se.done(function(){pn||Ie([h]),se.remove(h,"fxshow");for(w in Qe)g.style(h,w,Qe[w])})),J=q(pn?en[w]:0,w,Se),w in en||(en[w]=J.start,pn&&(J.end=J.start,J.start=0))}}function B(h,p){var _,w,R,L,N;for(_ in h)if(w=Xt(_),R=p[w],L=h[_],Array.isArray(L)&&(R=L[1],L=h[_]=L[0]),_!==w&&(h[w]=L,delete h[_]),N=g.cssHooks[w],N&&"expand"in N){L=N.expand(L),delete h[w];for(_ in L)_ in h||(h[_]=L[_],p[_]=R)}else p[w]=R}function P(h,p,_){var w,R,L=0,N=P.prefilters.length,te=g.Deferred().always(function(){delete J.elem}),J=function(){if(R)return!1;for(var He=Ei||Ii(),Se=Math.max(0,he.startTime+he.duration-He),Qe=Se/he.duration||0,Ht=1-Qe,pn=0,en=he.tweens.length;pn<en;pn++)he.tweens[pn].run(Ht);return te.notifyWith(h,[he,Ht,Se]),Ht<1&&en?Se:(en||te.notifyWith(h,[he,1,0]),te.resolveWith(h,[he]),!1)},he=te.promise({elem:h,props:g.extend({},p),opts:g.extend(!0,{specialEasing:{},easing:g.easing._default},_),originalProperties:p,originalOptions:_,startTime:Ei||Ii(),duration:_.duration,tweens:[],createTween:function(He,Se){var Qe=g.Tween(h,he.opts,He,Se,he.opts.specialEasing[He]||he.opts.easing);return he.tweens.push(Qe),Qe},stop:function(He){var Se=0,Qe=He?he.tweens.length:0;if(R)return this;for(R=!0;Se<Qe;Se++)he.tweens[Se].run(1);return He?(te.notifyWith(h,[he,1,0]),te.resolveWith(h,[he,He])):te.rejectWith(h,[he,He]),this}}),De=he.props;for(B(De,he.opts.specialEasing);L<N;L++)if(w=P.prefilters[L].call(he,h,De,he.opts),w)return A(w.stop)&&(g._queueHooks(he.elem,he.opts.queue).stop=w.stop.bind(w)),w;return g.map(De,q,he),A(he.opts.start)&&he.opts.start.call(h,he),he.progress(he.opts.progress).done(he.opts.done,he.opts.complete).fail(he.opts.fail).always(he.opts.always),g.fx.timer(g.extend(J,{elem:h,anim:he,queue:he.opts.queue})),he}g.Animation=g.extend(P,{tweeners:{"*":[function(h,p){var _=this.createTween(h,p);return pt(_.elem,h,Q.exec(p),_),_}]},tweener:function(h,p){A(h)?(p=h,h=["*"]):h=h.match(Mt);for(var _,w=0,R=h.length;w<R;w++)_=h[w],P.tweeners[_]=P.tweeners[_]||[],P.tweeners[_].unshift(p)},prefilters:[D],prefilter:function(h,p){p?P.prefilters.unshift(h):P.prefilters.push(h)}}),g.speed=function(h,p,_){var w=h&&typeof h=="object"?g.extend({},h):{complete:_||!_&&p||A(h)&&h,duration:h,easing:_&&p||p&&!A(p)&&p};return g.fx.off?w.duration=0:typeof w.duration!="number"&&(w.duration in g.fx.speeds?w.duration=g.fx.speeds[w.duration]:w.duration=g.fx.speeds._default),(w.queue==null||w.queue===!0)&&(w.queue="fx"),w.old=w.complete,w.complete=function(){A(w.old)&&w.old.call(this),w.queue&&g.dequeue(this,w.queue)},w},g.fn.extend({fadeTo:function(h,p,_,w){return this.filter(tt).css("opacity",0).show().end().animate({opacity:p},h,_,w)},animate:function(h,p,_,w){var R=g.isEmptyObject(h),L=g.speed(p,_,w),N=function(){var te=P(this,g.extend({},h),L);(R||se.get(this,"finish"))&&te.stop(!0)};return N.finish=N,R||L.queue===!1?this.each(N):this.queue(L.queue,N)},stop:function(h,p,_){var w=function(R){var L=R.stop;delete R.stop,L(_)};return typeof h!="string"&&(_=p,p=h,h=void 0),p&&this.queue(h||"fx",[]),this.each(function(){var R=!0,L=h!=null&&h+"queueHooks",N=g.timers,te=se.get(this);if(L)te[L]&&te[L].stop&&w(te[L]);else for(L in te)te[L]&&te[L].stop&&cs.test(L)&&w(te[L]);for(L=N.length;L--;)N[L].elem===this&&(h==null||N[L].queue===h)&&(N[L].anim.stop(_),R=!1,N.splice(L,1));(R||!_)&&g.dequeue(this,h)})},finish:function(h){return h!==!1&&(h=h||"fx"),this.each(function(){var p,_=se.get(this),w=_[h+"queue"],R=_[h+"queueHooks"],L=g.timers,N=w?w.length:0;for(_.finish=!0,g.queue(this,h,[]),R&&R.stop&&R.stop.call(this,!0),p=L.length;p--;)L[p].elem===this&&L[p].queue===h&&(L[p].anim.stop(!0),L.splice(p,1));for(p=0;p<N;p++)w[p]&&w[p].finish&&w[p].finish.call(this);delete _.finish})}}),g.each(["toggle","show","hide"],function(h,p){var _=g.fn[p];g.fn[p]=function(w,R,L){return w==null||typeof w=="boolean"?_.apply(this,arguments):this.animate(Kr(p,!0),w,R,L)}}),g.each({slideDown:Kr("show"),slideUp:Kr("hide"),slideToggle:Kr("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(h,p){g.fn[h]=function(_,w,R){return this.animate(p,_,w,R)}}),g.timers=[],g.fx.tick=function(){var h,p=0,_=g.timers;for(Ei=Date.now();p<_.length;p++)h=_[p],!h()&&_[p]===h&&_.splice(p--,1);_.length||g.fx.stop(),Ei=void 0},g.fx.timer=function(h){g.timers.push(h),g.fx.start()},g.fx.interval=13,g.fx.start=function(){Gn||(Gn=!0,ni())},g.fx.stop=function(){Gn=null},g.fx.speeds={slow:600,fast:200,_default:400},g.fn.delay=function(h,p){return h=g.fx&&g.fx.speeds[h]||h,p=p||"fx",this.queue(p,function(_,w){var R=e.setTimeout(_,h);w.stop=function(){e.clearTimeout(R)}})},function(){var h=b.createElement("input"),p=b.createElement("select"),_=p.appendChild(b.createElement("option"));h.type="checkbox",T.checkOn=h.value!=="",T.optSelected=_.selected,h=b.createElement("input"),h.value="t",h.type="radio",T.radioValue=h.value==="t"}();var ie,ee=g.expr.attrHandle;g.fn.extend({attr:function(h,p){return wt(this,g.attr,h,p,arguments.length>1)},removeAttr:function(h){return this.each(function(){g.removeAttr(this,h)})}}),g.extend({attr:function(h,p,_){var w,R,L=h.nodeType;if(!(L===3||L===8||L===2)){if(typeof h.getAttribute>"u")return g.prop(h,p,_);if((L!==1||!g.isXMLDoc(h))&&(R=g.attrHooks[p.toLowerCase()]||(g.expr.match.bool.test(p)?ie:void 0)),_!==void 0){if(_===null){g.removeAttr(h,p);return}return R&&"set"in R&&(w=R.set(h,_,p))!==void 0?w:(h.setAttribute(p,_+""),_)}return R&&"get"in R&&(w=R.get(h,p))!==null?w:(w=g.find.attr(h,p),w??void 0)}},attrHooks:{type:{set:function(h,p){if(!T.radioValue&&p==="radio"&&U(h,"input")){var _=h.value;return h.setAttribute("type",p),_&&(h.value=_),p}}}},removeAttr:function(h,p){var _,w=0,R=p&&p.match(Mt);if(R&&h.nodeType===1)for(;_=R[w++];)h.removeAttribute(_)}}),ie={set:function(h,p,_){return p===!1?g.removeAttr(h,_):h.setAttribute(_,_),_}},g.each(g.expr.match.bool.source.match(/\w+/g),function(h,p){var _=ee[p]||g.find.attr;ee[p]=function(w,R,L){var N,te,J=R.toLowerCase();return L||(te=ee[J],ee[J]=N,N=_(w,R,L)!=null?J:null,ee[J]=te),N}});var le=/^(?:input|select|textarea|button)$/i,Pe=/^(?:a|area)$/i;g.fn.extend({prop:function(h,p){return wt(this,g.prop,h,p,arguments.length>1)},removeProp:function(h){return this.each(function(){delete this[g.propFix[h]||h]})}}),g.extend({prop:function(h,p,_){var w,R,L=h.nodeType;if(!(L===3||L===8||L===2))return(L!==1||!g.isXMLDoc(h))&&(p=g.propFix[p]||p,R=g.propHooks[p]),_!==void 0?R&&"set"in R&&(w=R.set(h,_,p))!==void 0?w:h[p]=_:R&&"get"in R&&(w=R.get(h,p))!==null?w:h[p]},propHooks:{tabIndex:{get:function(h){var p=g.find.attr(h,"tabindex");return p?parseInt(p,10):le.test(h.nodeName)||Pe.test(h.nodeName)&&h.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),T.optSelected||(g.propHooks.selected={get:function(h){var p=h.parentNode;return p&&p.parentNode&&p.parentNode.selectedIndex,null},set:function(h){var p=h.parentNode;p&&(p.selectedIndex,p.parentNode&&p.parentNode.selectedIndex)}}),g.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){g.propFix[this.toLowerCase()]=this});function $e(h){var p=h.match(Mt)||[];return p.join(" ")}function Ve(h){return h.getAttribute&&h.getAttribute("class")||""}function Oe(h){return Array.isArray(h)?h:typeof h=="string"?h.match(Mt)||[]:[]}g.fn.extend({addClass:function(h){var p,_,w,R,L,N;return A(h)?this.each(function(te){g(this).addClass(h.call(this,te,Ve(this)))}):(p=Oe(h),p.length?this.each(function(){if(w=Ve(this),_=this.nodeType===1&&" "+$e(w)+" ",_){for(L=0;L<p.length;L++)R=p[L],_.indexOf(" "+R+" ")<0&&(_+=R+" ");N=$e(_),w!==N&&this.setAttribute("class",N)}}):this)},removeClass:function(h){var p,_,w,R,L,N;return A(h)?this.each(function(te){g(this).removeClass(h.call(this,te,Ve(this)))}):arguments.length?(p=Oe(h),p.length?this.each(function(){if(w=Ve(this),_=this.nodeType===1&&" "+$e(w)+" ",_){for(L=0;L<p.length;L++)for(R=p[L];_.indexOf(" "+R+" ")>-1;)_=_.replace(" "+R+" "," ");N=$e(_),w!==N&&this.setAttribute("class",N)}}):this):this.attr("class","")},toggleClass:function(h,p){var _,w,R,L,N=typeof h,te=N==="string"||Array.isArray(h);return A(h)?this.each(function(J){g(this).toggleClass(h.call(this,J,Ve(this),p),p)}):typeof p=="boolean"&&te?p?this.addClass(h):this.removeClass(h):(_=Oe(h),this.each(function(){if(te)for(L=g(this),R=0;R<_.length;R++)w=_[R],L.hasClass(w)?L.removeClass(w):L.addClass(w);else(h===void 0||N==="boolean")&&(w=Ve(this),w&&se.set(this,"__className__",w),this.setAttribute&&this.setAttribute("class",w||h===!1?"":se.get(this,"__className__")||""))}))},hasClass:function(h){var p,_,w=0;for(p=" "+h+" ";_=this[w++];)if(_.nodeType===1&&(" "+$e(Ve(_))+" ").indexOf(p)>-1)return!0;return!1}});var ke=/\r/g;g.fn.extend({val:function(h){var p,_,w,R=this[0];return arguments.length?(w=A(h),this.each(function(L){var N;this.nodeType===1&&(w?N=h.call(this,L,g(this).val()):N=h,N==null?N="":typeof N=="number"?N+="":Array.isArray(N)&&(N=g.map(N,function(te){return te==null?"":te+""})),p=g.valHooks[this.type]||g.valHooks[this.nodeName.toLowerCase()],(!p||!("set"in p)||p.set(this,N,"value")===void 0)&&(this.value=N))})):R?(p=g.valHooks[R.type]||g.valHooks[R.nodeName.toLowerCase()],p&&"get"in p&&(_=p.get(R,"value"))!==void 0?_:(_=R.value,typeof _=="string"?_.replace(ke,""):_??"")):void 0}}),g.extend({valHooks:{option:{get:function(h){var p=g.find.attr(h,"value");return p??$e(g.text(h))}},select:{get:function(h){var p,_,w,R=h.options,L=h.selectedIndex,N=h.type==="select-one",te=N?null:[],J=N?L+1:R.length;for(L<0?w=J:w=N?L:0;w<J;w++)if(_=R[w],(_.selected||w===L)&&!_.disabled&&(!_.parentNode.disabled||!U(_.parentNode,"optgroup"))){if(p=g(_).val(),N)return p;te.push(p)}return te},set:function(h,p){for(var _,w,R=h.options,L=g.makeArray(p),N=R.length;N--;)w=R[N],(w.selected=g.inArray(g.valHooks.option.get(w),L)>-1)&&(_=!0);return _||(h.selectedIndex=-1),L}}}}),g.each(["radio","checkbox"],function(){g.valHooks[this]={set:function(h,p){if(Array.isArray(p))return h.checked=g.inArray(g(h).val(),p)>-1}},T.checkOn||(g.valHooks[this].get=function(h){return h.getAttribute("value")===null?"on":h.value})});var Ke=e.location,Kt={guid:Date.now()},sn=/\?/;g.parseXML=function(h){var p,_;if(!h||typeof h!="string")return null;try{p=new e.DOMParser().parseFromString(h,"text/xml")}catch{}return _=p&&p.getElementsByTagName("parsererror")[0],(!p||_)&&g.error("Invalid XML: "+(_?g.map(_.childNodes,function(w){return w.textContent}).join(`
`):h)),p};var fn=/^(?:focusinfocus|focusoutblur)$/,dt=function(h){h.stopPropagation()};g.extend(g.event,{trigger:function(h,p,_,w){var R,L,N,te,J,he,De,He,Se=[_||b],Qe=v.call(h,"type")?h.type:h,Ht=v.call(h,"namespace")?h.namespace.split("."):[];if(L=He=N=_=_||b,!(_.nodeType===3||_.nodeType===8)&&!fn.test(Qe+g.event.triggered)&&(Qe.indexOf(".")>-1&&(Ht=Qe.split("."),Qe=Ht.shift(),Ht.sort()),J=Qe.indexOf(":")<0&&"on"+Qe,h=h[g.expando]?h:new g.Event(Qe,typeof h=="object"&&h),h.isTrigger=w?2:3,h.namespace=Ht.join("."),h.rnamespace=h.namespace?new RegExp("(^|\\.)"+Ht.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,h.result=void 0,h.target||(h.target=_),p=p==null?[h]:g.makeArray(p,[h]),De=g.event.special[Qe]||{},!(!w&&De.trigger&&De.trigger.apply(_,p)===!1))){if(!w&&!De.noBubble&&!E(_)){for(te=De.delegateType||Qe,fn.test(te+Qe)||(L=L.parentNode);L;L=L.parentNode)Se.push(L),N=L;N===(_.ownerDocument||b)&&Se.push(N.defaultView||N.parentWindow||e)}for(R=0;(L=Se[R++])&&!h.isPropagationStopped();)He=L,h.type=R>1?te:De.bindType||Qe,he=(se.get(L,"events")||Object.create(null))[h.type]&&se.get(L,"handle"),he&&he.apply(L,p),he=J&&L[J],he&&he.apply&&W(L)&&(h.result=he.apply(L,p),h.result===!1&&h.preventDefault());return h.type=Qe,!w&&!h.isDefaultPrevented()&&(!De._default||De._default.apply(Se.pop(),p)===!1)&&W(_)&&J&&A(_[Qe])&&!E(_)&&(N=_[J],N&&(_[J]=null),g.event.triggered=Qe,h.isPropagationStopped()&&He.addEventListener(Qe,dt),_[Qe](),h.isPropagationStopped()&&He.removeEventListener(Qe,dt),g.event.triggered=void 0,N&&(_[J]=N)),h.result}},simulate:function(h,p,_){var w=g.extend(new g.Event,_,{type:h,isSimulated:!0});g.event.trigger(w,null,p)}}),g.fn.extend({trigger:function(h,p){return this.each(function(){g.event.trigger(h,p,this)})},triggerHandler:function(h,p){var _=this[0];if(_)return g.event.trigger(h,p,_,!0)}});var $t=/\[\]$/,$n=/\r?\n/g,Ln=/^(?:submit|button|image|reset|file)$/i,Ot=/^(?:input|select|textarea|keygen)/i;function kt(h,p,_,w){var R;if(Array.isArray(p))g.each(p,function(L,N){_||$t.test(h)?w(h,N):kt(h+"["+(typeof N=="object"&&N!=null?L:"")+"]",N,_,w)});else if(!_&&H(p)==="object")for(R in p)kt(h+"["+R+"]",p[R],_,w);else w(h,p)}g.param=function(h,p){var _,w=[],R=function(L,N){var te=A(N)?N():N;w[w.length]=encodeURIComponent(L)+"="+encodeURIComponent(te??"")};if(h==null)return"";if(Array.isArray(h)||h.jquery&&!g.isPlainObject(h))g.each(h,function(){R(this.name,this.value)});else for(_ in h)kt(_,h[_],p,R);return w.join("&")},g.fn.extend({serialize:function(){return g.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var h=g.prop(this,"elements");return h?g.makeArray(h):this}).filter(function(){var h=this.type;return this.name&&!g(this).is(":disabled")&&Ot.test(this.nodeName)&&!Ln.test(h)&&(this.checked||!rt.test(h))}).map(function(h,p){var _=g(this).val();return _==null?null:Array.isArray(_)?g.map(_,function(w){return{name:p.name,value:w.replace($n,`\r
`)}}):{name:p.name,value:_.replace($n,`\r
`)}}).get()}});var st=/%20/g,an=/#.*$/,dn=/([?&])_=[^&]*/,ri=/^(.*?):[ \t]*([^\r\n]*)$/mg,nr=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,ki=/^(?:GET|HEAD)$/,ir=/^\/\//,Nn={},Bi={},fi="*/".concat("*"),pr=b.createElement("a");pr.href=Ke.href;function As(h){return function(p,_){typeof p!="string"&&(_=p,p="*");var w,R=0,L=p.toLowerCase().match(Mt)||[];if(A(_))for(;w=L[R++];)w[0]==="+"?(w=w.slice(1)||"*",(h[w]=h[w]||[]).unshift(_)):(h[w]=h[w]||[]).push(_)}}function qs(h,p,_,w){var R={},L=h===Bi;function N(te){var J;return R[te]=!0,g.each(h[te]||[],function(he,De){var He=De(p,_,w);if(typeof He=="string"&&!L&&!R[He])return p.dataTypes.unshift(He),N(He),!1;if(L)return!(J=He)}),J}return N(p.dataTypes[0])||!R["*"]&&N("*")}function mr(h,p){var _,w,R=g.ajaxSettings.flatOptions||{};for(_ in p)p[_]!==void 0&&((R[_]?h:w||(w={}))[_]=p[_]);return w&&g.extend(!0,h,w),h}function Jr(h,p,_){for(var w,R,L,N,te=h.contents,J=h.dataTypes;J[0]==="*";)J.shift(),w===void 0&&(w=h.mimeType||p.getResponseHeader("Content-Type"));if(w){for(R in te)if(te[R]&&te[R].test(w)){J.unshift(R);break}}if(J[0]in _)L=J[0];else{for(R in _){if(!J[0]||h.converters[R+" "+J[0]]){L=R;break}N||(N=R)}L=L||N}if(L)return L!==J[0]&&J.unshift(L),_[L]}function Qo(h,p,_,w){var R,L,N,te,J,he={},De=h.dataTypes.slice();if(De[1])for(N in h.converters)he[N.toLowerCase()]=h.converters[N];for(L=De.shift();L;)if(h.responseFields[L]&&(_[h.responseFields[L]]=p),!J&&w&&h.dataFilter&&(p=h.dataFilter(p,h.dataType)),J=L,L=De.shift(),L){if(L==="*")L=J;else if(J!=="*"&&J!==L){if(N=he[J+" "+L]||he["* "+L],!N){for(R in he)if(te=R.split(" "),te[1]===L&&(N=he[J+" "+te[0]]||he["* "+te[0]],N)){N===!0?N=he[R]:he[R]!==!0&&(L=te[0],De.unshift(te[1]));break}}if(N!==!0)if(N&&h.throws)p=N(p);else try{p=N(p)}catch(He){return{state:"parsererror",error:N?He:"No conversion from "+J+" to "+L}}}}return{state:"success",data:p}}g.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Ke.href,type:"GET",isLocal:nr.test(Ke.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":fi,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":g.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(h,p){return p?mr(mr(h,g.ajaxSettings),p):mr(g.ajaxSettings,h)},ajaxPrefilter:As(Nn),ajaxTransport:As(Bi),ajax:function(h,p){typeof h=="object"&&(p=h,h=void 0),p=p||{};var _,w,R,L,N,te,J,he,De,He,Se=g.ajaxSetup({},p),Qe=Se.context||Se,Ht=Se.context&&(Qe.nodeType||Qe.jquery)?g(Qe):g.event,pn=g.Deferred(),en=g.Callbacks("once memory"),si=Se.statusCode||{},Qn={},xr={},yr="canceled",on={readyState:0,getResponseHeader:function(mn){var Vn;if(J){if(!L)for(L={};Vn=ri.exec(R);)L[Vn[1].toLowerCase()+" "]=(L[Vn[1].toLowerCase()+" "]||[]).concat(Vn[2]);Vn=L[mn.toLowerCase()+" "]}return Vn==null?null:Vn.join(", ")},getAllResponseHeaders:function(){return J?R:null},setRequestHeader:function(mn,Vn){return J==null&&(mn=xr[mn.toLowerCase()]=xr[mn.toLowerCase()]||mn,Qn[mn]=Vn),this},overrideMimeType:function(mn){return J==null&&(Se.mimeType=mn),this},statusCode:function(mn){var Vn;if(mn)if(J)on.always(mn[on.status]);else for(Vn in mn)si[Vn]=[si[Vn],mn[Vn]];return this},abort:function(mn){var Vn=mn||yr;return _&&_.abort(Vn),zr(0,Vn),this}};if(pn.promise(on),Se.url=((h||Se.url||Ke.href)+"").replace(ir,Ke.protocol+"//"),Se.type=p.method||p.type||Se.method||Se.type,Se.dataTypes=(Se.dataType||"*").toLowerCase().match(Mt)||[""],Se.crossDomain==null){te=b.createElement("a");try{te.href=Se.url,te.href=te.href,Se.crossDomain=pr.protocol+"//"+pr.host!=te.protocol+"//"+te.host}catch{Se.crossDomain=!0}}if(Se.data&&Se.processData&&typeof Se.data!="string"&&(Se.data=g.param(Se.data,Se.traditional)),qs(Nn,Se,p,on),J)return on;he=g.event&&Se.global,he&&g.active++===0&&g.event.trigger("ajaxStart"),Se.type=Se.type.toUpperCase(),Se.hasContent=!ki.test(Se.type),w=Se.url.replace(an,""),Se.hasContent?Se.data&&Se.processData&&(Se.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&(Se.data=Se.data.replace(st,"+")):(He=Se.url.slice(w.length),Se.data&&(Se.processData||typeof Se.data=="string")&&(w+=(sn.test(w)?"&":"?")+Se.data,delete Se.data),Se.cache===!1&&(w=w.replace(dn,"$1"),He=(sn.test(w)?"&":"?")+"_="+Kt.guid+++He),Se.url=w+He),Se.ifModified&&(g.lastModified[w]&&on.setRequestHeader("If-Modified-Since",g.lastModified[w]),g.etag[w]&&on.setRequestHeader("If-None-Match",g.etag[w])),(Se.data&&Se.hasContent&&Se.contentType!==!1||p.contentType)&&on.setRequestHeader("Content-Type",Se.contentType),on.setRequestHeader("Accept",Se.dataTypes[0]&&Se.accepts[Se.dataTypes[0]]?Se.accepts[Se.dataTypes[0]]+(Se.dataTypes[0]!=="*"?", "+fi+"; q=0.01":""):Se.accepts["*"]);for(De in Se.headers)on.setRequestHeader(De,Se.headers[De]);if(Se.beforeSend&&(Se.beforeSend.call(Qe,on,Se)===!1||J))return on.abort();if(yr="abort",en.add(Se.complete),on.done(Se.success),on.fail(Se.error),_=qs(Bi,Se,p,on),!_)zr(-1,"No Transport");else{if(on.readyState=1,he&&Ht.trigger("ajaxSend",[on,Se]),J)return on;Se.async&&Se.timeout>0&&(N=e.setTimeout(function(){on.abort("timeout")},Se.timeout));try{J=!1,_.send(Qn,zr)}catch(mn){if(J)throw mn;zr(-1,mn)}}function zr(mn,Vn,Cs,ta){var rr,vo,Gr,Vr,Qr,Fi=Vn;J||(J=!0,N&&e.clearTimeout(N),_=void 0,R=ta||"",on.readyState=mn>0?4:0,rr=mn>=200&&mn<300||mn===304,Cs&&(Vr=Jr(Se,on,Cs)),!rr&&g.inArray("script",Se.dataTypes)>-1&&g.inArray("json",Se.dataTypes)<0&&(Se.converters["text script"]=function(){}),Vr=Qo(Se,Vr,on,rr),rr?(Se.ifModified&&(Qr=on.getResponseHeader("Last-Modified"),Qr&&(g.lastModified[w]=Qr),Qr=on.getResponseHeader("etag"),Qr&&(g.etag[w]=Qr)),mn===204||Se.type==="HEAD"?Fi="nocontent":mn===304?Fi="notmodified":(Fi=Vr.state,vo=Vr.data,Gr=Vr.error,rr=!Gr)):(Gr=Fi,(mn||!Fi)&&(Fi="error",mn<0&&(mn=0))),on.status=mn,on.statusText=(Vn||Fi)+"",rr?pn.resolveWith(Qe,[vo,Fi,on]):pn.rejectWith(Qe,[on,Fi,Gr]),on.statusCode(si),si=void 0,he&&Ht.trigger(rr?"ajaxSuccess":"ajaxError",[on,Se,rr?vo:Gr]),en.fireWith(Qe,[on,Fi]),he&&(Ht.trigger("ajaxComplete",[on,Se]),--g.active||g.event.trigger("ajaxStop")))}return on},getJSON:function(h,p,_){return g.get(h,p,_,"json")},getScript:function(h,p){return g.get(h,void 0,p,"script")}}),g.each(["get","post"],function(h,p){g[p]=function(_,w,R,L){return A(w)&&(L=L||R,R=w,w=void 0),g.ajax(g.extend({url:_,type:p,dataType:L,data:w,success:R},g.isPlainObject(_)&&_))}}),g.ajaxPrefilter(function(h){var p;for(p in h.headers)p.toLowerCase()==="content-type"&&(h.contentType=h.headers[p]||"")}),g._evalUrl=function(h,p,_){return g.ajax({url:h,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(w){g.globalEval(w,p,_)}})},g.fn.extend({wrapAll:function(h){var p;return this[0]&&(A(h)&&(h=h.call(this[0])),p=g(h,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&p.insertBefore(this[0]),p.map(function(){for(var _=this;_.firstElementChild;)_=_.firstElementChild;return _}).append(this)),this},wrapInner:function(h){return A(h)?this.each(function(p){g(this).wrapInner(h.call(this,p))}):this.each(function(){var p=g(this),_=p.contents();_.length?_.wrapAll(h):p.append(h)})},wrap:function(h){var p=A(h);return this.each(function(_){g(this).wrapAll(p?h.call(this,_):h)})},unwrap:function(h){return this.parent(h).not("body").each(function(){g(this).replaceWith(this.childNodes)}),this}}),g.expr.pseudos.hidden=function(h){return!g.expr.pseudos.visible(h)},g.expr.pseudos.visible=function(h){return!!(h.offsetWidth||h.offsetHeight||h.getClientRects().length)},g.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch{}};var gr={0:200,1223:204},Un=g.ajaxSettings.xhr();T.cors=!!Un&&"withCredentials"in Un,T.ajax=Un=!!Un,g.ajaxTransport(function(h){var p,_;if(T.cors||Un&&!h.crossDomain)return{send:function(w,R){var L,N=h.xhr();if(N.open(h.type,h.url,h.async,h.username,h.password),h.xhrFields)for(L in h.xhrFields)N[L]=h.xhrFields[L];h.mimeType&&N.overrideMimeType&&N.overrideMimeType(h.mimeType),!h.crossDomain&&!w["X-Requested-With"]&&(w["X-Requested-With"]="XMLHttpRequest");for(L in w)N.setRequestHeader(L,w[L]);p=function(te){return function(){p&&(p=_=N.onload=N.onerror=N.onabort=N.ontimeout=N.onreadystatechange=null,te==="abort"?N.abort():te==="error"?typeof N.status!="number"?R(0,"error"):R(N.status,N.statusText):R(gr[N.status]||N.status,N.statusText,(N.responseType||"text")!=="text"||typeof N.responseText!="string"?{binary:N.response}:{text:N.responseText},N.getAllResponseHeaders()))}},N.onload=p(),_=N.onerror=N.ontimeout=p("error"),N.onabort!==void 0?N.onabort=_:N.onreadystatechange=function(){N.readyState===4&&e.setTimeout(function(){p&&_()})},p=p("abort");try{N.send(h.hasContent&&h.data||null)}catch(te){if(p)throw te}},abort:function(){p&&p()}}}),g.ajaxPrefilter(function(h){h.crossDomain&&(h.contents.script=!1)}),g.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(h){return g.globalEval(h),h}}}),g.ajaxPrefilter("script",function(h){h.cache===void 0&&(h.cache=!1),h.crossDomain&&(h.type="GET")}),g.ajaxTransport("script",function(h){if(h.crossDomain||h.scriptAttrs){var p,_;return{send:function(w,R){p=g("<script>").attr(h.scriptAttrs||{}).prop({charset:h.scriptCharset,src:h.url}).on("load error",_=function(L){p.remove(),_=null,L&&R(L.type==="error"?404:200,L.type)}),b.head.appendChild(p[0])},abort:function(){_&&_()}}}});var Fr=[],Hr=/(=)\?(?=&|$)|\?\?/;g.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var h=Fr.pop()||g.expando+"_"+Kt.guid++;return this[h]=!0,h}}),g.ajaxPrefilter("json jsonp",function(h,p,_){var w,R,L,N=h.jsonp!==!1&&(Hr.test(h.url)?"url":typeof h.data=="string"&&(h.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&Hr.test(h.data)&&"data");if(N||h.dataTypes[0]==="jsonp")return w=h.jsonpCallback=A(h.jsonpCallback)?h.jsonpCallback():h.jsonpCallback,N?h[N]=h[N].replace(Hr,"$1"+w):h.jsonp!==!1&&(h.url+=(sn.test(h.url)?"&":"?")+h.jsonp+"="+w),h.converters["script json"]=function(){return L||g.error(w+" was not called"),L[0]},h.dataTypes[0]="json",R=e[w],e[w]=function(){L=arguments},_.always(function(){R===void 0?g(e).removeProp(w):e[w]=R,h[w]&&(h.jsonpCallback=p.jsonpCallback,Fr.push(w)),L&&A(R)&&R(L[0]),L=R=void 0}),"script"}),T.createHTMLDocument=function(){var h=b.implementation.createHTMLDocument("").body;return h.innerHTML="<form></form><form></form>",h.childNodes.length===2}(),g.parseHTML=function(h,p,_){if(typeof h!="string")return[];typeof p=="boolean"&&(_=p,p=!1);var w,R,L;return p||(T.createHTMLDocument?(p=b.implementation.createHTMLDocument(""),w=p.createElement("base"),w.href=b.location.href,p.head.appendChild(w)):p=b),R=Ce.exec(h),L=!_&&[],R?[p.createElement(R[1])]:(R=Fn([h],p,L),L&&L.length&&g(L).remove(),g.merge([],R.childNodes))},g.fn.load=function(h,p,_){var w,R,L,N=this,te=h.indexOf(" ");return te>-1&&(w=$e(h.slice(te)),h=h.slice(0,te)),A(p)?(_=p,p=void 0):p&&typeof p=="object"&&(R="POST"),N.length>0&&g.ajax({url:h,type:R||"GET",dataType:"html",data:p}).done(function(J){L=arguments,N.html(w?g("<div>").append(g.parseHTML(J)).find(w):J)}).always(_&&function(J,he){N.each(function(){_.apply(this,L||[J.responseText,he,J])})}),this},g.expr.pseudos.animated=function(h){return g.grep(g.timers,function(p){return h===p.elem}).length},g.offset={setOffset:function(h,p,_){var w,R,L,N,te,J,he,De=g.css(h,"position"),He=g(h),Se={};De==="static"&&(h.style.position="relative"),te=He.offset(),L=g.css(h,"top"),J=g.css(h,"left"),he=(De==="absolute"||De==="fixed")&&(L+J).indexOf("auto")>-1,he?(w=He.position(),N=w.top,R=w.left):(N=parseFloat(L)||0,R=parseFloat(J)||0),A(p)&&(p=p.call(h,_,g.extend({},te))),p.top!=null&&(Se.top=p.top-te.top+N),p.left!=null&&(Se.left=p.left-te.left+R),"using"in p?p.using.call(h,Se):He.css(Se)}},g.fn.extend({offset:function(h){if(arguments.length)return h===void 0?this:this.each(function(R){g.offset.setOffset(this,h,R)});var p,_,w=this[0];if(w)return w.getClientRects().length?(p=w.getBoundingClientRect(),_=w.ownerDocument.defaultView,{top:p.top+_.pageYOffset,left:p.left+_.pageXOffset}):{top:0,left:0}},position:function(){if(this[0]){var h,p,_,w=this[0],R={top:0,left:0};if(g.css(w,"position")==="fixed")p=w.getBoundingClientRect();else{for(p=this.offset(),_=w.ownerDocument,h=w.offsetParent||_.documentElement;h&&(h===_.body||h===_.documentElement)&&g.css(h,"position")==="static";)h=h.parentNode;h&&h!==w&&h.nodeType===1&&(R=g(h).offset(),R.top+=g.css(h,"borderTopWidth",!0),R.left+=g.css(h,"borderLeftWidth",!0))}return{top:p.top-R.top-g.css(w,"marginTop",!0),left:p.left-R.left-g.css(w,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var h=this.offsetParent;h&&g.css(h,"position")==="static";)h=h.offsetParent;return h||ze})}}),g.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(h,p){var _=p==="pageYOffset";g.fn[h]=function(w){return wt(this,function(R,L,N){var te;if(E(R)?te=R:R.nodeType===9&&(te=R.defaultView),N===void 0)return te?te[p]:R[L];te?te.scrollTo(_?te.pageXOffset:N,_?N:te.pageYOffset):R[L]=N},h,w,arguments.length)}}),g.each(["top","left"],function(h,p){g.cssHooks[p]=Dt(T.pixelPosition,function(_,w){if(w)return w=jt(_,p),Re.test(w)?g(_).position()[p]+"px":w})}),g.each({Height:"height",Width:"width"},function(h,p){g.each({padding:"inner"+h,content:p,"":"outer"+h},function(_,w){g.fn[w]=function(R,L){var N=arguments.length&&(_||typeof R!="boolean"),te=_||(R===!0||L===!0?"margin":"border");return wt(this,function(J,he,De){var He;return E(J)?w.indexOf("outer")===0?J["inner"+h]:J.document.documentElement["client"+h]:J.nodeType===9?(He=J.documentElement,Math.max(J.body["scroll"+h],He["scroll"+h],J.body["offset"+h],He["offset"+h],He["client"+h])):De===void 0?g.css(J,he,te):g.style(J,he,De,te)},p,N?R:void 0,N)}})}),g.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(h,p){g.fn[p]=function(_){return this.on(p,_)}}),g.fn.extend({bind:function(h,p,_){return this.on(h,null,p,_)},unbind:function(h,p){return this.off(h,null,p)},delegate:function(h,p,_,w){return this.on(p,h,_,w)},undelegate:function(h,p,_){return arguments.length===1?this.off(h,"**"):this.off(p,h||"**",_)},hover:function(h,p){return this.on("mouseenter",h).on("mouseleave",p||h)}}),g.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(h,p){g.fn[p]=function(_,w){return arguments.length>0?this.on(p,null,_,w):this.trigger(p)}});var vr=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;g.proxy=function(h,p){var _,w,R;if(typeof p=="string"&&(_=h[p],p=h,h=_),!!A(h))return w=o.call(arguments,2),R=function(){return h.apply(p||this,w.concat(o.call(arguments)))},R.guid=h.guid=h.guid||g.guid++,R},g.holdReady=function(h){h?g.readyWait++:g.ready(!0)},g.isArray=Array.isArray,g.parseJSON=JSON.parse,g.nodeName=U,g.isFunction=A,g.isWindow=E,g.camelCase=Xt,g.type=H,g.now=Date.now,g.isNumeric=function(h){var p=g.type(h);return(p==="number"||p==="string")&&!isNaN(h-parseFloat(h))},g.trim=function(h){return h==null?"":(h+"").replace(vr,"$1")};var ea=e.jQuery,hs=e.$;return g.noConflict=function(h){return e.$===g&&(e.$=hs),h&&e.jQuery===g&&(e.jQuery=ea),g},typeof t>"u"&&(e.jQuery=e.$=g),g})})(Wg);var Uy=Wg.exports;const Oy=mf(Uy);window.$=Oy;Zc.use(Iy);$(".size a").click(function(){$("#select-btn").text($(this).text())});$(".tonem a").click(function(){$("#select-btn2").text($(this).text())});var Gh=document.getElementById("background"),mp=document.getElementById("color_val");Gh.onchange=function(){mp.innerHTML=Gh.value,mp.style.color=Gh.value};var Vh=document.getElementById("spine"),gp=document.getElementById("color_val2");Vh.onchange=function(){gp.innerHTML=Vh.value,gp.style.color=Vh.value};var Wh=document.getElementById("hardCover"),vp=document.getElementById("color_val3");Wh.onchange=function(){vp.innerHTML=Wh.value,vp.style.color=Wh.value};var $h=document.getElementById("innerSpine"),xp=document.getElementById("color_val4");$h.onchange=function(){xp.innerHTML=$h.value,xp.style.color=$h.value};var Xh=document.getElementById("endband"),yp=document.getElementById("color_val5");Xh.onchange=function(){yp.innerHTML=Xh.value,yp.style.color=Xh.value};var jh=document.getElementById("pagesColor"),_p=document.getElementById("color_val6");jh.onchange=function(){_p.innerHTML=jh.value,_p.style.color=jh.value};var ky=function(){var s=$(".range-slider"),e=$(".uk-range"),t=$(".range-slider_value");s.each(function(){t.each(function(){var n=$(this).prev().attr("value");$(this).html(n)}),e.on("input",function(){$(this).next(t).html(this.value)})})},By=function(){var s=$(".range-slider2"),e=$(".uk-range"),t=$(".range-slider_reflectivity_value");s.each(function(){t.each(function(){var n=$(this).prev().attr("value");$(this).html(n)}),e.on("input",function(){$(this).next(t).html(this.value)})})},Fy=function(){var s=$(".range-slider3"),e=$(".uk-range"),t=$(".range-slider_ambient_value");s.each(function(){t.each(function(){var n=$(this).prev().attr("value");$(this).html(n)}),e.on("input",function(){$(this).next(t).html(this.value)})})},Hy=function(){var s=$(".range-slider4"),e=$(".uk-range"),t=$(".range-slider_front_value");s.each(function(){t.each(function(){var n=$(this).prev().attr("value");$(this).html(n)}),e.on("input",function(){$(this).next(t).html(this.value)})})},zy=function(){var s=$(".range-slider5"),e=$(".uk-range"),t=$(".range-slider_back_value");s.each(function(){t.each(function(){var n=$(this).prev().attr("value");$(this).html(n)}),e.on("input",function(){$(this).next(t).html(this.value)})})},Gy=function(){var s=$(".range-slider6"),e=$(".uk-range"),t=$(".range-slider_exposure_value");s.each(function(){t.each(function(){var n=$(this).prev().attr("value");$(this).html(n)}),e.on("input",function(){$(this).next(t).html(this.value)})})};ky();By();Fy();Hy();zy();Gy();/**
 * @license
 * Copyright 2010-2023 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const gf="157",la={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},ca={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},Vy=0,bp=1,Wy=2,$g=1,$y=2,ks=3,Vs=0,ur=1,ss=2,uo=0,Na=1,wp=2,Mp=3,Ep=4,Xy=5,La=100,jy=101,Yy=102,Sp=103,Tp=104,qy=200,Zy=201,Ky=202,Jy=203,Xg=204,jg=205,Qy=206,e_=207,t_=208,n_=209,i_=210,r_=0,s_=1,o_=2,$u=3,a_=4,l_=5,c_=6,h_=7,Yg=0,u_=1,f_=2,Gs=0,qg=1,d_=2,Zg=3,vf=4,p_=5,Kg=300,za=301,Ga=302,Xu=303,ju=304,dh=306,jo=1e3,er=1001,Ol=1002,xi=1003,eh=1004,Rl=1005,li=1006,xf=1007,Ws=1008,fo=1009,m_=1010,g_=1011,yf=1012,Jg=1013,ao=1014,Lr=1015,Fs=1016,Qg=1017,e0=1018,Wo=1020,v_=1021,Cr=1023,x_=1024,y_=1025,$o=1026,Va=1027,__=1028,t0=1029,b_=1030,n0=1031,i0=1033,Yh=33776,qh=33777,Zh=33778,Kh=33779,Ap=35840,Cp=35841,Rp=35842,Lp=35843,w_=36196,Dp=37492,Pp=37496,Ip=37808,Np=37809,Up=37810,Op=37811,kp=37812,Bp=37813,Fp=37814,Hp=37815,zp=37816,Gp=37817,Vp=37818,Wp=37819,$p=37820,Xp=37821,Jh=36492,jp=36494,Yp=36495,M_=36283,qp=36284,Zp=36285,Kp=36286,Wa=2300,Yo=2301,Qh=2302,Jp=2400,Qp=2401,em=2402,E_=2500,S_=0,r0=1,Yu=2,s0=3e3,Xo=3001,T_=3200,A_=3201,o0=0,C_=1,Rr="",An="srgb",Di="srgb-linear",_f="display-p3",ph="display-p3-linear",th="linear",Wn="srgb",nh="rec709",ih="p3",eu=7680,R_=519,L_=512,D_=513,P_=514,I_=515,N_=516,U_=517,O_=518,k_=519,qu=35044,tm="300 es",Zu=1035,Hs=2e3,rh=2001;class Ko{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[e]===void 0&&(n[e]=[]),n[e].indexOf(t)===-1&&n[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const n=this._listeners;return n[e]!==void 0&&n[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const r=this._listeners[e];if(r!==void 0){const o=r.indexOf(t);o!==-1&&r.splice(o,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const n=this._listeners[e.type];if(n!==void 0){e.target=this;const r=n.slice(0);for(let o=0,l=r.length;o<l;o++)r[o].call(this,e);e.target=null}}}const Gi=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let nm=1234567;const Ll=Math.PI/180,$a=180/Math.PI;function os(){const s=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,n=Math.random()*4294967295|0;return(Gi[s&255]+Gi[s>>8&255]+Gi[s>>16&255]+Gi[s>>24&255]+"-"+Gi[e&255]+Gi[e>>8&255]+"-"+Gi[e>>16&15|64]+Gi[e>>24&255]+"-"+Gi[t&63|128]+Gi[t>>8&255]+"-"+Gi[t>>16&255]+Gi[t>>24&255]+Gi[n&255]+Gi[n>>8&255]+Gi[n>>16&255]+Gi[n>>24&255]).toLowerCase()}function Ci(s,e,t){return Math.max(e,Math.min(t,s))}function bf(s,e){return(s%e+e)%e}function B_(s,e,t,n,r){return n+(s-e)*(r-n)/(t-e)}function F_(s,e,t){return s!==e?(t-s)/(e-s):0}function Dl(s,e,t){return(1-t)*s+t*e}function H_(s,e,t,n){return Dl(s,e,1-Math.exp(-t*n))}function z_(s,e=1){return e-Math.abs(bf(s,e*2)-e)}function G_(s,e,t){return s<=e?0:s>=t?1:(s=(s-e)/(t-e),s*s*(3-2*s))}function V_(s,e,t){return s<=e?0:s>=t?1:(s=(s-e)/(t-e),s*s*s*(s*(s*6-15)+10))}function W_(s,e){return s+Math.floor(Math.random()*(e-s+1))}function $_(s,e){return s+Math.random()*(e-s)}function X_(s){return s*(.5-Math.random())}function j_(s){s!==void 0&&(nm=s);let e=nm+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function Y_(s){return s*Ll}function q_(s){return s*$a}function Ku(s){return(s&s-1)===0&&s!==0}function a0(s){return Math.pow(2,Math.ceil(Math.log(s)/Math.LN2))}function sh(s){return Math.pow(2,Math.floor(Math.log(s)/Math.LN2))}function Z_(s,e,t,n,r){const o=Math.cos,l=Math.sin,c=o(t/2),f=l(t/2),d=o((e+n)/2),m=l((e+n)/2),v=o((e-n)/2),y=l((e-n)/2),M=o((n-e)/2),T=l((n-e)/2);switch(r){case"XYX":s.set(c*m,f*v,f*y,c*d);break;case"YZY":s.set(f*y,c*m,f*v,c*d);break;case"ZXZ":s.set(f*v,f*y,c*m,c*d);break;case"XZX":s.set(c*m,f*T,f*M,c*d);break;case"YXY":s.set(f*M,c*m,f*T,c*d);break;case"ZYZ":s.set(f*T,f*M,c*m,c*d);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function vs(s,e){switch(e.constructor){case Float32Array:return s;case Uint32Array:return s/4294967295;case Uint16Array:return s/65535;case Uint8Array:return s/255;case Int32Array:return Math.max(s/2147483647,-1);case Int16Array:return Math.max(s/32767,-1);case Int8Array:return Math.max(s/127,-1);default:throw new Error("Invalid component type.")}}function kn(s,e){switch(e.constructor){case Float32Array:return s;case Uint32Array:return Math.round(s*4294967295);case Uint16Array:return Math.round(s*65535);case Uint8Array:return Math.round(s*255);case Int32Array:return Math.round(s*2147483647);case Int16Array:return Math.round(s*32767);case Int8Array:return Math.round(s*127);default:throw new Error("Invalid component type.")}}const kl={DEG2RAD:Ll,RAD2DEG:$a,generateUUID:os,clamp:Ci,euclideanModulo:bf,mapLinear:B_,inverseLerp:F_,lerp:Dl,damp:H_,pingpong:z_,smoothstep:G_,smootherstep:V_,randInt:W_,randFloat:$_,randFloatSpread:X_,seededRandom:j_,degToRad:Y_,radToDeg:q_,isPowerOfTwo:Ku,ceilPowerOfTwo:a0,floorPowerOfTwo:sh,setQuaternionFromProperEuler:Z_,normalize:kn,denormalize:vs};class Jt{constructor(e=0,t=0){Jt.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(Ci(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),r=Math.sin(t),o=this.x-e.x,l=this.y-e.y;return this.x=o*n-l*r+e.x,this.y=o*r+l*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class un{constructor(e,t,n,r,o,l,c,f,d){un.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,n,r,o,l,c,f,d)}set(e,t,n,r,o,l,c,f,d){const m=this.elements;return m[0]=e,m[1]=r,m[2]=c,m[3]=t,m[4]=o,m[5]=f,m[6]=n,m[7]=l,m[8]=d,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,o=this.elements,l=n[0],c=n[3],f=n[6],d=n[1],m=n[4],v=n[7],y=n[2],M=n[5],T=n[8],A=r[0],E=r[3],b=r[6],z=r[1],I=r[4],H=r[7],X=r[2],G=r[5],g=r[8];return o[0]=l*A+c*z+f*X,o[3]=l*E+c*I+f*G,o[6]=l*b+c*H+f*g,o[1]=d*A+m*z+v*X,o[4]=d*E+m*I+v*G,o[7]=d*b+m*H+v*g,o[2]=y*A+M*z+T*X,o[5]=y*E+M*I+T*G,o[8]=y*b+M*H+T*g,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],r=e[2],o=e[3],l=e[4],c=e[5],f=e[6],d=e[7],m=e[8];return t*l*m-t*c*d-n*o*m+n*c*f+r*o*d-r*l*f}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],o=e[3],l=e[4],c=e[5],f=e[6],d=e[7],m=e[8],v=m*l-c*d,y=c*f-m*o,M=d*o-l*f,T=t*v+n*y+r*M;if(T===0)return this.set(0,0,0,0,0,0,0,0,0);const A=1/T;return e[0]=v*A,e[1]=(r*d-m*n)*A,e[2]=(c*n-r*l)*A,e[3]=y*A,e[4]=(m*t-r*f)*A,e[5]=(r*o-c*t)*A,e[6]=M*A,e[7]=(n*f-d*t)*A,e[8]=(l*t-n*o)*A,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,r,o,l,c){const f=Math.cos(o),d=Math.sin(o);return this.set(n*f,n*d,-n*(f*l+d*c)+l+e,-r*d,r*f,-r*(-d*l+f*c)+c+t,0,0,1),this}scale(e,t){return this.premultiply(tu.makeScale(e,t)),this}rotate(e){return this.premultiply(tu.makeRotation(-e)),this}translate(e,t){return this.premultiply(tu.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,n,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,n=e.elements;for(let r=0;r<9;r++)if(t[r]!==n[r])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const tu=new un;function l0(s){for(let e=s.length-1;e>=0;--e)if(s[e]>=65535)return!0;return!1}function Bl(s){return document.createElementNS("http://www.w3.org/1999/xhtml",s)}function K_(){const s=Bl("canvas");return s.style.display="block",s}const im={};function Pl(s){s in im||(im[s]=!0,console.warn(s))}const rm=new un().set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),sm=new un().set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),mc={[Di]:{transfer:th,primaries:nh,toReference:s=>s,fromReference:s=>s},[An]:{transfer:Wn,primaries:nh,toReference:s=>s.convertSRGBToLinear(),fromReference:s=>s.convertLinearToSRGB()},[ph]:{transfer:th,primaries:ih,toReference:s=>s.applyMatrix3(sm),fromReference:s=>s.applyMatrix3(rm)},[_f]:{transfer:Wn,primaries:ih,toReference:s=>s.convertSRGBToLinear().applyMatrix3(sm),fromReference:s=>s.applyMatrix3(rm).convertLinearToSRGB()}},J_=new Set([Di,ph]),Dn={enabled:!0,_workingColorSpace:Di,get legacyMode(){return console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),!this.enabled},set legacyMode(s){console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),this.enabled=!s},get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(s){if(!J_.has(s))throw new Error(`Unsupported working color space, "${s}".`);this._workingColorSpace=s},convert:function(s,e,t){if(this.enabled===!1||e===t||!e||!t)return s;const n=mc[e].toReference,r=mc[t].fromReference;return r(n(s))},fromWorkingColorSpace:function(s,e){return this.convert(s,this._workingColorSpace,e)},toWorkingColorSpace:function(s,e){return this.convert(s,e,this._workingColorSpace)},getPrimaries:function(s){return mc[s].primaries},getTransfer:function(s){return s===Rr?th:mc[s].transfer}};function Ua(s){return s<.04045?s*.0773993808:Math.pow(s*.9478672986+.0521327014,2.4)}function nu(s){return s<.0031308?s*12.92:1.055*Math.pow(s,.41666)-.055}let ha;class c0{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{ha===void 0&&(ha=Bl("canvas")),ha.width=e.width,ha.height=e.height;const n=ha.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=ha}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=Bl("canvas");t.width=e.width,t.height=e.height;const n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);const r=n.getImageData(0,0,e.width,e.height),o=r.data;for(let l=0;l<o.length;l++)o[l]=Ua(o[l]/255)*255;return n.putImageData(r,0,0),t}else if(e.data){const t=e.data.slice(0);for(let n=0;n<t.length;n++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[n]=Math.floor(Ua(t[n]/255)*255):t[n]=Ua(t[n]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let Q_=0;class wf{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:Q_++}),this.uuid=os(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const n={uuid:this.uuid,url:""},r=this.data;if(r!==null){let o;if(Array.isArray(r)){o=[];for(let l=0,c=r.length;l<c;l++)r[l].isDataTexture?o.push(iu(r[l].image)):o.push(iu(r[l]))}else o=iu(r);n.url=o}return t||(e.images[this.uuid]=n),n}}function iu(s){return typeof HTMLImageElement<"u"&&s instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&s instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&s instanceof ImageBitmap?c0.getDataURL(s):s.data?{data:Array.from(s.data),width:s.width,height:s.height,type:s.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let eb=0;class hi extends Ko{constructor(e=hi.DEFAULT_IMAGE,t=hi.DEFAULT_MAPPING,n=er,r=er,o=li,l=Ws,c=Cr,f=fo,d=hi.DEFAULT_ANISOTROPY,m=Rr){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:eb++}),this.uuid=os(),this.name="",this.source=new wf(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=n,this.wrapT=r,this.magFilter=o,this.minFilter=l,this.anisotropy=d,this.format=c,this.internalFormat=null,this.type=f,this.offset=new Jt(0,0),this.repeat=new Jt(1,1),this.center=new Jt(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new un,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,typeof m=="string"?this.colorSpace=m:(Pl("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=m===Xo?An:Rr),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const n={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==Kg)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case jo:e.x=e.x-Math.floor(e.x);break;case er:e.x=e.x<0?0:1;break;case Ol:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case jo:e.y=e.y-Math.floor(e.y);break;case er:e.y=e.y<0?0:1;break;case Ol:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return Pl("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===An?Xo:s0}set encoding(e){Pl("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=e===Xo?An:Rr}}hi.DEFAULT_IMAGE=null;hi.DEFAULT_MAPPING=Kg;hi.DEFAULT_ANISOTROPY=1;class Bn{constructor(e=0,t=0,n=0,r=1){Bn.prototype.isVector4=!0,this.x=e,this.y=t,this.z=n,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,o=this.w,l=e.elements;return this.x=l[0]*t+l[4]*n+l[8]*r+l[12]*o,this.y=l[1]*t+l[5]*n+l[9]*r+l[13]*o,this.z=l[2]*t+l[6]*n+l[10]*r+l[14]*o,this.w=l[3]*t+l[7]*n+l[11]*r+l[15]*o,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,r,o;const f=e.elements,d=f[0],m=f[4],v=f[8],y=f[1],M=f[5],T=f[9],A=f[2],E=f[6],b=f[10];if(Math.abs(m-y)<.01&&Math.abs(v-A)<.01&&Math.abs(T-E)<.01){if(Math.abs(m+y)<.1&&Math.abs(v+A)<.1&&Math.abs(T+E)<.1&&Math.abs(d+M+b-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const I=(d+1)/2,H=(M+1)/2,X=(b+1)/2,G=(m+y)/4,g=(v+A)/4,oe=(T+E)/4;return I>H&&I>X?I<.01?(n=0,r=.707106781,o=.707106781):(n=Math.sqrt(I),r=G/n,o=g/n):H>X?H<.01?(n=.707106781,r=0,o=.707106781):(r=Math.sqrt(H),n=G/r,o=oe/r):X<.01?(n=.707106781,r=.707106781,o=0):(o=Math.sqrt(X),n=g/o,r=oe/o),this.set(n,r,o,t),this}let z=Math.sqrt((E-T)*(E-T)+(v-A)*(v-A)+(y-m)*(y-m));return Math.abs(z)<.001&&(z=1),this.x=(E-T)/z,this.y=(v-A)/z,this.z=(y-m)/z,this.w=Math.acos((d+M+b-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class tb extends Ko{constructor(e=1,t=1,n={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new Bn(0,0,e,t),this.scissorTest=!1,this.viewport=new Bn(0,0,e,t);const r={width:e,height:t,depth:1};n.encoding!==void 0&&(Pl("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),n.colorSpace=n.encoding===Xo?An:Rr),n=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:li,depthBuffer:!0,stencilBuffer:!1,depthTexture:null,samples:0},n),this.texture=new hi(r,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=n.generateMipmaps,this.texture.internalFormat=n.internalFormat,this.depthBuffer=n.depthBuffer,this.stencilBuffer=n.stencilBuffer,this.depthTexture=n.depthTexture,this.samples=n.samples}setSize(e,t,n=1){(this.width!==e||this.height!==t||this.depth!==n)&&(this.width=e,this.height=t,this.depth=n,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new wf(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class $s extends tb{constructor(e=1,t=1,n={}){super(e,t,n),this.isWebGLRenderTarget=!0}}class h0 extends hi{constructor(e=null,t=1,n=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:n,depth:r},this.magFilter=xi,this.minFilter=xi,this.wrapR=er,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class nb extends hi{constructor(e=null,t=1,n=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:n,depth:r},this.magFilter=xi,this.minFilter=xi,this.wrapR=er,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class bs{constructor(e=0,t=0,n=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=n,this._w=r}static slerpFlat(e,t,n,r,o,l,c){let f=n[r+0],d=n[r+1],m=n[r+2],v=n[r+3];const y=o[l+0],M=o[l+1],T=o[l+2],A=o[l+3];if(c===0){e[t+0]=f,e[t+1]=d,e[t+2]=m,e[t+3]=v;return}if(c===1){e[t+0]=y,e[t+1]=M,e[t+2]=T,e[t+3]=A;return}if(v!==A||f!==y||d!==M||m!==T){let E=1-c;const b=f*y+d*M+m*T+v*A,z=b>=0?1:-1,I=1-b*b;if(I>Number.EPSILON){const X=Math.sqrt(I),G=Math.atan2(X,b*z);E=Math.sin(E*G)/X,c=Math.sin(c*G)/X}const H=c*z;if(f=f*E+y*H,d=d*E+M*H,m=m*E+T*H,v=v*E+A*H,E===1-c){const X=1/Math.sqrt(f*f+d*d+m*m+v*v);f*=X,d*=X,m*=X,v*=X}}e[t]=f,e[t+1]=d,e[t+2]=m,e[t+3]=v}static multiplyQuaternionsFlat(e,t,n,r,o,l){const c=n[r],f=n[r+1],d=n[r+2],m=n[r+3],v=o[l],y=o[l+1],M=o[l+2],T=o[l+3];return e[t]=c*T+m*v+f*M-d*y,e[t+1]=f*T+m*y+d*v-c*M,e[t+2]=d*T+m*M+c*y-f*v,e[t+3]=m*T-c*v-f*y-d*M,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){const n=e._x,r=e._y,o=e._z,l=e._order,c=Math.cos,f=Math.sin,d=c(n/2),m=c(r/2),v=c(o/2),y=f(n/2),M=f(r/2),T=f(o/2);switch(l){case"XYZ":this._x=y*m*v+d*M*T,this._y=d*M*v-y*m*T,this._z=d*m*T+y*M*v,this._w=d*m*v-y*M*T;break;case"YXZ":this._x=y*m*v+d*M*T,this._y=d*M*v-y*m*T,this._z=d*m*T-y*M*v,this._w=d*m*v+y*M*T;break;case"ZXY":this._x=y*m*v-d*M*T,this._y=d*M*v+y*m*T,this._z=d*m*T+y*M*v,this._w=d*m*v-y*M*T;break;case"ZYX":this._x=y*m*v-d*M*T,this._y=d*M*v+y*m*T,this._z=d*m*T-y*M*v,this._w=d*m*v+y*M*T;break;case"YZX":this._x=y*m*v+d*M*T,this._y=d*M*v+y*m*T,this._z=d*m*T-y*M*v,this._w=d*m*v-y*M*T;break;case"XZY":this._x=y*m*v-d*M*T,this._y=d*M*v-y*m*T,this._z=d*m*T+y*M*v,this._w=d*m*v+y*M*T;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+l)}return t!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],r=t[4],o=t[8],l=t[1],c=t[5],f=t[9],d=t[2],m=t[6],v=t[10],y=n+c+v;if(y>0){const M=.5/Math.sqrt(y+1);this._w=.25/M,this._x=(m-f)*M,this._y=(o-d)*M,this._z=(l-r)*M}else if(n>c&&n>v){const M=2*Math.sqrt(1+n-c-v);this._w=(m-f)/M,this._x=.25*M,this._y=(r+l)/M,this._z=(o+d)/M}else if(c>v){const M=2*Math.sqrt(1+c-n-v);this._w=(o-d)/M,this._x=(r+l)/M,this._y=.25*M,this._z=(f+m)/M}else{const M=2*Math.sqrt(1+v-n-c);this._w=(l-r)/M,this._x=(o+d)/M,this._y=(f+m)/M,this._z=.25*M}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Ci(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(n===0)return this;const r=Math.min(1,t/n);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,r=e._y,o=e._z,l=e._w,c=t._x,f=t._y,d=t._z,m=t._w;return this._x=n*m+l*c+r*d-o*f,this._y=r*m+l*f+o*c-n*d,this._z=o*m+l*d+n*f-r*c,this._w=l*m-n*c-r*f-o*d,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const n=this._x,r=this._y,o=this._z,l=this._w;let c=l*e._w+n*e._x+r*e._y+o*e._z;if(c<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,c=-c):this.copy(e),c>=1)return this._w=l,this._x=n,this._y=r,this._z=o,this;const f=1-c*c;if(f<=Number.EPSILON){const M=1-t;return this._w=M*l+t*this._w,this._x=M*n+t*this._x,this._y=M*r+t*this._y,this._z=M*o+t*this._z,this.normalize(),this._onChangeCallback(),this}const d=Math.sqrt(f),m=Math.atan2(d,c),v=Math.sin((1-t)*m)/d,y=Math.sin(t*m)/d;return this._w=l*v+this._w*y,this._x=n*v+this._x*y,this._y=r*v+this._y*y,this._z=o*v+this._z*y,this._onChangeCallback(),this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){const e=Math.random(),t=Math.sqrt(1-e),n=Math.sqrt(e),r=2*Math.PI*Math.random(),o=2*Math.PI*Math.random();return this.set(t*Math.cos(r),n*Math.sin(o),n*Math.cos(o),t*Math.sin(r))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class ce{constructor(e=0,t=0,n=0){ce.prototype.isVector3=!0,this.x=e,this.y=t,this.z=n}set(e,t,n){return n===void 0&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(om.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(om.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,r=this.z,o=e.elements;return this.x=o[0]*t+o[3]*n+o[6]*r,this.y=o[1]*t+o[4]*n+o[7]*r,this.z=o[2]*t+o[5]*n+o[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,o=e.elements,l=1/(o[3]*t+o[7]*n+o[11]*r+o[15]);return this.x=(o[0]*t+o[4]*n+o[8]*r+o[12])*l,this.y=(o[1]*t+o[5]*n+o[9]*r+o[13])*l,this.z=(o[2]*t+o[6]*n+o[10]*r+o[14])*l,this}applyQuaternion(e){const t=this.x,n=this.y,r=this.z,o=e.x,l=e.y,c=e.z,f=e.w,d=f*t+l*r-c*n,m=f*n+c*t-o*r,v=f*r+o*n-l*t,y=-o*t-l*n-c*r;return this.x=d*f+y*-o+m*-c-v*-l,this.y=m*f+y*-l+v*-o-d*-c,this.z=v*f+y*-c+d*-l-m*-o,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,r=this.z,o=e.elements;return this.x=o[0]*t+o[4]*n+o[8]*r,this.y=o[1]*t+o[5]*n+o[9]*r,this.z=o[2]*t+o[6]*n+o[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,r=e.y,o=e.z,l=t.x,c=t.y,f=t.z;return this.x=r*f-o*c,this.y=o*l-n*f,this.z=n*c-r*l,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return ru.copy(this).projectOnVector(e),this.sub(ru)}reflect(e){return this.sub(ru.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(Ci(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const r=Math.sin(t)*e;return this.x=r*Math.sin(n),this.y=Math.cos(t)*e,this.z=r*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,t=Math.random()*Math.PI*2,n=Math.sqrt(1-e**2);return this.x=n*Math.cos(t),this.y=n*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const ru=new ce,om=new bs;class Xs{constructor(e=new ce(1/0,1/0,1/0),t=new ce(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t+=3)this.expandByPoint(Ls.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,n=e.count;t<n;t++)this.expandByPoint(Ls.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=Ls.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){if(e.updateWorldMatrix(!1,!1),e.boundingBox!==void 0)e.boundingBox===null&&e.computeBoundingBox(),ua.copy(e.boundingBox),ua.applyMatrix4(e.matrixWorld),this.union(ua);else{const r=e.geometry;if(r!==void 0)if(t&&r.attributes!==void 0&&r.attributes.position!==void 0){const o=r.attributes.position;for(let l=0,c=o.count;l<c;l++)Ls.fromBufferAttribute(o,l).applyMatrix4(e.matrixWorld),this.expandByPoint(Ls)}else r.boundingBox===null&&r.computeBoundingBox(),ua.copy(r.boundingBox),ua.applyMatrix4(e.matrixWorld),this.union(ua)}const n=e.children;for(let r=0,o=n.length;r<o;r++)this.expandByObject(n[r],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Ls),Ls.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(pl),gc.subVectors(this.max,pl),fa.subVectors(e.a,pl),da.subVectors(e.b,pl),pa.subVectors(e.c,pl),Ks.subVectors(da,fa),Js.subVectors(pa,da),Ro.subVectors(fa,pa);let t=[0,-Ks.z,Ks.y,0,-Js.z,Js.y,0,-Ro.z,Ro.y,Ks.z,0,-Ks.x,Js.z,0,-Js.x,Ro.z,0,-Ro.x,-Ks.y,Ks.x,0,-Js.y,Js.x,0,-Ro.y,Ro.x,0];return!su(t,fa,da,pa,gc)||(t=[1,0,0,0,1,0,0,0,1],!su(t,fa,da,pa,gc))?!1:(vc.crossVectors(Ks,Js),t=[vc.x,vc.y,vc.z],su(t,fa,da,pa,gc))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Ls).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Ls).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Rs[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Rs[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Rs[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Rs[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Rs[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Rs[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Rs[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Rs[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Rs),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Rs=[new ce,new ce,new ce,new ce,new ce,new ce,new ce,new ce],Ls=new ce,ua=new Xs,fa=new ce,da=new ce,pa=new ce,Ks=new ce,Js=new ce,Ro=new ce,pl=new ce,gc=new ce,vc=new ce,Lo=new ce;function su(s,e,t,n,r){for(let o=0,l=s.length-3;o<=l;o+=3){Lo.fromArray(s,o);const c=r.x*Math.abs(Lo.x)+r.y*Math.abs(Lo.y)+r.z*Math.abs(Lo.z),f=e.dot(Lo),d=t.dot(Lo),m=n.dot(Lo);if(Math.max(-Math.max(f,d,m),Math.min(f,d,m))>c)return!1}return!0}const ib=new Xs,ml=new ce,ou=new ce;class Es{constructor(e=new ce,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;t!==void 0?n.copy(t):ib.setFromPoints(e).getCenter(n);let r=0;for(let o=0,l=e.length;o<l;o++)r=Math.max(r,n.distanceToSquared(e[o]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;ml.subVectors(e,this.center);const t=ml.lengthSq();if(t>this.radius*this.radius){const n=Math.sqrt(t),r=(n-this.radius)*.5;this.center.addScaledVector(ml,r/n),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(ou.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(ml.copy(e.center).add(ou)),this.expandByPoint(ml.copy(e.center).sub(ou))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const Ds=new ce,au=new ce,xc=new ce,Qs=new ce,lu=new ce,yc=new ce,cu=new ce;class Gl{constructor(e=new ce,t=new ce(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Ds)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Ds.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Ds.copy(this.origin).addScaledVector(this.direction,t),Ds.distanceToSquared(e))}distanceSqToSegment(e,t,n,r){au.copy(e).add(t).multiplyScalar(.5),xc.copy(t).sub(e).normalize(),Qs.copy(this.origin).sub(au);const o=e.distanceTo(t)*.5,l=-this.direction.dot(xc),c=Qs.dot(this.direction),f=-Qs.dot(xc),d=Qs.lengthSq(),m=Math.abs(1-l*l);let v,y,M,T;if(m>0)if(v=l*f-c,y=l*c-f,T=o*m,v>=0)if(y>=-T)if(y<=T){const A=1/m;v*=A,y*=A,M=v*(v+l*y+2*c)+y*(l*v+y+2*f)+d}else y=o,v=Math.max(0,-(l*y+c)),M=-v*v+y*(y+2*f)+d;else y=-o,v=Math.max(0,-(l*y+c)),M=-v*v+y*(y+2*f)+d;else y<=-T?(v=Math.max(0,-(-l*o+c)),y=v>0?-o:Math.min(Math.max(-o,-f),o),M=-v*v+y*(y+2*f)+d):y<=T?(v=0,y=Math.min(Math.max(-o,-f),o),M=y*(y+2*f)+d):(v=Math.max(0,-(l*o+c)),y=v>0?o:Math.min(Math.max(-o,-f),o),M=-v*v+y*(y+2*f)+d);else y=l>0?-o:o,v=Math.max(0,-(l*y+c)),M=-v*v+y*(y+2*f)+d;return n&&n.copy(this.origin).addScaledVector(this.direction,v),r&&r.copy(au).addScaledVector(xc,y),M}intersectSphere(e,t){Ds.subVectors(e.center,this.origin);const n=Ds.dot(this.direction),r=Ds.dot(Ds)-n*n,o=e.radius*e.radius;if(r>o)return null;const l=Math.sqrt(o-r),c=n-l,f=n+l;return f<0?null:c<0?this.at(f,t):this.at(c,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return n===null?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,r,o,l,c,f;const d=1/this.direction.x,m=1/this.direction.y,v=1/this.direction.z,y=this.origin;return d>=0?(n=(e.min.x-y.x)*d,r=(e.max.x-y.x)*d):(n=(e.max.x-y.x)*d,r=(e.min.x-y.x)*d),m>=0?(o=(e.min.y-y.y)*m,l=(e.max.y-y.y)*m):(o=(e.max.y-y.y)*m,l=(e.min.y-y.y)*m),n>l||o>r||((o>n||isNaN(n))&&(n=o),(l<r||isNaN(r))&&(r=l),v>=0?(c=(e.min.z-y.z)*v,f=(e.max.z-y.z)*v):(c=(e.max.z-y.z)*v,f=(e.min.z-y.z)*v),n>f||c>r)||((c>n||n!==n)&&(n=c),(f<r||r!==r)&&(r=f),r<0)?null:this.at(n>=0?n:r,t)}intersectsBox(e){return this.intersectBox(e,Ds)!==null}intersectTriangle(e,t,n,r,o){lu.subVectors(t,e),yc.subVectors(n,e),cu.crossVectors(lu,yc);let l=this.direction.dot(cu),c;if(l>0){if(r)return null;c=1}else if(l<0)c=-1,l=-l;else return null;Qs.subVectors(this.origin,e);const f=c*this.direction.dot(yc.crossVectors(Qs,yc));if(f<0)return null;const d=c*this.direction.dot(lu.cross(Qs));if(d<0||f+d>l)return null;const m=-c*Qs.dot(cu);return m<0?null:this.at(m/l,o)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class hn{constructor(e,t,n,r,o,l,c,f,d,m,v,y,M,T,A,E){hn.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,n,r,o,l,c,f,d,m,v,y,M,T,A,E)}set(e,t,n,r,o,l,c,f,d,m,v,y,M,T,A,E){const b=this.elements;return b[0]=e,b[4]=t,b[8]=n,b[12]=r,b[1]=o,b[5]=l,b[9]=c,b[13]=f,b[2]=d,b[6]=m,b[10]=v,b[14]=y,b[3]=M,b[7]=T,b[11]=A,b[15]=E,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new hn().fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,r=1/ma.setFromMatrixColumn(e,0).length(),o=1/ma.setFromMatrixColumn(e,1).length(),l=1/ma.setFromMatrixColumn(e,2).length();return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=0,t[4]=n[4]*o,t[5]=n[5]*o,t[6]=n[6]*o,t[7]=0,t[8]=n[8]*l,t[9]=n[9]*l,t[10]=n[10]*l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,n=e.x,r=e.y,o=e.z,l=Math.cos(n),c=Math.sin(n),f=Math.cos(r),d=Math.sin(r),m=Math.cos(o),v=Math.sin(o);if(e.order==="XYZ"){const y=l*m,M=l*v,T=c*m,A=c*v;t[0]=f*m,t[4]=-f*v,t[8]=d,t[1]=M+T*d,t[5]=y-A*d,t[9]=-c*f,t[2]=A-y*d,t[6]=T+M*d,t[10]=l*f}else if(e.order==="YXZ"){const y=f*m,M=f*v,T=d*m,A=d*v;t[0]=y+A*c,t[4]=T*c-M,t[8]=l*d,t[1]=l*v,t[5]=l*m,t[9]=-c,t[2]=M*c-T,t[6]=A+y*c,t[10]=l*f}else if(e.order==="ZXY"){const y=f*m,M=f*v,T=d*m,A=d*v;t[0]=y-A*c,t[4]=-l*v,t[8]=T+M*c,t[1]=M+T*c,t[5]=l*m,t[9]=A-y*c,t[2]=-l*d,t[6]=c,t[10]=l*f}else if(e.order==="ZYX"){const y=l*m,M=l*v,T=c*m,A=c*v;t[0]=f*m,t[4]=T*d-M,t[8]=y*d+A,t[1]=f*v,t[5]=A*d+y,t[9]=M*d-T,t[2]=-d,t[6]=c*f,t[10]=l*f}else if(e.order==="YZX"){const y=l*f,M=l*d,T=c*f,A=c*d;t[0]=f*m,t[4]=A-y*v,t[8]=T*v+M,t[1]=v,t[5]=l*m,t[9]=-c*m,t[2]=-d*m,t[6]=M*v+T,t[10]=y-A*v}else if(e.order==="XZY"){const y=l*f,M=l*d,T=c*f,A=c*d;t[0]=f*m,t[4]=-v,t[8]=d*m,t[1]=y*v+A,t[5]=l*m,t[9]=M*v-T,t[2]=T*v-M,t[6]=c*m,t[10]=A*v+y}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(rb,e,sb)}lookAt(e,t,n){const r=this.elements;return wr.subVectors(e,t),wr.lengthSq()===0&&(wr.z=1),wr.normalize(),eo.crossVectors(n,wr),eo.lengthSq()===0&&(Math.abs(n.z)===1?wr.x+=1e-4:wr.z+=1e-4,wr.normalize(),eo.crossVectors(n,wr)),eo.normalize(),_c.crossVectors(wr,eo),r[0]=eo.x,r[4]=_c.x,r[8]=wr.x,r[1]=eo.y,r[5]=_c.y,r[9]=wr.y,r[2]=eo.z,r[6]=_c.z,r[10]=wr.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,o=this.elements,l=n[0],c=n[4],f=n[8],d=n[12],m=n[1],v=n[5],y=n[9],M=n[13],T=n[2],A=n[6],E=n[10],b=n[14],z=n[3],I=n[7],H=n[11],X=n[15],G=r[0],g=r[4],oe=r[8],U=r[12],V=r[1],Me=r[5],Te=r[9],ve=r[13],Z=r[2],me=r[6],_e=r[10],fe=r[14],Fe=r[3],Ee=r[7],Le=r[11],ge=r[15];return o[0]=l*G+c*V+f*Z+d*Fe,o[4]=l*g+c*Me+f*me+d*Ee,o[8]=l*oe+c*Te+f*_e+d*Le,o[12]=l*U+c*ve+f*fe+d*ge,o[1]=m*G+v*V+y*Z+M*Fe,o[5]=m*g+v*Me+y*me+M*Ee,o[9]=m*oe+v*Te+y*_e+M*Le,o[13]=m*U+v*ve+y*fe+M*ge,o[2]=T*G+A*V+E*Z+b*Fe,o[6]=T*g+A*Me+E*me+b*Ee,o[10]=T*oe+A*Te+E*_e+b*Le,o[14]=T*U+A*ve+E*fe+b*ge,o[3]=z*G+I*V+H*Z+X*Fe,o[7]=z*g+I*Me+H*me+X*Ee,o[11]=z*oe+I*Te+H*_e+X*Le,o[15]=z*U+I*ve+H*fe+X*ge,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],r=e[8],o=e[12],l=e[1],c=e[5],f=e[9],d=e[13],m=e[2],v=e[6],y=e[10],M=e[14],T=e[3],A=e[7],E=e[11],b=e[15];return T*(+o*f*v-r*d*v-o*c*y+n*d*y+r*c*M-n*f*M)+A*(+t*f*M-t*d*y+o*l*y-r*l*M+r*d*m-o*f*m)+E*(+t*d*v-t*c*M-o*l*v+n*l*M+o*c*m-n*d*m)+b*(-r*c*m-t*f*v+t*c*y+r*l*v-n*l*y+n*f*m)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],o=e[3],l=e[4],c=e[5],f=e[6],d=e[7],m=e[8],v=e[9],y=e[10],M=e[11],T=e[12],A=e[13],E=e[14],b=e[15],z=v*E*d-A*y*d+A*f*M-c*E*M-v*f*b+c*y*b,I=T*y*d-m*E*d-T*f*M+l*E*M+m*f*b-l*y*b,H=m*A*d-T*v*d+T*c*M-l*A*M-m*c*b+l*v*b,X=T*v*f-m*A*f-T*c*y+l*A*y+m*c*E-l*v*E,G=t*z+n*I+r*H+o*X;if(G===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const g=1/G;return e[0]=z*g,e[1]=(A*y*o-v*E*o-A*r*M+n*E*M+v*r*b-n*y*b)*g,e[2]=(c*E*o-A*f*o+A*r*d-n*E*d-c*r*b+n*f*b)*g,e[3]=(v*f*o-c*y*o-v*r*d+n*y*d+c*r*M-n*f*M)*g,e[4]=I*g,e[5]=(m*E*o-T*y*o+T*r*M-t*E*M-m*r*b+t*y*b)*g,e[6]=(T*f*o-l*E*o-T*r*d+t*E*d+l*r*b-t*f*b)*g,e[7]=(l*y*o-m*f*o+m*r*d-t*y*d-l*r*M+t*f*M)*g,e[8]=H*g,e[9]=(T*v*o-m*A*o-T*n*M+t*A*M+m*n*b-t*v*b)*g,e[10]=(l*A*o-T*c*o+T*n*d-t*A*d-l*n*b+t*c*b)*g,e[11]=(m*c*o-l*v*o-m*n*d+t*v*d+l*n*M-t*c*M)*g,e[12]=X*g,e[13]=(m*A*r-T*v*r+T*n*y-t*A*y-m*n*E+t*v*E)*g,e[14]=(T*c*r-l*A*r-T*n*f+t*A*f+l*n*E-t*c*E)*g,e[15]=(l*v*r-m*c*r+m*n*f-t*v*f-l*n*y+t*c*y)*g,this}scale(e){const t=this.elements,n=e.x,r=e.y,o=e.z;return t[0]*=n,t[4]*=r,t[8]*=o,t[1]*=n,t[5]*=r,t[9]*=o,t[2]*=n,t[6]*=r,t[10]*=o,t[3]*=n,t[7]*=r,t[11]*=o,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,r))}makeTranslation(e,t,n){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),r=Math.sin(t),o=1-n,l=e.x,c=e.y,f=e.z,d=o*l,m=o*c;return this.set(d*l+n,d*c-r*f,d*f+r*c,0,d*c+r*f,m*c+n,m*f-r*l,0,d*f-r*c,m*f+r*l,o*f*f+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,r,o,l){return this.set(1,n,o,0,e,1,l,0,t,r,1,0,0,0,0,1),this}compose(e,t,n){const r=this.elements,o=t._x,l=t._y,c=t._z,f=t._w,d=o+o,m=l+l,v=c+c,y=o*d,M=o*m,T=o*v,A=l*m,E=l*v,b=c*v,z=f*d,I=f*m,H=f*v,X=n.x,G=n.y,g=n.z;return r[0]=(1-(A+b))*X,r[1]=(M+H)*X,r[2]=(T-I)*X,r[3]=0,r[4]=(M-H)*G,r[5]=(1-(y+b))*G,r[6]=(E+z)*G,r[7]=0,r[8]=(T+I)*g,r[9]=(E-z)*g,r[10]=(1-(y+A))*g,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,n){const r=this.elements;let o=ma.set(r[0],r[1],r[2]).length();const l=ma.set(r[4],r[5],r[6]).length(),c=ma.set(r[8],r[9],r[10]).length();this.determinant()<0&&(o=-o),e.x=r[12],e.y=r[13],e.z=r[14],es.copy(this);const d=1/o,m=1/l,v=1/c;return es.elements[0]*=d,es.elements[1]*=d,es.elements[2]*=d,es.elements[4]*=m,es.elements[5]*=m,es.elements[6]*=m,es.elements[8]*=v,es.elements[9]*=v,es.elements[10]*=v,t.setFromRotationMatrix(es),n.x=o,n.y=l,n.z=c,this}makePerspective(e,t,n,r,o,l,c=Hs){const f=this.elements,d=2*o/(t-e),m=2*o/(n-r),v=(t+e)/(t-e),y=(n+r)/(n-r);let M,T;if(c===Hs)M=-(l+o)/(l-o),T=-2*l*o/(l-o);else if(c===rh)M=-l/(l-o),T=-l*o/(l-o);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+c);return f[0]=d,f[4]=0,f[8]=v,f[12]=0,f[1]=0,f[5]=m,f[9]=y,f[13]=0,f[2]=0,f[6]=0,f[10]=M,f[14]=T,f[3]=0,f[7]=0,f[11]=-1,f[15]=0,this}makeOrthographic(e,t,n,r,o,l,c=Hs){const f=this.elements,d=1/(t-e),m=1/(n-r),v=1/(l-o),y=(t+e)*d,M=(n+r)*m;let T,A;if(c===Hs)T=(l+o)*v,A=-2*v;else if(c===rh)T=o*v,A=-1*v;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+c);return f[0]=2*d,f[4]=0,f[8]=0,f[12]=-y,f[1]=0,f[5]=2*m,f[9]=0,f[13]=-M,f[2]=0,f[6]=0,f[10]=A,f[14]=-T,f[3]=0,f[7]=0,f[11]=0,f[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let r=0;r<16;r++)if(t[r]!==n[r])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}const ma=new ce,es=new hn,rb=new ce(0,0,0),sb=new ce(1,1,1),eo=new ce,_c=new ce,wr=new ce,am=new hn,lm=new bs;class mh{constructor(e=0,t=0,n=0,r=mh.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=n,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n,r=this._order){return this._x=e,this._y=t,this._z=n,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,n=!0){const r=e.elements,o=r[0],l=r[4],c=r[8],f=r[1],d=r[5],m=r[9],v=r[2],y=r[6],M=r[10];switch(t){case"XYZ":this._y=Math.asin(Ci(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-m,M),this._z=Math.atan2(-l,o)):(this._x=Math.atan2(y,d),this._z=0);break;case"YXZ":this._x=Math.asin(-Ci(m,-1,1)),Math.abs(m)<.9999999?(this._y=Math.atan2(c,M),this._z=Math.atan2(f,d)):(this._y=Math.atan2(-v,o),this._z=0);break;case"ZXY":this._x=Math.asin(Ci(y,-1,1)),Math.abs(y)<.9999999?(this._y=Math.atan2(-v,M),this._z=Math.atan2(-l,d)):(this._y=0,this._z=Math.atan2(f,o));break;case"ZYX":this._y=Math.asin(-Ci(v,-1,1)),Math.abs(v)<.9999999?(this._x=Math.atan2(y,M),this._z=Math.atan2(f,o)):(this._x=0,this._z=Math.atan2(-l,d));break;case"YZX":this._z=Math.asin(Ci(f,-1,1)),Math.abs(f)<.9999999?(this._x=Math.atan2(-m,d),this._y=Math.atan2(-v,o)):(this._x=0,this._y=Math.atan2(c,M));break;case"XZY":this._z=Math.asin(-Ci(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(y,d),this._y=Math.atan2(c,o)):(this._x=Math.atan2(-m,M),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,n===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return am.makeRotationFromQuaternion(e),this.setFromRotationMatrix(am,t,n)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return lm.setFromEuler(this),this.setFromQuaternion(lm,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}mh.DEFAULT_ORDER="XYZ";class u0{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let ob=0;const cm=new ce,ga=new bs,Ps=new hn,bc=new ce,gl=new ce,ab=new ce,lb=new bs,hm=new ce(1,0,0),um=new ce(0,1,0),fm=new ce(0,0,1),cb={type:"added"},hb={type:"removed"};class zn extends Ko{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:ob++}),this.uuid=os(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=zn.DEFAULT_UP.clone();const e=new ce,t=new mh,n=new bs,r=new ce(1,1,1);function o(){n.setFromEuler(t,!1)}function l(){t.setFromQuaternion(n,void 0,!1)}t._onChange(o),n._onChange(l),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new hn},normalMatrix:{value:new un}}),this.matrix=new hn,this.matrixWorld=new hn,this.matrixAutoUpdate=zn.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=zn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new u0,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return ga.setFromAxisAngle(e,t),this.quaternion.multiply(ga),this}rotateOnWorldAxis(e,t){return ga.setFromAxisAngle(e,t),this.quaternion.premultiply(ga),this}rotateX(e){return this.rotateOnAxis(hm,e)}rotateY(e){return this.rotateOnAxis(um,e)}rotateZ(e){return this.rotateOnAxis(fm,e)}translateOnAxis(e,t){return cm.copy(e).applyQuaternion(this.quaternion),this.position.add(cm.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(hm,e)}translateY(e){return this.translateOnAxis(um,e)}translateZ(e){return this.translateOnAxis(fm,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Ps.copy(this.matrixWorld).invert())}lookAt(e,t,n){e.isVector3?bc.copy(e):bc.set(e,t,n);const r=this.parent;this.updateWorldMatrix(!0,!1),gl.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Ps.lookAt(gl,bc,this.up):Ps.lookAt(bc,gl,this.up),this.quaternion.setFromRotationMatrix(Ps),r&&(Ps.extractRotation(r.matrixWorld),ga.setFromRotationMatrix(Ps),this.quaternion.premultiply(ga.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(cb)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.remove(arguments[n]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(hb)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Ps.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Ps.multiply(e.parent.matrixWorld)),e.applyMatrix4(Ps),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,r=this.children.length;n<r;n++){const l=this.children[n].getObjectByProperty(e,t);if(l!==void 0)return l}}getObjectsByProperty(e,t){let n=[];this[e]===t&&n.push(this);for(let r=0,o=this.children.length;r<o;r++){const l=this.children[r].getObjectsByProperty(e,t);l.length>0&&(n=n.concat(l))}return n}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(gl,e,ab),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(gl,lb,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,r=t.length;n<r;n++){const o=t[n];(o.matrixWorldAutoUpdate===!0||e===!0)&&o.updateMatrixWorld(e)}}updateWorldMatrix(e,t){const n=this.parent;if(e===!0&&n!==null&&n.matrixWorldAutoUpdate===!0&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const r=this.children;for(let o=0,l=r.length;o<l;o++){const c=r[o];c.matrixWorldAutoUpdate===!0&&c.updateWorldMatrix(!1,!0)}}}toJSON(e){const t=e===void 0||typeof e=="string",n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON()));function o(c,f){return c[f.uuid]===void 0&&(c[f.uuid]=f.toJSON(e)),f.uuid}if(this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=o(e.geometries,this.geometry);const c=this.geometry.parameters;if(c!==void 0&&c.shapes!==void 0){const f=c.shapes;if(Array.isArray(f))for(let d=0,m=f.length;d<m;d++){const v=f[d];o(e.shapes,v)}else o(e.shapes,f)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(o(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const c=[];for(let f=0,d=this.material.length;f<d;f++)c.push(o(e.materials,this.material[f]));r.material=c}else r.material=o(e.materials,this.material);if(this.children.length>0){r.children=[];for(let c=0;c<this.children.length;c++)r.children.push(this.children[c].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let c=0;c<this.animations.length;c++){const f=this.animations[c];r.animations.push(o(e.animations,f))}}if(t){const c=l(e.geometries),f=l(e.materials),d=l(e.textures),m=l(e.images),v=l(e.shapes),y=l(e.skeletons),M=l(e.animations),T=l(e.nodes);c.length>0&&(n.geometries=c),f.length>0&&(n.materials=f),d.length>0&&(n.textures=d),m.length>0&&(n.images=m),v.length>0&&(n.shapes=v),y.length>0&&(n.skeletons=y),M.length>0&&(n.animations=M),T.length>0&&(n.nodes=T)}return n.object=r,n;function l(c){const f=[];for(const d in c){const m=c[d];delete m.metadata,f.push(m)}return f}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let n=0;n<e.children.length;n++){const r=e.children[n];this.add(r.clone())}return this}}zn.DEFAULT_UP=new ce(0,1,0);zn.DEFAULT_MATRIX_AUTO_UPDATE=!0;zn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const ts=new ce,Is=new ce,hu=new ce,Ns=new ce,va=new ce,xa=new ce,dm=new ce,uu=new ce,fu=new ce,du=new ce;let wc=!1;class rs{constructor(e=new ce,t=new ce,n=new ce){this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,r){r.subVectors(n,t),ts.subVectors(e,t),r.cross(ts);const o=r.lengthSq();return o>0?r.multiplyScalar(1/Math.sqrt(o)):r.set(0,0,0)}static getBarycoord(e,t,n,r,o){ts.subVectors(r,t),Is.subVectors(n,t),hu.subVectors(e,t);const l=ts.dot(ts),c=ts.dot(Is),f=ts.dot(hu),d=Is.dot(Is),m=Is.dot(hu),v=l*d-c*c;if(v===0)return o.set(-2,-1,-1);const y=1/v,M=(d*f-c*m)*y,T=(l*m-c*f)*y;return o.set(1-M-T,T,M)}static containsPoint(e,t,n,r){return this.getBarycoord(e,t,n,r,Ns),Ns.x>=0&&Ns.y>=0&&Ns.x+Ns.y<=1}static getUV(e,t,n,r,o,l,c,f){return wc===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),wc=!0),this.getInterpolation(e,t,n,r,o,l,c,f)}static getInterpolation(e,t,n,r,o,l,c,f){return this.getBarycoord(e,t,n,r,Ns),f.setScalar(0),f.addScaledVector(o,Ns.x),f.addScaledVector(l,Ns.y),f.addScaledVector(c,Ns.z),f}static isFrontFacing(e,t,n,r){return ts.subVectors(n,t),Is.subVectors(e,t),ts.cross(Is).dot(r)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,n,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return ts.subVectors(this.c,this.b),Is.subVectors(this.a,this.b),ts.cross(Is).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return rs.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return rs.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,n,r,o){return wc===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),wc=!0),rs.getInterpolation(e,this.a,this.b,this.c,t,n,r,o)}getInterpolation(e,t,n,r,o){return rs.getInterpolation(e,this.a,this.b,this.c,t,n,r,o)}containsPoint(e){return rs.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return rs.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const n=this.a,r=this.b,o=this.c;let l,c;va.subVectors(r,n),xa.subVectors(o,n),uu.subVectors(e,n);const f=va.dot(uu),d=xa.dot(uu);if(f<=0&&d<=0)return t.copy(n);fu.subVectors(e,r);const m=va.dot(fu),v=xa.dot(fu);if(m>=0&&v<=m)return t.copy(r);const y=f*v-m*d;if(y<=0&&f>=0&&m<=0)return l=f/(f-m),t.copy(n).addScaledVector(va,l);du.subVectors(e,o);const M=va.dot(du),T=xa.dot(du);if(T>=0&&M<=T)return t.copy(o);const A=M*d-f*T;if(A<=0&&d>=0&&T<=0)return c=d/(d-T),t.copy(n).addScaledVector(xa,c);const E=m*T-M*v;if(E<=0&&v-m>=0&&M-T>=0)return dm.subVectors(o,r),c=(v-m)/(v-m+(M-T)),t.copy(r).addScaledVector(dm,c);const b=1/(E+A+y);return l=A*b,c=y*b,t.copy(n).addScaledVector(va,l).addScaledVector(xa,c)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let ub=0;class xs extends Ko{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:ub++}),this.uuid=os(),this.name="",this.type="Material",this.blending=Na,this.side=Vs,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=Xg,this.blendDst=jg,this.blendEquation=La,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=$u,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=R_,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=eu,this.stencilZFail=eu,this.stencilZPass=eu,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const n=e[t];if(n===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const r=this[t];if(r===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[t]=n}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const n={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),this.roughness!==void 0&&(n.roughness=this.roughness),this.metalness!==void 0&&(n.metalness=this.metalness),this.sheen!==void 0&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(n.shininess=this.shininess),this.clearcoat!==void 0&&(n.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(n.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(n.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(n.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(n.combine=this.combine)),this.envMapIntensity!==void 0&&(n.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(n.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(n.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(n.size=this.size),this.shadowSide!==null&&(n.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==Na&&(n.blending=this.blending),this.side!==Vs&&(n.side=this.side),this.vertexColors===!0&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),this.transparent===!0&&(n.transparent=!0),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.colorWrite=this.colorWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(n.rotation=this.rotation),this.polygonOffset===!0&&(n.polygonOffset=!0),this.polygonOffsetFactor!==0&&(n.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(n.linewidth=this.linewidth),this.dashSize!==void 0&&(n.dashSize=this.dashSize),this.gapSize!==void 0&&(n.gapSize=this.gapSize),this.scale!==void 0&&(n.scale=this.scale),this.dithering===!0&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),this.alphaHash===!0&&(n.alphaHash=!0),this.alphaToCoverage===!0&&(n.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(n.premultipliedAlpha=!0),this.forceSinglePass===!0&&(n.forceSinglePass=!0),this.wireframe===!0&&(n.wireframe=!0),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(n.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(n.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(n.flatShading=!0),this.visible===!1&&(n.visible=!1),this.toneMapped===!1&&(n.toneMapped=!1),this.fog===!1&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData);function r(o){const l=[];for(const c in o){const f=o[c];delete f.metadata,l.push(f)}return l}if(t){const o=r(e.textures),l=r(e.images);o.length>0&&(n.textures=o),l.length>0&&(n.images=l)}return n}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(t!==null){const r=t.length;n=new Array(r);for(let o=0;o!==r;++o)n[o]=t[o].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}const f0={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},to={h:0,s:0,l:0},Mc={h:0,s:0,l:0};function pu(s,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?s+(e-s)*6*t:t<1/2?e:t<2/3?s+(e-s)*6*(2/3-t):s}class Yt{constructor(e,t,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,n)}set(e,t,n){if(t===void 0&&n===void 0){const r=e;r&&r.isColor?this.copy(r):typeof r=="number"?this.setHex(r):typeof r=="string"&&this.setStyle(r)}else this.setRGB(e,t,n);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=An){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Dn.toWorkingColorSpace(this,t),this}setRGB(e,t,n,r=Dn.workingColorSpace){return this.r=e,this.g=t,this.b=n,Dn.toWorkingColorSpace(this,r),this}setHSL(e,t,n,r=Dn.workingColorSpace){if(e=bf(e,1),t=Ci(t,0,1),n=Ci(n,0,1),t===0)this.r=this.g=this.b=n;else{const o=n<=.5?n*(1+t):n+t-n*t,l=2*n-o;this.r=pu(l,o,e+1/3),this.g=pu(l,o,e),this.b=pu(l,o,e-1/3)}return Dn.toWorkingColorSpace(this,r),this}setStyle(e,t=An){function n(o){o!==void 0&&parseFloat(o)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let o;const l=r[1],c=r[2];switch(l){case"rgb":case"rgba":if(o=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(c))return n(o[4]),this.setRGB(Math.min(255,parseInt(o[1],10))/255,Math.min(255,parseInt(o[2],10))/255,Math.min(255,parseInt(o[3],10))/255,t);if(o=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(c))return n(o[4]),this.setRGB(Math.min(100,parseInt(o[1],10))/100,Math.min(100,parseInt(o[2],10))/100,Math.min(100,parseInt(o[3],10))/100,t);break;case"hsl":case"hsla":if(o=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(c))return n(o[4]),this.setHSL(parseFloat(o[1])/360,parseFloat(o[2])/100,parseFloat(o[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const o=r[1],l=o.length;if(l===3)return this.setRGB(parseInt(o.charAt(0),16)/15,parseInt(o.charAt(1),16)/15,parseInt(o.charAt(2),16)/15,t);if(l===6)return this.setHex(parseInt(o,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=An){const n=f0[e.toLowerCase()];return n!==void 0?this.setHex(n,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Ua(e.r),this.g=Ua(e.g),this.b=Ua(e.b),this}copyLinearToSRGB(e){return this.r=nu(e.r),this.g=nu(e.g),this.b=nu(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=An){return Dn.fromWorkingColorSpace(Vi.copy(this),e),Math.round(Ci(Vi.r*255,0,255))*65536+Math.round(Ci(Vi.g*255,0,255))*256+Math.round(Ci(Vi.b*255,0,255))}getHexString(e=An){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Dn.workingColorSpace){Dn.fromWorkingColorSpace(Vi.copy(this),t);const n=Vi.r,r=Vi.g,o=Vi.b,l=Math.max(n,r,o),c=Math.min(n,r,o);let f,d;const m=(c+l)/2;if(c===l)f=0,d=0;else{const v=l-c;switch(d=m<=.5?v/(l+c):v/(2-l-c),l){case n:f=(r-o)/v+(r<o?6:0);break;case r:f=(o-n)/v+2;break;case o:f=(n-r)/v+4;break}f/=6}return e.h=f,e.s=d,e.l=m,e}getRGB(e,t=Dn.workingColorSpace){return Dn.fromWorkingColorSpace(Vi.copy(this),t),e.r=Vi.r,e.g=Vi.g,e.b=Vi.b,e}getStyle(e=An){Dn.fromWorkingColorSpace(Vi.copy(this),e);const t=Vi.r,n=Vi.g,r=Vi.b;return e!==An?`color(${e} ${t.toFixed(3)} ${n.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(n*255)},${Math.round(r*255)})`}offsetHSL(e,t,n){return this.getHSL(to),this.setHSL(to.h+e,to.s+t,to.l+n)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(to),e.getHSL(Mc);const n=Dl(to.h,Mc.h,t),r=Dl(to.s,Mc.s,t),o=Dl(to.l,Mc.l,t);return this.setHSL(n,r,o),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,n=this.g,r=this.b,o=e.elements;return this.r=o[0]*t+o[3]*n+o[6]*r,this.g=o[1]*t+o[4]*n+o[7]*r,this.b=o[2]*t+o[5]*n+o[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Vi=new Yt;Yt.NAMES=f0;class zs extends xs{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Yt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Yg,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Bs=fb();function fb(){const s=new ArrayBuffer(4),e=new Float32Array(s),t=new Uint32Array(s),n=new Uint32Array(512),r=new Uint32Array(512);for(let f=0;f<256;++f){const d=f-127;d<-27?(n[f]=0,n[f|256]=32768,r[f]=24,r[f|256]=24):d<-14?(n[f]=1024>>-d-14,n[f|256]=1024>>-d-14|32768,r[f]=-d-1,r[f|256]=-d-1):d<=15?(n[f]=d+15<<10,n[f|256]=d+15<<10|32768,r[f]=13,r[f|256]=13):d<128?(n[f]=31744,n[f|256]=64512,r[f]=24,r[f|256]=24):(n[f]=31744,n[f|256]=64512,r[f]=13,r[f|256]=13)}const o=new Uint32Array(2048),l=new Uint32Array(64),c=new Uint32Array(64);for(let f=1;f<1024;++f){let d=f<<13,m=0;for(;!(d&8388608);)d<<=1,m-=8388608;d&=-8388609,m+=947912704,o[f]=d|m}for(let f=1024;f<2048;++f)o[f]=939524096+(f-1024<<13);for(let f=1;f<31;++f)l[f]=f<<23;l[31]=1199570944,l[32]=2147483648;for(let f=33;f<63;++f)l[f]=2147483648+(f-32<<23);l[63]=3347054592;for(let f=1;f<64;++f)f!==32&&(c[f]=1024);return{floatView:e,uint32View:t,baseTable:n,shiftTable:r,mantissaTable:o,exponentTable:l,offsetTable:c}}function db(s){Math.abs(s)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),s=Ci(s,-65504,65504),Bs.floatView[0]=s;const e=Bs.uint32View[0],t=e>>23&511;return Bs.baseTable[t]+((e&8388607)>>Bs.shiftTable[t])}function pb(s){const e=s>>10;return Bs.uint32View[0]=Bs.mantissaTable[Bs.offsetTable[e]+(s&1023)]+Bs.exponentTable[e],Bs.floatView[0]}const Ec={toHalfFloat:db,fromHalfFloat:pb},ai=new ce,Sc=new Jt;class _i{constructor(e,t,n=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=n,this.usage=qu,this.updateRange={offset:0,count:-1},this.gpuType=Lr,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let r=0,o=this.itemSize;r<o;r++)this.array[e+r]=t.array[n+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,n=this.count;t<n;t++)Sc.fromBufferAttribute(this,t),Sc.applyMatrix3(e),this.setXY(t,Sc.x,Sc.y);else if(this.itemSize===3)for(let t=0,n=this.count;t<n;t++)ai.fromBufferAttribute(this,t),ai.applyMatrix3(e),this.setXYZ(t,ai.x,ai.y,ai.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)ai.fromBufferAttribute(this,t),ai.applyMatrix4(e),this.setXYZ(t,ai.x,ai.y,ai.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)ai.fromBufferAttribute(this,t),ai.applyNormalMatrix(e),this.setXYZ(t,ai.x,ai.y,ai.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)ai.fromBufferAttribute(this,t),ai.transformDirection(e),this.setXYZ(t,ai.x,ai.y,ai.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let n=this.array[e*this.itemSize+t];return this.normalized&&(n=vs(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=kn(n,this.array)),this.array[e*this.itemSize+t]=n,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=vs(t,this.array)),t}setX(e,t){return this.normalized&&(t=kn(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=vs(t,this.array)),t}setY(e,t){return this.normalized&&(t=kn(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=vs(t,this.array)),t}setZ(e,t){return this.normalized&&(t=kn(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=vs(t,this.array)),t}setW(e,t){return this.normalized&&(t=kn(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=kn(t,this.array),n=kn(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,r){return e*=this.itemSize,this.normalized&&(t=kn(t,this.array),n=kn(n,this.array),r=kn(r,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this}setXYZW(e,t,n,r,o){return e*=this.itemSize,this.normalized&&(t=kn(t,this.array),n=kn(n,this.array),r=kn(r,this.array),o=kn(o,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=o,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==qu&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}}class d0 extends _i{constructor(e,t,n){super(new Uint16Array(e),t,n)}}class p0 extends _i{constructor(e,t,n){super(new Uint32Array(e),t,n)}}class Ur extends _i{constructor(e,t,n){super(new Float32Array(e),t,n)}}let mb=0;const $r=new hn,mu=new zn,ya=new ce,Mr=new Xs,vl=new Xs,Si=new ce;class Or extends Ko{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:mb++}),this.uuid=os(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(l0(e)?p0:d0)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,n=0){this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(n!==void 0){const o=new un().getNormalMatrix(e);n.applyNormalMatrix(o),n.needsUpdate=!0}const r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return $r.makeRotationFromQuaternion(e),this.applyMatrix4($r),this}rotateX(e){return $r.makeRotationX(e),this.applyMatrix4($r),this}rotateY(e){return $r.makeRotationY(e),this.applyMatrix4($r),this}rotateZ(e){return $r.makeRotationZ(e),this.applyMatrix4($r),this}translate(e,t,n){return $r.makeTranslation(e,t,n),this.applyMatrix4($r),this}scale(e,t,n){return $r.makeScale(e,t,n),this.applyMatrix4($r),this}lookAt(e){return mu.lookAt(e),mu.updateMatrix(),this.applyMatrix4(mu.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(ya).negate(),this.translate(ya.x,ya.y,ya.z),this}setFromPoints(e){const t=[];for(let n=0,r=e.length;n<r;n++){const o=e[n];t.push(o.x,o.y,o.z||0)}return this.setAttribute("position",new Ur(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Xs);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new ce(-1/0,-1/0,-1/0),new ce(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let n=0,r=t.length;n<r;n++){const o=t[n];Mr.setFromBufferAttribute(o),this.morphTargetsRelative?(Si.addVectors(this.boundingBox.min,Mr.min),this.boundingBox.expandByPoint(Si),Si.addVectors(this.boundingBox.max,Mr.max),this.boundingBox.expandByPoint(Si)):(this.boundingBox.expandByPoint(Mr.min),this.boundingBox.expandByPoint(Mr.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Es);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new ce,1/0);return}if(e){const n=this.boundingSphere.center;if(Mr.setFromBufferAttribute(e),t)for(let o=0,l=t.length;o<l;o++){const c=t[o];vl.setFromBufferAttribute(c),this.morphTargetsRelative?(Si.addVectors(Mr.min,vl.min),Mr.expandByPoint(Si),Si.addVectors(Mr.max,vl.max),Mr.expandByPoint(Si)):(Mr.expandByPoint(vl.min),Mr.expandByPoint(vl.max))}Mr.getCenter(n);let r=0;for(let o=0,l=e.count;o<l;o++)Si.fromBufferAttribute(e,o),r=Math.max(r,n.distanceToSquared(Si));if(t)for(let o=0,l=t.length;o<l;o++){const c=t[o],f=this.morphTargetsRelative;for(let d=0,m=c.count;d<m;d++)Si.fromBufferAttribute(c,d),f&&(ya.fromBufferAttribute(e,d),Si.add(ya)),r=Math.max(r,n.distanceToSquared(Si))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const n=e.array,r=t.position.array,o=t.normal.array,l=t.uv.array,c=r.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new _i(new Float32Array(4*c),4));const f=this.getAttribute("tangent").array,d=[],m=[];for(let V=0;V<c;V++)d[V]=new ce,m[V]=new ce;const v=new ce,y=new ce,M=new ce,T=new Jt,A=new Jt,E=new Jt,b=new ce,z=new ce;function I(V,Me,Te){v.fromArray(r,V*3),y.fromArray(r,Me*3),M.fromArray(r,Te*3),T.fromArray(l,V*2),A.fromArray(l,Me*2),E.fromArray(l,Te*2),y.sub(v),M.sub(v),A.sub(T),E.sub(T);const ve=1/(A.x*E.y-E.x*A.y);isFinite(ve)&&(b.copy(y).multiplyScalar(E.y).addScaledVector(M,-A.y).multiplyScalar(ve),z.copy(M).multiplyScalar(A.x).addScaledVector(y,-E.x).multiplyScalar(ve),d[V].add(b),d[Me].add(b),d[Te].add(b),m[V].add(z),m[Me].add(z),m[Te].add(z))}let H=this.groups;H.length===0&&(H=[{start:0,count:n.length}]);for(let V=0,Me=H.length;V<Me;++V){const Te=H[V],ve=Te.start,Z=Te.count;for(let me=ve,_e=ve+Z;me<_e;me+=3)I(n[me+0],n[me+1],n[me+2])}const X=new ce,G=new ce,g=new ce,oe=new ce;function U(V){g.fromArray(o,V*3),oe.copy(g);const Me=d[V];X.copy(Me),X.sub(g.multiplyScalar(g.dot(Me))).normalize(),G.crossVectors(oe,Me);const ve=G.dot(m[V])<0?-1:1;f[V*4]=X.x,f[V*4+1]=X.y,f[V*4+2]=X.z,f[V*4+3]=ve}for(let V=0,Me=H.length;V<Me;++V){const Te=H[V],ve=Te.start,Z=Te.count;for(let me=ve,_e=ve+Z;me<_e;me+=3)U(n[me+0]),U(n[me+1]),U(n[me+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let n=this.getAttribute("normal");if(n===void 0)n=new _i(new Float32Array(t.count*3),3),this.setAttribute("normal",n);else for(let y=0,M=n.count;y<M;y++)n.setXYZ(y,0,0,0);const r=new ce,o=new ce,l=new ce,c=new ce,f=new ce,d=new ce,m=new ce,v=new ce;if(e)for(let y=0,M=e.count;y<M;y+=3){const T=e.getX(y+0),A=e.getX(y+1),E=e.getX(y+2);r.fromBufferAttribute(t,T),o.fromBufferAttribute(t,A),l.fromBufferAttribute(t,E),m.subVectors(l,o),v.subVectors(r,o),m.cross(v),c.fromBufferAttribute(n,T),f.fromBufferAttribute(n,A),d.fromBufferAttribute(n,E),c.add(m),f.add(m),d.add(m),n.setXYZ(T,c.x,c.y,c.z),n.setXYZ(A,f.x,f.y,f.z),n.setXYZ(E,d.x,d.y,d.z)}else for(let y=0,M=t.count;y<M;y+=3)r.fromBufferAttribute(t,y+0),o.fromBufferAttribute(t,y+1),l.fromBufferAttribute(t,y+2),m.subVectors(l,o),v.subVectors(r,o),m.cross(v),n.setXYZ(y+0,m.x,m.y,m.z),n.setXYZ(y+1,m.x,m.y,m.z),n.setXYZ(y+2,m.x,m.y,m.z);this.normalizeNormals(),n.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)Si.fromBufferAttribute(e,t),Si.normalize(),e.setXYZ(t,Si.x,Si.y,Si.z)}toNonIndexed(){function e(c,f){const d=c.array,m=c.itemSize,v=c.normalized,y=new d.constructor(f.length*m);let M=0,T=0;for(let A=0,E=f.length;A<E;A++){c.isInterleavedBufferAttribute?M=f[A]*c.data.stride+c.offset:M=f[A]*m;for(let b=0;b<m;b++)y[T++]=d[M++]}return new _i(y,m,v)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Or,n=this.index.array,r=this.attributes;for(const c in r){const f=r[c],d=e(f,n);t.setAttribute(c,d)}const o=this.morphAttributes;for(const c in o){const f=[],d=o[c];for(let m=0,v=d.length;m<v;m++){const y=d[m],M=e(y,n);f.push(M)}t.morphAttributes[c]=f}t.morphTargetsRelative=this.morphTargetsRelative;const l=this.groups;for(let c=0,f=l.length;c<f;c++){const d=l[c];t.addGroup(d.start,d.count,d.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const f=this.parameters;for(const d in f)f[d]!==void 0&&(e[d]=f[d]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const f in n){const d=n[f];e.data.attributes[f]=d.toJSON(e.data)}const r={};let o=!1;for(const f in this.morphAttributes){const d=this.morphAttributes[f],m=[];for(let v=0,y=d.length;v<y;v++){const M=d[v];m.push(M.toJSON(e.data))}m.length>0&&(r[f]=m,o=!0)}o&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const l=this.groups;l.length>0&&(e.data.groups=JSON.parse(JSON.stringify(l)));const c=this.boundingSphere;return c!==null&&(e.data.boundingSphere={center:c.center.toArray(),radius:c.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;n!==null&&this.setIndex(n.clone(t));const r=e.attributes;for(const d in r){const m=r[d];this.setAttribute(d,m.clone(t))}const o=e.morphAttributes;for(const d in o){const m=[],v=o[d];for(let y=0,M=v.length;y<M;y++)m.push(v[y].clone(t));this.morphAttributes[d]=m}this.morphTargetsRelative=e.morphTargetsRelative;const l=e.groups;for(let d=0,m=l.length;d<m;d++){const v=l[d];this.addGroup(v.start,v.count,v.materialIndex)}const c=e.boundingBox;c!==null&&(this.boundingBox=c.clone());const f=e.boundingSphere;return f!==null&&(this.boundingSphere=f.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const pm=new hn,Do=new Gl,Tc=new Es,mm=new ce,_a=new ce,ba=new ce,wa=new ce,gu=new ce,Ac=new ce,Cc=new Jt,Rc=new Jt,Lc=new Jt,gm=new ce,vm=new ce,xm=new ce,Dc=new ce,Pc=new ce;class $i extends zn{constructor(e=new Or,t=new zs){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const r=t[n[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,l=r.length;o<l;o++){const c=r[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[c]=o}}}}getVertexPosition(e,t){const n=this.geometry,r=n.attributes.position,o=n.morphAttributes.position,l=n.morphTargetsRelative;t.fromBufferAttribute(r,e);const c=this.morphTargetInfluences;if(o&&c){Ac.set(0,0,0);for(let f=0,d=o.length;f<d;f++){const m=c[f],v=o[f];m!==0&&(gu.fromBufferAttribute(v,e),l?Ac.addScaledVector(gu,m):Ac.addScaledVector(gu.sub(t),m))}t.add(Ac)}return t}raycast(e,t){const n=this.geometry,r=this.material,o=this.matrixWorld;r!==void 0&&(n.boundingSphere===null&&n.computeBoundingSphere(),Tc.copy(n.boundingSphere),Tc.applyMatrix4(o),Do.copy(e.ray).recast(e.near),!(Tc.containsPoint(Do.origin)===!1&&(Do.intersectSphere(Tc,mm)===null||Do.origin.distanceToSquared(mm)>(e.far-e.near)**2))&&(pm.copy(o).invert(),Do.copy(e.ray).applyMatrix4(pm),!(n.boundingBox!==null&&Do.intersectsBox(n.boundingBox)===!1)&&this._computeIntersections(e,t,Do)))}_computeIntersections(e,t,n){let r;const o=this.geometry,l=this.material,c=o.index,f=o.attributes.position,d=o.attributes.uv,m=o.attributes.uv1,v=o.attributes.normal,y=o.groups,M=o.drawRange;if(c!==null)if(Array.isArray(l))for(let T=0,A=y.length;T<A;T++){const E=y[T],b=l[E.materialIndex],z=Math.max(E.start,M.start),I=Math.min(c.count,Math.min(E.start+E.count,M.start+M.count));for(let H=z,X=I;H<X;H+=3){const G=c.getX(H),g=c.getX(H+1),oe=c.getX(H+2);r=Ic(this,b,e,n,d,m,v,G,g,oe),r&&(r.faceIndex=Math.floor(H/3),r.face.materialIndex=E.materialIndex,t.push(r))}}else{const T=Math.max(0,M.start),A=Math.min(c.count,M.start+M.count);for(let E=T,b=A;E<b;E+=3){const z=c.getX(E),I=c.getX(E+1),H=c.getX(E+2);r=Ic(this,l,e,n,d,m,v,z,I,H),r&&(r.faceIndex=Math.floor(E/3),t.push(r))}}else if(f!==void 0)if(Array.isArray(l))for(let T=0,A=y.length;T<A;T++){const E=y[T],b=l[E.materialIndex],z=Math.max(E.start,M.start),I=Math.min(f.count,Math.min(E.start+E.count,M.start+M.count));for(let H=z,X=I;H<X;H+=3){const G=H,g=H+1,oe=H+2;r=Ic(this,b,e,n,d,m,v,G,g,oe),r&&(r.faceIndex=Math.floor(H/3),r.face.materialIndex=E.materialIndex,t.push(r))}}else{const T=Math.max(0,M.start),A=Math.min(f.count,M.start+M.count);for(let E=T,b=A;E<b;E+=3){const z=E,I=E+1,H=E+2;r=Ic(this,l,e,n,d,m,v,z,I,H),r&&(r.faceIndex=Math.floor(E/3),t.push(r))}}}}function gb(s,e,t,n,r,o,l,c){let f;if(e.side===ur?f=n.intersectTriangle(l,o,r,!0,c):f=n.intersectTriangle(r,o,l,e.side===Vs,c),f===null)return null;Pc.copy(c),Pc.applyMatrix4(s.matrixWorld);const d=t.ray.origin.distanceTo(Pc);return d<t.near||d>t.far?null:{distance:d,point:Pc.clone(),object:s}}function Ic(s,e,t,n,r,o,l,c,f,d){s.getVertexPosition(c,_a),s.getVertexPosition(f,ba),s.getVertexPosition(d,wa);const m=gb(s,e,t,n,_a,ba,wa,Dc);if(m){r&&(Cc.fromBufferAttribute(r,c),Rc.fromBufferAttribute(r,f),Lc.fromBufferAttribute(r,d),m.uv=rs.getInterpolation(Dc,_a,ba,wa,Cc,Rc,Lc,new Jt)),o&&(Cc.fromBufferAttribute(o,c),Rc.fromBufferAttribute(o,f),Lc.fromBufferAttribute(o,d),m.uv1=rs.getInterpolation(Dc,_a,ba,wa,Cc,Rc,Lc,new Jt),m.uv2=m.uv1),l&&(gm.fromBufferAttribute(l,c),vm.fromBufferAttribute(l,f),xm.fromBufferAttribute(l,d),m.normal=rs.getInterpolation(Dc,_a,ba,wa,gm,vm,xm,new ce),m.normal.dot(n.direction)>0&&m.normal.multiplyScalar(-1));const v={a:c,b:f,c:d,normal:new ce,materialIndex:0};rs.getNormal(_a,ba,wa,v.normal),m.face=v}return m}class Vl extends Or{constructor(e=1,t=1,n=1,r=1,o=1,l=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:o,depthSegments:l};const c=this;r=Math.floor(r),o=Math.floor(o),l=Math.floor(l);const f=[],d=[],m=[],v=[];let y=0,M=0;T("z","y","x",-1,-1,n,t,e,l,o,0),T("z","y","x",1,-1,n,t,-e,l,o,1),T("x","z","y",1,1,e,n,t,r,l,2),T("x","z","y",1,-1,e,n,-t,r,l,3),T("x","y","z",1,-1,e,t,n,r,o,4),T("x","y","z",-1,-1,e,t,-n,r,o,5),this.setIndex(f),this.setAttribute("position",new Ur(d,3)),this.setAttribute("normal",new Ur(m,3)),this.setAttribute("uv",new Ur(v,2));function T(A,E,b,z,I,H,X,G,g,oe,U){const V=H/g,Me=X/oe,Te=H/2,ve=X/2,Z=G/2,me=g+1,_e=oe+1;let fe=0,Fe=0;const Ee=new ce;for(let Le=0;Le<_e;Le++){const ge=Le*Me-ve;for(let Ce=0;Ce<me;Ce++){const Je=Ce*V-Te;Ee[A]=Je*z,Ee[E]=ge*I,Ee[b]=Z,d.push(Ee.x,Ee.y,Ee.z),Ee[A]=0,Ee[E]=0,Ee[b]=G>0?1:-1,m.push(Ee.x,Ee.y,Ee.z),v.push(Ce/g),v.push(1-Le/oe),fe+=1}}for(let Le=0;Le<oe;Le++)for(let ge=0;ge<g;ge++){const Ce=y+ge+me*Le,Je=y+ge+me*(Le+1),nt=y+(ge+1)+me*(Le+1),ut=y+(ge+1)+me*Le;f.push(Ce,Je,ut),f.push(Je,nt,ut),Fe+=6}c.addGroup(M,Fe,U),M+=Fe,y+=fe}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Vl(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Xa(s){const e={};for(const t in s){e[t]={};for(const n in s[t]){const r=s[t][n];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][n]=null):e[t][n]=r.clone():Array.isArray(r)?e[t][n]=r.slice():e[t][n]=r}}return e}function Zi(s){const e={};for(let t=0;t<s.length;t++){const n=Xa(s[t]);for(const r in n)e[r]=n[r]}return e}function vb(s){const e=[];for(let t=0;t<s.length;t++)e.push(s[t].clone());return e}function m0(s){return s.getRenderTarget()===null?s.outputColorSpace:Dn.workingColorSpace}const xb={clone:Xa,merge:Zi};var yb=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,_b=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class ws extends xs{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=yb,this.fragmentShader=_b,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Xa(e.uniforms),this.uniformsGroups=vb(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const l=this.uniforms[r].value;l&&l.isTexture?t.uniforms[r]={type:"t",value:l.toJSON(e).uuid}:l&&l.isColor?t.uniforms[r]={type:"c",value:l.getHex()}:l&&l.isVector2?t.uniforms[r]={type:"v2",value:l.toArray()}:l&&l.isVector3?t.uniforms[r]={type:"v3",value:l.toArray()}:l&&l.isVector4?t.uniforms[r]={type:"v4",value:l.toArray()}:l&&l.isMatrix3?t.uniforms[r]={type:"m3",value:l.toArray()}:l&&l.isMatrix4?t.uniforms[r]={type:"m4",value:l.toArray()}:t.uniforms[r]={value:l}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const n={};for(const r in this.extensions)this.extensions[r]===!0&&(n[r]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}}class Mf extends zn{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new hn,this.projectionMatrix=new hn,this.projectionMatrixInverse=new hn,this.coordinateSystem=Hs}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}class Ri extends Mf{constructor(e=50,t=1,n=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=$a*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Ll*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return $a*2*Math.atan(Math.tan(Ll*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,n,r,o,l){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=o,this.view.height=l,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(Ll*.5*this.fov)/this.zoom,n=2*t,r=this.aspect*n,o=-.5*r;const l=this.view;if(this.view!==null&&this.view.enabled){const f=l.fullWidth,d=l.fullHeight;o+=l.offsetX*r/f,t-=l.offsetY*n/d,r*=l.width/f,n*=l.height/d}const c=this.filmOffset;c!==0&&(o+=e*c/this.getFilmWidth()),this.projectionMatrix.makePerspective(o,o+r,t,t-n,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const Ma=-90,Ea=1;class bb extends zn{constructor(e,t,n){super(),this.type="CubeCamera",this.renderTarget=n,this.coordinateSystem=null,this.activeMipmapLevel=0;const r=new Ri(Ma,Ea,e,t);r.layers=this.layers,this.add(r);const o=new Ri(Ma,Ea,e,t);o.layers=this.layers,this.add(o);const l=new Ri(Ma,Ea,e,t);l.layers=this.layers,this.add(l);const c=new Ri(Ma,Ea,e,t);c.layers=this.layers,this.add(c);const f=new Ri(Ma,Ea,e,t);f.layers=this.layers,this.add(f);const d=new Ri(Ma,Ea,e,t);d.layers=this.layers,this.add(d)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[n,r,o,l,c,f]=t;for(const d of t)this.remove(d);if(e===Hs)n.up.set(0,1,0),n.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),o.up.set(0,0,-1),o.lookAt(0,1,0),l.up.set(0,0,1),l.lookAt(0,-1,0),c.up.set(0,1,0),c.lookAt(0,0,1),f.up.set(0,1,0),f.lookAt(0,0,-1);else if(e===rh)n.up.set(0,-1,0),n.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),o.up.set(0,0,1),o.lookAt(0,1,0),l.up.set(0,0,-1),l.lookAt(0,-1,0),c.up.set(0,-1,0),c.lookAt(0,0,1),f.up.set(0,-1,0),f.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const d of t)this.add(d),d.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:n,activeMipmapLevel:r}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[o,l,c,f,d,m]=this.children,v=e.getRenderTarget(),y=e.getActiveCubeFace(),M=e.getActiveMipmapLevel(),T=e.xr.enabled;e.xr.enabled=!1;const A=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0,r),e.render(t,o),e.setRenderTarget(n,1,r),e.render(t,l),e.setRenderTarget(n,2,r),e.render(t,c),e.setRenderTarget(n,3,r),e.render(t,f),e.setRenderTarget(n,4,r),e.render(t,d),n.texture.generateMipmaps=A,e.setRenderTarget(n,5,r),e.render(t,m),e.setRenderTarget(v,y,M),e.xr.enabled=T,n.texture.needsPMREMUpdate=!0}}class g0 extends hi{constructor(e,t,n,r,o,l,c,f,d,m){e=e!==void 0?e:[],t=t!==void 0?t:za,super(e,t,n,r,o,l,c,f,d,m),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class wb extends $s{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const n={width:e,height:e,depth:1},r=[n,n,n,n,n,n];t.encoding!==void 0&&(Pl("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),t.colorSpace=t.encoding===Xo?An:Rr),this.texture=new g0(r,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:li}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new Vl(5,5,5),o=new ws({name:"CubemapFromEquirect",uniforms:Xa(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:ur,blending:uo});o.uniforms.tEquirect.value=t;const l=new $i(r,o),c=t.minFilter;return t.minFilter===Ws&&(t.minFilter=li),new bb(1,10,this).update(e,l),t.minFilter=c,l.geometry.dispose(),l.material.dispose(),this}clear(e,t,n,r){const o=e.getRenderTarget();for(let l=0;l<6;l++)e.setRenderTarget(this,l),e.clear(t,n,r);e.setRenderTarget(o)}}const vu=new ce,Mb=new ce,Eb=new un;class so{constructor(e=new ce(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const r=vu.subVectors(n,t).cross(Mb.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const n=e.delta(vu),r=this.normal.dot(n);if(r===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const o=-(e.start.dot(this.normal)+this.constant)/r;return o<0||o>1?null:t.copy(e.start).addScaledVector(n,o)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||Eb.getNormalMatrix(e),r=this.coplanarPoint(vu).applyMatrix4(e),o=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(o),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Po=new Es,Nc=new ce;class Ef{constructor(e=new so,t=new so,n=new so,r=new so,o=new so,l=new so){this.planes=[e,t,n,r,o,l]}set(e,t,n,r,o,l){const c=this.planes;return c[0].copy(e),c[1].copy(t),c[2].copy(n),c[3].copy(r),c[4].copy(o),c[5].copy(l),this}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e,t=Hs){const n=this.planes,r=e.elements,o=r[0],l=r[1],c=r[2],f=r[3],d=r[4],m=r[5],v=r[6],y=r[7],M=r[8],T=r[9],A=r[10],E=r[11],b=r[12],z=r[13],I=r[14],H=r[15];if(n[0].setComponents(f-o,y-d,E-M,H-b).normalize(),n[1].setComponents(f+o,y+d,E+M,H+b).normalize(),n[2].setComponents(f+l,y+m,E+T,H+z).normalize(),n[3].setComponents(f-l,y-m,E-T,H-z).normalize(),n[4].setComponents(f-c,y-v,E-A,H-I).normalize(),t===Hs)n[5].setComponents(f+c,y+v,E+A,H+I).normalize();else if(t===rh)n[5].setComponents(c,v,A,I).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Po.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),Po.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Po)}intersectsSprite(e){return Po.center.set(0,0,0),Po.radius=.7071067811865476,Po.applyMatrix4(e.matrixWorld),this.intersectsSphere(Po)}intersectsSphere(e){const t=this.planes,n=e.center,r=-e.radius;for(let o=0;o<6;o++)if(t[o].distanceToPoint(n)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const r=t[n];if(Nc.x=r.normal.x>0?e.max.x:e.min.x,Nc.y=r.normal.y>0?e.max.y:e.min.y,Nc.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(Nc)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function v0(){let s=null,e=!1,t=null,n=null;function r(o,l){t(o,l),n=s.requestAnimationFrame(r)}return{start:function(){e!==!0&&t!==null&&(n=s.requestAnimationFrame(r),e=!0)},stop:function(){s.cancelAnimationFrame(n),e=!1},setAnimationLoop:function(o){t=o},setContext:function(o){s=o}}}function Sb(s,e){const t=e.isWebGL2,n=new WeakMap;function r(d,m){const v=d.array,y=d.usage,M=s.createBuffer();s.bindBuffer(m,M),s.bufferData(m,v,y),d.onUploadCallback();let T;if(v instanceof Float32Array)T=s.FLOAT;else if(v instanceof Uint16Array)if(d.isFloat16BufferAttribute)if(t)T=s.HALF_FLOAT;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else T=s.UNSIGNED_SHORT;else if(v instanceof Int16Array)T=s.SHORT;else if(v instanceof Uint32Array)T=s.UNSIGNED_INT;else if(v instanceof Int32Array)T=s.INT;else if(v instanceof Int8Array)T=s.BYTE;else if(v instanceof Uint8Array)T=s.UNSIGNED_BYTE;else if(v instanceof Uint8ClampedArray)T=s.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+v);return{buffer:M,type:T,bytesPerElement:v.BYTES_PER_ELEMENT,version:d.version}}function o(d,m,v){const y=m.array,M=m.updateRange;s.bindBuffer(v,d),M.count===-1?s.bufferSubData(v,0,y):(t?s.bufferSubData(v,M.offset*y.BYTES_PER_ELEMENT,y,M.offset,M.count):s.bufferSubData(v,M.offset*y.BYTES_PER_ELEMENT,y.subarray(M.offset,M.offset+M.count)),M.count=-1),m.onUploadCallback()}function l(d){return d.isInterleavedBufferAttribute&&(d=d.data),n.get(d)}function c(d){d.isInterleavedBufferAttribute&&(d=d.data);const m=n.get(d);m&&(s.deleteBuffer(m.buffer),n.delete(d))}function f(d,m){if(d.isGLBufferAttribute){const y=n.get(d);(!y||y.version<d.version)&&n.set(d,{buffer:d.buffer,type:d.type,bytesPerElement:d.elementSize,version:d.version});return}d.isInterleavedBufferAttribute&&(d=d.data);const v=n.get(d);v===void 0?n.set(d,r(d,m)):v.version<d.version&&(o(v.buffer,d,m),v.version=d.version)}return{get:l,remove:c,update:f}}class Wl extends Or{constructor(e=1,t=1,n=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r};const o=e/2,l=t/2,c=Math.floor(n),f=Math.floor(r),d=c+1,m=f+1,v=e/c,y=t/f,M=[],T=[],A=[],E=[];for(let b=0;b<m;b++){const z=b*y-l;for(let I=0;I<d;I++){const H=I*v-o;T.push(H,-z,0),A.push(0,0,1),E.push(I/c),E.push(1-b/f)}}for(let b=0;b<f;b++)for(let z=0;z<c;z++){const I=z+d*b,H=z+d*(b+1),X=z+1+d*(b+1),G=z+1+d*b;M.push(I,H,G),M.push(H,X,G)}this.setIndex(M),this.setAttribute("position",new Ur(T,3)),this.setAttribute("normal",new Ur(A,3)),this.setAttribute("uv",new Ur(E,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Wl(e.width,e.height,e.widthSegments,e.heightSegments)}}var Tb=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,Ab=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,Cb=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,Rb=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Lb=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,Db=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,Pb=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,Ib=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,Nb=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,Ub=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,Ob=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,kb=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,Bb=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = dFdx( surf_pos.xyz );
		vec3 vSigmaY = dFdy( surf_pos.xyz );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,Fb=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,Hb=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,zb=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,Gb=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,Vb=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,Wb=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,$b=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,Xb=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,jb=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,Yb=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_v0 0.339
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_v1 0.276
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_v4 0.046
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_v5 0.016
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_v6 0.0038
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,qb=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,Zb=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,Kb=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,Jb=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,Qb=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,ew="gl_FragColor = linearToOutputTexel( gl_FragColor );",tw=`
const mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(
	vec3( 0.8224621, 0.177538, 0.0 ),
	vec3( 0.0331941, 0.9668058, 0.0 ),
	vec3( 0.0170827, 0.0723974, 0.9105199 )
);
const mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(
	vec3( 1.2249401, - 0.2249404, 0.0 ),
	vec3( - 0.0420569, 1.0420571, 0.0 ),
	vec3( - 0.0196376, - 0.0786361, 1.0982735 )
);
vec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {
	return vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );
}
vec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {
	return vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );
}
vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return sRGBTransferOETF( value );
}`,nw=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,iw=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,rw=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,sw=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,ow=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,aw=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,lw=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,cw=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,hw=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,uw=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,fw=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,dw=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,pw=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,mw=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,gw=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,vw=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,xw=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,yw=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,_w=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,bw=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,ww=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	anisotropyV /= material.anisotropy;
	material.anisotropy = saturate( material.anisotropy );
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x - tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x + tbn[ 0 ] * anisotropyV.y;
#endif`,Mw=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,Ew=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal;
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,Sw=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,Tw=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,Aw=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,Cw=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,Rw=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,Lw=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,Dw=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,Pw=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,Iw=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,Nw=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Uw=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,Ow=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,kw=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,Bw=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,Fw=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,Hw=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,zw=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,Gw=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,Vw=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Ww=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,$w=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,Xw=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,jw=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,Yw=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,qw=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,Zw=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,Kw=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,Jw=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,Qw=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,e2=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,t2=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,n2=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,i2=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,r2=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,s2=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,o2=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,a2=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,l2=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,c2=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,h2=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,u2=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,f2=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,d2=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,p2=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,m2=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,g2=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,v2=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,x2=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,y2=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,_2=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,b2=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,w2=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const M2=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,E2=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,S2=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,T2=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,A2=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,C2=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,R2=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,L2=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,D2=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,P2=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,I2=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,N2=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,U2=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,O2=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,k2=`#include <common>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,B2=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,F2=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,H2=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,z2=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,G2=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,V2=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,W2=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,$2=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,X2=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,j2=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,Y2=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,q2=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Z2=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,K2=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,J2=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Q2=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,eM=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,tM=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,nM=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,cn={alphahash_fragment:Tb,alphahash_pars_fragment:Ab,alphamap_fragment:Cb,alphamap_pars_fragment:Rb,alphatest_fragment:Lb,alphatest_pars_fragment:Db,aomap_fragment:Pb,aomap_pars_fragment:Ib,begin_vertex:Nb,beginnormal_vertex:Ub,bsdfs:Ob,iridescence_fragment:kb,bumpmap_pars_fragment:Bb,clipping_planes_fragment:Fb,clipping_planes_pars_fragment:Hb,clipping_planes_pars_vertex:zb,clipping_planes_vertex:Gb,color_fragment:Vb,color_pars_fragment:Wb,color_pars_vertex:$b,color_vertex:Xb,common:jb,cube_uv_reflection_fragment:Yb,defaultnormal_vertex:qb,displacementmap_pars_vertex:Zb,displacementmap_vertex:Kb,emissivemap_fragment:Jb,emissivemap_pars_fragment:Qb,colorspace_fragment:ew,colorspace_pars_fragment:tw,envmap_fragment:nw,envmap_common_pars_fragment:iw,envmap_pars_fragment:rw,envmap_pars_vertex:sw,envmap_physical_pars_fragment:vw,envmap_vertex:ow,fog_vertex:aw,fog_pars_vertex:lw,fog_fragment:cw,fog_pars_fragment:hw,gradientmap_pars_fragment:uw,lightmap_fragment:fw,lightmap_pars_fragment:dw,lights_lambert_fragment:pw,lights_lambert_pars_fragment:mw,lights_pars_begin:gw,lights_toon_fragment:xw,lights_toon_pars_fragment:yw,lights_phong_fragment:_w,lights_phong_pars_fragment:bw,lights_physical_fragment:ww,lights_physical_pars_fragment:Mw,lights_fragment_begin:Ew,lights_fragment_maps:Sw,lights_fragment_end:Tw,logdepthbuf_fragment:Aw,logdepthbuf_pars_fragment:Cw,logdepthbuf_pars_vertex:Rw,logdepthbuf_vertex:Lw,map_fragment:Dw,map_pars_fragment:Pw,map_particle_fragment:Iw,map_particle_pars_fragment:Nw,metalnessmap_fragment:Uw,metalnessmap_pars_fragment:Ow,morphcolor_vertex:kw,morphnormal_vertex:Bw,morphtarget_pars_vertex:Fw,morphtarget_vertex:Hw,normal_fragment_begin:zw,normal_fragment_maps:Gw,normal_pars_fragment:Vw,normal_pars_vertex:Ww,normal_vertex:$w,normalmap_pars_fragment:Xw,clearcoat_normal_fragment_begin:jw,clearcoat_normal_fragment_maps:Yw,clearcoat_pars_fragment:qw,iridescence_pars_fragment:Zw,opaque_fragment:Kw,packing:Jw,premultiplied_alpha_fragment:Qw,project_vertex:e2,dithering_fragment:t2,dithering_pars_fragment:n2,roughnessmap_fragment:i2,roughnessmap_pars_fragment:r2,shadowmap_pars_fragment:s2,shadowmap_pars_vertex:o2,shadowmap_vertex:a2,shadowmask_pars_fragment:l2,skinbase_vertex:c2,skinning_pars_vertex:h2,skinning_vertex:u2,skinnormal_vertex:f2,specularmap_fragment:d2,specularmap_pars_fragment:p2,tonemapping_fragment:m2,tonemapping_pars_fragment:g2,transmission_fragment:v2,transmission_pars_fragment:x2,uv_pars_fragment:y2,uv_pars_vertex:_2,uv_vertex:b2,worldpos_vertex:w2,background_vert:M2,background_frag:E2,backgroundCube_vert:S2,backgroundCube_frag:T2,cube_vert:A2,cube_frag:C2,depth_vert:R2,depth_frag:L2,distanceRGBA_vert:D2,distanceRGBA_frag:P2,equirect_vert:I2,equirect_frag:N2,linedashed_vert:U2,linedashed_frag:O2,meshbasic_vert:k2,meshbasic_frag:B2,meshlambert_vert:F2,meshlambert_frag:H2,meshmatcap_vert:z2,meshmatcap_frag:G2,meshnormal_vert:V2,meshnormal_frag:W2,meshphong_vert:$2,meshphong_frag:X2,meshphysical_vert:j2,meshphysical_frag:Y2,meshtoon_vert:q2,meshtoon_frag:Z2,points_vert:K2,points_frag:J2,shadow_vert:Q2,shadow_frag:eM,sprite_vert:tM,sprite_frag:nM},ft={common:{diffuse:{value:new Yt(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new un},alphaMap:{value:null},alphaMapTransform:{value:new un},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new un}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new un}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new un}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new un},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new un},normalScale:{value:new Jt(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new un},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new un}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new un}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new un}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Yt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Yt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new un},alphaTest:{value:0},uvTransform:{value:new un}},sprite:{diffuse:{value:new Yt(16777215)},opacity:{value:1},center:{value:new Jt(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new un},alphaMap:{value:null},alphaMapTransform:{value:new un},alphaTest:{value:0}}},ms={basic:{uniforms:Zi([ft.common,ft.specularmap,ft.envmap,ft.aomap,ft.lightmap,ft.fog]),vertexShader:cn.meshbasic_vert,fragmentShader:cn.meshbasic_frag},lambert:{uniforms:Zi([ft.common,ft.specularmap,ft.envmap,ft.aomap,ft.lightmap,ft.emissivemap,ft.bumpmap,ft.normalmap,ft.displacementmap,ft.fog,ft.lights,{emissive:{value:new Yt(0)}}]),vertexShader:cn.meshlambert_vert,fragmentShader:cn.meshlambert_frag},phong:{uniforms:Zi([ft.common,ft.specularmap,ft.envmap,ft.aomap,ft.lightmap,ft.emissivemap,ft.bumpmap,ft.normalmap,ft.displacementmap,ft.fog,ft.lights,{emissive:{value:new Yt(0)},specular:{value:new Yt(1118481)},shininess:{value:30}}]),vertexShader:cn.meshphong_vert,fragmentShader:cn.meshphong_frag},standard:{uniforms:Zi([ft.common,ft.envmap,ft.aomap,ft.lightmap,ft.emissivemap,ft.bumpmap,ft.normalmap,ft.displacementmap,ft.roughnessmap,ft.metalnessmap,ft.fog,ft.lights,{emissive:{value:new Yt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:cn.meshphysical_vert,fragmentShader:cn.meshphysical_frag},toon:{uniforms:Zi([ft.common,ft.aomap,ft.lightmap,ft.emissivemap,ft.bumpmap,ft.normalmap,ft.displacementmap,ft.gradientmap,ft.fog,ft.lights,{emissive:{value:new Yt(0)}}]),vertexShader:cn.meshtoon_vert,fragmentShader:cn.meshtoon_frag},matcap:{uniforms:Zi([ft.common,ft.bumpmap,ft.normalmap,ft.displacementmap,ft.fog,{matcap:{value:null}}]),vertexShader:cn.meshmatcap_vert,fragmentShader:cn.meshmatcap_frag},points:{uniforms:Zi([ft.points,ft.fog]),vertexShader:cn.points_vert,fragmentShader:cn.points_frag},dashed:{uniforms:Zi([ft.common,ft.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:cn.linedashed_vert,fragmentShader:cn.linedashed_frag},depth:{uniforms:Zi([ft.common,ft.displacementmap]),vertexShader:cn.depth_vert,fragmentShader:cn.depth_frag},normal:{uniforms:Zi([ft.common,ft.bumpmap,ft.normalmap,ft.displacementmap,{opacity:{value:1}}]),vertexShader:cn.meshnormal_vert,fragmentShader:cn.meshnormal_frag},sprite:{uniforms:Zi([ft.sprite,ft.fog]),vertexShader:cn.sprite_vert,fragmentShader:cn.sprite_frag},background:{uniforms:{uvTransform:{value:new un},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:cn.background_vert,fragmentShader:cn.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:cn.backgroundCube_vert,fragmentShader:cn.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:cn.cube_vert,fragmentShader:cn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:cn.equirect_vert,fragmentShader:cn.equirect_frag},distanceRGBA:{uniforms:Zi([ft.common,ft.displacementmap,{referencePosition:{value:new ce},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:cn.distanceRGBA_vert,fragmentShader:cn.distanceRGBA_frag},shadow:{uniforms:Zi([ft.lights,ft.fog,{color:{value:new Yt(0)},opacity:{value:1}}]),vertexShader:cn.shadow_vert,fragmentShader:cn.shadow_frag}};ms.physical={uniforms:Zi([ms.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new un},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new un},clearcoatNormalScale:{value:new Jt(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new un},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new un},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new un},sheen:{value:0},sheenColor:{value:new Yt(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new un},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new un},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new un},transmissionSamplerSize:{value:new Jt},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new un},attenuationDistance:{value:0},attenuationColor:{value:new Yt(0)},specularColor:{value:new Yt(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new un},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new un},anisotropyVector:{value:new Jt},anisotropyMap:{value:null},anisotropyMapTransform:{value:new un}}]),vertexShader:cn.meshphysical_vert,fragmentShader:cn.meshphysical_frag};const Uc={r:0,b:0,g:0};function iM(s,e,t,n,r,o,l){const c=new Yt(0);let f=o===!0?0:1,d,m,v=null,y=0,M=null;function T(E,b){let z=!1,I=b.isScene===!0?b.background:null;I&&I.isTexture&&(I=(b.backgroundBlurriness>0?t:e).get(I)),I===null?A(c,f):I&&I.isColor&&(A(I,1),z=!0);const H=s.xr.getEnvironmentBlendMode();H==="additive"?n.buffers.color.setClear(0,0,0,1,l):H==="alpha-blend"&&n.buffers.color.setClear(0,0,0,0,l),(s.autoClear||z)&&s.clear(s.autoClearColor,s.autoClearDepth,s.autoClearStencil),I&&(I.isCubeTexture||I.mapping===dh)?(m===void 0&&(m=new $i(new Vl(1,1,1),new ws({name:"BackgroundCubeMaterial",uniforms:Xa(ms.backgroundCube.uniforms),vertexShader:ms.backgroundCube.vertexShader,fragmentShader:ms.backgroundCube.fragmentShader,side:ur,depthTest:!1,depthWrite:!1,fog:!1})),m.geometry.deleteAttribute("normal"),m.geometry.deleteAttribute("uv"),m.onBeforeRender=function(X,G,g){this.matrixWorld.copyPosition(g.matrixWorld)},Object.defineProperty(m.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(m)),m.material.uniforms.envMap.value=I,m.material.uniforms.flipEnvMap.value=I.isCubeTexture&&I.isRenderTargetTexture===!1?-1:1,m.material.uniforms.backgroundBlurriness.value=b.backgroundBlurriness,m.material.uniforms.backgroundIntensity.value=b.backgroundIntensity,m.material.toneMapped=Dn.getTransfer(I.colorSpace)!==Wn,(v!==I||y!==I.version||M!==s.toneMapping)&&(m.material.needsUpdate=!0,v=I,y=I.version,M=s.toneMapping),m.layers.enableAll(),E.unshift(m,m.geometry,m.material,0,0,null)):I&&I.isTexture&&(d===void 0&&(d=new $i(new Wl(2,2),new ws({name:"BackgroundMaterial",uniforms:Xa(ms.background.uniforms),vertexShader:ms.background.vertexShader,fragmentShader:ms.background.fragmentShader,side:Vs,depthTest:!1,depthWrite:!1,fog:!1})),d.geometry.deleteAttribute("normal"),Object.defineProperty(d.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(d)),d.material.uniforms.t2D.value=I,d.material.uniforms.backgroundIntensity.value=b.backgroundIntensity,d.material.toneMapped=Dn.getTransfer(I.colorSpace)!==Wn,I.matrixAutoUpdate===!0&&I.updateMatrix(),d.material.uniforms.uvTransform.value.copy(I.matrix),(v!==I||y!==I.version||M!==s.toneMapping)&&(d.material.needsUpdate=!0,v=I,y=I.version,M=s.toneMapping),d.layers.enableAll(),E.unshift(d,d.geometry,d.material,0,0,null))}function A(E,b){E.getRGB(Uc,m0(s)),n.buffers.color.setClear(Uc.r,Uc.g,Uc.b,b,l)}return{getClearColor:function(){return c},setClearColor:function(E,b=1){c.set(E),f=b,A(c,f)},getClearAlpha:function(){return f},setClearAlpha:function(E){f=E,A(c,f)},render:T}}function rM(s,e,t,n){const r=s.getParameter(s.MAX_VERTEX_ATTRIBS),o=n.isWebGL2?null:e.get("OES_vertex_array_object"),l=n.isWebGL2||o!==null,c={},f=E(null);let d=f,m=!1;function v(Z,me,_e,fe,Fe){let Ee=!1;if(l){const Le=A(fe,_e,me);d!==Le&&(d=Le,M(d.object)),Ee=b(Z,fe,_e,Fe),Ee&&z(Z,fe,_e,Fe)}else{const Le=me.wireframe===!0;(d.geometry!==fe.id||d.program!==_e.id||d.wireframe!==Le)&&(d.geometry=fe.id,d.program=_e.id,d.wireframe=Le,Ee=!0)}Fe!==null&&t.update(Fe,s.ELEMENT_ARRAY_BUFFER),(Ee||m)&&(m=!1,oe(Z,me,_e,fe),Fe!==null&&s.bindBuffer(s.ELEMENT_ARRAY_BUFFER,t.get(Fe).buffer))}function y(){return n.isWebGL2?s.createVertexArray():o.createVertexArrayOES()}function M(Z){return n.isWebGL2?s.bindVertexArray(Z):o.bindVertexArrayOES(Z)}function T(Z){return n.isWebGL2?s.deleteVertexArray(Z):o.deleteVertexArrayOES(Z)}function A(Z,me,_e){const fe=_e.wireframe===!0;let Fe=c[Z.id];Fe===void 0&&(Fe={},c[Z.id]=Fe);let Ee=Fe[me.id];Ee===void 0&&(Ee={},Fe[me.id]=Ee);let Le=Ee[fe];return Le===void 0&&(Le=E(y()),Ee[fe]=Le),Le}function E(Z){const me=[],_e=[],fe=[];for(let Fe=0;Fe<r;Fe++)me[Fe]=0,_e[Fe]=0,fe[Fe]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:me,enabledAttributes:_e,attributeDivisors:fe,object:Z,attributes:{},index:null}}function b(Z,me,_e,fe){const Fe=d.attributes,Ee=me.attributes;let Le=0;const ge=_e.getAttributes();for(const Ce in ge)if(ge[Ce].location>=0){const nt=Fe[Ce];let ut=Ee[Ce];if(ut===void 0&&(Ce==="instanceMatrix"&&Z.instanceMatrix&&(ut=Z.instanceMatrix),Ce==="instanceColor"&&Z.instanceColor&&(ut=Z.instanceColor)),nt===void 0||nt.attribute!==ut||ut&&nt.data!==ut.data)return!0;Le++}return d.attributesNum!==Le||d.index!==fe}function z(Z,me,_e,fe){const Fe={},Ee=me.attributes;let Le=0;const ge=_e.getAttributes();for(const Ce in ge)if(ge[Ce].location>=0){let nt=Ee[Ce];nt===void 0&&(Ce==="instanceMatrix"&&Z.instanceMatrix&&(nt=Z.instanceMatrix),Ce==="instanceColor"&&Z.instanceColor&&(nt=Z.instanceColor));const ut={};ut.attribute=nt,nt&&nt.data&&(ut.data=nt.data),Fe[Ce]=ut,Le++}d.attributes=Fe,d.attributesNum=Le,d.index=fe}function I(){const Z=d.newAttributes;for(let me=0,_e=Z.length;me<_e;me++)Z[me]=0}function H(Z){X(Z,0)}function X(Z,me){const _e=d.newAttributes,fe=d.enabledAttributes,Fe=d.attributeDivisors;_e[Z]=1,fe[Z]===0&&(s.enableVertexAttribArray(Z),fe[Z]=1),Fe[Z]!==me&&((n.isWebGL2?s:e.get("ANGLE_instanced_arrays"))[n.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](Z,me),Fe[Z]=me)}function G(){const Z=d.newAttributes,me=d.enabledAttributes;for(let _e=0,fe=me.length;_e<fe;_e++)me[_e]!==Z[_e]&&(s.disableVertexAttribArray(_e),me[_e]=0)}function g(Z,me,_e,fe,Fe,Ee,Le){Le===!0?s.vertexAttribIPointer(Z,me,_e,Fe,Ee):s.vertexAttribPointer(Z,me,_e,fe,Fe,Ee)}function oe(Z,me,_e,fe){if(n.isWebGL2===!1&&(Z.isInstancedMesh||fe.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;I();const Fe=fe.attributes,Ee=_e.getAttributes(),Le=me.defaultAttributeValues;for(const ge in Ee){const Ce=Ee[ge];if(Ce.location>=0){let Je=Fe[ge];if(Je===void 0&&(ge==="instanceMatrix"&&Z.instanceMatrix&&(Je=Z.instanceMatrix),ge==="instanceColor"&&Z.instanceColor&&(Je=Z.instanceColor)),Je!==void 0){const nt=Je.normalized,ut=Je.itemSize,bt=t.get(Je);if(bt===void 0)continue;const It=bt.buffer,St=bt.type,Rt=bt.bytesPerElement,Mt=n.isWebGL2===!0&&(St===s.INT||St===s.UNSIGNED_INT||Je.gpuType===Jg);if(Je.isInterleavedBufferAttribute){const Ft=Je.data,xe=Ft.stride,Mn=Je.offset;if(Ft.isInstancedInterleavedBuffer){for(let Tt=0;Tt<Ce.locationSize;Tt++)X(Ce.location+Tt,Ft.meshPerAttribute);Z.isInstancedMesh!==!0&&fe._maxInstanceCount===void 0&&(fe._maxInstanceCount=Ft.meshPerAttribute*Ft.count)}else for(let Tt=0;Tt<Ce.locationSize;Tt++)H(Ce.location+Tt);s.bindBuffer(s.ARRAY_BUFFER,It);for(let Tt=0;Tt<Ce.locationSize;Tt++)g(Ce.location+Tt,ut/Ce.locationSize,St,nt,xe*Rt,(Mn+ut/Ce.locationSize*Tt)*Rt,Mt)}else{if(Je.isInstancedBufferAttribute){for(let Ft=0;Ft<Ce.locationSize;Ft++)X(Ce.location+Ft,Je.meshPerAttribute);Z.isInstancedMesh!==!0&&fe._maxInstanceCount===void 0&&(fe._maxInstanceCount=Je.meshPerAttribute*Je.count)}else for(let Ft=0;Ft<Ce.locationSize;Ft++)H(Ce.location+Ft);s.bindBuffer(s.ARRAY_BUFFER,It);for(let Ft=0;Ft<Ce.locationSize;Ft++)g(Ce.location+Ft,ut/Ce.locationSize,St,nt,ut*Rt,ut/Ce.locationSize*Ft*Rt,Mt)}}else if(Le!==void 0){const nt=Le[ge];if(nt!==void 0)switch(nt.length){case 2:s.vertexAttrib2fv(Ce.location,nt);break;case 3:s.vertexAttrib3fv(Ce.location,nt);break;case 4:s.vertexAttrib4fv(Ce.location,nt);break;default:s.vertexAttrib1fv(Ce.location,nt)}}}}G()}function U(){Te();for(const Z in c){const me=c[Z];for(const _e in me){const fe=me[_e];for(const Fe in fe)T(fe[Fe].object),delete fe[Fe];delete me[_e]}delete c[Z]}}function V(Z){if(c[Z.id]===void 0)return;const me=c[Z.id];for(const _e in me){const fe=me[_e];for(const Fe in fe)T(fe[Fe].object),delete fe[Fe];delete me[_e]}delete c[Z.id]}function Me(Z){for(const me in c){const _e=c[me];if(_e[Z.id]===void 0)continue;const fe=_e[Z.id];for(const Fe in fe)T(fe[Fe].object),delete fe[Fe];delete _e[Z.id]}}function Te(){ve(),m=!0,d!==f&&(d=f,M(d.object))}function ve(){f.geometry=null,f.program=null,f.wireframe=!1}return{setup:v,reset:Te,resetDefaultState:ve,dispose:U,releaseStatesOfGeometry:V,releaseStatesOfProgram:Me,initAttributes:I,enableAttribute:H,disableUnusedAttributes:G}}function sM(s,e,t,n){const r=n.isWebGL2;let o;function l(d){o=d}function c(d,m){s.drawArrays(o,d,m),t.update(m,o,1)}function f(d,m,v){if(v===0)return;let y,M;if(r)y=s,M="drawArraysInstanced";else if(y=e.get("ANGLE_instanced_arrays"),M="drawArraysInstancedANGLE",y===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}y[M](o,d,m,v),t.update(m,o,v)}this.setMode=l,this.render=c,this.renderInstances=f}function oM(s,e,t){let n;function r(){if(n!==void 0)return n;if(e.has("EXT_texture_filter_anisotropic")===!0){const g=e.get("EXT_texture_filter_anisotropic");n=s.getParameter(g.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else n=0;return n}function o(g){if(g==="highp"){if(s.getShaderPrecisionFormat(s.VERTEX_SHADER,s.HIGH_FLOAT).precision>0&&s.getShaderPrecisionFormat(s.FRAGMENT_SHADER,s.HIGH_FLOAT).precision>0)return"highp";g="mediump"}return g==="mediump"&&s.getShaderPrecisionFormat(s.VERTEX_SHADER,s.MEDIUM_FLOAT).precision>0&&s.getShaderPrecisionFormat(s.FRAGMENT_SHADER,s.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const l=typeof WebGL2RenderingContext<"u"&&s.constructor.name==="WebGL2RenderingContext";let c=t.precision!==void 0?t.precision:"highp";const f=o(c);f!==c&&(console.warn("THREE.WebGLRenderer:",c,"not supported, using",f,"instead."),c=f);const d=l||e.has("WEBGL_draw_buffers"),m=t.logarithmicDepthBuffer===!0,v=s.getParameter(s.MAX_TEXTURE_IMAGE_UNITS),y=s.getParameter(s.MAX_VERTEX_TEXTURE_IMAGE_UNITS),M=s.getParameter(s.MAX_TEXTURE_SIZE),T=s.getParameter(s.MAX_CUBE_MAP_TEXTURE_SIZE),A=s.getParameter(s.MAX_VERTEX_ATTRIBS),E=s.getParameter(s.MAX_VERTEX_UNIFORM_VECTORS),b=s.getParameter(s.MAX_VARYING_VECTORS),z=s.getParameter(s.MAX_FRAGMENT_UNIFORM_VECTORS),I=y>0,H=l||e.has("OES_texture_float"),X=I&&H,G=l?s.getParameter(s.MAX_SAMPLES):0;return{isWebGL2:l,drawBuffers:d,getMaxAnisotropy:r,getMaxPrecision:o,precision:c,logarithmicDepthBuffer:m,maxTextures:v,maxVertexTextures:y,maxTextureSize:M,maxCubemapSize:T,maxAttributes:A,maxVertexUniforms:E,maxVaryings:b,maxFragmentUniforms:z,vertexTextures:I,floatFragmentTextures:H,floatVertexTextures:X,maxSamples:G}}function aM(s){const e=this;let t=null,n=0,r=!1,o=!1;const l=new so,c=new un,f={value:null,needsUpdate:!1};this.uniform=f,this.numPlanes=0,this.numIntersection=0,this.init=function(v,y){const M=v.length!==0||y||n!==0||r;return r=y,n=v.length,M},this.beginShadows=function(){o=!0,m(null)},this.endShadows=function(){o=!1},this.setGlobalState=function(v,y){t=m(v,y,0)},this.setState=function(v,y,M){const T=v.clippingPlanes,A=v.clipIntersection,E=v.clipShadows,b=s.get(v);if(!r||T===null||T.length===0||o&&!E)o?m(null):d();else{const z=o?0:n,I=z*4;let H=b.clippingState||null;f.value=H,H=m(T,y,I,M);for(let X=0;X!==I;++X)H[X]=t[X];b.clippingState=H,this.numIntersection=A?this.numPlanes:0,this.numPlanes+=z}};function d(){f.value!==t&&(f.value=t,f.needsUpdate=n>0),e.numPlanes=n,e.numIntersection=0}function m(v,y,M,T){const A=v!==null?v.length:0;let E=null;if(A!==0){if(E=f.value,T!==!0||E===null){const b=M+A*4,z=y.matrixWorldInverse;c.getNormalMatrix(z),(E===null||E.length<b)&&(E=new Float32Array(b));for(let I=0,H=M;I!==A;++I,H+=4)l.copy(v[I]).applyMatrix4(z,c),l.normal.toArray(E,H),E[H+3]=l.constant}f.value=E,f.needsUpdate=!0}return e.numPlanes=A,e.numIntersection=0,E}}function lM(s){let e=new WeakMap;function t(l,c){return c===Xu?l.mapping=za:c===ju&&(l.mapping=Ga),l}function n(l){if(l&&l.isTexture&&l.isRenderTargetTexture===!1){const c=l.mapping;if(c===Xu||c===ju)if(e.has(l)){const f=e.get(l).texture;return t(f,l.mapping)}else{const f=l.image;if(f&&f.height>0){const d=new wb(f.height/2);return d.fromEquirectangularTexture(s,l),e.set(l,d),l.addEventListener("dispose",r),t(d.texture,l.mapping)}else return null}}return l}function r(l){const c=l.target;c.removeEventListener("dispose",r);const f=e.get(c);f!==void 0&&(e.delete(c),f.dispose())}function o(){e=new WeakMap}return{get:n,dispose:o}}class gh extends Mf{constructor(e=-1,t=1,n=1,r=-1,o=.1,l=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=r,this.near=o,this.far=l,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,n,r,o,l){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=o,this.view.height=l,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let o=n-e,l=n+e,c=r+t,f=r-t;if(this.view!==null&&this.view.enabled){const d=(this.right-this.left)/this.view.fullWidth/this.zoom,m=(this.top-this.bottom)/this.view.fullHeight/this.zoom;o+=d*this.view.offsetX,l=o+d*this.view.width,c-=m*this.view.offsetY,f=c-m*this.view.height}this.projectionMatrix.makeOrthographic(o,l,c,f,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}const Da=4,ym=[.125,.215,.35,.446,.526,.582],Ho=20,xu=new gh,_m=new Yt;let yu=null;const Oo=(1+Math.sqrt(5))/2,Sa=1/Oo,bm=[new ce(1,1,1),new ce(-1,1,1),new ce(1,1,-1),new ce(-1,1,-1),new ce(0,Oo,Sa),new ce(0,Oo,-Sa),new ce(Sa,0,Oo),new ce(-Sa,0,Oo),new ce(Oo,Sa,0),new ce(-Oo,Sa,0)];class Ju{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,n=.1,r=100){yu=this._renderer.getRenderTarget(),this._setSize(256);const o=this._allocateTargets();return o.depthBuffer=!0,this._sceneToCubeUV(e,n,r,o),t>0&&this._blur(o,0,0,t),this._applyPMREM(o),this._cleanup(o),o}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=Em(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=Mm(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(yu),e.scissorTest=!1,Oc(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===za||e.mapping===Ga?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),yu=this._renderer.getRenderTarget();const n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:li,minFilter:li,generateMipmaps:!1,type:Fs,format:Cr,colorSpace:Di,depthBuffer:!1},r=wm(e,t,n);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=wm(e,t,n);const{_lodMax:o}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=cM(o)),this._blurMaterial=hM(o,e,t)}return r}_compileMaterial(e){const t=new $i(this._lodPlanes[0],e);this._renderer.compile(t,xu)}_sceneToCubeUV(e,t,n,r){const c=new Ri(90,1,t,n),f=[1,-1,1,1,1,1],d=[1,1,1,-1,-1,-1],m=this._renderer,v=m.autoClear,y=m.toneMapping;m.getClearColor(_m),m.toneMapping=Gs,m.autoClear=!1;const M=new zs({name:"PMREM.Background",side:ur,depthWrite:!1,depthTest:!1}),T=new $i(new Vl,M);let A=!1;const E=e.background;E?E.isColor&&(M.color.copy(E),e.background=null,A=!0):(M.color.copy(_m),A=!0);for(let b=0;b<6;b++){const z=b%3;z===0?(c.up.set(0,f[b],0),c.lookAt(d[b],0,0)):z===1?(c.up.set(0,0,f[b]),c.lookAt(0,d[b],0)):(c.up.set(0,f[b],0),c.lookAt(0,0,d[b]));const I=this._cubeSize;Oc(r,z*I,b>2?I:0,I,I),m.setRenderTarget(r),A&&m.render(T,c),m.render(e,c)}T.geometry.dispose(),T.material.dispose(),m.toneMapping=y,m.autoClear=v,e.background=E}_textureToCubeUV(e,t){const n=this._renderer,r=e.mapping===za||e.mapping===Ga;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=Em()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=Mm());const o=r?this._cubemapMaterial:this._equirectMaterial,l=new $i(this._lodPlanes[0],o),c=o.uniforms;c.envMap.value=e;const f=this._cubeSize;Oc(t,0,0,3*f,2*f),n.setRenderTarget(t),n.render(l,xu)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;for(let r=1;r<this._lodPlanes.length;r++){const o=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]),l=bm[(r-1)%bm.length];this._blur(e,r-1,r,o,l)}t.autoClear=n}_blur(e,t,n,r,o){const l=this._pingPongRenderTarget;this._halfBlur(e,l,t,n,r,"latitudinal",o),this._halfBlur(l,e,n,n,r,"longitudinal",o)}_halfBlur(e,t,n,r,o,l,c){const f=this._renderer,d=this._blurMaterial;l!=="latitudinal"&&l!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const m=3,v=new $i(this._lodPlanes[r],d),y=d.uniforms,M=this._sizeLods[n]-1,T=isFinite(o)?Math.PI/(2*M):2*Math.PI/(2*Ho-1),A=o/T,E=isFinite(o)?1+Math.floor(m*A):Ho;E>Ho&&console.warn(`sigmaRadians, ${o}, is too large and will clip, as it requested ${E} samples when the maximum is set to ${Ho}`);const b=[];let z=0;for(let g=0;g<Ho;++g){const oe=g/A,U=Math.exp(-oe*oe/2);b.push(U),g===0?z+=U:g<E&&(z+=2*U)}for(let g=0;g<b.length;g++)b[g]=b[g]/z;y.envMap.value=e.texture,y.samples.value=E,y.weights.value=b,y.latitudinal.value=l==="latitudinal",c&&(y.poleAxis.value=c);const{_lodMax:I}=this;y.dTheta.value=T,y.mipInt.value=I-n;const H=this._sizeLods[r],X=3*H*(r>I-Da?r-I+Da:0),G=4*(this._cubeSize-H);Oc(t,X,G,3*H,2*H),f.setRenderTarget(t),f.render(v,xu)}}function cM(s){const e=[],t=[],n=[];let r=s;const o=s-Da+1+ym.length;for(let l=0;l<o;l++){const c=Math.pow(2,r);t.push(c);let f=1/c;l>s-Da?f=ym[l-s+Da-1]:l===0&&(f=0),n.push(f);const d=1/(c-2),m=-d,v=1+d,y=[m,m,v,m,v,v,m,m,v,v,m,v],M=6,T=6,A=3,E=2,b=1,z=new Float32Array(A*T*M),I=new Float32Array(E*T*M),H=new Float32Array(b*T*M);for(let G=0;G<M;G++){const g=G%3*2/3-1,oe=G>2?0:-1,U=[g,oe,0,g+2/3,oe,0,g+2/3,oe+1,0,g,oe,0,g+2/3,oe+1,0,g,oe+1,0];z.set(U,A*T*G),I.set(y,E*T*G);const V=[G,G,G,G,G,G];H.set(V,b*T*G)}const X=new Or;X.setAttribute("position",new _i(z,A)),X.setAttribute("uv",new _i(I,E)),X.setAttribute("faceIndex",new _i(H,b)),e.push(X),r>Da&&r--}return{lodPlanes:e,sizeLods:t,sigmas:n}}function wm(s,e,t){const n=new $s(s,e,t);return n.texture.mapping=dh,n.texture.name="PMREM.cubeUv",n.scissorTest=!0,n}function Oc(s,e,t,n,r){s.viewport.set(e,t,n,r),s.scissor.set(e,t,n,r)}function hM(s,e,t){const n=new Float32Array(Ho),r=new ce(0,1,0);return new ws({name:"SphericalGaussianBlur",defines:{n:Ho,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${s}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:n},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:Sf(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:uo,depthTest:!1,depthWrite:!1})}function Mm(){return new ws({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:Sf(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:uo,depthTest:!1,depthWrite:!1})}function Em(){return new ws({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:Sf(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:uo,depthTest:!1,depthWrite:!1})}function Sf(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function uM(s){let e=new WeakMap,t=null;function n(c){if(c&&c.isTexture){const f=c.mapping,d=f===Xu||f===ju,m=f===za||f===Ga;if(d||m)if(c.isRenderTargetTexture&&c.needsPMREMUpdate===!0){c.needsPMREMUpdate=!1;let v=e.get(c);return t===null&&(t=new Ju(s)),v=d?t.fromEquirectangular(c,v):t.fromCubemap(c,v),e.set(c,v),v.texture}else{if(e.has(c))return e.get(c).texture;{const v=c.image;if(d&&v&&v.height>0||m&&v&&r(v)){t===null&&(t=new Ju(s));const y=d?t.fromEquirectangular(c):t.fromCubemap(c);return e.set(c,y),c.addEventListener("dispose",o),y.texture}else return null}}}return c}function r(c){let f=0;const d=6;for(let m=0;m<d;m++)c[m]!==void 0&&f++;return f===d}function o(c){const f=c.target;f.removeEventListener("dispose",o);const d=e.get(f);d!==void 0&&(e.delete(f),d.dispose())}function l(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:n,dispose:l}}function fM(s){const e={};function t(n){if(e[n]!==void 0)return e[n];let r;switch(n){case"WEBGL_depth_texture":r=s.getExtension("WEBGL_depth_texture")||s.getExtension("MOZ_WEBGL_depth_texture")||s.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=s.getExtension("EXT_texture_filter_anisotropic")||s.getExtension("MOZ_EXT_texture_filter_anisotropic")||s.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=s.getExtension("WEBGL_compressed_texture_s3tc")||s.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||s.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=s.getExtension("WEBGL_compressed_texture_pvrtc")||s.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=s.getExtension(n)}return e[n]=r,r}return{has:function(n){return t(n)!==null},init:function(n){n.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(n){const r=t(n);return r===null&&console.warn("THREE.WebGLRenderer: "+n+" extension not supported."),r}}}function dM(s,e,t,n){const r={},o=new WeakMap;function l(v){const y=v.target;y.index!==null&&e.remove(y.index);for(const T in y.attributes)e.remove(y.attributes[T]);for(const T in y.morphAttributes){const A=y.morphAttributes[T];for(let E=0,b=A.length;E<b;E++)e.remove(A[E])}y.removeEventListener("dispose",l),delete r[y.id];const M=o.get(y);M&&(e.remove(M),o.delete(y)),n.releaseStatesOfGeometry(y),y.isInstancedBufferGeometry===!0&&delete y._maxInstanceCount,t.memory.geometries--}function c(v,y){return r[y.id]===!0||(y.addEventListener("dispose",l),r[y.id]=!0,t.memory.geometries++),y}function f(v){const y=v.attributes;for(const T in y)e.update(y[T],s.ARRAY_BUFFER);const M=v.morphAttributes;for(const T in M){const A=M[T];for(let E=0,b=A.length;E<b;E++)e.update(A[E],s.ARRAY_BUFFER)}}function d(v){const y=[],M=v.index,T=v.attributes.position;let A=0;if(M!==null){const z=M.array;A=M.version;for(let I=0,H=z.length;I<H;I+=3){const X=z[I+0],G=z[I+1],g=z[I+2];y.push(X,G,G,g,g,X)}}else if(T!==void 0){const z=T.array;A=T.version;for(let I=0,H=z.length/3-1;I<H;I+=3){const X=I+0,G=I+1,g=I+2;y.push(X,G,G,g,g,X)}}else return;const E=new(l0(y)?p0:d0)(y,1);E.version=A;const b=o.get(v);b&&e.remove(b),o.set(v,E)}function m(v){const y=o.get(v);if(y){const M=v.index;M!==null&&y.version<M.version&&d(v)}else d(v);return o.get(v)}return{get:c,update:f,getWireframeAttribute:m}}function pM(s,e,t,n){const r=n.isWebGL2;let o;function l(y){o=y}let c,f;function d(y){c=y.type,f=y.bytesPerElement}function m(y,M){s.drawElements(o,M,c,y*f),t.update(M,o,1)}function v(y,M,T){if(T===0)return;let A,E;if(r)A=s,E="drawElementsInstanced";else if(A=e.get("ANGLE_instanced_arrays"),E="drawElementsInstancedANGLE",A===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}A[E](o,M,c,y*f,T),t.update(M,o,T)}this.setMode=l,this.setIndex=d,this.render=m,this.renderInstances=v}function mM(s){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function n(o,l,c){switch(t.calls++,l){case s.TRIANGLES:t.triangles+=c*(o/3);break;case s.LINES:t.lines+=c*(o/2);break;case s.LINE_STRIP:t.lines+=c*(o-1);break;case s.LINE_LOOP:t.lines+=c*o;break;case s.POINTS:t.points+=c*o;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",l);break}}function r(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:r,update:n}}function gM(s,e){return s[0]-e[0]}function vM(s,e){return Math.abs(e[1])-Math.abs(s[1])}function xM(s,e,t){const n={},r=new Float32Array(8),o=new WeakMap,l=new Bn,c=[];for(let d=0;d<8;d++)c[d]=[d,0];function f(d,m,v){const y=d.morphTargetInfluences;if(e.isWebGL2===!0){const T=m.morphAttributes.position||m.morphAttributes.normal||m.morphAttributes.color,A=T!==void 0?T.length:0;let E=o.get(m);if(E===void 0||E.count!==A){let me=function(){ve.dispose(),o.delete(m),m.removeEventListener("dispose",me)};var M=me;E!==void 0&&E.texture.dispose();const I=m.morphAttributes.position!==void 0,H=m.morphAttributes.normal!==void 0,X=m.morphAttributes.color!==void 0,G=m.morphAttributes.position||[],g=m.morphAttributes.normal||[],oe=m.morphAttributes.color||[];let U=0;I===!0&&(U=1),H===!0&&(U=2),X===!0&&(U=3);let V=m.attributes.position.count*U,Me=1;V>e.maxTextureSize&&(Me=Math.ceil(V/e.maxTextureSize),V=e.maxTextureSize);const Te=new Float32Array(V*Me*4*A),ve=new h0(Te,V,Me,A);ve.type=Lr,ve.needsUpdate=!0;const Z=U*4;for(let _e=0;_e<A;_e++){const fe=G[_e],Fe=g[_e],Ee=oe[_e],Le=V*Me*4*_e;for(let ge=0;ge<fe.count;ge++){const Ce=ge*Z;I===!0&&(l.fromBufferAttribute(fe,ge),Te[Le+Ce+0]=l.x,Te[Le+Ce+1]=l.y,Te[Le+Ce+2]=l.z,Te[Le+Ce+3]=0),H===!0&&(l.fromBufferAttribute(Fe,ge),Te[Le+Ce+4]=l.x,Te[Le+Ce+5]=l.y,Te[Le+Ce+6]=l.z,Te[Le+Ce+7]=0),X===!0&&(l.fromBufferAttribute(Ee,ge),Te[Le+Ce+8]=l.x,Te[Le+Ce+9]=l.y,Te[Le+Ce+10]=l.z,Te[Le+Ce+11]=Ee.itemSize===4?l.w:1)}}E={count:A,texture:ve,size:new Jt(V,Me)},o.set(m,E),m.addEventListener("dispose",me)}let b=0;for(let I=0;I<y.length;I++)b+=y[I];const z=m.morphTargetsRelative?1:1-b;v.getUniforms().setValue(s,"morphTargetBaseInfluence",z),v.getUniforms().setValue(s,"morphTargetInfluences",y),v.getUniforms().setValue(s,"morphTargetsTexture",E.texture,t),v.getUniforms().setValue(s,"morphTargetsTextureSize",E.size)}else{const T=y===void 0?0:y.length;let A=n[m.id];if(A===void 0||A.length!==T){A=[];for(let H=0;H<T;H++)A[H]=[H,0];n[m.id]=A}for(let H=0;H<T;H++){const X=A[H];X[0]=H,X[1]=y[H]}A.sort(vM);for(let H=0;H<8;H++)H<T&&A[H][1]?(c[H][0]=A[H][0],c[H][1]=A[H][1]):(c[H][0]=Number.MAX_SAFE_INTEGER,c[H][1]=0);c.sort(gM);const E=m.morphAttributes.position,b=m.morphAttributes.normal;let z=0;for(let H=0;H<8;H++){const X=c[H],G=X[0],g=X[1];G!==Number.MAX_SAFE_INTEGER&&g?(E&&m.getAttribute("morphTarget"+H)!==E[G]&&m.setAttribute("morphTarget"+H,E[G]),b&&m.getAttribute("morphNormal"+H)!==b[G]&&m.setAttribute("morphNormal"+H,b[G]),r[H]=g,z+=g):(E&&m.hasAttribute("morphTarget"+H)===!0&&m.deleteAttribute("morphTarget"+H),b&&m.hasAttribute("morphNormal"+H)===!0&&m.deleteAttribute("morphNormal"+H),r[H]=0)}const I=m.morphTargetsRelative?1:1-z;v.getUniforms().setValue(s,"morphTargetBaseInfluence",I),v.getUniforms().setValue(s,"morphTargetInfluences",r)}}return{update:f}}function yM(s,e,t,n){let r=new WeakMap;function o(f){const d=n.render.frame,m=f.geometry,v=e.get(f,m);if(r.get(v)!==d&&(e.update(v),r.set(v,d)),f.isInstancedMesh&&(f.hasEventListener("dispose",c)===!1&&f.addEventListener("dispose",c),r.get(f)!==d&&(t.update(f.instanceMatrix,s.ARRAY_BUFFER),f.instanceColor!==null&&t.update(f.instanceColor,s.ARRAY_BUFFER),r.set(f,d))),f.isSkinnedMesh){const y=f.skeleton;r.get(y)!==d&&(y.update(),r.set(y,d))}return v}function l(){r=new WeakMap}function c(f){const d=f.target;d.removeEventListener("dispose",c),t.remove(d.instanceMatrix),d.instanceColor!==null&&t.remove(d.instanceColor)}return{update:o,dispose:l}}const x0=new hi,y0=new h0,_0=new nb,b0=new g0,Sm=[],Tm=[],Am=new Float32Array(16),Cm=new Float32Array(9),Rm=new Float32Array(4);function Ka(s,e,t){const n=s[0];if(n<=0||n>0)return s;const r=e*t;let o=Sm[r];if(o===void 0&&(o=new Float32Array(r),Sm[r]=o),e!==0){n.toArray(o,0);for(let l=1,c=0;l!==e;++l)c+=t,s[l].toArray(o,c)}return o}function bi(s,e){if(s.length!==e.length)return!1;for(let t=0,n=s.length;t<n;t++)if(s[t]!==e[t])return!1;return!0}function wi(s,e){for(let t=0,n=e.length;t<n;t++)s[t]=e[t]}function vh(s,e){let t=Tm[e];t===void 0&&(t=new Int32Array(e),Tm[e]=t);for(let n=0;n!==e;++n)t[n]=s.allocateTextureUnit();return t}function _M(s,e){const t=this.cache;t[0]!==e&&(s.uniform1f(this.addr,e),t[0]=e)}function bM(s,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(s.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(bi(t,e))return;s.uniform2fv(this.addr,e),wi(t,e)}}function wM(s,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(s.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(s.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(bi(t,e))return;s.uniform3fv(this.addr,e),wi(t,e)}}function MM(s,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(s.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(bi(t,e))return;s.uniform4fv(this.addr,e),wi(t,e)}}function EM(s,e){const t=this.cache,n=e.elements;if(n===void 0){if(bi(t,e))return;s.uniformMatrix2fv(this.addr,!1,e),wi(t,e)}else{if(bi(t,n))return;Rm.set(n),s.uniformMatrix2fv(this.addr,!1,Rm),wi(t,n)}}function SM(s,e){const t=this.cache,n=e.elements;if(n===void 0){if(bi(t,e))return;s.uniformMatrix3fv(this.addr,!1,e),wi(t,e)}else{if(bi(t,n))return;Cm.set(n),s.uniformMatrix3fv(this.addr,!1,Cm),wi(t,n)}}function TM(s,e){const t=this.cache,n=e.elements;if(n===void 0){if(bi(t,e))return;s.uniformMatrix4fv(this.addr,!1,e),wi(t,e)}else{if(bi(t,n))return;Am.set(n),s.uniformMatrix4fv(this.addr,!1,Am),wi(t,n)}}function AM(s,e){const t=this.cache;t[0]!==e&&(s.uniform1i(this.addr,e),t[0]=e)}function CM(s,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(s.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(bi(t,e))return;s.uniform2iv(this.addr,e),wi(t,e)}}function RM(s,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(s.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(bi(t,e))return;s.uniform3iv(this.addr,e),wi(t,e)}}function LM(s,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(s.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(bi(t,e))return;s.uniform4iv(this.addr,e),wi(t,e)}}function DM(s,e){const t=this.cache;t[0]!==e&&(s.uniform1ui(this.addr,e),t[0]=e)}function PM(s,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(s.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(bi(t,e))return;s.uniform2uiv(this.addr,e),wi(t,e)}}function IM(s,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(s.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(bi(t,e))return;s.uniform3uiv(this.addr,e),wi(t,e)}}function NM(s,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(s.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(bi(t,e))return;s.uniform4uiv(this.addr,e),wi(t,e)}}function UM(s,e,t){const n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(s.uniform1i(this.addr,r),n[0]=r),t.setTexture2D(e||x0,r)}function OM(s,e,t){const n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(s.uniform1i(this.addr,r),n[0]=r),t.setTexture3D(e||_0,r)}function kM(s,e,t){const n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(s.uniform1i(this.addr,r),n[0]=r),t.setTextureCube(e||b0,r)}function BM(s,e,t){const n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(s.uniform1i(this.addr,r),n[0]=r),t.setTexture2DArray(e||y0,r)}function FM(s){switch(s){case 5126:return _M;case 35664:return bM;case 35665:return wM;case 35666:return MM;case 35674:return EM;case 35675:return SM;case 35676:return TM;case 5124:case 35670:return AM;case 35667:case 35671:return CM;case 35668:case 35672:return RM;case 35669:case 35673:return LM;case 5125:return DM;case 36294:return PM;case 36295:return IM;case 36296:return NM;case 35678:case 36198:case 36298:case 36306:case 35682:return UM;case 35679:case 36299:case 36307:return OM;case 35680:case 36300:case 36308:case 36293:return kM;case 36289:case 36303:case 36311:case 36292:return BM}}function HM(s,e){s.uniform1fv(this.addr,e)}function zM(s,e){const t=Ka(e,this.size,2);s.uniform2fv(this.addr,t)}function GM(s,e){const t=Ka(e,this.size,3);s.uniform3fv(this.addr,t)}function VM(s,e){const t=Ka(e,this.size,4);s.uniform4fv(this.addr,t)}function WM(s,e){const t=Ka(e,this.size,4);s.uniformMatrix2fv(this.addr,!1,t)}function $M(s,e){const t=Ka(e,this.size,9);s.uniformMatrix3fv(this.addr,!1,t)}function XM(s,e){const t=Ka(e,this.size,16);s.uniformMatrix4fv(this.addr,!1,t)}function jM(s,e){s.uniform1iv(this.addr,e)}function YM(s,e){s.uniform2iv(this.addr,e)}function qM(s,e){s.uniform3iv(this.addr,e)}function ZM(s,e){s.uniform4iv(this.addr,e)}function KM(s,e){s.uniform1uiv(this.addr,e)}function JM(s,e){s.uniform2uiv(this.addr,e)}function QM(s,e){s.uniform3uiv(this.addr,e)}function eE(s,e){s.uniform4uiv(this.addr,e)}function tE(s,e,t){const n=this.cache,r=e.length,o=vh(t,r);bi(n,o)||(s.uniform1iv(this.addr,o),wi(n,o));for(let l=0;l!==r;++l)t.setTexture2D(e[l]||x0,o[l])}function nE(s,e,t){const n=this.cache,r=e.length,o=vh(t,r);bi(n,o)||(s.uniform1iv(this.addr,o),wi(n,o));for(let l=0;l!==r;++l)t.setTexture3D(e[l]||_0,o[l])}function iE(s,e,t){const n=this.cache,r=e.length,o=vh(t,r);bi(n,o)||(s.uniform1iv(this.addr,o),wi(n,o));for(let l=0;l!==r;++l)t.setTextureCube(e[l]||b0,o[l])}function rE(s,e,t){const n=this.cache,r=e.length,o=vh(t,r);bi(n,o)||(s.uniform1iv(this.addr,o),wi(n,o));for(let l=0;l!==r;++l)t.setTexture2DArray(e[l]||y0,o[l])}function sE(s){switch(s){case 5126:return HM;case 35664:return zM;case 35665:return GM;case 35666:return VM;case 35674:return WM;case 35675:return $M;case 35676:return XM;case 5124:case 35670:return jM;case 35667:case 35671:return YM;case 35668:case 35672:return qM;case 35669:case 35673:return ZM;case 5125:return KM;case 36294:return JM;case 36295:return QM;case 36296:return eE;case 35678:case 36198:case 36298:case 36306:case 35682:return tE;case 35679:case 36299:case 36307:return nE;case 35680:case 36300:case 36308:case 36293:return iE;case 36289:case 36303:case 36311:case 36292:return rE}}class oE{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.setValue=FM(t.type)}}class aE{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.size=t.size,this.setValue=sE(t.type)}}class lE{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,n){const r=this.seq;for(let o=0,l=r.length;o!==l;++o){const c=r[o];c.setValue(e,t[c.id],n)}}}const _u=/(\w+)(\])?(\[|\.)?/g;function Lm(s,e){s.seq.push(e),s.map[e.id]=e}function cE(s,e,t){const n=s.name,r=n.length;for(_u.lastIndex=0;;){const o=_u.exec(n),l=_u.lastIndex;let c=o[1];const f=o[2]==="]",d=o[3];if(f&&(c=c|0),d===void 0||d==="["&&l+2===r){Lm(t,d===void 0?new oE(c,s,e):new aE(c,s,e));break}else{let v=t.map[c];v===void 0&&(v=new lE(c),Lm(t,v)),t=v}}}class Kc{constructor(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<n;++r){const o=e.getActiveUniform(t,r),l=e.getUniformLocation(t,o.name);cE(o,l,this)}}setValue(e,t,n,r){const o=this.map[t];o!==void 0&&o.setValue(e,n,r)}setOptional(e,t,n){const r=t[n];r!==void 0&&this.setValue(e,n,r)}static upload(e,t,n,r){for(let o=0,l=t.length;o!==l;++o){const c=t[o],f=n[c.id];f.needsUpdate!==!1&&c.setValue(e,f.value,r)}}static seqWithValue(e,t){const n=[];for(let r=0,o=e.length;r!==o;++r){const l=e[r];l.id in t&&n.push(l)}return n}}function Dm(s,e,t){const n=s.createShader(e);return s.shaderSource(n,t),s.compileShader(n),n}let hE=0;function uE(s,e){const t=s.split(`
`),n=[],r=Math.max(e-6,0),o=Math.min(e+6,t.length);for(let l=r;l<o;l++){const c=l+1;n.push(`${c===e?">":" "} ${c}: ${t[l]}`)}return n.join(`
`)}function fE(s){const e=Dn.getPrimaries(Dn.workingColorSpace),t=Dn.getPrimaries(s);let n;switch(e===t?n="":e===ih&&t===nh?n="LinearDisplayP3ToLinearSRGB":e===nh&&t===ih&&(n="LinearSRGBToLinearDisplayP3"),s){case Di:case ph:return[n,"LinearTransferOETF"];case An:case _f:return[n,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",s),[n,"LinearTransferOETF"]}}function Pm(s,e,t){const n=s.getShaderParameter(e,s.COMPILE_STATUS),r=s.getShaderInfoLog(e).trim();if(n&&r==="")return"";const o=/ERROR: 0:(\d+)/.exec(r);if(o){const l=parseInt(o[1]);return t.toUpperCase()+`

`+r+`

`+uE(s.getShaderSource(e),l)}else return r}function dE(s,e){const t=fE(e);return`vec4 ${s}( vec4 value ) { return ${t[0]}( ${t[1]}( value ) ); }`}function pE(s,e){let t;switch(e){case qg:t="Linear";break;case d_:t="Reinhard";break;case Zg:t="OptimizedCineon";break;case vf:t="ACESFilmic";break;case p_:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+s+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function mE(s){return[s.extensionDerivatives||s.envMapCubeUVHeight||s.bumpMap||s.normalMapTangentSpace||s.clearcoatNormalMap||s.flatShading||s.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(s.extensionFragDepth||s.logarithmicDepthBuffer)&&s.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",s.extensionDrawBuffers&&s.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(s.extensionShaderTextureLOD||s.envMap||s.transmission)&&s.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Tl).join(`
`)}function gE(s){const e=[];for(const t in s){const n=s[t];n!==!1&&e.push("#define "+t+" "+n)}return e.join(`
`)}function vE(s,e){const t={},n=s.getProgramParameter(e,s.ACTIVE_ATTRIBUTES);for(let r=0;r<n;r++){const o=s.getActiveAttrib(e,r),l=o.name;let c=1;o.type===s.FLOAT_MAT2&&(c=2),o.type===s.FLOAT_MAT3&&(c=3),o.type===s.FLOAT_MAT4&&(c=4),t[l]={type:o.type,location:s.getAttribLocation(e,l),locationSize:c}}return t}function Tl(s){return s!==""}function Im(s,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return s.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function Nm(s,e){return s.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const xE=/^[ \t]*#include +<([\w\d./]+)>/gm;function Qu(s){return s.replace(xE,_E)}const yE=new Map([["encodings_fragment","colorspace_fragment"],["encodings_pars_fragment","colorspace_pars_fragment"],["output_fragment","opaque_fragment"]]);function _E(s,e){let t=cn[e];if(t===void 0){const n=yE.get(e);if(n!==void 0)t=cn[n],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,n);else throw new Error("Can not resolve #include <"+e+">")}return Qu(t)}const bE=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function Um(s){return s.replace(bE,wE)}function wE(s,e,t,n){let r="";for(let o=parseInt(e);o<parseInt(t);o++)r+=n.replace(/\[\s*i\s*\]/g,"[ "+o+" ]").replace(/UNROLLED_LOOP_INDEX/g,o);return r}function Om(s){let e="precision "+s.precision+` float;
precision `+s.precision+" int;";return s.precision==="highp"?e+=`
#define HIGH_PRECISION`:s.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:s.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function ME(s){let e="SHADOWMAP_TYPE_BASIC";return s.shadowMapType===$g?e="SHADOWMAP_TYPE_PCF":s.shadowMapType===$y?e="SHADOWMAP_TYPE_PCF_SOFT":s.shadowMapType===ks&&(e="SHADOWMAP_TYPE_VSM"),e}function EE(s){let e="ENVMAP_TYPE_CUBE";if(s.envMap)switch(s.envMapMode){case za:case Ga:e="ENVMAP_TYPE_CUBE";break;case dh:e="ENVMAP_TYPE_CUBE_UV";break}return e}function SE(s){let e="ENVMAP_MODE_REFLECTION";if(s.envMap)switch(s.envMapMode){case Ga:e="ENVMAP_MODE_REFRACTION";break}return e}function TE(s){let e="ENVMAP_BLENDING_NONE";if(s.envMap)switch(s.combine){case Yg:e="ENVMAP_BLENDING_MULTIPLY";break;case u_:e="ENVMAP_BLENDING_MIX";break;case f_:e="ENVMAP_BLENDING_ADD";break}return e}function AE(s){const e=s.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,n=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:n,maxMip:t}}function CE(s,e,t,n){const r=s.getContext(),o=t.defines;let l=t.vertexShader,c=t.fragmentShader;const f=ME(t),d=EE(t),m=SE(t),v=TE(t),y=AE(t),M=t.isWebGL2?"":mE(t),T=gE(o),A=r.createProgram();let E,b,z=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(E=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,T].filter(Tl).join(`
`),E.length>0&&(E+=`
`),b=[M,"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,T].filter(Tl).join(`
`),b.length>0&&(b+=`
`)):(E=[Om(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,T,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+m:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+f:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Tl).join(`
`),b=[M,Om(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,T,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+d:"",t.envMap?"#define "+m:"",t.envMap?"#define "+v:"",y?"#define CUBEUV_TEXEL_WIDTH "+y.texelWidth:"",y?"#define CUBEUV_TEXEL_HEIGHT "+y.texelHeight:"",y?"#define CUBEUV_MAX_MIP "+y.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+f:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==Gs?"#define TONE_MAPPING":"",t.toneMapping!==Gs?cn.tonemapping_pars_fragment:"",t.toneMapping!==Gs?pE("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",cn.colorspace_pars_fragment,dE("linearToOutputTexel",t.outputColorSpace),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(Tl).join(`
`)),l=Qu(l),l=Im(l,t),l=Nm(l,t),c=Qu(c),c=Im(c,t),c=Nm(c,t),l=Um(l),c=Um(c),t.isWebGL2&&t.isRawShaderMaterial!==!0&&(z=`#version 300 es
`,E=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+E,b=["#define varying in",t.glslVersion===tm?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===tm?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+b);const I=z+E+l,H=z+b+c,X=Dm(r,r.VERTEX_SHADER,I),G=Dm(r,r.FRAGMENT_SHADER,H);if(r.attachShader(A,X),r.attachShader(A,G),t.index0AttributeName!==void 0?r.bindAttribLocation(A,0,t.index0AttributeName):t.morphTargets===!0&&r.bindAttribLocation(A,0,"position"),r.linkProgram(A),s.debug.checkShaderErrors){const U=r.getProgramInfoLog(A).trim(),V=r.getShaderInfoLog(X).trim(),Me=r.getShaderInfoLog(G).trim();let Te=!0,ve=!0;if(r.getProgramParameter(A,r.LINK_STATUS)===!1)if(Te=!1,typeof s.debug.onShaderError=="function")s.debug.onShaderError(r,A,X,G);else{const Z=Pm(r,X,"vertex"),me=Pm(r,G,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(A,r.VALIDATE_STATUS)+`

Program Info Log: `+U+`
`+Z+`
`+me)}else U!==""?console.warn("THREE.WebGLProgram: Program Info Log:",U):(V===""||Me==="")&&(ve=!1);ve&&(this.diagnostics={runnable:Te,programLog:U,vertexShader:{log:V,prefix:E},fragmentShader:{log:Me,prefix:b}})}r.deleteShader(X),r.deleteShader(G);let g;this.getUniforms=function(){return g===void 0&&(g=new Kc(r,A)),g};let oe;return this.getAttributes=function(){return oe===void 0&&(oe=vE(r,A)),oe},this.destroy=function(){n.releaseStatesOfProgram(this),r.deleteProgram(A),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=hE++,this.cacheKey=e,this.usedTimes=1,this.program=A,this.vertexShader=X,this.fragmentShader=G,this}let RE=0;class LE{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,n=e.fragmentShader,r=this._getShaderStage(t),o=this._getShaderStage(n),l=this._getShaderCacheForMaterial(e);return l.has(r)===!1&&(l.add(r),r.usedTimes++),l.has(o)===!1&&(l.add(o),o.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const n of t)n.usedTimes--,n.usedTimes===0&&this.shaderCache.delete(n.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let n=t.get(e);return n===void 0&&(n=new Set,t.set(e,n)),n}_getShaderStage(e){const t=this.shaderCache;let n=t.get(e);return n===void 0&&(n=new DE(e),t.set(e,n)),n}}class DE{constructor(e){this.id=RE++,this.code=e,this.usedTimes=0}}function PE(s,e,t,n,r,o,l){const c=new u0,f=new LE,d=[],m=r.isWebGL2,v=r.logarithmicDepthBuffer,y=r.vertexTextures;let M=r.precision;const T={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function A(U){return U===0?"uv":`uv${U}`}function E(U,V,Me,Te,ve){const Z=Te.fog,me=ve.geometry,_e=U.isMeshStandardMaterial?Te.environment:null,fe=(U.isMeshStandardMaterial?t:e).get(U.envMap||_e),Fe=fe&&fe.mapping===dh?fe.image.height:null,Ee=T[U.type];U.precision!==null&&(M=r.getMaxPrecision(U.precision),M!==U.precision&&console.warn("THREE.WebGLProgram.getParameters:",U.precision,"not supported, using",M,"instead."));const Le=me.morphAttributes.position||me.morphAttributes.normal||me.morphAttributes.color,ge=Le!==void 0?Le.length:0;let Ce=0;me.morphAttributes.position!==void 0&&(Ce=1),me.morphAttributes.normal!==void 0&&(Ce=2),me.morphAttributes.color!==void 0&&(Ce=3);let Je,nt,ut,bt;if(Ee){const xn=ms[Ee];Je=xn.vertexShader,nt=xn.fragmentShader}else Je=U.vertexShader,nt=U.fragmentShader,f.update(U),ut=f.getVertexShaderID(U),bt=f.getFragmentShaderID(U);const It=s.getRenderTarget(),St=ve.isInstancedMesh===!0,Rt=!!U.map,Mt=!!U.matcap,Ft=!!fe,xe=!!U.aoMap,Mn=!!U.lightMap,Tt=!!U.bumpMap,Gt=!!U.normalMap,Lt=!!U.displacementMap,qt=!!U.emissiveMap,wt=!!U.metalnessMap,Ge=!!U.roughnessMap,Vt=U.anisotropy>0,Cn=U.clearcoat>0,Xt=U.iridescence>0,W=U.sheen>0,k=U.transmission>0,se=Vt&&!!U.anisotropyMap,Ye=Cn&&!!U.clearcoatMap,Ne=Cn&&!!U.clearcoatNormalMap,Xe=Cn&&!!U.clearcoatRoughnessMap,vt=Xt&&!!U.iridescenceMap,it=Xt&&!!U.iridescenceThicknessMap,ht=W&&!!U.sheenColorMap,Q=W&&!!U.sheenRoughnessMap,Ze=!!U.specularMap,ze=!!U.specularColorMap,et=!!U.specularIntensityMap,_t=k&&!!U.transmissionMap,tt=k&&!!U.thicknessMap,pt=!!U.gradientMap,K=!!U.alphaMap,je=U.alphaTest>0,Ie=!!U.alphaHash,rt=!!U.extensions,We=!!me.attributes.uv1,Ue=!!me.attributes.uv2,qe=!!me.attributes.uv3;let xt=Gs;return U.toneMapped&&(It===null||It.isXRRenderTarget===!0)&&(xt=s.toneMapping),{isWebGL2:m,shaderID:Ee,shaderType:U.type,shaderName:U.name,vertexShader:Je,fragmentShader:nt,defines:U.defines,customVertexShaderID:ut,customFragmentShaderID:bt,isRawShaderMaterial:U.isRawShaderMaterial===!0,glslVersion:U.glslVersion,precision:M,instancing:St,instancingColor:St&&ve.instanceColor!==null,supportsVertexTextures:y,outputColorSpace:It===null?s.outputColorSpace:It.isXRRenderTarget===!0?It.texture.colorSpace:Di,map:Rt,matcap:Mt,envMap:Ft,envMapMode:Ft&&fe.mapping,envMapCubeUVHeight:Fe,aoMap:xe,lightMap:Mn,bumpMap:Tt,normalMap:Gt,displacementMap:y&&Lt,emissiveMap:qt,normalMapObjectSpace:Gt&&U.normalMapType===C_,normalMapTangentSpace:Gt&&U.normalMapType===o0,metalnessMap:wt,roughnessMap:Ge,anisotropy:Vt,anisotropyMap:se,clearcoat:Cn,clearcoatMap:Ye,clearcoatNormalMap:Ne,clearcoatRoughnessMap:Xe,iridescence:Xt,iridescenceMap:vt,iridescenceThicknessMap:it,sheen:W,sheenColorMap:ht,sheenRoughnessMap:Q,specularMap:Ze,specularColorMap:ze,specularIntensityMap:et,transmission:k,transmissionMap:_t,thicknessMap:tt,gradientMap:pt,opaque:U.transparent===!1&&U.blending===Na,alphaMap:K,alphaTest:je,alphaHash:Ie,combine:U.combine,mapUv:Rt&&A(U.map.channel),aoMapUv:xe&&A(U.aoMap.channel),lightMapUv:Mn&&A(U.lightMap.channel),bumpMapUv:Tt&&A(U.bumpMap.channel),normalMapUv:Gt&&A(U.normalMap.channel),displacementMapUv:Lt&&A(U.displacementMap.channel),emissiveMapUv:qt&&A(U.emissiveMap.channel),metalnessMapUv:wt&&A(U.metalnessMap.channel),roughnessMapUv:Ge&&A(U.roughnessMap.channel),anisotropyMapUv:se&&A(U.anisotropyMap.channel),clearcoatMapUv:Ye&&A(U.clearcoatMap.channel),clearcoatNormalMapUv:Ne&&A(U.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Xe&&A(U.clearcoatRoughnessMap.channel),iridescenceMapUv:vt&&A(U.iridescenceMap.channel),iridescenceThicknessMapUv:it&&A(U.iridescenceThicknessMap.channel),sheenColorMapUv:ht&&A(U.sheenColorMap.channel),sheenRoughnessMapUv:Q&&A(U.sheenRoughnessMap.channel),specularMapUv:Ze&&A(U.specularMap.channel),specularColorMapUv:ze&&A(U.specularColorMap.channel),specularIntensityMapUv:et&&A(U.specularIntensityMap.channel),transmissionMapUv:_t&&A(U.transmissionMap.channel),thicknessMapUv:tt&&A(U.thicknessMap.channel),alphaMapUv:K&&A(U.alphaMap.channel),vertexTangents:!!me.attributes.tangent&&(Gt||Vt),vertexColors:U.vertexColors,vertexAlphas:U.vertexColors===!0&&!!me.attributes.color&&me.attributes.color.itemSize===4,vertexUv1s:We,vertexUv2s:Ue,vertexUv3s:qe,pointsUvs:ve.isPoints===!0&&!!me.attributes.uv&&(Rt||K),fog:!!Z,useFog:U.fog===!0,fogExp2:Z&&Z.isFogExp2,flatShading:U.flatShading===!0,sizeAttenuation:U.sizeAttenuation===!0,logarithmicDepthBuffer:v,skinning:ve.isSkinnedMesh===!0,morphTargets:me.morphAttributes.position!==void 0,morphNormals:me.morphAttributes.normal!==void 0,morphColors:me.morphAttributes.color!==void 0,morphTargetsCount:ge,morphTextureStride:Ce,numDirLights:V.directional.length,numPointLights:V.point.length,numSpotLights:V.spot.length,numSpotLightMaps:V.spotLightMap.length,numRectAreaLights:V.rectArea.length,numHemiLights:V.hemi.length,numDirLightShadows:V.directionalShadowMap.length,numPointLightShadows:V.pointShadowMap.length,numSpotLightShadows:V.spotShadowMap.length,numSpotLightShadowsWithMaps:V.numSpotLightShadowsWithMaps,numLightProbes:V.numLightProbes,numClippingPlanes:l.numPlanes,numClipIntersection:l.numIntersection,dithering:U.dithering,shadowMapEnabled:s.shadowMap.enabled&&Me.length>0,shadowMapType:s.shadowMap.type,toneMapping:xt,useLegacyLights:s._useLegacyLights,decodeVideoTexture:Rt&&U.map.isVideoTexture===!0&&Dn.getTransfer(U.map.colorSpace)===Wn,premultipliedAlpha:U.premultipliedAlpha,doubleSided:U.side===ss,flipSided:U.side===ur,useDepthPacking:U.depthPacking>=0,depthPacking:U.depthPacking||0,index0AttributeName:U.index0AttributeName,extensionDerivatives:rt&&U.extensions.derivatives===!0,extensionFragDepth:rt&&U.extensions.fragDepth===!0,extensionDrawBuffers:rt&&U.extensions.drawBuffers===!0,extensionShaderTextureLOD:rt&&U.extensions.shaderTextureLOD===!0,rendererExtensionFragDepth:m||n.has("EXT_frag_depth"),rendererExtensionDrawBuffers:m||n.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:m||n.has("EXT_shader_texture_lod"),customProgramCacheKey:U.customProgramCacheKey()}}function b(U){const V=[];if(U.shaderID?V.push(U.shaderID):(V.push(U.customVertexShaderID),V.push(U.customFragmentShaderID)),U.defines!==void 0)for(const Me in U.defines)V.push(Me),V.push(U.defines[Me]);return U.isRawShaderMaterial===!1&&(z(V,U),I(V,U),V.push(s.outputColorSpace)),V.push(U.customProgramCacheKey),V.join()}function z(U,V){U.push(V.precision),U.push(V.outputColorSpace),U.push(V.envMapMode),U.push(V.envMapCubeUVHeight),U.push(V.mapUv),U.push(V.alphaMapUv),U.push(V.lightMapUv),U.push(V.aoMapUv),U.push(V.bumpMapUv),U.push(V.normalMapUv),U.push(V.displacementMapUv),U.push(V.emissiveMapUv),U.push(V.metalnessMapUv),U.push(V.roughnessMapUv),U.push(V.anisotropyMapUv),U.push(V.clearcoatMapUv),U.push(V.clearcoatNormalMapUv),U.push(V.clearcoatRoughnessMapUv),U.push(V.iridescenceMapUv),U.push(V.iridescenceThicknessMapUv),U.push(V.sheenColorMapUv),U.push(V.sheenRoughnessMapUv),U.push(V.specularMapUv),U.push(V.specularColorMapUv),U.push(V.specularIntensityMapUv),U.push(V.transmissionMapUv),U.push(V.thicknessMapUv),U.push(V.combine),U.push(V.fogExp2),U.push(V.sizeAttenuation),U.push(V.morphTargetsCount),U.push(V.morphAttributeCount),U.push(V.numDirLights),U.push(V.numPointLights),U.push(V.numSpotLights),U.push(V.numSpotLightMaps),U.push(V.numHemiLights),U.push(V.numRectAreaLights),U.push(V.numDirLightShadows),U.push(V.numPointLightShadows),U.push(V.numSpotLightShadows),U.push(V.numSpotLightShadowsWithMaps),U.push(V.numLightProbes),U.push(V.shadowMapType),U.push(V.toneMapping),U.push(V.numClippingPlanes),U.push(V.numClipIntersection),U.push(V.depthPacking)}function I(U,V){c.disableAll(),V.isWebGL2&&c.enable(0),V.supportsVertexTextures&&c.enable(1),V.instancing&&c.enable(2),V.instancingColor&&c.enable(3),V.matcap&&c.enable(4),V.envMap&&c.enable(5),V.normalMapObjectSpace&&c.enable(6),V.normalMapTangentSpace&&c.enable(7),V.clearcoat&&c.enable(8),V.iridescence&&c.enable(9),V.alphaTest&&c.enable(10),V.vertexColors&&c.enable(11),V.vertexAlphas&&c.enable(12),V.vertexUv1s&&c.enable(13),V.vertexUv2s&&c.enable(14),V.vertexUv3s&&c.enable(15),V.vertexTangents&&c.enable(16),V.anisotropy&&c.enable(17),U.push(c.mask),c.disableAll(),V.fog&&c.enable(0),V.useFog&&c.enable(1),V.flatShading&&c.enable(2),V.logarithmicDepthBuffer&&c.enable(3),V.skinning&&c.enable(4),V.morphTargets&&c.enable(5),V.morphNormals&&c.enable(6),V.morphColors&&c.enable(7),V.premultipliedAlpha&&c.enable(8),V.shadowMapEnabled&&c.enable(9),V.useLegacyLights&&c.enable(10),V.doubleSided&&c.enable(11),V.flipSided&&c.enable(12),V.useDepthPacking&&c.enable(13),V.dithering&&c.enable(14),V.transmission&&c.enable(15),V.sheen&&c.enable(16),V.opaque&&c.enable(17),V.pointsUvs&&c.enable(18),V.decodeVideoTexture&&c.enable(19),U.push(c.mask)}function H(U){const V=T[U.type];let Me;if(V){const Te=ms[V];Me=xb.clone(Te.uniforms)}else Me=U.uniforms;return Me}function X(U,V){let Me;for(let Te=0,ve=d.length;Te<ve;Te++){const Z=d[Te];if(Z.cacheKey===V){Me=Z,++Me.usedTimes;break}}return Me===void 0&&(Me=new CE(s,V,U,o),d.push(Me)),Me}function G(U){if(--U.usedTimes===0){const V=d.indexOf(U);d[V]=d[d.length-1],d.pop(),U.destroy()}}function g(U){f.remove(U)}function oe(){f.dispose()}return{getParameters:E,getProgramCacheKey:b,getUniforms:H,acquireProgram:X,releaseProgram:G,releaseShaderCache:g,programs:d,dispose:oe}}function IE(){let s=new WeakMap;function e(o){let l=s.get(o);return l===void 0&&(l={},s.set(o,l)),l}function t(o){s.delete(o)}function n(o,l,c){s.get(o)[l]=c}function r(){s=new WeakMap}return{get:e,remove:t,update:n,dispose:r}}function NE(s,e){return s.groupOrder!==e.groupOrder?s.groupOrder-e.groupOrder:s.renderOrder!==e.renderOrder?s.renderOrder-e.renderOrder:s.material.id!==e.material.id?s.material.id-e.material.id:s.z!==e.z?s.z-e.z:s.id-e.id}function km(s,e){return s.groupOrder!==e.groupOrder?s.groupOrder-e.groupOrder:s.renderOrder!==e.renderOrder?s.renderOrder-e.renderOrder:s.z!==e.z?e.z-s.z:s.id-e.id}function Bm(){const s=[];let e=0;const t=[],n=[],r=[];function o(){e=0,t.length=0,n.length=0,r.length=0}function l(v,y,M,T,A,E){let b=s[e];return b===void 0?(b={id:v.id,object:v,geometry:y,material:M,groupOrder:T,renderOrder:v.renderOrder,z:A,group:E},s[e]=b):(b.id=v.id,b.object=v,b.geometry=y,b.material=M,b.groupOrder=T,b.renderOrder=v.renderOrder,b.z=A,b.group=E),e++,b}function c(v,y,M,T,A,E){const b=l(v,y,M,T,A,E);M.transmission>0?n.push(b):M.transparent===!0?r.push(b):t.push(b)}function f(v,y,M,T,A,E){const b=l(v,y,M,T,A,E);M.transmission>0?n.unshift(b):M.transparent===!0?r.unshift(b):t.unshift(b)}function d(v,y){t.length>1&&t.sort(v||NE),n.length>1&&n.sort(y||km),r.length>1&&r.sort(y||km)}function m(){for(let v=e,y=s.length;v<y;v++){const M=s[v];if(M.id===null)break;M.id=null,M.object=null,M.geometry=null,M.material=null,M.group=null}}return{opaque:t,transmissive:n,transparent:r,init:o,push:c,unshift:f,finish:m,sort:d}}function UE(){let s=new WeakMap;function e(n,r){const o=s.get(n);let l;return o===void 0?(l=new Bm,s.set(n,[l])):r>=o.length?(l=new Bm,o.push(l)):l=o[r],l}function t(){s=new WeakMap}return{get:e,dispose:t}}function OE(){const s={};return{get:function(e){if(s[e.id]!==void 0)return s[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new ce,color:new Yt};break;case"SpotLight":t={position:new ce,direction:new ce,color:new Yt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new ce,color:new Yt,distance:0,decay:0};break;case"HemisphereLight":t={direction:new ce,skyColor:new Yt,groundColor:new Yt};break;case"RectAreaLight":t={color:new Yt,position:new ce,halfWidth:new ce,halfHeight:new ce};break}return s[e.id]=t,t}}}function kE(){const s={};return{get:function(e){if(s[e.id]!==void 0)return s[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Jt};break;case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Jt};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Jt,shadowCameraNear:1,shadowCameraFar:1e3};break}return s[e.id]=t,t}}}let BE=0;function FE(s,e){return(e.castShadow?2:0)-(s.castShadow?2:0)+(e.map?1:0)-(s.map?1:0)}function HE(s,e){const t=new OE,n=kE(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let m=0;m<9;m++)r.probe.push(new ce);const o=new ce,l=new hn,c=new hn;function f(m,v){let y=0,M=0,T=0;for(let Te=0;Te<9;Te++)r.probe[Te].set(0,0,0);let A=0,E=0,b=0,z=0,I=0,H=0,X=0,G=0,g=0,oe=0,U=0;m.sort(FE);const V=v===!0?Math.PI:1;for(let Te=0,ve=m.length;Te<ve;Te++){const Z=m[Te],me=Z.color,_e=Z.intensity,fe=Z.distance,Fe=Z.shadow&&Z.shadow.map?Z.shadow.map.texture:null;if(Z.isAmbientLight)y+=me.r*_e*V,M+=me.g*_e*V,T+=me.b*_e*V;else if(Z.isLightProbe){for(let Ee=0;Ee<9;Ee++)r.probe[Ee].addScaledVector(Z.sh.coefficients[Ee],_e);U++}else if(Z.isDirectionalLight){const Ee=t.get(Z);if(Ee.color.copy(Z.color).multiplyScalar(Z.intensity*V),Z.castShadow){const Le=Z.shadow,ge=n.get(Z);ge.shadowBias=Le.bias,ge.shadowNormalBias=Le.normalBias,ge.shadowRadius=Le.radius,ge.shadowMapSize=Le.mapSize,r.directionalShadow[A]=ge,r.directionalShadowMap[A]=Fe,r.directionalShadowMatrix[A]=Z.shadow.matrix,H++}r.directional[A]=Ee,A++}else if(Z.isSpotLight){const Ee=t.get(Z);Ee.position.setFromMatrixPosition(Z.matrixWorld),Ee.color.copy(me).multiplyScalar(_e*V),Ee.distance=fe,Ee.coneCos=Math.cos(Z.angle),Ee.penumbraCos=Math.cos(Z.angle*(1-Z.penumbra)),Ee.decay=Z.decay,r.spot[b]=Ee;const Le=Z.shadow;if(Z.map&&(r.spotLightMap[g]=Z.map,g++,Le.updateMatrices(Z),Z.castShadow&&oe++),r.spotLightMatrix[b]=Le.matrix,Z.castShadow){const ge=n.get(Z);ge.shadowBias=Le.bias,ge.shadowNormalBias=Le.normalBias,ge.shadowRadius=Le.radius,ge.shadowMapSize=Le.mapSize,r.spotShadow[b]=ge,r.spotShadowMap[b]=Fe,G++}b++}else if(Z.isRectAreaLight){const Ee=t.get(Z);Ee.color.copy(me).multiplyScalar(_e),Ee.halfWidth.set(Z.width*.5,0,0),Ee.halfHeight.set(0,Z.height*.5,0),r.rectArea[z]=Ee,z++}else if(Z.isPointLight){const Ee=t.get(Z);if(Ee.color.copy(Z.color).multiplyScalar(Z.intensity*V),Ee.distance=Z.distance,Ee.decay=Z.decay,Z.castShadow){const Le=Z.shadow,ge=n.get(Z);ge.shadowBias=Le.bias,ge.shadowNormalBias=Le.normalBias,ge.shadowRadius=Le.radius,ge.shadowMapSize=Le.mapSize,ge.shadowCameraNear=Le.camera.near,ge.shadowCameraFar=Le.camera.far,r.pointShadow[E]=ge,r.pointShadowMap[E]=Fe,r.pointShadowMatrix[E]=Z.shadow.matrix,X++}r.point[E]=Ee,E++}else if(Z.isHemisphereLight){const Ee=t.get(Z);Ee.skyColor.copy(Z.color).multiplyScalar(_e*V),Ee.groundColor.copy(Z.groundColor).multiplyScalar(_e*V),r.hemi[I]=Ee,I++}}z>0&&(e.isWebGL2||s.has("OES_texture_float_linear")===!0?(r.rectAreaLTC1=ft.LTC_FLOAT_1,r.rectAreaLTC2=ft.LTC_FLOAT_2):s.has("OES_texture_half_float_linear")===!0?(r.rectAreaLTC1=ft.LTC_HALF_1,r.rectAreaLTC2=ft.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=y,r.ambient[1]=M,r.ambient[2]=T;const Me=r.hash;(Me.directionalLength!==A||Me.pointLength!==E||Me.spotLength!==b||Me.rectAreaLength!==z||Me.hemiLength!==I||Me.numDirectionalShadows!==H||Me.numPointShadows!==X||Me.numSpotShadows!==G||Me.numSpotMaps!==g||Me.numLightProbes!==U)&&(r.directional.length=A,r.spot.length=b,r.rectArea.length=z,r.point.length=E,r.hemi.length=I,r.directionalShadow.length=H,r.directionalShadowMap.length=H,r.pointShadow.length=X,r.pointShadowMap.length=X,r.spotShadow.length=G,r.spotShadowMap.length=G,r.directionalShadowMatrix.length=H,r.pointShadowMatrix.length=X,r.spotLightMatrix.length=G+g-oe,r.spotLightMap.length=g,r.numSpotLightShadowsWithMaps=oe,r.numLightProbes=U,Me.directionalLength=A,Me.pointLength=E,Me.spotLength=b,Me.rectAreaLength=z,Me.hemiLength=I,Me.numDirectionalShadows=H,Me.numPointShadows=X,Me.numSpotShadows=G,Me.numSpotMaps=g,Me.numLightProbes=U,r.version=BE++)}function d(m,v){let y=0,M=0,T=0,A=0,E=0;const b=v.matrixWorldInverse;for(let z=0,I=m.length;z<I;z++){const H=m[z];if(H.isDirectionalLight){const X=r.directional[y];X.direction.setFromMatrixPosition(H.matrixWorld),o.setFromMatrixPosition(H.target.matrixWorld),X.direction.sub(o),X.direction.transformDirection(b),y++}else if(H.isSpotLight){const X=r.spot[T];X.position.setFromMatrixPosition(H.matrixWorld),X.position.applyMatrix4(b),X.direction.setFromMatrixPosition(H.matrixWorld),o.setFromMatrixPosition(H.target.matrixWorld),X.direction.sub(o),X.direction.transformDirection(b),T++}else if(H.isRectAreaLight){const X=r.rectArea[A];X.position.setFromMatrixPosition(H.matrixWorld),X.position.applyMatrix4(b),c.identity(),l.copy(H.matrixWorld),l.premultiply(b),c.extractRotation(l),X.halfWidth.set(H.width*.5,0,0),X.halfHeight.set(0,H.height*.5,0),X.halfWidth.applyMatrix4(c),X.halfHeight.applyMatrix4(c),A++}else if(H.isPointLight){const X=r.point[M];X.position.setFromMatrixPosition(H.matrixWorld),X.position.applyMatrix4(b),M++}else if(H.isHemisphereLight){const X=r.hemi[E];X.direction.setFromMatrixPosition(H.matrixWorld),X.direction.transformDirection(b),E++}}}return{setup:f,setupView:d,state:r}}function Fm(s,e){const t=new HE(s,e),n=[],r=[];function o(){n.length=0,r.length=0}function l(v){n.push(v)}function c(v){r.push(v)}function f(v){t.setup(n,v)}function d(v){t.setupView(n,v)}return{init:o,state:{lightsArray:n,shadowsArray:r,lights:t},setupLights:f,setupLightsView:d,pushLight:l,pushShadow:c}}function zE(s,e){let t=new WeakMap;function n(o,l=0){const c=t.get(o);let f;return c===void 0?(f=new Fm(s,e),t.set(o,[f])):l>=c.length?(f=new Fm(s,e),c.push(f)):f=c[l],f}function r(){t=new WeakMap}return{get:n,dispose:r}}class w0 extends xs{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=T_,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class GE extends xs{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const VE=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,WE=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function $E(s,e,t){let n=new Ef;const r=new Jt,o=new Jt,l=new Bn,c=new w0({depthPacking:A_}),f=new GE,d={},m=t.maxTextureSize,v={[Vs]:ur,[ur]:Vs,[ss]:ss},y=new ws({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Jt},radius:{value:4}},vertexShader:VE,fragmentShader:WE}),M=y.clone();M.defines.HORIZONTAL_PASS=1;const T=new Or;T.setAttribute("position",new _i(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const A=new $i(T,y),E=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=$g;let b=this.type;this.render=function(X,G,g){if(E.enabled===!1||E.autoUpdate===!1&&E.needsUpdate===!1||X.length===0)return;const oe=s.getRenderTarget(),U=s.getActiveCubeFace(),V=s.getActiveMipmapLevel(),Me=s.state;Me.setBlending(uo),Me.buffers.color.setClear(1,1,1,1),Me.buffers.depth.setTest(!0),Me.setScissorTest(!1);const Te=b!==ks&&this.type===ks,ve=b===ks&&this.type!==ks;for(let Z=0,me=X.length;Z<me;Z++){const _e=X[Z],fe=_e.shadow;if(fe===void 0){console.warn("THREE.WebGLShadowMap:",_e,"has no shadow.");continue}if(fe.autoUpdate===!1&&fe.needsUpdate===!1)continue;r.copy(fe.mapSize);const Fe=fe.getFrameExtents();if(r.multiply(Fe),o.copy(fe.mapSize),(r.x>m||r.y>m)&&(r.x>m&&(o.x=Math.floor(m/Fe.x),r.x=o.x*Fe.x,fe.mapSize.x=o.x),r.y>m&&(o.y=Math.floor(m/Fe.y),r.y=o.y*Fe.y,fe.mapSize.y=o.y)),fe.map===null||Te===!0||ve===!0){const Le=this.type!==ks?{minFilter:xi,magFilter:xi}:{};fe.map!==null&&fe.map.dispose(),fe.map=new $s(r.x,r.y,Le),fe.map.texture.name=_e.name+".shadowMap",fe.camera.updateProjectionMatrix()}s.setRenderTarget(fe.map),s.clear();const Ee=fe.getViewportCount();for(let Le=0;Le<Ee;Le++){const ge=fe.getViewport(Le);l.set(o.x*ge.x,o.y*ge.y,o.x*ge.z,o.y*ge.w),Me.viewport(l),fe.updateMatrices(_e,Le),n=fe.getFrustum(),H(G,g,fe.camera,_e,this.type)}fe.isPointLightShadow!==!0&&this.type===ks&&z(fe,g),fe.needsUpdate=!1}b=this.type,E.needsUpdate=!1,s.setRenderTarget(oe,U,V)};function z(X,G){const g=e.update(A);y.defines.VSM_SAMPLES!==X.blurSamples&&(y.defines.VSM_SAMPLES=X.blurSamples,M.defines.VSM_SAMPLES=X.blurSamples,y.needsUpdate=!0,M.needsUpdate=!0),X.mapPass===null&&(X.mapPass=new $s(r.x,r.y)),y.uniforms.shadow_pass.value=X.map.texture,y.uniforms.resolution.value=X.mapSize,y.uniforms.radius.value=X.radius,s.setRenderTarget(X.mapPass),s.clear(),s.renderBufferDirect(G,null,g,y,A,null),M.uniforms.shadow_pass.value=X.mapPass.texture,M.uniforms.resolution.value=X.mapSize,M.uniforms.radius.value=X.radius,s.setRenderTarget(X.map),s.clear(),s.renderBufferDirect(G,null,g,M,A,null)}function I(X,G,g,oe){let U=null;const V=g.isPointLight===!0?X.customDistanceMaterial:X.customDepthMaterial;if(V!==void 0)U=V;else if(U=g.isPointLight===!0?f:c,s.localClippingEnabled&&G.clipShadows===!0&&Array.isArray(G.clippingPlanes)&&G.clippingPlanes.length!==0||G.displacementMap&&G.displacementScale!==0||G.alphaMap&&G.alphaTest>0||G.map&&G.alphaTest>0){const Me=U.uuid,Te=G.uuid;let ve=d[Me];ve===void 0&&(ve={},d[Me]=ve);let Z=ve[Te];Z===void 0&&(Z=U.clone(),ve[Te]=Z),U=Z}if(U.visible=G.visible,U.wireframe=G.wireframe,oe===ks?U.side=G.shadowSide!==null?G.shadowSide:G.side:U.side=G.shadowSide!==null?G.shadowSide:v[G.side],U.alphaMap=G.alphaMap,U.alphaTest=G.alphaTest,U.map=G.map,U.clipShadows=G.clipShadows,U.clippingPlanes=G.clippingPlanes,U.clipIntersection=G.clipIntersection,U.displacementMap=G.displacementMap,U.displacementScale=G.displacementScale,U.displacementBias=G.displacementBias,U.wireframeLinewidth=G.wireframeLinewidth,U.linewidth=G.linewidth,g.isPointLight===!0&&U.isMeshDistanceMaterial===!0){const Me=s.properties.get(U);Me.light=g}return U}function H(X,G,g,oe,U){if(X.visible===!1)return;if(X.layers.test(G.layers)&&(X.isMesh||X.isLine||X.isPoints)&&(X.castShadow||X.receiveShadow&&U===ks)&&(!X.frustumCulled||n.intersectsObject(X))){X.modelViewMatrix.multiplyMatrices(g.matrixWorldInverse,X.matrixWorld);const Te=e.update(X),ve=X.material;if(Array.isArray(ve)){const Z=Te.groups;for(let me=0,_e=Z.length;me<_e;me++){const fe=Z[me],Fe=ve[fe.materialIndex];if(Fe&&Fe.visible){const Ee=I(X,Fe,oe,U);s.renderBufferDirect(g,null,Te,Ee,X,fe)}}}else if(ve.visible){const Z=I(X,ve,oe,U);s.renderBufferDirect(g,null,Te,Z,X,null)}}const Me=X.children;for(let Te=0,ve=Me.length;Te<ve;Te++)H(Me[Te],G,g,oe,U)}}function XE(s,e,t){const n=t.isWebGL2;function r(){let K=!1;const je=new Bn;let Ie=null;const rt=new Bn(0,0,0,0);return{setMask:function(We){Ie!==We&&!K&&(s.colorMask(We,We,We,We),Ie=We)},setLocked:function(We){K=We},setClear:function(We,Ue,qe,xt,Zt){Zt===!0&&(We*=xt,Ue*=xt,qe*=xt),je.set(We,Ue,qe,xt),rt.equals(je)===!1&&(s.clearColor(We,Ue,qe,xt),rt.copy(je))},reset:function(){K=!1,Ie=null,rt.set(-1,0,0,0)}}}function o(){let K=!1,je=null,Ie=null,rt=null;return{setTest:function(We){We?It(s.DEPTH_TEST):St(s.DEPTH_TEST)},setMask:function(We){je!==We&&!K&&(s.depthMask(We),je=We)},setFunc:function(We){if(Ie!==We){switch(We){case r_:s.depthFunc(s.NEVER);break;case s_:s.depthFunc(s.ALWAYS);break;case o_:s.depthFunc(s.LESS);break;case $u:s.depthFunc(s.LEQUAL);break;case a_:s.depthFunc(s.EQUAL);break;case l_:s.depthFunc(s.GEQUAL);break;case c_:s.depthFunc(s.GREATER);break;case h_:s.depthFunc(s.NOTEQUAL);break;default:s.depthFunc(s.LEQUAL)}Ie=We}},setLocked:function(We){K=We},setClear:function(We){rt!==We&&(s.clearDepth(We),rt=We)},reset:function(){K=!1,je=null,Ie=null,rt=null}}}function l(){let K=!1,je=null,Ie=null,rt=null,We=null,Ue=null,qe=null,xt=null,Zt=null;return{setTest:function(xn){K||(xn?It(s.STENCIL_TEST):St(s.STENCIL_TEST))},setMask:function(xn){je!==xn&&!K&&(s.stencilMask(xn),je=xn)},setFunc:function(xn,Fn,Hn){(Ie!==xn||rt!==Fn||We!==Hn)&&(s.stencilFunc(xn,Fn,Hn),Ie=xn,rt=Fn,We=Hn)},setOp:function(xn,Fn,Hn){(Ue!==xn||qe!==Fn||xt!==Hn)&&(s.stencilOp(xn,Fn,Hn),Ue=xn,qe=Fn,xt=Hn)},setLocked:function(xn){K=xn},setClear:function(xn){Zt!==xn&&(s.clearStencil(xn),Zt=xn)},reset:function(){K=!1,je=null,Ie=null,rt=null,We=null,Ue=null,qe=null,xt=null,Zt=null}}}const c=new r,f=new o,d=new l,m=new WeakMap,v=new WeakMap;let y={},M={},T=new WeakMap,A=[],E=null,b=!1,z=null,I=null,H=null,X=null,G=null,g=null,oe=null,U=!1,V=null,Me=null,Te=null,ve=null,Z=null;const me=s.getParameter(s.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let _e=!1,fe=0;const Fe=s.getParameter(s.VERSION);Fe.indexOf("WebGL")!==-1?(fe=parseFloat(/^WebGL (\d)/.exec(Fe)[1]),_e=fe>=1):Fe.indexOf("OpenGL ES")!==-1&&(fe=parseFloat(/^OpenGL ES (\d)/.exec(Fe)[1]),_e=fe>=2);let Ee=null,Le={};const ge=s.getParameter(s.SCISSOR_BOX),Ce=s.getParameter(s.VIEWPORT),Je=new Bn().fromArray(ge),nt=new Bn().fromArray(Ce);function ut(K,je,Ie,rt){const We=new Uint8Array(4),Ue=s.createTexture();s.bindTexture(K,Ue),s.texParameteri(K,s.TEXTURE_MIN_FILTER,s.NEAREST),s.texParameteri(K,s.TEXTURE_MAG_FILTER,s.NEAREST);for(let qe=0;qe<Ie;qe++)n&&(K===s.TEXTURE_3D||K===s.TEXTURE_2D_ARRAY)?s.texImage3D(je,0,s.RGBA,1,1,rt,0,s.RGBA,s.UNSIGNED_BYTE,We):s.texImage2D(je+qe,0,s.RGBA,1,1,0,s.RGBA,s.UNSIGNED_BYTE,We);return Ue}const bt={};bt[s.TEXTURE_2D]=ut(s.TEXTURE_2D,s.TEXTURE_2D,1),bt[s.TEXTURE_CUBE_MAP]=ut(s.TEXTURE_CUBE_MAP,s.TEXTURE_CUBE_MAP_POSITIVE_X,6),n&&(bt[s.TEXTURE_2D_ARRAY]=ut(s.TEXTURE_2D_ARRAY,s.TEXTURE_2D_ARRAY,1,1),bt[s.TEXTURE_3D]=ut(s.TEXTURE_3D,s.TEXTURE_3D,1,1)),c.setClear(0,0,0,1),f.setClear(1),d.setClear(0),It(s.DEPTH_TEST),f.setFunc($u),Lt(!1),qt(bp),It(s.CULL_FACE),Tt(uo);function It(K){y[K]!==!0&&(s.enable(K),y[K]=!0)}function St(K){y[K]!==!1&&(s.disable(K),y[K]=!1)}function Rt(K,je){return M[K]!==je?(s.bindFramebuffer(K,je),M[K]=je,n&&(K===s.DRAW_FRAMEBUFFER&&(M[s.FRAMEBUFFER]=je),K===s.FRAMEBUFFER&&(M[s.DRAW_FRAMEBUFFER]=je)),!0):!1}function Mt(K,je){let Ie=A,rt=!1;if(K)if(Ie=T.get(je),Ie===void 0&&(Ie=[],T.set(je,Ie)),K.isWebGLMultipleRenderTargets){const We=K.texture;if(Ie.length!==We.length||Ie[0]!==s.COLOR_ATTACHMENT0){for(let Ue=0,qe=We.length;Ue<qe;Ue++)Ie[Ue]=s.COLOR_ATTACHMENT0+Ue;Ie.length=We.length,rt=!0}}else Ie[0]!==s.COLOR_ATTACHMENT0&&(Ie[0]=s.COLOR_ATTACHMENT0,rt=!0);else Ie[0]!==s.BACK&&(Ie[0]=s.BACK,rt=!0);rt&&(t.isWebGL2?s.drawBuffers(Ie):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(Ie))}function Ft(K){return E!==K?(s.useProgram(K),E=K,!0):!1}const xe={[La]:s.FUNC_ADD,[jy]:s.FUNC_SUBTRACT,[Yy]:s.FUNC_REVERSE_SUBTRACT};if(n)xe[Sp]=s.MIN,xe[Tp]=s.MAX;else{const K=e.get("EXT_blend_minmax");K!==null&&(xe[Sp]=K.MIN_EXT,xe[Tp]=K.MAX_EXT)}const Mn={[qy]:s.ZERO,[Zy]:s.ONE,[Ky]:s.SRC_COLOR,[Xg]:s.SRC_ALPHA,[i_]:s.SRC_ALPHA_SATURATE,[t_]:s.DST_COLOR,[Qy]:s.DST_ALPHA,[Jy]:s.ONE_MINUS_SRC_COLOR,[jg]:s.ONE_MINUS_SRC_ALPHA,[n_]:s.ONE_MINUS_DST_COLOR,[e_]:s.ONE_MINUS_DST_ALPHA};function Tt(K,je,Ie,rt,We,Ue,qe,xt){if(K===uo){b===!0&&(St(s.BLEND),b=!1);return}if(b===!1&&(It(s.BLEND),b=!0),K!==Xy){if(K!==z||xt!==U){if((I!==La||G!==La)&&(s.blendEquation(s.FUNC_ADD),I=La,G=La),xt)switch(K){case Na:s.blendFuncSeparate(s.ONE,s.ONE_MINUS_SRC_ALPHA,s.ONE,s.ONE_MINUS_SRC_ALPHA);break;case wp:s.blendFunc(s.ONE,s.ONE);break;case Mp:s.blendFuncSeparate(s.ZERO,s.ONE_MINUS_SRC_COLOR,s.ZERO,s.ONE);break;case Ep:s.blendFuncSeparate(s.ZERO,s.SRC_COLOR,s.ZERO,s.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",K);break}else switch(K){case Na:s.blendFuncSeparate(s.SRC_ALPHA,s.ONE_MINUS_SRC_ALPHA,s.ONE,s.ONE_MINUS_SRC_ALPHA);break;case wp:s.blendFunc(s.SRC_ALPHA,s.ONE);break;case Mp:s.blendFuncSeparate(s.ZERO,s.ONE_MINUS_SRC_COLOR,s.ZERO,s.ONE);break;case Ep:s.blendFunc(s.ZERO,s.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",K);break}H=null,X=null,g=null,oe=null,z=K,U=xt}return}We=We||je,Ue=Ue||Ie,qe=qe||rt,(je!==I||We!==G)&&(s.blendEquationSeparate(xe[je],xe[We]),I=je,G=We),(Ie!==H||rt!==X||Ue!==g||qe!==oe)&&(s.blendFuncSeparate(Mn[Ie],Mn[rt],Mn[Ue],Mn[qe]),H=Ie,X=rt,g=Ue,oe=qe),z=K,U=!1}function Gt(K,je){K.side===ss?St(s.CULL_FACE):It(s.CULL_FACE);let Ie=K.side===ur;je&&(Ie=!Ie),Lt(Ie),K.blending===Na&&K.transparent===!1?Tt(uo):Tt(K.blending,K.blendEquation,K.blendSrc,K.blendDst,K.blendEquationAlpha,K.blendSrcAlpha,K.blendDstAlpha,K.premultipliedAlpha),f.setFunc(K.depthFunc),f.setTest(K.depthTest),f.setMask(K.depthWrite),c.setMask(K.colorWrite);const rt=K.stencilWrite;d.setTest(rt),rt&&(d.setMask(K.stencilWriteMask),d.setFunc(K.stencilFunc,K.stencilRef,K.stencilFuncMask),d.setOp(K.stencilFail,K.stencilZFail,K.stencilZPass)),Ge(K.polygonOffset,K.polygonOffsetFactor,K.polygonOffsetUnits),K.alphaToCoverage===!0?It(s.SAMPLE_ALPHA_TO_COVERAGE):St(s.SAMPLE_ALPHA_TO_COVERAGE)}function Lt(K){V!==K&&(K?s.frontFace(s.CW):s.frontFace(s.CCW),V=K)}function qt(K){K!==Vy?(It(s.CULL_FACE),K!==Me&&(K===bp?s.cullFace(s.BACK):K===Wy?s.cullFace(s.FRONT):s.cullFace(s.FRONT_AND_BACK))):St(s.CULL_FACE),Me=K}function wt(K){K!==Te&&(_e&&s.lineWidth(K),Te=K)}function Ge(K,je,Ie){K?(It(s.POLYGON_OFFSET_FILL),(ve!==je||Z!==Ie)&&(s.polygonOffset(je,Ie),ve=je,Z=Ie)):St(s.POLYGON_OFFSET_FILL)}function Vt(K){K?It(s.SCISSOR_TEST):St(s.SCISSOR_TEST)}function Cn(K){K===void 0&&(K=s.TEXTURE0+me-1),Ee!==K&&(s.activeTexture(K),Ee=K)}function Xt(K,je,Ie){Ie===void 0&&(Ee===null?Ie=s.TEXTURE0+me-1:Ie=Ee);let rt=Le[Ie];rt===void 0&&(rt={type:void 0,texture:void 0},Le[Ie]=rt),(rt.type!==K||rt.texture!==je)&&(Ee!==Ie&&(s.activeTexture(Ie),Ee=Ie),s.bindTexture(K,je||bt[K]),rt.type=K,rt.texture=je)}function W(){const K=Le[Ee];K!==void 0&&K.type!==void 0&&(s.bindTexture(K.type,null),K.type=void 0,K.texture=void 0)}function k(){try{s.compressedTexImage2D.apply(s,arguments)}catch(K){console.error("THREE.WebGLState:",K)}}function se(){try{s.compressedTexImage3D.apply(s,arguments)}catch(K){console.error("THREE.WebGLState:",K)}}function Ye(){try{s.texSubImage2D.apply(s,arguments)}catch(K){console.error("THREE.WebGLState:",K)}}function Ne(){try{s.texSubImage3D.apply(s,arguments)}catch(K){console.error("THREE.WebGLState:",K)}}function Xe(){try{s.compressedTexSubImage2D.apply(s,arguments)}catch(K){console.error("THREE.WebGLState:",K)}}function vt(){try{s.compressedTexSubImage3D.apply(s,arguments)}catch(K){console.error("THREE.WebGLState:",K)}}function it(){try{s.texStorage2D.apply(s,arguments)}catch(K){console.error("THREE.WebGLState:",K)}}function ht(){try{s.texStorage3D.apply(s,arguments)}catch(K){console.error("THREE.WebGLState:",K)}}function Q(){try{s.texImage2D.apply(s,arguments)}catch(K){console.error("THREE.WebGLState:",K)}}function Ze(){try{s.texImage3D.apply(s,arguments)}catch(K){console.error("THREE.WebGLState:",K)}}function ze(K){Je.equals(K)===!1&&(s.scissor(K.x,K.y,K.z,K.w),Je.copy(K))}function et(K){nt.equals(K)===!1&&(s.viewport(K.x,K.y,K.z,K.w),nt.copy(K))}function _t(K,je){let Ie=v.get(je);Ie===void 0&&(Ie=new WeakMap,v.set(je,Ie));let rt=Ie.get(K);rt===void 0&&(rt=s.getUniformBlockIndex(je,K.name),Ie.set(K,rt))}function tt(K,je){const rt=v.get(je).get(K);m.get(je)!==rt&&(s.uniformBlockBinding(je,rt,K.__bindingPointIndex),m.set(je,rt))}function pt(){s.disable(s.BLEND),s.disable(s.CULL_FACE),s.disable(s.DEPTH_TEST),s.disable(s.POLYGON_OFFSET_FILL),s.disable(s.SCISSOR_TEST),s.disable(s.STENCIL_TEST),s.disable(s.SAMPLE_ALPHA_TO_COVERAGE),s.blendEquation(s.FUNC_ADD),s.blendFunc(s.ONE,s.ZERO),s.blendFuncSeparate(s.ONE,s.ZERO,s.ONE,s.ZERO),s.colorMask(!0,!0,!0,!0),s.clearColor(0,0,0,0),s.depthMask(!0),s.depthFunc(s.LESS),s.clearDepth(1),s.stencilMask(4294967295),s.stencilFunc(s.ALWAYS,0,4294967295),s.stencilOp(s.KEEP,s.KEEP,s.KEEP),s.clearStencil(0),s.cullFace(s.BACK),s.frontFace(s.CCW),s.polygonOffset(0,0),s.activeTexture(s.TEXTURE0),s.bindFramebuffer(s.FRAMEBUFFER,null),n===!0&&(s.bindFramebuffer(s.DRAW_FRAMEBUFFER,null),s.bindFramebuffer(s.READ_FRAMEBUFFER,null)),s.useProgram(null),s.lineWidth(1),s.scissor(0,0,s.canvas.width,s.canvas.height),s.viewport(0,0,s.canvas.width,s.canvas.height),y={},Ee=null,Le={},M={},T=new WeakMap,A=[],E=null,b=!1,z=null,I=null,H=null,X=null,G=null,g=null,oe=null,U=!1,V=null,Me=null,Te=null,ve=null,Z=null,Je.set(0,0,s.canvas.width,s.canvas.height),nt.set(0,0,s.canvas.width,s.canvas.height),c.reset(),f.reset(),d.reset()}return{buffers:{color:c,depth:f,stencil:d},enable:It,disable:St,bindFramebuffer:Rt,drawBuffers:Mt,useProgram:Ft,setBlending:Tt,setMaterial:Gt,setFlipSided:Lt,setCullFace:qt,setLineWidth:wt,setPolygonOffset:Ge,setScissorTest:Vt,activeTexture:Cn,bindTexture:Xt,unbindTexture:W,compressedTexImage2D:k,compressedTexImage3D:se,texImage2D:Q,texImage3D:Ze,updateUBOMapping:_t,uniformBlockBinding:tt,texStorage2D:it,texStorage3D:ht,texSubImage2D:Ye,texSubImage3D:Ne,compressedTexSubImage2D:Xe,compressedTexSubImage3D:vt,scissor:ze,viewport:et,reset:pt}}function jE(s,e,t,n,r,o,l){const c=r.isWebGL2,f=r.maxTextures,d=r.maxCubemapSize,m=r.maxTextureSize,v=r.maxSamples,y=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,M=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),T=new WeakMap;let A;const E=new WeakMap;let b=!1;try{b=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function z(W,k){return b?new OffscreenCanvas(W,k):Bl("canvas")}function I(W,k,se,Ye){let Ne=1;if((W.width>Ye||W.height>Ye)&&(Ne=Ye/Math.max(W.width,W.height)),Ne<1||k===!0)if(typeof HTMLImageElement<"u"&&W instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&W instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&W instanceof ImageBitmap){const Xe=k?sh:Math.floor,vt=Xe(Ne*W.width),it=Xe(Ne*W.height);A===void 0&&(A=z(vt,it));const ht=se?z(vt,it):A;return ht.width=vt,ht.height=it,ht.getContext("2d").drawImage(W,0,0,vt,it),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+W.width+"x"+W.height+") to ("+vt+"x"+it+")."),ht}else return"data"in W&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+W.width+"x"+W.height+")."),W;return W}function H(W){return Ku(W.width)&&Ku(W.height)}function X(W){return c?!1:W.wrapS!==er||W.wrapT!==er||W.minFilter!==xi&&W.minFilter!==li}function G(W,k){return W.generateMipmaps&&k&&W.minFilter!==xi&&W.minFilter!==li}function g(W){s.generateMipmap(W)}function oe(W,k,se,Ye,Ne=!1){if(c===!1)return k;if(W!==null){if(s[W]!==void 0)return s[W];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+W+"'")}let Xe=k;if(k===s.RED&&(se===s.FLOAT&&(Xe=s.R32F),se===s.HALF_FLOAT&&(Xe=s.R16F),se===s.UNSIGNED_BYTE&&(Xe=s.R8)),k===s.RED_INTEGER&&(se===s.UNSIGNED_BYTE&&(Xe=s.R8UI),se===s.UNSIGNED_SHORT&&(Xe=s.R16UI),se===s.UNSIGNED_INT&&(Xe=s.R32UI),se===s.BYTE&&(Xe=s.R8I),se===s.SHORT&&(Xe=s.R16I),se===s.INT&&(Xe=s.R32I)),k===s.RG&&(se===s.FLOAT&&(Xe=s.RG32F),se===s.HALF_FLOAT&&(Xe=s.RG16F),se===s.UNSIGNED_BYTE&&(Xe=s.RG8)),k===s.RGBA){const vt=Ne?th:Dn.getTransfer(Ye);se===s.FLOAT&&(Xe=s.RGBA32F),se===s.HALF_FLOAT&&(Xe=s.RGBA16F),se===s.UNSIGNED_BYTE&&(Xe=vt===Wn?s.SRGB8_ALPHA8:s.RGBA8),se===s.UNSIGNED_SHORT_4_4_4_4&&(Xe=s.RGBA4),se===s.UNSIGNED_SHORT_5_5_5_1&&(Xe=s.RGB5_A1)}return(Xe===s.R16F||Xe===s.R32F||Xe===s.RG16F||Xe===s.RG32F||Xe===s.RGBA16F||Xe===s.RGBA32F)&&e.get("EXT_color_buffer_float"),Xe}function U(W,k,se){return G(W,se)===!0||W.isFramebufferTexture&&W.minFilter!==xi&&W.minFilter!==li?Math.log2(Math.max(k.width,k.height))+1:W.mipmaps!==void 0&&W.mipmaps.length>0?W.mipmaps.length:W.isCompressedTexture&&Array.isArray(W.image)?k.mipmaps.length:1}function V(W){return W===xi||W===eh||W===Rl?s.NEAREST:s.LINEAR}function Me(W){const k=W.target;k.removeEventListener("dispose",Me),ve(k),k.isVideoTexture&&T.delete(k)}function Te(W){const k=W.target;k.removeEventListener("dispose",Te),me(k)}function ve(W){const k=n.get(W);if(k.__webglInit===void 0)return;const se=W.source,Ye=E.get(se);if(Ye){const Ne=Ye[k.__cacheKey];Ne.usedTimes--,Ne.usedTimes===0&&Z(W),Object.keys(Ye).length===0&&E.delete(se)}n.remove(W)}function Z(W){const k=n.get(W);s.deleteTexture(k.__webglTexture);const se=W.source,Ye=E.get(se);delete Ye[k.__cacheKey],l.memory.textures--}function me(W){const k=W.texture,se=n.get(W),Ye=n.get(k);if(Ye.__webglTexture!==void 0&&(s.deleteTexture(Ye.__webglTexture),l.memory.textures--),W.depthTexture&&W.depthTexture.dispose(),W.isWebGLCubeRenderTarget)for(let Ne=0;Ne<6;Ne++){if(Array.isArray(se.__webglFramebuffer[Ne]))for(let Xe=0;Xe<se.__webglFramebuffer[Ne].length;Xe++)s.deleteFramebuffer(se.__webglFramebuffer[Ne][Xe]);else s.deleteFramebuffer(se.__webglFramebuffer[Ne]);se.__webglDepthbuffer&&s.deleteRenderbuffer(se.__webglDepthbuffer[Ne])}else{if(Array.isArray(se.__webglFramebuffer))for(let Ne=0;Ne<se.__webglFramebuffer.length;Ne++)s.deleteFramebuffer(se.__webglFramebuffer[Ne]);else s.deleteFramebuffer(se.__webglFramebuffer);if(se.__webglDepthbuffer&&s.deleteRenderbuffer(se.__webglDepthbuffer),se.__webglMultisampledFramebuffer&&s.deleteFramebuffer(se.__webglMultisampledFramebuffer),se.__webglColorRenderbuffer)for(let Ne=0;Ne<se.__webglColorRenderbuffer.length;Ne++)se.__webglColorRenderbuffer[Ne]&&s.deleteRenderbuffer(se.__webglColorRenderbuffer[Ne]);se.__webglDepthRenderbuffer&&s.deleteRenderbuffer(se.__webglDepthRenderbuffer)}if(W.isWebGLMultipleRenderTargets)for(let Ne=0,Xe=k.length;Ne<Xe;Ne++){const vt=n.get(k[Ne]);vt.__webglTexture&&(s.deleteTexture(vt.__webglTexture),l.memory.textures--),n.remove(k[Ne])}n.remove(k),n.remove(W)}let _e=0;function fe(){_e=0}function Fe(){const W=_e;return W>=f&&console.warn("THREE.WebGLTextures: Trying to use "+W+" texture units while this GPU supports only "+f),_e+=1,W}function Ee(W){const k=[];return k.push(W.wrapS),k.push(W.wrapT),k.push(W.wrapR||0),k.push(W.magFilter),k.push(W.minFilter),k.push(W.anisotropy),k.push(W.internalFormat),k.push(W.format),k.push(W.type),k.push(W.generateMipmaps),k.push(W.premultiplyAlpha),k.push(W.flipY),k.push(W.unpackAlignment),k.push(W.colorSpace),k.join()}function Le(W,k){const se=n.get(W);if(W.isVideoTexture&&Cn(W),W.isRenderTargetTexture===!1&&W.version>0&&se.__version!==W.version){const Ye=W.image;if(Ye===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Ye.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{Rt(se,W,k);return}}t.bindTexture(s.TEXTURE_2D,se.__webglTexture,s.TEXTURE0+k)}function ge(W,k){const se=n.get(W);if(W.version>0&&se.__version!==W.version){Rt(se,W,k);return}t.bindTexture(s.TEXTURE_2D_ARRAY,se.__webglTexture,s.TEXTURE0+k)}function Ce(W,k){const se=n.get(W);if(W.version>0&&se.__version!==W.version){Rt(se,W,k);return}t.bindTexture(s.TEXTURE_3D,se.__webglTexture,s.TEXTURE0+k)}function Je(W,k){const se=n.get(W);if(W.version>0&&se.__version!==W.version){Mt(se,W,k);return}t.bindTexture(s.TEXTURE_CUBE_MAP,se.__webglTexture,s.TEXTURE0+k)}const nt={[jo]:s.REPEAT,[er]:s.CLAMP_TO_EDGE,[Ol]:s.MIRRORED_REPEAT},ut={[xi]:s.NEAREST,[eh]:s.NEAREST_MIPMAP_NEAREST,[Rl]:s.NEAREST_MIPMAP_LINEAR,[li]:s.LINEAR,[xf]:s.LINEAR_MIPMAP_NEAREST,[Ws]:s.LINEAR_MIPMAP_LINEAR},bt={[L_]:s.NEVER,[k_]:s.ALWAYS,[D_]:s.LESS,[I_]:s.LEQUAL,[P_]:s.EQUAL,[O_]:s.GEQUAL,[N_]:s.GREATER,[U_]:s.NOTEQUAL};function It(W,k,se){if(se?(s.texParameteri(W,s.TEXTURE_WRAP_S,nt[k.wrapS]),s.texParameteri(W,s.TEXTURE_WRAP_T,nt[k.wrapT]),(W===s.TEXTURE_3D||W===s.TEXTURE_2D_ARRAY)&&s.texParameteri(W,s.TEXTURE_WRAP_R,nt[k.wrapR]),s.texParameteri(W,s.TEXTURE_MAG_FILTER,ut[k.magFilter]),s.texParameteri(W,s.TEXTURE_MIN_FILTER,ut[k.minFilter])):(s.texParameteri(W,s.TEXTURE_WRAP_S,s.CLAMP_TO_EDGE),s.texParameteri(W,s.TEXTURE_WRAP_T,s.CLAMP_TO_EDGE),(W===s.TEXTURE_3D||W===s.TEXTURE_2D_ARRAY)&&s.texParameteri(W,s.TEXTURE_WRAP_R,s.CLAMP_TO_EDGE),(k.wrapS!==er||k.wrapT!==er)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),s.texParameteri(W,s.TEXTURE_MAG_FILTER,V(k.magFilter)),s.texParameteri(W,s.TEXTURE_MIN_FILTER,V(k.minFilter)),k.minFilter!==xi&&k.minFilter!==li&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),k.compareFunction&&(s.texParameteri(W,s.TEXTURE_COMPARE_MODE,s.COMPARE_REF_TO_TEXTURE),s.texParameteri(W,s.TEXTURE_COMPARE_FUNC,bt[k.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){const Ye=e.get("EXT_texture_filter_anisotropic");if(k.magFilter===xi||k.minFilter!==Rl&&k.minFilter!==Ws||k.type===Lr&&e.has("OES_texture_float_linear")===!1||c===!1&&k.type===Fs&&e.has("OES_texture_half_float_linear")===!1)return;(k.anisotropy>1||n.get(k).__currentAnisotropy)&&(s.texParameterf(W,Ye.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(k.anisotropy,r.getMaxAnisotropy())),n.get(k).__currentAnisotropy=k.anisotropy)}}function St(W,k){let se=!1;W.__webglInit===void 0&&(W.__webglInit=!0,k.addEventListener("dispose",Me));const Ye=k.source;let Ne=E.get(Ye);Ne===void 0&&(Ne={},E.set(Ye,Ne));const Xe=Ee(k);if(Xe!==W.__cacheKey){Ne[Xe]===void 0&&(Ne[Xe]={texture:s.createTexture(),usedTimes:0},l.memory.textures++,se=!0),Ne[Xe].usedTimes++;const vt=Ne[W.__cacheKey];vt!==void 0&&(Ne[W.__cacheKey].usedTimes--,vt.usedTimes===0&&Z(k)),W.__cacheKey=Xe,W.__webglTexture=Ne[Xe].texture}return se}function Rt(W,k,se){let Ye=s.TEXTURE_2D;(k.isDataArrayTexture||k.isCompressedArrayTexture)&&(Ye=s.TEXTURE_2D_ARRAY),k.isData3DTexture&&(Ye=s.TEXTURE_3D);const Ne=St(W,k),Xe=k.source;t.bindTexture(Ye,W.__webglTexture,s.TEXTURE0+se);const vt=n.get(Xe);if(Xe.version!==vt.__version||Ne===!0){t.activeTexture(s.TEXTURE0+se);const it=Dn.getPrimaries(Dn.workingColorSpace),ht=k.colorSpace===Rr?null:Dn.getPrimaries(k.colorSpace),Q=k.colorSpace===Rr||it===ht?s.NONE:s.BROWSER_DEFAULT_WEBGL;s.pixelStorei(s.UNPACK_FLIP_Y_WEBGL,k.flipY),s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,k.premultiplyAlpha),s.pixelStorei(s.UNPACK_ALIGNMENT,k.unpackAlignment),s.pixelStorei(s.UNPACK_COLORSPACE_CONVERSION_WEBGL,Q);const Ze=X(k)&&H(k.image)===!1;let ze=I(k.image,Ze,!1,m);ze=Xt(k,ze);const et=H(ze)||c,_t=o.convert(k.format,k.colorSpace);let tt=o.convert(k.type),pt=oe(k.internalFormat,_t,tt,k.colorSpace,k.isVideoTexture);It(Ye,k,et);let K;const je=k.mipmaps,Ie=c&&k.isVideoTexture!==!0,rt=vt.__version===void 0||Ne===!0,We=U(k,ze,et);if(k.isDepthTexture)pt=s.DEPTH_COMPONENT,c?k.type===Lr?pt=s.DEPTH_COMPONENT32F:k.type===ao?pt=s.DEPTH_COMPONENT24:k.type===Wo?pt=s.DEPTH24_STENCIL8:pt=s.DEPTH_COMPONENT16:k.type===Lr&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),k.format===$o&&pt===s.DEPTH_COMPONENT&&k.type!==yf&&k.type!==ao&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),k.type=ao,tt=o.convert(k.type)),k.format===Va&&pt===s.DEPTH_COMPONENT&&(pt=s.DEPTH_STENCIL,k.type!==Wo&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),k.type=Wo,tt=o.convert(k.type))),rt&&(Ie?t.texStorage2D(s.TEXTURE_2D,1,pt,ze.width,ze.height):t.texImage2D(s.TEXTURE_2D,0,pt,ze.width,ze.height,0,_t,tt,null));else if(k.isDataTexture)if(je.length>0&&et){Ie&&rt&&t.texStorage2D(s.TEXTURE_2D,We,pt,je[0].width,je[0].height);for(let Ue=0,qe=je.length;Ue<qe;Ue++)K=je[Ue],Ie?t.texSubImage2D(s.TEXTURE_2D,Ue,0,0,K.width,K.height,_t,tt,K.data):t.texImage2D(s.TEXTURE_2D,Ue,pt,K.width,K.height,0,_t,tt,K.data);k.generateMipmaps=!1}else Ie?(rt&&t.texStorage2D(s.TEXTURE_2D,We,pt,ze.width,ze.height),t.texSubImage2D(s.TEXTURE_2D,0,0,0,ze.width,ze.height,_t,tt,ze.data)):t.texImage2D(s.TEXTURE_2D,0,pt,ze.width,ze.height,0,_t,tt,ze.data);else if(k.isCompressedTexture)if(k.isCompressedArrayTexture){Ie&&rt&&t.texStorage3D(s.TEXTURE_2D_ARRAY,We,pt,je[0].width,je[0].height,ze.depth);for(let Ue=0,qe=je.length;Ue<qe;Ue++)K=je[Ue],k.format!==Cr?_t!==null?Ie?t.compressedTexSubImage3D(s.TEXTURE_2D_ARRAY,Ue,0,0,0,K.width,K.height,ze.depth,_t,K.data,0,0):t.compressedTexImage3D(s.TEXTURE_2D_ARRAY,Ue,pt,K.width,K.height,ze.depth,0,K.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Ie?t.texSubImage3D(s.TEXTURE_2D_ARRAY,Ue,0,0,0,K.width,K.height,ze.depth,_t,tt,K.data):t.texImage3D(s.TEXTURE_2D_ARRAY,Ue,pt,K.width,K.height,ze.depth,0,_t,tt,K.data)}else{Ie&&rt&&t.texStorage2D(s.TEXTURE_2D,We,pt,je[0].width,je[0].height);for(let Ue=0,qe=je.length;Ue<qe;Ue++)K=je[Ue],k.format!==Cr?_t!==null?Ie?t.compressedTexSubImage2D(s.TEXTURE_2D,Ue,0,0,K.width,K.height,_t,K.data):t.compressedTexImage2D(s.TEXTURE_2D,Ue,pt,K.width,K.height,0,K.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Ie?t.texSubImage2D(s.TEXTURE_2D,Ue,0,0,K.width,K.height,_t,tt,K.data):t.texImage2D(s.TEXTURE_2D,Ue,pt,K.width,K.height,0,_t,tt,K.data)}else if(k.isDataArrayTexture)Ie?(rt&&t.texStorage3D(s.TEXTURE_2D_ARRAY,We,pt,ze.width,ze.height,ze.depth),t.texSubImage3D(s.TEXTURE_2D_ARRAY,0,0,0,0,ze.width,ze.height,ze.depth,_t,tt,ze.data)):t.texImage3D(s.TEXTURE_2D_ARRAY,0,pt,ze.width,ze.height,ze.depth,0,_t,tt,ze.data);else if(k.isData3DTexture)Ie?(rt&&t.texStorage3D(s.TEXTURE_3D,We,pt,ze.width,ze.height,ze.depth),t.texSubImage3D(s.TEXTURE_3D,0,0,0,0,ze.width,ze.height,ze.depth,_t,tt,ze.data)):t.texImage3D(s.TEXTURE_3D,0,pt,ze.width,ze.height,ze.depth,0,_t,tt,ze.data);else if(k.isFramebufferTexture){if(rt)if(Ie)t.texStorage2D(s.TEXTURE_2D,We,pt,ze.width,ze.height);else{let Ue=ze.width,qe=ze.height;for(let xt=0;xt<We;xt++)t.texImage2D(s.TEXTURE_2D,xt,pt,Ue,qe,0,_t,tt,null),Ue>>=1,qe>>=1}}else if(je.length>0&&et){Ie&&rt&&t.texStorage2D(s.TEXTURE_2D,We,pt,je[0].width,je[0].height);for(let Ue=0,qe=je.length;Ue<qe;Ue++)K=je[Ue],Ie?t.texSubImage2D(s.TEXTURE_2D,Ue,0,0,_t,tt,K):t.texImage2D(s.TEXTURE_2D,Ue,pt,_t,tt,K);k.generateMipmaps=!1}else Ie?(rt&&t.texStorage2D(s.TEXTURE_2D,We,pt,ze.width,ze.height),t.texSubImage2D(s.TEXTURE_2D,0,0,0,_t,tt,ze)):t.texImage2D(s.TEXTURE_2D,0,pt,_t,tt,ze);G(k,et)&&g(Ye),vt.__version=Xe.version,k.onUpdate&&k.onUpdate(k)}W.__version=k.version}function Mt(W,k,se){if(k.image.length!==6)return;const Ye=St(W,k),Ne=k.source;t.bindTexture(s.TEXTURE_CUBE_MAP,W.__webglTexture,s.TEXTURE0+se);const Xe=n.get(Ne);if(Ne.version!==Xe.__version||Ye===!0){t.activeTexture(s.TEXTURE0+se);const vt=Dn.getPrimaries(Dn.workingColorSpace),it=k.colorSpace===Rr?null:Dn.getPrimaries(k.colorSpace),ht=k.colorSpace===Rr||vt===it?s.NONE:s.BROWSER_DEFAULT_WEBGL;s.pixelStorei(s.UNPACK_FLIP_Y_WEBGL,k.flipY),s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,k.premultiplyAlpha),s.pixelStorei(s.UNPACK_ALIGNMENT,k.unpackAlignment),s.pixelStorei(s.UNPACK_COLORSPACE_CONVERSION_WEBGL,ht);const Q=k.isCompressedTexture||k.image[0].isCompressedTexture,Ze=k.image[0]&&k.image[0].isDataTexture,ze=[];for(let Ue=0;Ue<6;Ue++)!Q&&!Ze?ze[Ue]=I(k.image[Ue],!1,!0,d):ze[Ue]=Ze?k.image[Ue].image:k.image[Ue],ze[Ue]=Xt(k,ze[Ue]);const et=ze[0],_t=H(et)||c,tt=o.convert(k.format,k.colorSpace),pt=o.convert(k.type),K=oe(k.internalFormat,tt,pt,k.colorSpace),je=c&&k.isVideoTexture!==!0,Ie=Xe.__version===void 0||Ye===!0;let rt=U(k,et,_t);It(s.TEXTURE_CUBE_MAP,k,_t);let We;if(Q){je&&Ie&&t.texStorage2D(s.TEXTURE_CUBE_MAP,rt,K,et.width,et.height);for(let Ue=0;Ue<6;Ue++){We=ze[Ue].mipmaps;for(let qe=0;qe<We.length;qe++){const xt=We[qe];k.format!==Cr?tt!==null?je?t.compressedTexSubImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+Ue,qe,0,0,xt.width,xt.height,tt,xt.data):t.compressedTexImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+Ue,qe,K,xt.width,xt.height,0,xt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):je?t.texSubImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+Ue,qe,0,0,xt.width,xt.height,tt,pt,xt.data):t.texImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+Ue,qe,K,xt.width,xt.height,0,tt,pt,xt.data)}}}else{We=k.mipmaps,je&&Ie&&(We.length>0&&rt++,t.texStorage2D(s.TEXTURE_CUBE_MAP,rt,K,ze[0].width,ze[0].height));for(let Ue=0;Ue<6;Ue++)if(Ze){je?t.texSubImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+Ue,0,0,0,ze[Ue].width,ze[Ue].height,tt,pt,ze[Ue].data):t.texImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+Ue,0,K,ze[Ue].width,ze[Ue].height,0,tt,pt,ze[Ue].data);for(let qe=0;qe<We.length;qe++){const Zt=We[qe].image[Ue].image;je?t.texSubImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+Ue,qe+1,0,0,Zt.width,Zt.height,tt,pt,Zt.data):t.texImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+Ue,qe+1,K,Zt.width,Zt.height,0,tt,pt,Zt.data)}}else{je?t.texSubImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+Ue,0,0,0,tt,pt,ze[Ue]):t.texImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+Ue,0,K,tt,pt,ze[Ue]);for(let qe=0;qe<We.length;qe++){const xt=We[qe];je?t.texSubImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+Ue,qe+1,0,0,tt,pt,xt.image[Ue]):t.texImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+Ue,qe+1,K,tt,pt,xt.image[Ue])}}}G(k,_t)&&g(s.TEXTURE_CUBE_MAP),Xe.__version=Ne.version,k.onUpdate&&k.onUpdate(k)}W.__version=k.version}function Ft(W,k,se,Ye,Ne,Xe){const vt=o.convert(se.format,se.colorSpace),it=o.convert(se.type),ht=oe(se.internalFormat,vt,it,se.colorSpace);if(!n.get(k).__hasExternalTextures){const Ze=Math.max(1,k.width>>Xe),ze=Math.max(1,k.height>>Xe);Ne===s.TEXTURE_3D||Ne===s.TEXTURE_2D_ARRAY?t.texImage3D(Ne,Xe,ht,Ze,ze,k.depth,0,vt,it,null):t.texImage2D(Ne,Xe,ht,Ze,ze,0,vt,it,null)}t.bindFramebuffer(s.FRAMEBUFFER,W),Vt(k)?y.framebufferTexture2DMultisampleEXT(s.FRAMEBUFFER,Ye,Ne,n.get(se).__webglTexture,0,Ge(k)):(Ne===s.TEXTURE_2D||Ne>=s.TEXTURE_CUBE_MAP_POSITIVE_X&&Ne<=s.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&s.framebufferTexture2D(s.FRAMEBUFFER,Ye,Ne,n.get(se).__webglTexture,Xe),t.bindFramebuffer(s.FRAMEBUFFER,null)}function xe(W,k,se){if(s.bindRenderbuffer(s.RENDERBUFFER,W),k.depthBuffer&&!k.stencilBuffer){let Ye=c===!0?s.DEPTH_COMPONENT24:s.DEPTH_COMPONENT16;if(se||Vt(k)){const Ne=k.depthTexture;Ne&&Ne.isDepthTexture&&(Ne.type===Lr?Ye=s.DEPTH_COMPONENT32F:Ne.type===ao&&(Ye=s.DEPTH_COMPONENT24));const Xe=Ge(k);Vt(k)?y.renderbufferStorageMultisampleEXT(s.RENDERBUFFER,Xe,Ye,k.width,k.height):s.renderbufferStorageMultisample(s.RENDERBUFFER,Xe,Ye,k.width,k.height)}else s.renderbufferStorage(s.RENDERBUFFER,Ye,k.width,k.height);s.framebufferRenderbuffer(s.FRAMEBUFFER,s.DEPTH_ATTACHMENT,s.RENDERBUFFER,W)}else if(k.depthBuffer&&k.stencilBuffer){const Ye=Ge(k);se&&Vt(k)===!1?s.renderbufferStorageMultisample(s.RENDERBUFFER,Ye,s.DEPTH24_STENCIL8,k.width,k.height):Vt(k)?y.renderbufferStorageMultisampleEXT(s.RENDERBUFFER,Ye,s.DEPTH24_STENCIL8,k.width,k.height):s.renderbufferStorage(s.RENDERBUFFER,s.DEPTH_STENCIL,k.width,k.height),s.framebufferRenderbuffer(s.FRAMEBUFFER,s.DEPTH_STENCIL_ATTACHMENT,s.RENDERBUFFER,W)}else{const Ye=k.isWebGLMultipleRenderTargets===!0?k.texture:[k.texture];for(let Ne=0;Ne<Ye.length;Ne++){const Xe=Ye[Ne],vt=o.convert(Xe.format,Xe.colorSpace),it=o.convert(Xe.type),ht=oe(Xe.internalFormat,vt,it,Xe.colorSpace),Q=Ge(k);se&&Vt(k)===!1?s.renderbufferStorageMultisample(s.RENDERBUFFER,Q,ht,k.width,k.height):Vt(k)?y.renderbufferStorageMultisampleEXT(s.RENDERBUFFER,Q,ht,k.width,k.height):s.renderbufferStorage(s.RENDERBUFFER,ht,k.width,k.height)}}s.bindRenderbuffer(s.RENDERBUFFER,null)}function Mn(W,k){if(k&&k.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(s.FRAMEBUFFER,W),!(k.depthTexture&&k.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!n.get(k.depthTexture).__webglTexture||k.depthTexture.image.width!==k.width||k.depthTexture.image.height!==k.height)&&(k.depthTexture.image.width=k.width,k.depthTexture.image.height=k.height,k.depthTexture.needsUpdate=!0),Le(k.depthTexture,0);const Ye=n.get(k.depthTexture).__webglTexture,Ne=Ge(k);if(k.depthTexture.format===$o)Vt(k)?y.framebufferTexture2DMultisampleEXT(s.FRAMEBUFFER,s.DEPTH_ATTACHMENT,s.TEXTURE_2D,Ye,0,Ne):s.framebufferTexture2D(s.FRAMEBUFFER,s.DEPTH_ATTACHMENT,s.TEXTURE_2D,Ye,0);else if(k.depthTexture.format===Va)Vt(k)?y.framebufferTexture2DMultisampleEXT(s.FRAMEBUFFER,s.DEPTH_STENCIL_ATTACHMENT,s.TEXTURE_2D,Ye,0,Ne):s.framebufferTexture2D(s.FRAMEBUFFER,s.DEPTH_STENCIL_ATTACHMENT,s.TEXTURE_2D,Ye,0);else throw new Error("Unknown depthTexture format")}function Tt(W){const k=n.get(W),se=W.isWebGLCubeRenderTarget===!0;if(W.depthTexture&&!k.__autoAllocateDepthBuffer){if(se)throw new Error("target.depthTexture not supported in Cube render targets");Mn(k.__webglFramebuffer,W)}else if(se){k.__webglDepthbuffer=[];for(let Ye=0;Ye<6;Ye++)t.bindFramebuffer(s.FRAMEBUFFER,k.__webglFramebuffer[Ye]),k.__webglDepthbuffer[Ye]=s.createRenderbuffer(),xe(k.__webglDepthbuffer[Ye],W,!1)}else t.bindFramebuffer(s.FRAMEBUFFER,k.__webglFramebuffer),k.__webglDepthbuffer=s.createRenderbuffer(),xe(k.__webglDepthbuffer,W,!1);t.bindFramebuffer(s.FRAMEBUFFER,null)}function Gt(W,k,se){const Ye=n.get(W);k!==void 0&&Ft(Ye.__webglFramebuffer,W,W.texture,s.COLOR_ATTACHMENT0,s.TEXTURE_2D,0),se!==void 0&&Tt(W)}function Lt(W){const k=W.texture,se=n.get(W),Ye=n.get(k);W.addEventListener("dispose",Te),W.isWebGLMultipleRenderTargets!==!0&&(Ye.__webglTexture===void 0&&(Ye.__webglTexture=s.createTexture()),Ye.__version=k.version,l.memory.textures++);const Ne=W.isWebGLCubeRenderTarget===!0,Xe=W.isWebGLMultipleRenderTargets===!0,vt=H(W)||c;if(Ne){se.__webglFramebuffer=[];for(let it=0;it<6;it++)if(c&&k.mipmaps&&k.mipmaps.length>0){se.__webglFramebuffer[it]=[];for(let ht=0;ht<k.mipmaps.length;ht++)se.__webglFramebuffer[it][ht]=s.createFramebuffer()}else se.__webglFramebuffer[it]=s.createFramebuffer()}else{if(c&&k.mipmaps&&k.mipmaps.length>0){se.__webglFramebuffer=[];for(let it=0;it<k.mipmaps.length;it++)se.__webglFramebuffer[it]=s.createFramebuffer()}else se.__webglFramebuffer=s.createFramebuffer();if(Xe)if(r.drawBuffers){const it=W.texture;for(let ht=0,Q=it.length;ht<Q;ht++){const Ze=n.get(it[ht]);Ze.__webglTexture===void 0&&(Ze.__webglTexture=s.createTexture(),l.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(c&&W.samples>0&&Vt(W)===!1){const it=Xe?k:[k];se.__webglMultisampledFramebuffer=s.createFramebuffer(),se.__webglColorRenderbuffer=[],t.bindFramebuffer(s.FRAMEBUFFER,se.__webglMultisampledFramebuffer);for(let ht=0;ht<it.length;ht++){const Q=it[ht];se.__webglColorRenderbuffer[ht]=s.createRenderbuffer(),s.bindRenderbuffer(s.RENDERBUFFER,se.__webglColorRenderbuffer[ht]);const Ze=o.convert(Q.format,Q.colorSpace),ze=o.convert(Q.type),et=oe(Q.internalFormat,Ze,ze,Q.colorSpace,W.isXRRenderTarget===!0),_t=Ge(W);s.renderbufferStorageMultisample(s.RENDERBUFFER,_t,et,W.width,W.height),s.framebufferRenderbuffer(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0+ht,s.RENDERBUFFER,se.__webglColorRenderbuffer[ht])}s.bindRenderbuffer(s.RENDERBUFFER,null),W.depthBuffer&&(se.__webglDepthRenderbuffer=s.createRenderbuffer(),xe(se.__webglDepthRenderbuffer,W,!0)),t.bindFramebuffer(s.FRAMEBUFFER,null)}}if(Ne){t.bindTexture(s.TEXTURE_CUBE_MAP,Ye.__webglTexture),It(s.TEXTURE_CUBE_MAP,k,vt);for(let it=0;it<6;it++)if(c&&k.mipmaps&&k.mipmaps.length>0)for(let ht=0;ht<k.mipmaps.length;ht++)Ft(se.__webglFramebuffer[it][ht],W,k,s.COLOR_ATTACHMENT0,s.TEXTURE_CUBE_MAP_POSITIVE_X+it,ht);else Ft(se.__webglFramebuffer[it],W,k,s.COLOR_ATTACHMENT0,s.TEXTURE_CUBE_MAP_POSITIVE_X+it,0);G(k,vt)&&g(s.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(Xe){const it=W.texture;for(let ht=0,Q=it.length;ht<Q;ht++){const Ze=it[ht],ze=n.get(Ze);t.bindTexture(s.TEXTURE_2D,ze.__webglTexture),It(s.TEXTURE_2D,Ze,vt),Ft(se.__webglFramebuffer,W,Ze,s.COLOR_ATTACHMENT0+ht,s.TEXTURE_2D,0),G(Ze,vt)&&g(s.TEXTURE_2D)}t.unbindTexture()}else{let it=s.TEXTURE_2D;if((W.isWebGL3DRenderTarget||W.isWebGLArrayRenderTarget)&&(c?it=W.isWebGL3DRenderTarget?s.TEXTURE_3D:s.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(it,Ye.__webglTexture),It(it,k,vt),c&&k.mipmaps&&k.mipmaps.length>0)for(let ht=0;ht<k.mipmaps.length;ht++)Ft(se.__webglFramebuffer[ht],W,k,s.COLOR_ATTACHMENT0,it,ht);else Ft(se.__webglFramebuffer,W,k,s.COLOR_ATTACHMENT0,it,0);G(k,vt)&&g(it),t.unbindTexture()}W.depthBuffer&&Tt(W)}function qt(W){const k=H(W)||c,se=W.isWebGLMultipleRenderTargets===!0?W.texture:[W.texture];for(let Ye=0,Ne=se.length;Ye<Ne;Ye++){const Xe=se[Ye];if(G(Xe,k)){const vt=W.isWebGLCubeRenderTarget?s.TEXTURE_CUBE_MAP:s.TEXTURE_2D,it=n.get(Xe).__webglTexture;t.bindTexture(vt,it),g(vt),t.unbindTexture()}}}function wt(W){if(c&&W.samples>0&&Vt(W)===!1){const k=W.isWebGLMultipleRenderTargets?W.texture:[W.texture],se=W.width,Ye=W.height;let Ne=s.COLOR_BUFFER_BIT;const Xe=[],vt=W.stencilBuffer?s.DEPTH_STENCIL_ATTACHMENT:s.DEPTH_ATTACHMENT,it=n.get(W),ht=W.isWebGLMultipleRenderTargets===!0;if(ht)for(let Q=0;Q<k.length;Q++)t.bindFramebuffer(s.FRAMEBUFFER,it.__webglMultisampledFramebuffer),s.framebufferRenderbuffer(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0+Q,s.RENDERBUFFER,null),t.bindFramebuffer(s.FRAMEBUFFER,it.__webglFramebuffer),s.framebufferTexture2D(s.DRAW_FRAMEBUFFER,s.COLOR_ATTACHMENT0+Q,s.TEXTURE_2D,null,0);t.bindFramebuffer(s.READ_FRAMEBUFFER,it.__webglMultisampledFramebuffer),t.bindFramebuffer(s.DRAW_FRAMEBUFFER,it.__webglFramebuffer);for(let Q=0;Q<k.length;Q++){Xe.push(s.COLOR_ATTACHMENT0+Q),W.depthBuffer&&Xe.push(vt);const Ze=it.__ignoreDepthValues!==void 0?it.__ignoreDepthValues:!1;if(Ze===!1&&(W.depthBuffer&&(Ne|=s.DEPTH_BUFFER_BIT),W.stencilBuffer&&(Ne|=s.STENCIL_BUFFER_BIT)),ht&&s.framebufferRenderbuffer(s.READ_FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.RENDERBUFFER,it.__webglColorRenderbuffer[Q]),Ze===!0&&(s.invalidateFramebuffer(s.READ_FRAMEBUFFER,[vt]),s.invalidateFramebuffer(s.DRAW_FRAMEBUFFER,[vt])),ht){const ze=n.get(k[Q]).__webglTexture;s.framebufferTexture2D(s.DRAW_FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.TEXTURE_2D,ze,0)}s.blitFramebuffer(0,0,se,Ye,0,0,se,Ye,Ne,s.NEAREST),M&&s.invalidateFramebuffer(s.READ_FRAMEBUFFER,Xe)}if(t.bindFramebuffer(s.READ_FRAMEBUFFER,null),t.bindFramebuffer(s.DRAW_FRAMEBUFFER,null),ht)for(let Q=0;Q<k.length;Q++){t.bindFramebuffer(s.FRAMEBUFFER,it.__webglMultisampledFramebuffer),s.framebufferRenderbuffer(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0+Q,s.RENDERBUFFER,it.__webglColorRenderbuffer[Q]);const Ze=n.get(k[Q]).__webglTexture;t.bindFramebuffer(s.FRAMEBUFFER,it.__webglFramebuffer),s.framebufferTexture2D(s.DRAW_FRAMEBUFFER,s.COLOR_ATTACHMENT0+Q,s.TEXTURE_2D,Ze,0)}t.bindFramebuffer(s.DRAW_FRAMEBUFFER,it.__webglMultisampledFramebuffer)}}function Ge(W){return Math.min(v,W.samples)}function Vt(W){const k=n.get(W);return c&&W.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&k.__useRenderToTexture!==!1}function Cn(W){const k=l.render.frame;T.get(W)!==k&&(T.set(W,k),W.update())}function Xt(W,k){const se=W.colorSpace,Ye=W.format,Ne=W.type;return W.isCompressedTexture===!0||W.isVideoTexture===!0||W.format===Zu||se!==Di&&se!==Rr&&(Dn.getTransfer(se)===Wn?c===!1?e.has("EXT_sRGB")===!0&&Ye===Cr?(W.format=Zu,W.minFilter=li,W.generateMipmaps=!1):k=c0.sRGBToLinear(k):(Ye!==Cr||Ne!==fo)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",se)),k}this.allocateTextureUnit=Fe,this.resetTextureUnits=fe,this.setTexture2D=Le,this.setTexture2DArray=ge,this.setTexture3D=Ce,this.setTextureCube=Je,this.rebindTextures=Gt,this.setupRenderTarget=Lt,this.updateRenderTargetMipmap=qt,this.updateMultisampleRenderTarget=wt,this.setupDepthRenderbuffer=Tt,this.setupFrameBufferTexture=Ft,this.useMultisampledRTT=Vt}function YE(s,e,t){const n=t.isWebGL2;function r(o,l=Rr){let c;const f=Dn.getTransfer(l);if(o===fo)return s.UNSIGNED_BYTE;if(o===Qg)return s.UNSIGNED_SHORT_4_4_4_4;if(o===e0)return s.UNSIGNED_SHORT_5_5_5_1;if(o===m_)return s.BYTE;if(o===g_)return s.SHORT;if(o===yf)return s.UNSIGNED_SHORT;if(o===Jg)return s.INT;if(o===ao)return s.UNSIGNED_INT;if(o===Lr)return s.FLOAT;if(o===Fs)return n?s.HALF_FLOAT:(c=e.get("OES_texture_half_float"),c!==null?c.HALF_FLOAT_OES:null);if(o===v_)return s.ALPHA;if(o===Cr)return s.RGBA;if(o===x_)return s.LUMINANCE;if(o===y_)return s.LUMINANCE_ALPHA;if(o===$o)return s.DEPTH_COMPONENT;if(o===Va)return s.DEPTH_STENCIL;if(o===Zu)return c=e.get("EXT_sRGB"),c!==null?c.SRGB_ALPHA_EXT:null;if(o===__)return s.RED;if(o===t0)return s.RED_INTEGER;if(o===b_)return s.RG;if(o===n0)return s.RG_INTEGER;if(o===i0)return s.RGBA_INTEGER;if(o===Yh||o===qh||o===Zh||o===Kh)if(f===Wn)if(c=e.get("WEBGL_compressed_texture_s3tc_srgb"),c!==null){if(o===Yh)return c.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(o===qh)return c.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(o===Zh)return c.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(o===Kh)return c.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(c=e.get("WEBGL_compressed_texture_s3tc"),c!==null){if(o===Yh)return c.COMPRESSED_RGB_S3TC_DXT1_EXT;if(o===qh)return c.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(o===Zh)return c.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(o===Kh)return c.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(o===Ap||o===Cp||o===Rp||o===Lp)if(c=e.get("WEBGL_compressed_texture_pvrtc"),c!==null){if(o===Ap)return c.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(o===Cp)return c.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(o===Rp)return c.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(o===Lp)return c.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(o===w_)return c=e.get("WEBGL_compressed_texture_etc1"),c!==null?c.COMPRESSED_RGB_ETC1_WEBGL:null;if(o===Dp||o===Pp)if(c=e.get("WEBGL_compressed_texture_etc"),c!==null){if(o===Dp)return f===Wn?c.COMPRESSED_SRGB8_ETC2:c.COMPRESSED_RGB8_ETC2;if(o===Pp)return f===Wn?c.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:c.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(o===Ip||o===Np||o===Up||o===Op||o===kp||o===Bp||o===Fp||o===Hp||o===zp||o===Gp||o===Vp||o===Wp||o===$p||o===Xp)if(c=e.get("WEBGL_compressed_texture_astc"),c!==null){if(o===Ip)return f===Wn?c.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:c.COMPRESSED_RGBA_ASTC_4x4_KHR;if(o===Np)return f===Wn?c.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:c.COMPRESSED_RGBA_ASTC_5x4_KHR;if(o===Up)return f===Wn?c.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:c.COMPRESSED_RGBA_ASTC_5x5_KHR;if(o===Op)return f===Wn?c.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:c.COMPRESSED_RGBA_ASTC_6x5_KHR;if(o===kp)return f===Wn?c.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:c.COMPRESSED_RGBA_ASTC_6x6_KHR;if(o===Bp)return f===Wn?c.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:c.COMPRESSED_RGBA_ASTC_8x5_KHR;if(o===Fp)return f===Wn?c.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:c.COMPRESSED_RGBA_ASTC_8x6_KHR;if(o===Hp)return f===Wn?c.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:c.COMPRESSED_RGBA_ASTC_8x8_KHR;if(o===zp)return f===Wn?c.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:c.COMPRESSED_RGBA_ASTC_10x5_KHR;if(o===Gp)return f===Wn?c.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:c.COMPRESSED_RGBA_ASTC_10x6_KHR;if(o===Vp)return f===Wn?c.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:c.COMPRESSED_RGBA_ASTC_10x8_KHR;if(o===Wp)return f===Wn?c.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:c.COMPRESSED_RGBA_ASTC_10x10_KHR;if(o===$p)return f===Wn?c.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:c.COMPRESSED_RGBA_ASTC_12x10_KHR;if(o===Xp)return f===Wn?c.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:c.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(o===Jh||o===jp||o===Yp)if(c=e.get("EXT_texture_compression_bptc"),c!==null){if(o===Jh)return f===Wn?c.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:c.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(o===jp)return c.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(o===Yp)return c.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(o===M_||o===qp||o===Zp||o===Kp)if(c=e.get("EXT_texture_compression_rgtc"),c!==null){if(o===Jh)return c.COMPRESSED_RED_RGTC1_EXT;if(o===qp)return c.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(o===Zp)return c.COMPRESSED_RED_GREEN_RGTC2_EXT;if(o===Kp)return c.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return o===Wo?n?s.UNSIGNED_INT_24_8:(c=e.get("WEBGL_depth_texture"),c!==null?c.UNSIGNED_INT_24_8_WEBGL:null):s[o]!==void 0?s[o]:null}return{convert:r}}class qE extends Ri{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class lo extends zn{constructor(){super(),this.isGroup=!0,this.type="Group"}}const ZE={type:"move"};class bu{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new lo,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new lo,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new ce,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new ce),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new lo,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new ce,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new ce),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const n of e.hand.values())this._getHandJoint(t,n)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,n){let r=null,o=null,l=null;const c=this._targetRay,f=this._grip,d=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(d&&e.hand){l=!0;for(const A of e.hand.values()){const E=t.getJointPose(A,n),b=this._getHandJoint(d,A);E!==null&&(b.matrix.fromArray(E.transform.matrix),b.matrix.decompose(b.position,b.rotation,b.scale),b.matrixWorldNeedsUpdate=!0,b.jointRadius=E.radius),b.visible=E!==null}const m=d.joints["index-finger-tip"],v=d.joints["thumb-tip"],y=m.position.distanceTo(v.position),M=.02,T=.005;d.inputState.pinching&&y>M+T?(d.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!d.inputState.pinching&&y<=M-T&&(d.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else f!==null&&e.gripSpace&&(o=t.getPose(e.gripSpace,n),o!==null&&(f.matrix.fromArray(o.transform.matrix),f.matrix.decompose(f.position,f.rotation,f.scale),f.matrixWorldNeedsUpdate=!0,o.linearVelocity?(f.hasLinearVelocity=!0,f.linearVelocity.copy(o.linearVelocity)):f.hasLinearVelocity=!1,o.angularVelocity?(f.hasAngularVelocity=!0,f.angularVelocity.copy(o.angularVelocity)):f.hasAngularVelocity=!1));c!==null&&(r=t.getPose(e.targetRaySpace,n),r===null&&o!==null&&(r=o),r!==null&&(c.matrix.fromArray(r.transform.matrix),c.matrix.decompose(c.position,c.rotation,c.scale),c.matrixWorldNeedsUpdate=!0,r.linearVelocity?(c.hasLinearVelocity=!0,c.linearVelocity.copy(r.linearVelocity)):c.hasLinearVelocity=!1,r.angularVelocity?(c.hasAngularVelocity=!0,c.angularVelocity.copy(r.angularVelocity)):c.hasAngularVelocity=!1,this.dispatchEvent(ZE)))}return c!==null&&(c.visible=r!==null),f!==null&&(f.visible=o!==null),d!==null&&(d.visible=l!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const n=new lo;n.matrixAutoUpdate=!1,n.visible=!1,e.joints[t.jointName]=n,e.add(n)}return e.joints[t.jointName]}}class KE extends hi{constructor(e,t,n,r,o,l,c,f,d,m){if(m=m!==void 0?m:$o,m!==$o&&m!==Va)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");n===void 0&&m===$o&&(n=ao),n===void 0&&m===Va&&(n=Wo),super(null,r,o,l,c,f,m,n,d),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=c!==void 0?c:xi,this.minFilter=f!==void 0?f:xi,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}class JE extends Ko{constructor(e,t){super();const n=this;let r=null,o=1,l=null,c="local-floor",f=1,d=null,m=null,v=null,y=null,M=null,T=null;const A=t.getContextAttributes();let E=null,b=null;const z=[],I=[],H=new Ri;H.layers.enable(1),H.viewport=new Bn;const X=new Ri;X.layers.enable(2),X.viewport=new Bn;const G=[H,X],g=new qE;g.layers.enable(1),g.layers.enable(2);let oe=null,U=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(ge){let Ce=z[ge];return Ce===void 0&&(Ce=new bu,z[ge]=Ce),Ce.getTargetRaySpace()},this.getControllerGrip=function(ge){let Ce=z[ge];return Ce===void 0&&(Ce=new bu,z[ge]=Ce),Ce.getGripSpace()},this.getHand=function(ge){let Ce=z[ge];return Ce===void 0&&(Ce=new bu,z[ge]=Ce),Ce.getHandSpace()};function V(ge){const Ce=I.indexOf(ge.inputSource);if(Ce===-1)return;const Je=z[Ce];Je!==void 0&&(Je.update(ge.inputSource,ge.frame,d||l),Je.dispatchEvent({type:ge.type,data:ge.inputSource}))}function Me(){r.removeEventListener("select",V),r.removeEventListener("selectstart",V),r.removeEventListener("selectend",V),r.removeEventListener("squeeze",V),r.removeEventListener("squeezestart",V),r.removeEventListener("squeezeend",V),r.removeEventListener("end",Me),r.removeEventListener("inputsourceschange",Te);for(let ge=0;ge<z.length;ge++){const Ce=I[ge];Ce!==null&&(I[ge]=null,z[ge].disconnect(Ce))}oe=null,U=null,e.setRenderTarget(E),M=null,y=null,v=null,r=null,b=null,Le.stop(),n.isPresenting=!1,n.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(ge){o=ge,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(ge){c=ge,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return d||l},this.setReferenceSpace=function(ge){d=ge},this.getBaseLayer=function(){return y!==null?y:M},this.getBinding=function(){return v},this.getFrame=function(){return T},this.getSession=function(){return r},this.setSession=async function(ge){if(r=ge,r!==null){if(E=e.getRenderTarget(),r.addEventListener("select",V),r.addEventListener("selectstart",V),r.addEventListener("selectend",V),r.addEventListener("squeeze",V),r.addEventListener("squeezestart",V),r.addEventListener("squeezeend",V),r.addEventListener("end",Me),r.addEventListener("inputsourceschange",Te),A.xrCompatible!==!0&&await t.makeXRCompatible(),r.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const Ce={antialias:r.renderState.layers===void 0?A.antialias:!0,alpha:!0,depth:A.depth,stencil:A.stencil,framebufferScaleFactor:o};M=new XRWebGLLayer(r,t,Ce),r.updateRenderState({baseLayer:M}),b=new $s(M.framebufferWidth,M.framebufferHeight,{format:Cr,type:fo,colorSpace:e.outputColorSpace,stencilBuffer:A.stencil})}else{let Ce=null,Je=null,nt=null;A.depth&&(nt=A.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,Ce=A.stencil?Va:$o,Je=A.stencil?Wo:ao);const ut={colorFormat:t.RGBA8,depthFormat:nt,scaleFactor:o};v=new XRWebGLBinding(r,t),y=v.createProjectionLayer(ut),r.updateRenderState({layers:[y]}),b=new $s(y.textureWidth,y.textureHeight,{format:Cr,type:fo,depthTexture:new KE(y.textureWidth,y.textureHeight,Je,void 0,void 0,void 0,void 0,void 0,void 0,Ce),stencilBuffer:A.stencil,colorSpace:e.outputColorSpace,samples:A.antialias?4:0});const bt=e.properties.get(b);bt.__ignoreDepthValues=y.ignoreDepthValues}b.isXRRenderTarget=!0,this.setFoveation(f),d=null,l=await r.requestReferenceSpace(c),Le.setContext(r),Le.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(r!==null)return r.environmentBlendMode};function Te(ge){for(let Ce=0;Ce<ge.removed.length;Ce++){const Je=ge.removed[Ce],nt=I.indexOf(Je);nt>=0&&(I[nt]=null,z[nt].disconnect(Je))}for(let Ce=0;Ce<ge.added.length;Ce++){const Je=ge.added[Ce];let nt=I.indexOf(Je);if(nt===-1){for(let bt=0;bt<z.length;bt++)if(bt>=I.length){I.push(Je),nt=bt;break}else if(I[bt]===null){I[bt]=Je,nt=bt;break}if(nt===-1)break}const ut=z[nt];ut&&ut.connect(Je)}}const ve=new ce,Z=new ce;function me(ge,Ce,Je){ve.setFromMatrixPosition(Ce.matrixWorld),Z.setFromMatrixPosition(Je.matrixWorld);const nt=ve.distanceTo(Z),ut=Ce.projectionMatrix.elements,bt=Je.projectionMatrix.elements,It=ut[14]/(ut[10]-1),St=ut[14]/(ut[10]+1),Rt=(ut[9]+1)/ut[5],Mt=(ut[9]-1)/ut[5],Ft=(ut[8]-1)/ut[0],xe=(bt[8]+1)/bt[0],Mn=It*Ft,Tt=It*xe,Gt=nt/(-Ft+xe),Lt=Gt*-Ft;Ce.matrixWorld.decompose(ge.position,ge.quaternion,ge.scale),ge.translateX(Lt),ge.translateZ(Gt),ge.matrixWorld.compose(ge.position,ge.quaternion,ge.scale),ge.matrixWorldInverse.copy(ge.matrixWorld).invert();const qt=It+Gt,wt=St+Gt,Ge=Mn-Lt,Vt=Tt+(nt-Lt),Cn=Rt*St/wt*qt,Xt=Mt*St/wt*qt;ge.projectionMatrix.makePerspective(Ge,Vt,Cn,Xt,qt,wt),ge.projectionMatrixInverse.copy(ge.projectionMatrix).invert()}function _e(ge,Ce){Ce===null?ge.matrixWorld.copy(ge.matrix):ge.matrixWorld.multiplyMatrices(Ce.matrixWorld,ge.matrix),ge.matrixWorldInverse.copy(ge.matrixWorld).invert()}this.updateCamera=function(ge){if(r===null)return;g.near=X.near=H.near=ge.near,g.far=X.far=H.far=ge.far,(oe!==g.near||U!==g.far)&&(r.updateRenderState({depthNear:g.near,depthFar:g.far}),oe=g.near,U=g.far);const Ce=ge.parent,Je=g.cameras;_e(g,Ce);for(let nt=0;nt<Je.length;nt++)_e(Je[nt],Ce);Je.length===2?me(g,H,X):g.projectionMatrix.copy(H.projectionMatrix),fe(ge,g,Ce)};function fe(ge,Ce,Je){Je===null?ge.matrix.copy(Ce.matrixWorld):(ge.matrix.copy(Je.matrixWorld),ge.matrix.invert(),ge.matrix.multiply(Ce.matrixWorld)),ge.matrix.decompose(ge.position,ge.quaternion,ge.scale),ge.updateMatrixWorld(!0),ge.projectionMatrix.copy(Ce.projectionMatrix),ge.projectionMatrixInverse.copy(Ce.projectionMatrixInverse),ge.isPerspectiveCamera&&(ge.fov=$a*2*Math.atan(1/ge.projectionMatrix.elements[5]),ge.zoom=1)}this.getCamera=function(){return g},this.getFoveation=function(){if(!(y===null&&M===null))return f},this.setFoveation=function(ge){f=ge,y!==null&&(y.fixedFoveation=ge),M!==null&&M.fixedFoveation!==void 0&&(M.fixedFoveation=ge)};let Fe=null;function Ee(ge,Ce){if(m=Ce.getViewerPose(d||l),T=Ce,m!==null){const Je=m.views;M!==null&&(e.setRenderTargetFramebuffer(b,M.framebuffer),e.setRenderTarget(b));let nt=!1;Je.length!==g.cameras.length&&(g.cameras.length=0,nt=!0);for(let ut=0;ut<Je.length;ut++){const bt=Je[ut];let It=null;if(M!==null)It=M.getViewport(bt);else{const Rt=v.getViewSubImage(y,bt);It=Rt.viewport,ut===0&&(e.setRenderTargetTextures(b,Rt.colorTexture,y.ignoreDepthValues?void 0:Rt.depthStencilTexture),e.setRenderTarget(b))}let St=G[ut];St===void 0&&(St=new Ri,St.layers.enable(ut),St.viewport=new Bn,G[ut]=St),St.matrix.fromArray(bt.transform.matrix),St.matrix.decompose(St.position,St.quaternion,St.scale),St.projectionMatrix.fromArray(bt.projectionMatrix),St.projectionMatrixInverse.copy(St.projectionMatrix).invert(),St.viewport.set(It.x,It.y,It.width,It.height),ut===0&&(g.matrix.copy(St.matrix),g.matrix.decompose(g.position,g.quaternion,g.scale)),nt===!0&&g.cameras.push(St)}}for(let Je=0;Je<z.length;Je++){const nt=I[Je],ut=z[Je];nt!==null&&ut!==void 0&&ut.update(nt,Ce,d||l)}Fe&&Fe(ge,Ce),Ce.detectedPlanes&&n.dispatchEvent({type:"planesdetected",data:Ce}),T=null}const Le=new v0;Le.setAnimationLoop(Ee),this.setAnimationLoop=function(ge){Fe=ge},this.dispose=function(){}}}function QE(s,e){function t(E,b){E.matrixAutoUpdate===!0&&E.updateMatrix(),b.value.copy(E.matrix)}function n(E,b){b.color.getRGB(E.fogColor.value,m0(s)),b.isFog?(E.fogNear.value=b.near,E.fogFar.value=b.far):b.isFogExp2&&(E.fogDensity.value=b.density)}function r(E,b,z,I,H){b.isMeshBasicMaterial||b.isMeshLambertMaterial?o(E,b):b.isMeshToonMaterial?(o(E,b),v(E,b)):b.isMeshPhongMaterial?(o(E,b),m(E,b)):b.isMeshStandardMaterial?(o(E,b),y(E,b),b.isMeshPhysicalMaterial&&M(E,b,H)):b.isMeshMatcapMaterial?(o(E,b),T(E,b)):b.isMeshDepthMaterial?o(E,b):b.isMeshDistanceMaterial?(o(E,b),A(E,b)):b.isMeshNormalMaterial?o(E,b):b.isLineBasicMaterial?(l(E,b),b.isLineDashedMaterial&&c(E,b)):b.isPointsMaterial?f(E,b,z,I):b.isSpriteMaterial?d(E,b):b.isShadowMaterial?(E.color.value.copy(b.color),E.opacity.value=b.opacity):b.isShaderMaterial&&(b.uniformsNeedUpdate=!1)}function o(E,b){E.opacity.value=b.opacity,b.color&&E.diffuse.value.copy(b.color),b.emissive&&E.emissive.value.copy(b.emissive).multiplyScalar(b.emissiveIntensity),b.map&&(E.map.value=b.map,t(b.map,E.mapTransform)),b.alphaMap&&(E.alphaMap.value=b.alphaMap,t(b.alphaMap,E.alphaMapTransform)),b.bumpMap&&(E.bumpMap.value=b.bumpMap,t(b.bumpMap,E.bumpMapTransform),E.bumpScale.value=b.bumpScale,b.side===ur&&(E.bumpScale.value*=-1)),b.normalMap&&(E.normalMap.value=b.normalMap,t(b.normalMap,E.normalMapTransform),E.normalScale.value.copy(b.normalScale),b.side===ur&&E.normalScale.value.negate()),b.displacementMap&&(E.displacementMap.value=b.displacementMap,t(b.displacementMap,E.displacementMapTransform),E.displacementScale.value=b.displacementScale,E.displacementBias.value=b.displacementBias),b.emissiveMap&&(E.emissiveMap.value=b.emissiveMap,t(b.emissiveMap,E.emissiveMapTransform)),b.specularMap&&(E.specularMap.value=b.specularMap,t(b.specularMap,E.specularMapTransform)),b.alphaTest>0&&(E.alphaTest.value=b.alphaTest);const z=e.get(b).envMap;if(z&&(E.envMap.value=z,E.flipEnvMap.value=z.isCubeTexture&&z.isRenderTargetTexture===!1?-1:1,E.reflectivity.value=b.reflectivity,E.ior.value=b.ior,E.refractionRatio.value=b.refractionRatio),b.lightMap){E.lightMap.value=b.lightMap;const I=s._useLegacyLights===!0?Math.PI:1;E.lightMapIntensity.value=b.lightMapIntensity*I,t(b.lightMap,E.lightMapTransform)}b.aoMap&&(E.aoMap.value=b.aoMap,E.aoMapIntensity.value=b.aoMapIntensity,t(b.aoMap,E.aoMapTransform))}function l(E,b){E.diffuse.value.copy(b.color),E.opacity.value=b.opacity,b.map&&(E.map.value=b.map,t(b.map,E.mapTransform))}function c(E,b){E.dashSize.value=b.dashSize,E.totalSize.value=b.dashSize+b.gapSize,E.scale.value=b.scale}function f(E,b,z,I){E.diffuse.value.copy(b.color),E.opacity.value=b.opacity,E.size.value=b.size*z,E.scale.value=I*.5,b.map&&(E.map.value=b.map,t(b.map,E.uvTransform)),b.alphaMap&&(E.alphaMap.value=b.alphaMap,t(b.alphaMap,E.alphaMapTransform)),b.alphaTest>0&&(E.alphaTest.value=b.alphaTest)}function d(E,b){E.diffuse.value.copy(b.color),E.opacity.value=b.opacity,E.rotation.value=b.rotation,b.map&&(E.map.value=b.map,t(b.map,E.mapTransform)),b.alphaMap&&(E.alphaMap.value=b.alphaMap,t(b.alphaMap,E.alphaMapTransform)),b.alphaTest>0&&(E.alphaTest.value=b.alphaTest)}function m(E,b){E.specular.value.copy(b.specular),E.shininess.value=Math.max(b.shininess,1e-4)}function v(E,b){b.gradientMap&&(E.gradientMap.value=b.gradientMap)}function y(E,b){E.metalness.value=b.metalness,b.metalnessMap&&(E.metalnessMap.value=b.metalnessMap,t(b.metalnessMap,E.metalnessMapTransform)),E.roughness.value=b.roughness,b.roughnessMap&&(E.roughnessMap.value=b.roughnessMap,t(b.roughnessMap,E.roughnessMapTransform)),e.get(b).envMap&&(E.envMapIntensity.value=b.envMapIntensity)}function M(E,b,z){E.ior.value=b.ior,b.sheen>0&&(E.sheenColor.value.copy(b.sheenColor).multiplyScalar(b.sheen),E.sheenRoughness.value=b.sheenRoughness,b.sheenColorMap&&(E.sheenColorMap.value=b.sheenColorMap,t(b.sheenColorMap,E.sheenColorMapTransform)),b.sheenRoughnessMap&&(E.sheenRoughnessMap.value=b.sheenRoughnessMap,t(b.sheenRoughnessMap,E.sheenRoughnessMapTransform))),b.clearcoat>0&&(E.clearcoat.value=b.clearcoat,E.clearcoatRoughness.value=b.clearcoatRoughness,b.clearcoatMap&&(E.clearcoatMap.value=b.clearcoatMap,t(b.clearcoatMap,E.clearcoatMapTransform)),b.clearcoatRoughnessMap&&(E.clearcoatRoughnessMap.value=b.clearcoatRoughnessMap,t(b.clearcoatRoughnessMap,E.clearcoatRoughnessMapTransform)),b.clearcoatNormalMap&&(E.clearcoatNormalMap.value=b.clearcoatNormalMap,t(b.clearcoatNormalMap,E.clearcoatNormalMapTransform),E.clearcoatNormalScale.value.copy(b.clearcoatNormalScale),b.side===ur&&E.clearcoatNormalScale.value.negate())),b.iridescence>0&&(E.iridescence.value=b.iridescence,E.iridescenceIOR.value=b.iridescenceIOR,E.iridescenceThicknessMinimum.value=b.iridescenceThicknessRange[0],E.iridescenceThicknessMaximum.value=b.iridescenceThicknessRange[1],b.iridescenceMap&&(E.iridescenceMap.value=b.iridescenceMap,t(b.iridescenceMap,E.iridescenceMapTransform)),b.iridescenceThicknessMap&&(E.iridescenceThicknessMap.value=b.iridescenceThicknessMap,t(b.iridescenceThicknessMap,E.iridescenceThicknessMapTransform))),b.transmission>0&&(E.transmission.value=b.transmission,E.transmissionSamplerMap.value=z.texture,E.transmissionSamplerSize.value.set(z.width,z.height),b.transmissionMap&&(E.transmissionMap.value=b.transmissionMap,t(b.transmissionMap,E.transmissionMapTransform)),E.thickness.value=b.thickness,b.thicknessMap&&(E.thicknessMap.value=b.thicknessMap,t(b.thicknessMap,E.thicknessMapTransform)),E.attenuationDistance.value=b.attenuationDistance,E.attenuationColor.value.copy(b.attenuationColor)),b.anisotropy>0&&(E.anisotropyVector.value.set(b.anisotropy*Math.cos(b.anisotropyRotation),b.anisotropy*Math.sin(b.anisotropyRotation)),b.anisotropyMap&&(E.anisotropyMap.value=b.anisotropyMap,t(b.anisotropyMap,E.anisotropyMapTransform))),E.specularIntensity.value=b.specularIntensity,E.specularColor.value.copy(b.specularColor),b.specularColorMap&&(E.specularColorMap.value=b.specularColorMap,t(b.specularColorMap,E.specularColorMapTransform)),b.specularIntensityMap&&(E.specularIntensityMap.value=b.specularIntensityMap,t(b.specularIntensityMap,E.specularIntensityMapTransform))}function T(E,b){b.matcap&&(E.matcap.value=b.matcap)}function A(E,b){const z=e.get(b).light;E.referencePosition.value.setFromMatrixPosition(z.matrixWorld),E.nearDistance.value=z.shadow.camera.near,E.farDistance.value=z.shadow.camera.far}return{refreshFogUniforms:n,refreshMaterialUniforms:r}}function eS(s,e,t,n){let r={},o={},l=[];const c=t.isWebGL2?s.getParameter(s.MAX_UNIFORM_BUFFER_BINDINGS):0;function f(z,I){const H=I.program;n.uniformBlockBinding(z,H)}function d(z,I){let H=r[z.id];H===void 0&&(T(z),H=m(z),r[z.id]=H,z.addEventListener("dispose",E));const X=I.program;n.updateUBOMapping(z,X);const G=e.render.frame;o[z.id]!==G&&(y(z),o[z.id]=G)}function m(z){const I=v();z.__bindingPointIndex=I;const H=s.createBuffer(),X=z.__size,G=z.usage;return s.bindBuffer(s.UNIFORM_BUFFER,H),s.bufferData(s.UNIFORM_BUFFER,X,G),s.bindBuffer(s.UNIFORM_BUFFER,null),s.bindBufferBase(s.UNIFORM_BUFFER,I,H),H}function v(){for(let z=0;z<c;z++)if(l.indexOf(z)===-1)return l.push(z),z;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function y(z){const I=r[z.id],H=z.uniforms,X=z.__cache;s.bindBuffer(s.UNIFORM_BUFFER,I);for(let G=0,g=H.length;G<g;G++){const oe=H[G];if(M(oe,G,X)===!0){const U=oe.__offset,V=Array.isArray(oe.value)?oe.value:[oe.value];let Me=0;for(let Te=0;Te<V.length;Te++){const ve=V[Te],Z=A(ve);typeof ve=="number"?(oe.__data[0]=ve,s.bufferSubData(s.UNIFORM_BUFFER,U+Me,oe.__data)):ve.isMatrix3?(oe.__data[0]=ve.elements[0],oe.__data[1]=ve.elements[1],oe.__data[2]=ve.elements[2],oe.__data[3]=ve.elements[0],oe.__data[4]=ve.elements[3],oe.__data[5]=ve.elements[4],oe.__data[6]=ve.elements[5],oe.__data[7]=ve.elements[0],oe.__data[8]=ve.elements[6],oe.__data[9]=ve.elements[7],oe.__data[10]=ve.elements[8],oe.__data[11]=ve.elements[0]):(ve.toArray(oe.__data,Me),Me+=Z.storage/Float32Array.BYTES_PER_ELEMENT)}s.bufferSubData(s.UNIFORM_BUFFER,U,oe.__data)}}s.bindBuffer(s.UNIFORM_BUFFER,null)}function M(z,I,H){const X=z.value;if(H[I]===void 0){if(typeof X=="number")H[I]=X;else{const G=Array.isArray(X)?X:[X],g=[];for(let oe=0;oe<G.length;oe++)g.push(G[oe].clone());H[I]=g}return!0}else if(typeof X=="number"){if(H[I]!==X)return H[I]=X,!0}else{const G=Array.isArray(H[I])?H[I]:[H[I]],g=Array.isArray(X)?X:[X];for(let oe=0;oe<G.length;oe++){const U=G[oe];if(U.equals(g[oe])===!1)return U.copy(g[oe]),!0}}return!1}function T(z){const I=z.uniforms;let H=0;const X=16;let G=0;for(let g=0,oe=I.length;g<oe;g++){const U=I[g],V={boundary:0,storage:0},Me=Array.isArray(U.value)?U.value:[U.value];for(let Te=0,ve=Me.length;Te<ve;Te++){const Z=Me[Te],me=A(Z);V.boundary+=me.boundary,V.storage+=me.storage}if(U.__data=new Float32Array(V.storage/Float32Array.BYTES_PER_ELEMENT),U.__offset=H,g>0){G=H%X;const Te=X-G;G!==0&&Te-V.boundary<0&&(H+=X-G,U.__offset=H)}H+=V.storage}return G=H%X,G>0&&(H+=X-G),z.__size=H,z.__cache={},this}function A(z){const I={boundary:0,storage:0};return typeof z=="number"?(I.boundary=4,I.storage=4):z.isVector2?(I.boundary=8,I.storage=8):z.isVector3||z.isColor?(I.boundary=16,I.storage=12):z.isVector4?(I.boundary=16,I.storage=16):z.isMatrix3?(I.boundary=48,I.storage=48):z.isMatrix4?(I.boundary=64,I.storage=64):z.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",z),I}function E(z){const I=z.target;I.removeEventListener("dispose",E);const H=l.indexOf(I.__bindingPointIndex);l.splice(H,1),s.deleteBuffer(r[I.id]),delete r[I.id],delete o[I.id]}function b(){for(const z in r)s.deleteBuffer(r[z]);l=[],r={},o={}}return{bind:f,update:d,dispose:b}}class Tf{constructor(e={}){const{canvas:t=K_(),context:n=null,depth:r=!0,stencil:o=!0,alpha:l=!1,antialias:c=!1,premultipliedAlpha:f=!0,preserveDrawingBuffer:d=!1,powerPreference:m="default",failIfMajorPerformanceCaveat:v=!1}=e;this.isWebGLRenderer=!0;let y;n!==null?y=n.getContextAttributes().alpha:y=l;const M=new Uint32Array(4),T=new Int32Array(4);let A=null,E=null;const b=[],z=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=An,this._useLegacyLights=!1,this.toneMapping=Gs,this.toneMappingExposure=1;const I=this;let H=!1,X=0,G=0,g=null,oe=-1,U=null;const V=new Bn,Me=new Bn;let Te=null;const ve=new Yt(0);let Z=0,me=t.width,_e=t.height,fe=1,Fe=null,Ee=null;const Le=new Bn(0,0,me,_e),ge=new Bn(0,0,me,_e);let Ce=!1;const Je=new Ef;let nt=!1,ut=!1,bt=null;const It=new hn,St=new Jt,Rt=new ce,Mt={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function Ft(){return g===null?fe:1}let xe=n;function Mn(F,pe){for(let we=0;we<F.length;we++){const re=F[we],Re=t.getContext(re,pe);if(Re!==null)return Re}return null}try{const F={alpha:!0,depth:r,stencil:o,antialias:c,premultipliedAlpha:f,preserveDrawingBuffer:d,powerPreference:m,failIfMajorPerformanceCaveat:v};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${gf}`),t.addEventListener("webglcontextlost",je,!1),t.addEventListener("webglcontextrestored",Ie,!1),t.addEventListener("webglcontextcreationerror",rt,!1),xe===null){const pe=["webgl2","webgl","experimental-webgl"];if(I.isWebGL1Renderer===!0&&pe.shift(),xe=Mn(pe,F),xe===null)throw Mn(pe)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}typeof WebGLRenderingContext<"u"&&xe instanceof WebGLRenderingContext&&console.warn("THREE.WebGLRenderer: WebGL 1 support was deprecated in r153 and will be removed in r163."),xe.getShaderPrecisionFormat===void 0&&(xe.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(F){throw console.error("THREE.WebGLRenderer: "+F.message),F}let Tt,Gt,Lt,qt,wt,Ge,Vt,Cn,Xt,W,k,se,Ye,Ne,Xe,vt,it,ht,Q,Ze,ze,et,_t,tt;function pt(){Tt=new fM(xe),Gt=new oM(xe,Tt,e),Tt.init(Gt),et=new YE(xe,Tt,Gt),Lt=new XE(xe,Tt,Gt),qt=new mM(xe),wt=new IE,Ge=new jE(xe,Tt,Lt,wt,Gt,et,qt),Vt=new lM(I),Cn=new uM(I),Xt=new Sb(xe,Gt),_t=new rM(xe,Tt,Xt,Gt),W=new dM(xe,Xt,qt,_t),k=new yM(xe,W,Xt,qt),Q=new xM(xe,Gt,Ge),vt=new aM(wt),se=new PE(I,Vt,Cn,Tt,Gt,_t,vt),Ye=new QE(I,wt),Ne=new UE,Xe=new zE(Tt,Gt),ht=new iM(I,Vt,Cn,Lt,k,y,f),it=new $E(I,k,Gt),tt=new eS(xe,qt,Gt,Lt),Ze=new sM(xe,Tt,qt,Gt),ze=new pM(xe,Tt,qt,Gt),qt.programs=se.programs,I.capabilities=Gt,I.extensions=Tt,I.properties=wt,I.renderLists=Ne,I.shadowMap=it,I.state=Lt,I.info=qt}pt();const K=new JE(I,xe);this.xr=K,this.getContext=function(){return xe},this.getContextAttributes=function(){return xe.getContextAttributes()},this.forceContextLoss=function(){const F=Tt.get("WEBGL_lose_context");F&&F.loseContext()},this.forceContextRestore=function(){const F=Tt.get("WEBGL_lose_context");F&&F.restoreContext()},this.getPixelRatio=function(){return fe},this.setPixelRatio=function(F){F!==void 0&&(fe=F,this.setSize(me,_e,!1))},this.getSize=function(F){return F.set(me,_e)},this.setSize=function(F,pe,we=!0){if(K.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}me=F,_e=pe,t.width=Math.floor(F*fe),t.height=Math.floor(pe*fe),we===!0&&(t.style.width=F+"px",t.style.height=pe+"px"),this.setViewport(0,0,F,pe)},this.getDrawingBufferSize=function(F){return F.set(me*fe,_e*fe).floor()},this.setDrawingBufferSize=function(F,pe,we){me=F,_e=pe,fe=we,t.width=Math.floor(F*we),t.height=Math.floor(pe*we),this.setViewport(0,0,F,pe)},this.getCurrentViewport=function(F){return F.copy(V)},this.getViewport=function(F){return F.copy(Le)},this.setViewport=function(F,pe,we,re){F.isVector4?Le.set(F.x,F.y,F.z,F.w):Le.set(F,pe,we,re),Lt.viewport(V.copy(Le).multiplyScalar(fe).floor())},this.getScissor=function(F){return F.copy(ge)},this.setScissor=function(F,pe,we,re){F.isVector4?ge.set(F.x,F.y,F.z,F.w):ge.set(F,pe,we,re),Lt.scissor(Me.copy(ge).multiplyScalar(fe).floor())},this.getScissorTest=function(){return Ce},this.setScissorTest=function(F){Lt.setScissorTest(Ce=F)},this.setOpaqueSort=function(F){Fe=F},this.setTransparentSort=function(F){Ee=F},this.getClearColor=function(F){return F.copy(ht.getClearColor())},this.setClearColor=function(){ht.setClearColor.apply(ht,arguments)},this.getClearAlpha=function(){return ht.getClearAlpha()},this.setClearAlpha=function(){ht.setClearAlpha.apply(ht,arguments)},this.clear=function(F=!0,pe=!0,we=!0){let re=0;if(F){let Re=!1;if(g!==null){const gt=g.texture.format;Re=gt===i0||gt===n0||gt===t0}if(Re){const gt=g.texture.type,Et=gt===fo||gt===ao||gt===yf||gt===Wo||gt===Qg||gt===e0,Nt=ht.getClearColor(),Pt=ht.getClearAlpha(),jt=Nt.r,Dt=Nt.g,Wt=Nt.b;Et?(M[0]=jt,M[1]=Dt,M[2]=Wt,M[3]=Pt,xe.clearBufferuiv(xe.COLOR,0,M)):(T[0]=jt,T[1]=Dt,T[2]=Wt,T[3]=Pt,xe.clearBufferiv(xe.COLOR,0,T))}else re|=xe.COLOR_BUFFER_BIT}pe&&(re|=xe.DEPTH_BUFFER_BIT),we&&(re|=xe.STENCIL_BUFFER_BIT),xe.clear(re)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",je,!1),t.removeEventListener("webglcontextrestored",Ie,!1),t.removeEventListener("webglcontextcreationerror",rt,!1),Ne.dispose(),Xe.dispose(),wt.dispose(),Vt.dispose(),Cn.dispose(),k.dispose(),_t.dispose(),tt.dispose(),se.dispose(),K.dispose(),K.removeEventListener("sessionstart",xn),K.removeEventListener("sessionend",Fn),bt&&(bt.dispose(),bt=null),Hn.stop()};function je(F){F.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),H=!0}function Ie(){console.log("THREE.WebGLRenderer: Context Restored."),H=!1;const F=qt.autoReset,pe=it.enabled,we=it.autoUpdate,re=it.needsUpdate,Re=it.type;pt(),qt.autoReset=F,it.enabled=pe,it.autoUpdate=we,it.needsUpdate=re,it.type=Re}function rt(F){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",F.statusMessage)}function We(F){const pe=F.target;pe.removeEventListener("dispose",We),Ue(pe)}function Ue(F){qe(F),wt.remove(F)}function qe(F){const pe=wt.get(F).programs;pe!==void 0&&(pe.forEach(function(we){se.releaseProgram(we)}),F.isShaderMaterial&&se.releaseShaderCache(F))}this.renderBufferDirect=function(F,pe,we,re,Re,gt){pe===null&&(pe=Mt);const Et=Re.isMesh&&Re.matrixWorld.determinant()<0,Nt=js(F,pe,we,re,Re);Lt.setMaterial(re,Et);let Pt=we.index,jt=1;if(re.wireframe===!0){if(Pt=W.getWireframeAttribute(we),Pt===void 0)return;jt=2}const Dt=we.drawRange,Wt=we.attributes.position;let Qt=Dt.start*jt,bn=(Dt.start+Dt.count)*jt;gt!==null&&(Qt=Math.max(Qt,gt.start*jt),bn=Math.min(bn,(gt.start+gt.count)*jt)),Pt!==null?(Qt=Math.max(Qt,0),bn=Math.min(bn,Pt.count)):Wt!=null&&(Qt=Math.max(Qt,0),bn=Math.min(bn,Wt.count));const Mi=bn-Qt;if(Mi<0||Mi===1/0)return;_t.setup(Re,re,Nt,we,Pt);let ue,Pn=Ze;if(Pt!==null&&(ue=Xt.get(Pt),Pn=ze,Pn.setIndex(ue)),Re.isMesh)re.wireframe===!0?(Lt.setLineWidth(re.wireframeLinewidth*Ft()),Pn.setMode(xe.LINES)):Pn.setMode(xe.TRIANGLES);else if(Re.isLine){let rn=re.linewidth;rn===void 0&&(rn=1),Lt.setLineWidth(rn*Ft()),Re.isLineSegments?Pn.setMode(xe.LINES):Re.isLineLoop?Pn.setMode(xe.LINE_LOOP):Pn.setMode(xe.LINE_STRIP)}else Re.isPoints?Pn.setMode(xe.POINTS):Re.isSprite&&Pn.setMode(xe.TRIANGLES);if(Re.isInstancedMesh)Pn.renderInstances(Qt,Mi,Re.count);else if(we.isInstancedBufferGeometry){const rn=we._maxInstanceCount!==void 0?we._maxInstanceCount:1/0,Br=Math.min(we.instanceCount,rn);Pn.renderInstances(Qt,Mi,Br)}else Pn.render(Qt,Mi)},this.compile=function(F,pe){function we(re,Re,gt){re.transparent===!0&&re.side===ss&&re.forceSinglePass===!1?(re.side=ur,re.needsUpdate=!0,dr(re,Re,gt),re.side=Vs,re.needsUpdate=!0,dr(re,Re,gt),re.side=ss):dr(re,Re,gt)}E=Xe.get(F),E.init(),z.push(E),F.traverseVisible(function(re){re.isLight&&re.layers.test(pe.layers)&&(E.pushLight(re),re.castShadow&&E.pushShadow(re))}),E.setupLights(I._useLegacyLights),F.traverse(function(re){const Re=re.material;if(Re)if(Array.isArray(Re))for(let gt=0;gt<Re.length;gt++){const Et=Re[gt];we(Et,F,re)}else we(Re,F,re)}),z.pop(),E=null};let xt=null;function Zt(F){xt&&xt(F)}function xn(){Hn.stop()}function Fn(){Hn.start()}const Hn=new v0;Hn.setAnimationLoop(Zt),typeof self<"u"&&Hn.setContext(self),this.setAnimationLoop=function(F){xt=F,K.setAnimationLoop(F),F===null?Hn.stop():Hn.start()},K.addEventListener("sessionstart",xn),K.addEventListener("sessionend",Fn),this.render=function(F,pe){if(pe!==void 0&&pe.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(H===!0)return;F.matrixWorldAutoUpdate===!0&&F.updateMatrixWorld(),pe.parent===null&&pe.matrixWorldAutoUpdate===!0&&pe.updateMatrixWorld(),K.enabled===!0&&K.isPresenting===!0&&(K.cameraAutoUpdate===!0&&K.updateCamera(pe),pe=K.getCamera()),F.isScene===!0&&F.onBeforeRender(I,F,pe,g),E=Xe.get(F,z.length),E.init(),z.push(E),It.multiplyMatrices(pe.projectionMatrix,pe.matrixWorldInverse),Je.setFromProjectionMatrix(It),ut=this.localClippingEnabled,nt=vt.init(this.clippingPlanes,ut),A=Ne.get(F,b.length),A.init(),b.push(A),Rn(F,pe,0,I.sortObjects),A.finish(),I.sortObjects===!0&&A.sort(Fe,Ee),this.info.render.frame++,nt===!0&&vt.beginShadows();const we=E.state.shadowsArray;if(it.render(we,F,pe),nt===!0&&vt.endShadows(),this.info.autoReset===!0&&this.info.reset(),ht.render(A,F),E.setupLights(I._useLegacyLights),pe.isArrayCamera){const re=pe.cameras;for(let Re=0,gt=re.length;Re<gt;Re++){const Et=re[Re];qn(A,F,Et,Et.viewport)}}else qn(A,F,pe);g!==null&&(Ge.updateMultisampleRenderTarget(g),Ge.updateRenderTargetMipmap(g)),F.isScene===!0&&F.onAfterRender(I,F,pe),_t.resetDefaultState(),oe=-1,U=null,z.pop(),z.length>0?E=z[z.length-1]:E=null,b.pop(),b.length>0?A=b[b.length-1]:A=null};function Rn(F,pe,we,re){if(F.visible===!1)return;if(F.layers.test(pe.layers)){if(F.isGroup)we=F.renderOrder;else if(F.isLOD)F.autoUpdate===!0&&F.update(pe);else if(F.isLight)E.pushLight(F),F.castShadow&&E.pushShadow(F);else if(F.isSprite){if(!F.frustumCulled||Je.intersectsSprite(F)){re&&Rt.setFromMatrixPosition(F.matrixWorld).applyMatrix4(It);const Et=k.update(F),Nt=F.material;Nt.visible&&A.push(F,Et,Nt,we,Rt.z,null)}}else if((F.isMesh||F.isLine||F.isPoints)&&(!F.frustumCulled||Je.intersectsObject(F))){const Et=k.update(F),Nt=F.material;if(re&&(F.boundingSphere!==void 0?(F.boundingSphere===null&&F.computeBoundingSphere(),Rt.copy(F.boundingSphere.center)):(Et.boundingSphere===null&&Et.computeBoundingSphere(),Rt.copy(Et.boundingSphere.center)),Rt.applyMatrix4(F.matrixWorld).applyMatrix4(It)),Array.isArray(Nt)){const Pt=Et.groups;for(let jt=0,Dt=Pt.length;jt<Dt;jt++){const Wt=Pt[jt],Qt=Nt[Wt.materialIndex];Qt&&Qt.visible&&A.push(F,Et,Qt,we,Rt.z,Wt)}}else Nt.visible&&A.push(F,Et,Nt,we,Rt.z,null)}}const gt=F.children;for(let Et=0,Nt=gt.length;Et<Nt;Et++)Rn(gt[Et],pe,we,re)}function qn(F,pe,we,re){const Re=F.opaque,gt=F.transmissive,Et=F.transparent;E.setupLightsView(we),nt===!0&&vt.setGlobalState(I.clippingPlanes,we),gt.length>0&&Xi(Re,gt,pe,we),re&&Lt.viewport(V.copy(re)),Re.length>0&&fr(Re,pe,we),gt.length>0&&fr(gt,pe,we),Et.length>0&&fr(Et,pe,we),Lt.buffers.depth.setTest(!0),Lt.buffers.depth.setMask(!0),Lt.buffers.color.setMask(!0),Lt.setPolygonOffset(!1)}function Xi(F,pe,we,re){const Re=Gt.isWebGL2;bt===null&&(bt=new $s(1,1,{generateMipmaps:!0,type:Tt.has("EXT_color_buffer_half_float")?Fs:fo,minFilter:Ws,samples:Re?4:0})),I.getDrawingBufferSize(St),Re?bt.setSize(St.x,St.y):bt.setSize(sh(St.x),sh(St.y));const gt=I.getRenderTarget();I.setRenderTarget(bt),I.getClearColor(ve),Z=I.getClearAlpha(),Z<1&&I.setClearColor(16777215,.5),I.clear();const Et=I.toneMapping;I.toneMapping=Gs,fr(F,we,re),Ge.updateMultisampleRenderTarget(bt),Ge.updateRenderTargetMipmap(bt);let Nt=!1;for(let Pt=0,jt=pe.length;Pt<jt;Pt++){const Dt=pe[Pt],Wt=Dt.object,Qt=Dt.geometry,bn=Dt.material,Mi=Dt.group;if(bn.side===ss&&Wt.layers.test(re.layers)){const ue=bn.side;bn.side=ur,bn.needsUpdate=!0,as(Wt,we,re,Qt,bn,Mi),bn.side=ue,bn.needsUpdate=!0,Nt=!0}}Nt===!0&&(Ge.updateMultisampleRenderTarget(bt),Ge.updateRenderTargetMipmap(bt)),I.setRenderTarget(gt),I.setClearColor(ve,Z),I.toneMapping=Et}function fr(F,pe,we){const re=pe.isScene===!0?pe.overrideMaterial:null;for(let Re=0,gt=F.length;Re<gt;Re++){const Et=F[Re],Nt=Et.object,Pt=Et.geometry,jt=re===null?Et.material:re,Dt=Et.group;Nt.layers.test(we.layers)&&as(Nt,pe,we,Pt,jt,Dt)}}function as(F,pe,we,re,Re,gt){F.onBeforeRender(I,pe,we,re,Re,gt),F.modelViewMatrix.multiplyMatrices(we.matrixWorldInverse,F.matrixWorld),F.normalMatrix.getNormalMatrix(F.modelViewMatrix),Re.onBeforeRender(I,pe,we,re,F,gt),Re.transparent===!0&&Re.side===ss&&Re.forceSinglePass===!1?(Re.side=ur,Re.needsUpdate=!0,I.renderBufferDirect(we,pe,re,Re,F,gt),Re.side=Vs,Re.needsUpdate=!0,I.renderBufferDirect(we,pe,re,Re,F,gt),Re.side=ss):I.renderBufferDirect(we,pe,re,Re,F,gt),F.onAfterRender(I,pe,we,re,Re,gt)}function dr(F,pe,we){pe.isScene!==!0&&(pe=Mt);const re=wt.get(F),Re=E.state.lights,gt=E.state.shadowsArray,Et=Re.state.version,Nt=se.getParameters(F,Re.state,gt,pe,we),Pt=se.getProgramCacheKey(Nt);let jt=re.programs;re.environment=F.isMeshStandardMaterial?pe.environment:null,re.fog=pe.fog,re.envMap=(F.isMeshStandardMaterial?Cn:Vt).get(F.envMap||re.environment),jt===void 0&&(F.addEventListener("dispose",We),jt=new Map,re.programs=jt);let Dt=jt.get(Pt);if(Dt!==void 0){if(re.currentProgram===Dt&&re.lightsStateVersion===Et)return kr(F,Nt),Dt}else Nt.uniforms=se.getUniforms(F),F.onBuild(we,Nt,I),F.onBeforeCompile(Nt,I),Dt=se.acquireProgram(Nt,Pt),jt.set(Pt,Dt),re.uniforms=Nt.uniforms;const Wt=re.uniforms;(!F.isShaderMaterial&&!F.isRawShaderMaterial||F.clipping===!0)&&(Wt.clippingPlanes=vt.uniform),kr(F,Nt),re.needsLights=ls(F),re.lightsStateVersion=Et,re.needsLights&&(Wt.ambientLightColor.value=Re.state.ambient,Wt.lightProbe.value=Re.state.probe,Wt.directionalLights.value=Re.state.directional,Wt.directionalLightShadows.value=Re.state.directionalShadow,Wt.spotLights.value=Re.state.spot,Wt.spotLightShadows.value=Re.state.spotShadow,Wt.rectAreaLights.value=Re.state.rectArea,Wt.ltc_1.value=Re.state.rectAreaLTC1,Wt.ltc_2.value=Re.state.rectAreaLTC2,Wt.pointLights.value=Re.state.point,Wt.pointLightShadows.value=Re.state.pointShadow,Wt.hemisphereLights.value=Re.state.hemi,Wt.directionalShadowMap.value=Re.state.directionalShadowMap,Wt.directionalShadowMatrix.value=Re.state.directionalShadowMatrix,Wt.spotShadowMap.value=Re.state.spotShadowMap,Wt.spotLightMatrix.value=Re.state.spotLightMatrix,Wt.spotLightMap.value=Re.state.spotLightMap,Wt.pointShadowMap.value=Re.state.pointShadowMap,Wt.pointShadowMatrix.value=Re.state.pointShadowMatrix);const Qt=Dt.getUniforms(),bn=Kc.seqWithValue(Qt.seq,Wt);return re.currentProgram=Dt,re.uniformsList=bn,Dt}function kr(F,pe){const we=wt.get(F);we.outputColorSpace=pe.outputColorSpace,we.instancing=pe.instancing,we.instancingColor=pe.instancingColor,we.skinning=pe.skinning,we.morphTargets=pe.morphTargets,we.morphNormals=pe.morphNormals,we.morphColors=pe.morphColors,we.morphTargetsCount=pe.morphTargetsCount,we.numClippingPlanes=pe.numClippingPlanes,we.numIntersection=pe.numClipIntersection,we.vertexAlphas=pe.vertexAlphas,we.vertexTangents=pe.vertexTangents,we.toneMapping=pe.toneMapping}function js(F,pe,we,re,Re){pe.isScene!==!0&&(pe=Mt),Ge.resetTextureUnits();const gt=pe.fog,Et=re.isMeshStandardMaterial?pe.environment:null,Nt=g===null?I.outputColorSpace:g.isXRRenderTarget===!0?g.texture.colorSpace:Di,Pt=(re.isMeshStandardMaterial?Cn:Vt).get(re.envMap||Et),jt=re.vertexColors===!0&&!!we.attributes.color&&we.attributes.color.itemSize===4,Dt=!!we.attributes.tangent&&(!!re.normalMap||re.anisotropy>0),Wt=!!we.morphAttributes.position,Qt=!!we.morphAttributes.normal,bn=!!we.morphAttributes.color;let Mi=Gs;re.toneMapped&&(g===null||g.isXRRenderTarget===!0)&&(Mi=I.toneMapping);const ue=we.morphAttributes.position||we.morphAttributes.normal||we.morphAttributes.color,Pn=ue!==void 0?ue.length:0,rn=wt.get(re),Br=E.state.lights;if(nt===!0&&(ut===!0||F!==U)){const ni=F===U&&re.id===oe;vt.setState(re,F,ni)}let In=!1;re.version===rn.__version?(rn.needsLights&&rn.lightsStateVersion!==Br.state.version||rn.outputColorSpace!==Nt||Re.isInstancedMesh&&rn.instancing===!1||!Re.isInstancedMesh&&rn.instancing===!0||Re.isSkinnedMesh&&rn.skinning===!1||!Re.isSkinnedMesh&&rn.skinning===!0||Re.isInstancedMesh&&rn.instancingColor===!0&&Re.instanceColor===null||Re.isInstancedMesh&&rn.instancingColor===!1&&Re.instanceColor!==null||rn.envMap!==Pt||re.fog===!0&&rn.fog!==gt||rn.numClippingPlanes!==void 0&&(rn.numClippingPlanes!==vt.numPlanes||rn.numIntersection!==vt.numIntersection)||rn.vertexAlphas!==jt||rn.vertexTangents!==Dt||rn.morphTargets!==Wt||rn.morphNormals!==Qt||rn.morphColors!==bn||rn.toneMapping!==Mi||Gt.isWebGL2===!0&&rn.morphTargetsCount!==Pn)&&(In=!0):(In=!0,rn.__version=re.version);let Pi=rn.currentProgram;In===!0&&(Pi=dr(re,pe,Re));let Ts=!1,Ut=!1,Ei=!1;const Gn=Pi.getUniforms(),Oi=rn.uniforms;if(Lt.useProgram(Pi.program)&&(Ts=!0,Ut=!0,Ei=!0),re.id!==oe&&(oe=re.id,Ut=!0),Ts||U!==F){Gn.setValue(xe,"projectionMatrix",F.projectionMatrix),Gn.setValue(xe,"viewMatrix",F.matrixWorldInverse);const ni=Gn.map.cameraPosition;ni!==void 0&&ni.setValue(xe,Rt.setFromMatrixPosition(F.matrixWorld)),Gt.logarithmicDepthBuffer&&Gn.setValue(xe,"logDepthBufFC",2/(Math.log(F.far+1)/Math.LN2)),(re.isMeshPhongMaterial||re.isMeshToonMaterial||re.isMeshLambertMaterial||re.isMeshBasicMaterial||re.isMeshStandardMaterial||re.isShaderMaterial)&&Gn.setValue(xe,"isOrthographic",F.isOrthographicCamera===!0),U!==F&&(U=F,Ut=!0,Ei=!0)}if(Re.isSkinnedMesh){Gn.setOptional(xe,Re,"bindMatrix"),Gn.setOptional(xe,Re,"bindMatrixInverse");const ni=Re.skeleton;ni&&(Gt.floatVertexTextures?(ni.boneTexture===null&&ni.computeBoneTexture(),Gn.setValue(xe,"boneTexture",ni.boneTexture,Ge),Gn.setValue(xe,"boneTextureSize",ni.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const cs=we.morphAttributes;if((cs.position!==void 0||cs.normal!==void 0||cs.color!==void 0&&Gt.isWebGL2===!0)&&Q.update(Re,we,Pi),(Ut||rn.receiveShadow!==Re.receiveShadow)&&(rn.receiveShadow=Re.receiveShadow,Gn.setValue(xe,"receiveShadow",Re.receiveShadow)),re.isMeshGouraudMaterial&&re.envMap!==null&&(Oi.envMap.value=Pt,Oi.flipEnvMap.value=Pt.isCubeTexture&&Pt.isRenderTargetTexture===!1?-1:1),Ut&&(Gn.setValue(xe,"toneMappingExposure",I.toneMappingExposure),rn.needsLights&&Ys(Oi,Ei),gt&&re.fog===!0&&Ye.refreshFogUniforms(Oi,gt),Ye.refreshMaterialUniforms(Oi,re,fe,_e,bt),Kc.upload(xe,rn.uniformsList,Oi,Ge)),re.isShaderMaterial&&re.uniformsNeedUpdate===!0&&(Kc.upload(xe,rn.uniformsList,Oi,Ge),re.uniformsNeedUpdate=!1),re.isSpriteMaterial&&Gn.setValue(xe,"center",Re.center),Gn.setValue(xe,"modelViewMatrix",Re.modelViewMatrix),Gn.setValue(xe,"normalMatrix",Re.normalMatrix),Gn.setValue(xe,"modelMatrix",Re.matrixWorld),re.isShaderMaterial||re.isRawShaderMaterial){const ni=re.uniformsGroups;for(let Ii=0,Kr=ni.length;Ii<Kr;Ii++)if(Gt.isWebGL2){const q=ni[Ii];tt.update(q,Pi),tt.bind(q,Pi)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return Pi}function Ys(F,pe){F.ambientLightColor.needsUpdate=pe,F.lightProbe.needsUpdate=pe,F.directionalLights.needsUpdate=pe,F.directionalLightShadows.needsUpdate=pe,F.pointLights.needsUpdate=pe,F.pointLightShadows.needsUpdate=pe,F.spotLights.needsUpdate=pe,F.spotLightShadows.needsUpdate=pe,F.rectAreaLights.needsUpdate=pe,F.hemisphereLights.needsUpdate=pe}function ls(F){return F.isMeshLambertMaterial||F.isMeshToonMaterial||F.isMeshPhongMaterial||F.isMeshStandardMaterial||F.isShadowMaterial||F.isShaderMaterial&&F.lights===!0}this.getActiveCubeFace=function(){return X},this.getActiveMipmapLevel=function(){return G},this.getRenderTarget=function(){return g},this.setRenderTargetTextures=function(F,pe,we){wt.get(F.texture).__webglTexture=pe,wt.get(F.depthTexture).__webglTexture=we;const re=wt.get(F);re.__hasExternalTextures=!0,re.__hasExternalTextures&&(re.__autoAllocateDepthBuffer=we===void 0,re.__autoAllocateDepthBuffer||Tt.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),re.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(F,pe){const we=wt.get(F);we.__webglFramebuffer=pe,we.__useDefaultFramebuffer=pe===void 0},this.setRenderTarget=function(F,pe=0,we=0){g=F,X=pe,G=we;let re=!0,Re=null,gt=!1,Et=!1;if(F){const Pt=wt.get(F);Pt.__useDefaultFramebuffer!==void 0?(Lt.bindFramebuffer(xe.FRAMEBUFFER,null),re=!1):Pt.__webglFramebuffer===void 0?Ge.setupRenderTarget(F):Pt.__hasExternalTextures&&Ge.rebindTextures(F,wt.get(F.texture).__webglTexture,wt.get(F.depthTexture).__webglTexture);const jt=F.texture;(jt.isData3DTexture||jt.isDataArrayTexture||jt.isCompressedArrayTexture)&&(Et=!0);const Dt=wt.get(F).__webglFramebuffer;F.isWebGLCubeRenderTarget?(Array.isArray(Dt[pe])?Re=Dt[pe][we]:Re=Dt[pe],gt=!0):Gt.isWebGL2&&F.samples>0&&Ge.useMultisampledRTT(F)===!1?Re=wt.get(F).__webglMultisampledFramebuffer:Array.isArray(Dt)?Re=Dt[we]:Re=Dt,V.copy(F.viewport),Me.copy(F.scissor),Te=F.scissorTest}else V.copy(Le).multiplyScalar(fe).floor(),Me.copy(ge).multiplyScalar(fe).floor(),Te=Ce;if(Lt.bindFramebuffer(xe.FRAMEBUFFER,Re)&&Gt.drawBuffers&&re&&Lt.drawBuffers(F,Re),Lt.viewport(V),Lt.scissor(Me),Lt.setScissorTest(Te),gt){const Pt=wt.get(F.texture);xe.framebufferTexture2D(xe.FRAMEBUFFER,xe.COLOR_ATTACHMENT0,xe.TEXTURE_CUBE_MAP_POSITIVE_X+pe,Pt.__webglTexture,we)}else if(Et){const Pt=wt.get(F.texture),jt=pe||0;xe.framebufferTextureLayer(xe.FRAMEBUFFER,xe.COLOR_ATTACHMENT0,Pt.__webglTexture,we||0,jt)}oe=-1},this.readRenderTargetPixels=function(F,pe,we,re,Re,gt,Et){if(!(F&&F.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Nt=wt.get(F).__webglFramebuffer;if(F.isWebGLCubeRenderTarget&&Et!==void 0&&(Nt=Nt[Et]),Nt){Lt.bindFramebuffer(xe.FRAMEBUFFER,Nt);try{const Pt=F.texture,jt=Pt.format,Dt=Pt.type;if(jt!==Cr&&et.convert(jt)!==xe.getParameter(xe.IMPLEMENTATION_COLOR_READ_FORMAT)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const Wt=Dt===Fs&&(Tt.has("EXT_color_buffer_half_float")||Gt.isWebGL2&&Tt.has("EXT_color_buffer_float"));if(Dt!==fo&&et.convert(Dt)!==xe.getParameter(xe.IMPLEMENTATION_COLOR_READ_TYPE)&&!(Dt===Lr&&(Gt.isWebGL2||Tt.has("OES_texture_float")||Tt.has("WEBGL_color_buffer_float")))&&!Wt){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}pe>=0&&pe<=F.width-re&&we>=0&&we<=F.height-Re&&xe.readPixels(pe,we,re,Re,et.convert(jt),et.convert(Dt),gt)}finally{const Pt=g!==null?wt.get(g).__webglFramebuffer:null;Lt.bindFramebuffer(xe.FRAMEBUFFER,Pt)}}},this.copyFramebufferToTexture=function(F,pe,we=0){const re=Math.pow(2,-we),Re=Math.floor(pe.image.width*re),gt=Math.floor(pe.image.height*re);Ge.setTexture2D(pe,0),xe.copyTexSubImage2D(xe.TEXTURE_2D,we,0,0,F.x,F.y,Re,gt),Lt.unbindTexture()},this.copyTextureToTexture=function(F,pe,we,re=0){const Re=pe.image.width,gt=pe.image.height,Et=et.convert(we.format),Nt=et.convert(we.type);Ge.setTexture2D(we,0),xe.pixelStorei(xe.UNPACK_FLIP_Y_WEBGL,we.flipY),xe.pixelStorei(xe.UNPACK_PREMULTIPLY_ALPHA_WEBGL,we.premultiplyAlpha),xe.pixelStorei(xe.UNPACK_ALIGNMENT,we.unpackAlignment),pe.isDataTexture?xe.texSubImage2D(xe.TEXTURE_2D,re,F.x,F.y,Re,gt,Et,Nt,pe.image.data):pe.isCompressedTexture?xe.compressedTexSubImage2D(xe.TEXTURE_2D,re,F.x,F.y,pe.mipmaps[0].width,pe.mipmaps[0].height,Et,pe.mipmaps[0].data):xe.texSubImage2D(xe.TEXTURE_2D,re,F.x,F.y,Et,Nt,pe.image),re===0&&we.generateMipmaps&&xe.generateMipmap(xe.TEXTURE_2D),Lt.unbindTexture()},this.copyTextureToTexture3D=function(F,pe,we,re,Re=0){if(I.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const gt=F.max.x-F.min.x+1,Et=F.max.y-F.min.y+1,Nt=F.max.z-F.min.z+1,Pt=et.convert(re.format),jt=et.convert(re.type);let Dt;if(re.isData3DTexture)Ge.setTexture3D(re,0),Dt=xe.TEXTURE_3D;else if(re.isDataArrayTexture)Ge.setTexture2DArray(re,0),Dt=xe.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}xe.pixelStorei(xe.UNPACK_FLIP_Y_WEBGL,re.flipY),xe.pixelStorei(xe.UNPACK_PREMULTIPLY_ALPHA_WEBGL,re.premultiplyAlpha),xe.pixelStorei(xe.UNPACK_ALIGNMENT,re.unpackAlignment);const Wt=xe.getParameter(xe.UNPACK_ROW_LENGTH),Qt=xe.getParameter(xe.UNPACK_IMAGE_HEIGHT),bn=xe.getParameter(xe.UNPACK_SKIP_PIXELS),Mi=xe.getParameter(xe.UNPACK_SKIP_ROWS),ue=xe.getParameter(xe.UNPACK_SKIP_IMAGES),Pn=we.isCompressedTexture?we.mipmaps[0]:we.image;xe.pixelStorei(xe.UNPACK_ROW_LENGTH,Pn.width),xe.pixelStorei(xe.UNPACK_IMAGE_HEIGHT,Pn.height),xe.pixelStorei(xe.UNPACK_SKIP_PIXELS,F.min.x),xe.pixelStorei(xe.UNPACK_SKIP_ROWS,F.min.y),xe.pixelStorei(xe.UNPACK_SKIP_IMAGES,F.min.z),we.isDataTexture||we.isData3DTexture?xe.texSubImage3D(Dt,Re,pe.x,pe.y,pe.z,gt,Et,Nt,Pt,jt,Pn.data):we.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),xe.compressedTexSubImage3D(Dt,Re,pe.x,pe.y,pe.z,gt,Et,Nt,Pt,Pn.data)):xe.texSubImage3D(Dt,Re,pe.x,pe.y,pe.z,gt,Et,Nt,Pt,jt,Pn),xe.pixelStorei(xe.UNPACK_ROW_LENGTH,Wt),xe.pixelStorei(xe.UNPACK_IMAGE_HEIGHT,Qt),xe.pixelStorei(xe.UNPACK_SKIP_PIXELS,bn),xe.pixelStorei(xe.UNPACK_SKIP_ROWS,Mi),xe.pixelStorei(xe.UNPACK_SKIP_IMAGES,ue),Re===0&&re.generateMipmaps&&xe.generateMipmap(Dt),Lt.unbindTexture()},this.initTexture=function(F){F.isCubeTexture?Ge.setTextureCube(F,0):F.isData3DTexture?Ge.setTexture3D(F,0):F.isDataArrayTexture||F.isCompressedArrayTexture?Ge.setTexture2DArray(F,0):Ge.setTexture2D(F,0),Lt.unbindTexture()},this.resetState=function(){X=0,G=0,g=null,Lt.reset(),_t.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Hs}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=e===_f?"display-p3":"srgb",t.unpackColorSpace=Dn.workingColorSpace===ph?"display-p3":"srgb"}get physicallyCorrectLights(){return console.warn("THREE.WebGLRenderer: The property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),!this.useLegacyLights}set physicallyCorrectLights(e){console.warn("THREE.WebGLRenderer: The property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),this.useLegacyLights=!e}get outputEncoding(){return console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace===An?Xo:s0}set outputEncoding(e){console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=e===Xo?An:Di}get useLegacyLights(){return console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights}set useLegacyLights(e){console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights=e}}class tS extends Tf{}tS.prototype.isWebGL1Renderer=!0;class oh extends zn{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t}}class nS{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=qu,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=os()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,n){e*=this.stride,n*=t.stride;for(let r=0,o=this.stride;r<o;r++)this.array[e+r]=t.array[n+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=os()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=os()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const qi=new ce;class Af{constructor(e,t,n,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,n=this.data.count;t<n;t++)qi.fromBufferAttribute(this,t),qi.applyMatrix4(e),this.setXYZ(t,qi.x,qi.y,qi.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)qi.fromBufferAttribute(this,t),qi.applyNormalMatrix(e),this.setXYZ(t,qi.x,qi.y,qi.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)qi.fromBufferAttribute(this,t),qi.transformDirection(e),this.setXYZ(t,qi.x,qi.y,qi.z);return this}setX(e,t){return this.normalized&&(t=kn(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=kn(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=kn(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=kn(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=vs(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=vs(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=vs(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=vs(t,this.array)),t}setXY(e,t,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=kn(t,this.array),n=kn(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this}setXYZ(e,t,n,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=kn(t,this.array),n=kn(n,this.array),r=kn(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this}setXYZW(e,t,n,r,o){return e=e*this.data.stride+this.offset,this.normalized&&(t=kn(t,this.array),n=kn(n,this.array),r=kn(r,this.array),o=kn(o,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this.data.array[e+3]=o,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const r=n*this.data.stride+this.offset;for(let o=0;o<this.itemSize;o++)t.push(this.data.array[r+o])}return new _i(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Af(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const r=n*this.data.stride+this.offset;for(let o=0;o<this.itemSize;o++)t.push(this.data.array[r+o])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}const Hm=new ce,zm=new Bn,Gm=new Bn,iS=new ce,Vm=new hn,Ta=new ce,wu=new Es,Wm=new hn,Mu=new Gl;class rS extends $i{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new hn,this.bindMatrixInverse=new hn,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new Xs),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let n=0;n<t.count;n++)Ta.fromBufferAttribute(t,n),this.applyBoneTransform(n,Ta),this.boundingBox.expandByPoint(Ta)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new Es),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let n=0;n<t.count;n++)Ta.fromBufferAttribute(t,n),this.applyBoneTransform(n,Ta),this.boundingSphere.expandByPoint(Ta)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const n=this.material,r=this.matrixWorld;n!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),wu.copy(this.boundingSphere),wu.applyMatrix4(r),e.ray.intersectsSphere(wu)!==!1&&(Wm.copy(r).invert(),Mu.copy(e.ray).applyMatrix4(Wm),!(this.boundingBox!==null&&Mu.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,Mu)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Bn,t=this.geometry.attributes.skinWeight;for(let n=0,r=t.count;n<r;n++){e.fromBufferAttribute(t,n);const o=1/e.manhattanLength();o!==1/0?e.multiplyScalar(o):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const n=this.skeleton,r=this.geometry;zm.fromBufferAttribute(r.attributes.skinIndex,e),Gm.fromBufferAttribute(r.attributes.skinWeight,e),Hm.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let o=0;o<4;o++){const l=Gm.getComponent(o);if(l!==0){const c=zm.getComponent(o);Vm.multiplyMatrices(n.bones[c].matrixWorld,n.boneInverses[c]),t.addScaledVector(iS.copy(Hm).applyMatrix4(Vm),l)}}return t.applyMatrix4(this.bindMatrixInverse)}boneTransform(e,t){return console.warn("THREE.SkinnedMesh: .boneTransform() was renamed to .applyBoneTransform() in r151."),this.applyBoneTransform(e,t)}}class M0 extends zn{constructor(){super(),this.isBone=!0,this.type="Bone"}}class E0 extends hi{constructor(e=null,t=1,n=1,r,o,l,c,f,d=xi,m=xi,v,y){super(null,l,c,f,d,m,r,o,v,y),this.isDataTexture=!0,this.image={data:e,width:t,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const $m=new hn,sS=new hn;class Cf{constructor(e=[],t=[]){this.uuid=os(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let n=0,r=this.bones.length;n<r;n++)this.boneInverses.push(new hn)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const n=new hn;this.bones[e]&&n.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(n)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&n.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&(n.parent&&n.parent.isBone?(n.matrix.copy(n.parent.matrixWorld).invert(),n.matrix.multiply(n.matrixWorld)):n.matrix.copy(n.matrixWorld),n.matrix.decompose(n.position,n.quaternion,n.scale))}}update(){const e=this.bones,t=this.boneInverses,n=this.boneMatrices,r=this.boneTexture;for(let o=0,l=e.length;o<l;o++){const c=e[o]?e[o].matrixWorld:sS;$m.multiplyMatrices(c,t[o]),$m.toArray(n,o*16)}r!==null&&(r.needsUpdate=!0)}clone(){return new Cf(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=a0(e),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const n=new E0(t,e,e,Cr,Lr);return n.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=n,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,n=this.bones.length;t<n;t++){const r=this.bones[t];if(r.name===e)return r}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let n=0,r=e.bones.length;n<r;n++){const o=e.bones[n];let l=t[o];l===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",o),l=new M0),this.bones.push(l),this.boneInverses.push(new hn().fromArray(e.boneInverses[n]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,n=this.boneInverses;for(let r=0,o=t.length;r<o;r++){const l=t[r];e.bones.push(l.uuid);const c=n[r];e.boneInverses.push(c.toArray())}return e}}class Xm extends _i{constructor(e,t,n,r=1){super(e,t,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const Aa=new hn,jm=new hn,kc=[],Ym=new Xs,oS=new hn,xl=new $i,yl=new Es;class aS extends $i{constructor(e,t,n){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new Xm(new Float32Array(n*16),16),this.instanceColor=null,this.count=n,this.boundingBox=null,this.boundingSphere=null;for(let r=0;r<n;r++)this.setMatrixAt(r,oS)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new Xs),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,Aa),Ym.copy(e.boundingBox).applyMatrix4(Aa),this.boundingBox.union(Ym)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new Es),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,Aa),yl.copy(e.boundingSphere).applyMatrix4(Aa),this.boundingSphere.union(yl)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}raycast(e,t){const n=this.matrixWorld,r=this.count;if(xl.geometry=this.geometry,xl.material=this.material,xl.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),yl.copy(this.boundingSphere),yl.applyMatrix4(n),e.ray.intersectsSphere(yl)!==!1))for(let o=0;o<r;o++){this.getMatrixAt(o,Aa),jm.multiplyMatrices(n,Aa),xl.matrixWorld=jm,xl.raycast(e,kc);for(let l=0,c=kc.length;l<c;l++){const f=kc[l];f.instanceId=o,f.object=this,t.push(f)}kc.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new Xm(new Float32Array(this.instanceMatrix.count*3),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class xh extends xs{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Yt(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const qm=new ce,Zm=new ce,Km=new hn,Eu=new Gl,Bc=new Es;class Fl extends zn{constructor(e=new Or,t=new xh){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,n=[0];for(let r=1,o=t.count;r<o;r++)qm.fromBufferAttribute(t,r-1),Zm.fromBufferAttribute(t,r),n[r]=n[r-1],n[r]+=qm.distanceTo(Zm);e.setAttribute("lineDistance",new Ur(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const n=this.geometry,r=this.matrixWorld,o=e.params.Line.threshold,l=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),Bc.copy(n.boundingSphere),Bc.applyMatrix4(r),Bc.radius+=o,e.ray.intersectsSphere(Bc)===!1)return;Km.copy(r).invert(),Eu.copy(e.ray).applyMatrix4(Km);const c=o/((this.scale.x+this.scale.y+this.scale.z)/3),f=c*c,d=new ce,m=new ce,v=new ce,y=new ce,M=this.isLineSegments?2:1,T=n.index,E=n.attributes.position;if(T!==null){const b=Math.max(0,l.start),z=Math.min(T.count,l.start+l.count);for(let I=b,H=z-1;I<H;I+=M){const X=T.getX(I),G=T.getX(I+1);if(d.fromBufferAttribute(E,X),m.fromBufferAttribute(E,G),Eu.distanceSqToSegment(d,m,y,v)>f)continue;y.applyMatrix4(this.matrixWorld);const oe=e.ray.origin.distanceTo(y);oe<e.near||oe>e.far||t.push({distance:oe,point:v.clone().applyMatrix4(this.matrixWorld),index:I,face:null,faceIndex:null,object:this})}}else{const b=Math.max(0,l.start),z=Math.min(E.count,l.start+l.count);for(let I=b,H=z-1;I<H;I+=M){if(d.fromBufferAttribute(E,I),m.fromBufferAttribute(E,I+1),Eu.distanceSqToSegment(d,m,y,v)>f)continue;y.applyMatrix4(this.matrixWorld);const G=e.ray.origin.distanceTo(y);G<e.near||G>e.far||t.push({distance:G,point:v.clone().applyMatrix4(this.matrixWorld),index:I,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const r=t[n[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,l=r.length;o<l;o++){const c=r[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[c]=o}}}}}const Jm=new ce,Qm=new ce;class S0 extends Fl{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,n=[];for(let r=0,o=t.count;r<o;r+=2)Jm.fromBufferAttribute(t,r),Qm.fromBufferAttribute(t,r+1),n[r]=r===0?0:n[r-1],n[r+1]=n[r]+Jm.distanceTo(Qm);e.setAttribute("lineDistance",new Ur(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class lS extends Fl{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class T0 extends xs{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Yt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const eg=new hn,ef=new Gl,Fc=new Es,Hc=new ce;class cS extends zn{constructor(e=new Or,t=new T0){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const n=this.geometry,r=this.matrixWorld,o=e.params.Points.threshold,l=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),Fc.copy(n.boundingSphere),Fc.applyMatrix4(r),Fc.radius+=o,e.ray.intersectsSphere(Fc)===!1)return;eg.copy(r).invert(),ef.copy(e.ray).applyMatrix4(eg);const c=o/((this.scale.x+this.scale.y+this.scale.z)/3),f=c*c,d=n.index,v=n.attributes.position;if(d!==null){const y=Math.max(0,l.start),M=Math.min(d.count,l.start+l.count);for(let T=y,A=M;T<A;T++){const E=d.getX(T);Hc.fromBufferAttribute(v,E),tg(Hc,E,f,r,e,t,this)}}else{const y=Math.max(0,l.start),M=Math.min(v.count,l.start+l.count);for(let T=y,A=M;T<A;T++)Hc.fromBufferAttribute(v,T),tg(Hc,T,f,r,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const r=t[n[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,l=r.length;o<l;o++){const c=r[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[c]=o}}}}}function tg(s,e,t,n,r,o,l){const c=ef.distanceSqToPoint(s);if(c<t){const f=new ce;ef.closestPointToPoint(s,f),f.applyMatrix4(n);const d=r.ray.origin.distanceTo(f);if(d<r.near||d>r.far)return;o.push({distance:d,distanceToRay:Math.sqrt(c),point:f,index:e,face:null,object:l})}}class Su extends hi{constructor(e,t,n,r,o,l,c,f,d,m,v,y){super(null,l,c,f,d,m,r,o,v,y),this.isCompressedTexture=!0,this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class Rf extends xs{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Yt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Yt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=o0,this.normalScale=new Jt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class yi extends Rf{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Jt(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Ci(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Yt(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Yt(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Yt(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}function zc(s,e,t){return!s||!t&&s.constructor===e?s:typeof e.BYTES_PER_ELEMENT=="number"?new e(s):Array.prototype.slice.call(s)}function hS(s){return ArrayBuffer.isView(s)&&!(s instanceof DataView)}function uS(s){function e(r,o){return s[r]-s[o]}const t=s.length,n=new Array(t);for(let r=0;r!==t;++r)n[r]=r;return n.sort(e),n}function ng(s,e,t){const n=s.length,r=new s.constructor(n);for(let o=0,l=0;l!==n;++o){const c=t[o]*e;for(let f=0;f!==e;++f)r[l++]=s[c+f]}return r}function A0(s,e,t,n){let r=1,o=s[0];for(;o!==void 0&&o[n]===void 0;)o=s[r++];if(o===void 0)return;let l=o[n];if(l!==void 0)if(Array.isArray(l))do l=o[n],l!==void 0&&(e.push(o.time),t.push.apply(t,l)),o=s[r++];while(o!==void 0);else if(l.toArray!==void 0)do l=o[n],l!==void 0&&(e.push(o.time),l.toArray(t,t.length)),o=s[r++];while(o!==void 0);else do l=o[n],l!==void 0&&(e.push(o.time),t.push(l)),o=s[r++];while(o!==void 0)}class $l{constructor(e,t,n,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new t.constructor(n),this.sampleValues=t,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let n=this._cachedIndex,r=t[n],o=t[n-1];n:{e:{let l;t:{i:if(!(e<r)){for(let c=n+2;;){if(r===void 0){if(e<o)break i;return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===c)break;if(o=r,r=t[++n],e<r)break e}l=t.length;break t}if(!(e>=o)){const c=t[1];e<c&&(n=2,o=c);for(let f=n-2;;){if(o===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(n===f)break;if(r=o,o=t[--n-1],e>=o)break e}l=n,n=0;break t}break n}for(;n<l;){const c=n+l>>>1;e<t[c]?l=c:n=c+1}if(r=t[n],o=t[n-1],o===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,o,r)}return this.interpolate_(n,o,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,o=e*r;for(let l=0;l!==r;++l)t[l]=n[o+l];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class fS extends $l{constructor(e,t,n,r){super(e,t,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Jp,endingEnd:Jp}}intervalChanged_(e,t,n){const r=this.parameterPositions;let o=e-2,l=e+1,c=r[o],f=r[l];if(c===void 0)switch(this.getSettings_().endingStart){case Qp:o=e,c=2*t-n;break;case em:o=r.length-2,c=t+r[o]-r[o+1];break;default:o=e,c=n}if(f===void 0)switch(this.getSettings_().endingEnd){case Qp:l=e,f=2*n-t;break;case em:l=1,f=n+r[1]-r[0];break;default:l=e-1,f=t}const d=(n-t)*.5,m=this.valueSize;this._weightPrev=d/(t-c),this._weightNext=d/(f-n),this._offsetPrev=o*m,this._offsetNext=l*m}interpolate_(e,t,n,r){const o=this.resultBuffer,l=this.sampleValues,c=this.valueSize,f=e*c,d=f-c,m=this._offsetPrev,v=this._offsetNext,y=this._weightPrev,M=this._weightNext,T=(n-t)/(r-t),A=T*T,E=A*T,b=-y*E+2*y*A-y*T,z=(1+y)*E+(-1.5-2*y)*A+(-.5+y)*T+1,I=(-1-M)*E+(1.5+M)*A+.5*T,H=M*E-M*A;for(let X=0;X!==c;++X)o[X]=b*l[m+X]+z*l[d+X]+I*l[f+X]+H*l[v+X];return o}}class dS extends $l{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){const o=this.resultBuffer,l=this.sampleValues,c=this.valueSize,f=e*c,d=f-c,m=(n-t)/(r-t),v=1-m;for(let y=0;y!==c;++y)o[y]=l[d+y]*v+l[f+y]*m;return o}}class pS extends $l{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class Ss{constructor(e,t,n,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=zc(t,this.TimeBufferType),this.values=zc(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let n;if(t.toJSON!==this.toJSON)n=t.toJSON(e);else{n={name:e.name,times:zc(e.times,Array),values:zc(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(n.interpolation=r)}return n.type=e.ValueTypeName,n}InterpolantFactoryMethodDiscrete(e){return new pS(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new dS(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new fS(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case Wa:t=this.InterpolantFactoryMethodDiscrete;break;case Yo:t=this.InterpolantFactoryMethodLinear;break;case Qh:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(n);return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Wa;case this.InterpolantFactoryMethodLinear:return Yo;case this.InterpolantFactoryMethodSmooth:return Qh}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]*=e}return this}trim(e,t){const n=this.times,r=n.length;let o=0,l=r-1;for(;o!==r&&n[o]<e;)++o;for(;l!==-1&&n[l]>t;)--l;if(++l,o!==0||l!==r){o>=l&&(l=Math.max(l,1),o=l-1);const c=this.getValueSize();this.times=n.slice(o,l),this.values=this.values.slice(o*c,l*c)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const n=this.times,r=this.values,o=n.length;o===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let l=null;for(let c=0;c!==o;c++){const f=n[c];if(typeof f=="number"&&isNaN(f)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,c,f),e=!1;break}if(l!==null&&l>f){console.error("THREE.KeyframeTrack: Out of order keys.",this,c,f,l),e=!1;break}l=f}if(r!==void 0&&hS(r))for(let c=0,f=r.length;c!==f;++c){const d=r[c];if(isNaN(d)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,c,d),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),n=this.getValueSize(),r=this.getInterpolation()===Qh,o=e.length-1;let l=1;for(let c=1;c<o;++c){let f=!1;const d=e[c],m=e[c+1];if(d!==m&&(c!==1||d!==e[0]))if(r)f=!0;else{const v=c*n,y=v-n,M=v+n;for(let T=0;T!==n;++T){const A=t[v+T];if(A!==t[y+T]||A!==t[M+T]){f=!0;break}}}if(f){if(c!==l){e[l]=e[c];const v=c*n,y=l*n;for(let M=0;M!==n;++M)t[y+M]=t[v+M]}++l}}if(o>0){e[l]=e[o];for(let c=o*n,f=l*n,d=0;d!==n;++d)t[f+d]=t[c+d];++l}return l!==e.length?(this.times=e.slice(0,l),this.values=t.slice(0,l*n)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),n=this.constructor,r=new n(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}Ss.prototype.TimeBufferType=Float32Array;Ss.prototype.ValueBufferType=Float32Array;Ss.prototype.DefaultInterpolation=Yo;class Ja extends Ss{}Ja.prototype.ValueTypeName="bool";Ja.prototype.ValueBufferType=Array;Ja.prototype.DefaultInterpolation=Wa;Ja.prototype.InterpolantFactoryMethodLinear=void 0;Ja.prototype.InterpolantFactoryMethodSmooth=void 0;class C0 extends Ss{}C0.prototype.ValueTypeName="color";class ja extends Ss{}ja.prototype.ValueTypeName="number";class mS extends $l{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){const o=this.resultBuffer,l=this.sampleValues,c=this.valueSize,f=(n-t)/(r-t);let d=e*c;for(let m=d+c;d!==m;d+=4)bs.slerpFlat(o,0,l,d-c,l,d,f);return o}}class qo extends Ss{InterpolantFactoryMethodLinear(e){return new mS(this.times,this.values,this.getValueSize(),e)}}qo.prototype.ValueTypeName="quaternion";qo.prototype.DefaultInterpolation=Yo;qo.prototype.InterpolantFactoryMethodSmooth=void 0;class Qa extends Ss{}Qa.prototype.ValueTypeName="string";Qa.prototype.ValueBufferType=Array;Qa.prototype.DefaultInterpolation=Wa;Qa.prototype.InterpolantFactoryMethodLinear=void 0;Qa.prototype.InterpolantFactoryMethodSmooth=void 0;class Ya extends Ss{}Ya.prototype.ValueTypeName="vector";class gS{constructor(e,t=-1,n,r=E_){this.name=e,this.tracks=n,this.duration=t,this.blendMode=r,this.uuid=os(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],n=e.tracks,r=1/(e.fps||1);for(let l=0,c=n.length;l!==c;++l)t.push(xS(n[l]).scale(r));const o=new this(e.name,e.duration,t,e.blendMode);return o.uuid=e.uuid,o}static toJSON(e){const t=[],n=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let o=0,l=n.length;o!==l;++o)t.push(Ss.toJSON(n[o]));return r}static CreateFromMorphTargetSequence(e,t,n,r){const o=t.length,l=[];for(let c=0;c<o;c++){let f=[],d=[];f.push((c+o-1)%o,c,(c+1)%o),d.push(0,1,0);const m=uS(f);f=ng(f,1,m),d=ng(d,1,m),!r&&f[0]===0&&(f.push(o),d.push(d[0])),l.push(new ja(".morphTargetInfluences["+t[c].name+"]",f,d).scale(1/n))}return new this(e,-1,l)}static findByName(e,t){let n=e;if(!Array.isArray(e)){const r=e;n=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<n.length;r++)if(n[r].name===t)return n[r];return null}static CreateClipsFromMorphTargetSequences(e,t,n){const r={},o=/^([\w-]*?)([\d]+)$/;for(let c=0,f=e.length;c<f;c++){const d=e[c],m=d.name.match(o);if(m&&m.length>1){const v=m[1];let y=r[v];y||(r[v]=y=[]),y.push(d)}}const l=[];for(const c in r)l.push(this.CreateFromMorphTargetSequence(c,r[c],t,n));return l}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(v,y,M,T,A){if(M.length!==0){const E=[],b=[];A0(M,E,b,T),E.length!==0&&A.push(new v(y,E,b))}},r=[],o=e.name||"default",l=e.fps||30,c=e.blendMode;let f=e.length||-1;const d=e.hierarchy||[];for(let v=0;v<d.length;v++){const y=d[v].keys;if(!(!y||y.length===0))if(y[0].morphTargets){const M={};let T;for(T=0;T<y.length;T++)if(y[T].morphTargets)for(let A=0;A<y[T].morphTargets.length;A++)M[y[T].morphTargets[A]]=-1;for(const A in M){const E=[],b=[];for(let z=0;z!==y[T].morphTargets.length;++z){const I=y[T];E.push(I.time),b.push(I.morphTarget===A?1:0)}r.push(new ja(".morphTargetInfluence["+A+"]",E,b))}f=M.length*l}else{const M=".bones["+t[v].name+"]";n(Ya,M+".position",y,"pos",r),n(qo,M+".quaternion",y,"rot",r),n(Ya,M+".scale",y,"scl",r)}}return r.length===0?null:new this(o,f,r,c)}resetDuration(){const e=this.tracks;let t=0;for(let n=0,r=e.length;n!==r;++n){const o=this.tracks[n];t=Math.max(t,o.times[o.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function vS(s){switch(s.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return ja;case"vector":case"vector2":case"vector3":case"vector4":return Ya;case"color":return C0;case"quaternion":return qo;case"bool":case"boolean":return Ja;case"string":return Qa}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+s)}function xS(s){if(s.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=vS(s.type);if(s.times===void 0){const t=[],n=[];A0(s.keys,t,n,"value"),s.times=t,s.values=n}return e.parse!==void 0?e.parse(s):new e(s.name,s.times,s.values,s.interpolation)}const qa={enabled:!1,files:{},add:function(s,e){this.enabled!==!1&&(this.files[s]=e)},get:function(s){if(this.enabled!==!1)return this.files[s]},remove:function(s){delete this.files[s]},clear:function(){this.files={}}};class yS{constructor(e,t,n){const r=this;let o=!1,l=0,c=0,f;const d=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(m){c++,o===!1&&r.onStart!==void 0&&r.onStart(m,l,c),o=!0},this.itemEnd=function(m){l++,r.onProgress!==void 0&&r.onProgress(m,l,c),l===c&&(o=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(m){r.onError!==void 0&&r.onError(m)},this.resolveURL=function(m){return f?f(m):m},this.setURLModifier=function(m){return f=m,this},this.addHandler=function(m,v){return d.push(m,v),this},this.removeHandler=function(m){const v=d.indexOf(m);return v!==-1&&d.splice(v,2),this},this.getHandler=function(m){for(let v=0,y=d.length;v<y;v+=2){const M=d[v],T=d[v+1];if(M.global&&(M.lastIndex=0),M.test(m))return T}return null}}}const _S=new yS;class Jo{constructor(e){this.manager=e!==void 0?e:_S,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const n=this;return new Promise(function(r,o){n.load(e,r,t,o)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}Jo.DEFAULT_MATERIAL_NAME="__DEFAULT";const Us={};class bS extends Error{constructor(e,t){super(e),this.response=t}}class Lf extends Jo{constructor(e){super(e)}load(e,t,n,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const o=qa.get(e);if(o!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(o),this.manager.itemEnd(e)},0),o;if(Us[e]!==void 0){Us[e].push({onLoad:t,onProgress:n,onError:r});return}Us[e]=[],Us[e].push({onLoad:t,onProgress:n,onError:r});const l=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),c=this.mimeType,f=this.responseType;fetch(l).then(d=>{if(d.status===200||d.status===0){if(d.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||d.body===void 0||d.body.getReader===void 0)return d;const m=Us[e],v=d.body.getReader(),y=d.headers.get("Content-Length")||d.headers.get("X-File-Size"),M=y?parseInt(y):0,T=M!==0;let A=0;const E=new ReadableStream({start(b){z();function z(){v.read().then(({done:I,value:H})=>{if(I)b.close();else{A+=H.byteLength;const X=new ProgressEvent("progress",{lengthComputable:T,loaded:A,total:M});for(let G=0,g=m.length;G<g;G++){const oe=m[G];oe.onProgress&&oe.onProgress(X)}b.enqueue(H),z()}})}}});return new Response(E)}else throw new bS(`fetch for "${d.url}" responded with ${d.status}: ${d.statusText}`,d)}).then(d=>{switch(f){case"arraybuffer":return d.arrayBuffer();case"blob":return d.blob();case"document":return d.text().then(m=>new DOMParser().parseFromString(m,c));case"json":return d.json();default:if(c===void 0)return d.text();{const v=/charset="?([^;"\s]*)"?/i.exec(c),y=v&&v[1]?v[1].toLowerCase():void 0,M=new TextDecoder(y);return d.arrayBuffer().then(T=>M.decode(T))}}}).then(d=>{qa.add(e,d);const m=Us[e];delete Us[e];for(let v=0,y=m.length;v<y;v++){const M=m[v];M.onLoad&&M.onLoad(d)}}).catch(d=>{const m=Us[e];if(m===void 0)throw this.manager.itemError(e),d;delete Us[e];for(let v=0,y=m.length;v<y;v++){const M=m[v];M.onError&&M.onError(d)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class wS extends Jo{constructor(e){super(e)}load(e,t,n,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const o=this,l=qa.get(e);if(l!==void 0)return o.manager.itemStart(e),setTimeout(function(){t&&t(l),o.manager.itemEnd(e)},0),l;const c=Bl("img");function f(){m(),qa.add(e,this),t&&t(this),o.manager.itemEnd(e)}function d(v){m(),r&&r(v),o.manager.itemError(e),o.manager.itemEnd(e)}function m(){c.removeEventListener("load",f,!1),c.removeEventListener("error",d,!1)}return c.addEventListener("load",f,!1),c.addEventListener("error",d,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(c.crossOrigin=this.crossOrigin),o.manager.itemStart(e),c.src=e,c}}class MS extends Jo{constructor(e){super(e)}load(e,t,n,r){const o=this,l=new E0,c=new Lf(this.manager);return c.setResponseType("arraybuffer"),c.setRequestHeader(this.requestHeader),c.setPath(this.path),c.setWithCredentials(o.withCredentials),c.load(e,function(f){let d;try{d=o.parse(f)}catch(m){if(r!==void 0)r(m);else{console.error(m);return}}d.image!==void 0?l.image=d.image:d.data!==void 0&&(l.image.width=d.width,l.image.height=d.height,l.image.data=d.data),l.wrapS=d.wrapS!==void 0?d.wrapS:er,l.wrapT=d.wrapT!==void 0?d.wrapT:er,l.magFilter=d.magFilter!==void 0?d.magFilter:li,l.minFilter=d.minFilter!==void 0?d.minFilter:li,l.anisotropy=d.anisotropy!==void 0?d.anisotropy:1,d.colorSpace!==void 0?l.colorSpace=d.colorSpace:d.encoding!==void 0&&(l.encoding=d.encoding),d.flipY!==void 0&&(l.flipY=d.flipY),d.format!==void 0&&(l.format=d.format),d.type!==void 0&&(l.type=d.type),d.mipmaps!==void 0&&(l.mipmaps=d.mipmaps,l.minFilter=Ws),d.mipmapCount===1&&(l.minFilter=li),d.generateMipmaps!==void 0&&(l.generateMipmaps=d.generateMipmaps),l.needsUpdate=!0,t&&t(l,d)},n,r),l}}class Oa extends Jo{constructor(e){super(e)}load(e,t,n,r){const o=new hi,l=new wS(this.manager);return l.setCrossOrigin(this.crossOrigin),l.setPath(this.path),l.load(e,function(c){o.image=c,o.needsUpdate=!0,t!==void 0&&t(o)},n,r),o}}class yh extends zn{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new Yt(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}}const Tu=new hn,ig=new ce,rg=new ce;class Df{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Jt(512,512),this.map=null,this.mapPass=null,this.matrix=new hn,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Ef,this._frameExtents=new Jt(1,1),this._viewportCount=1,this._viewports=[new Bn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,n=this.matrix;ig.setFromMatrixPosition(e.matrixWorld),t.position.copy(ig),rg.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(rg),t.updateMatrixWorld(),Tu.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Tu),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(Tu)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class ES extends Df{constructor(){super(new Ri(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,n=$a*2*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,o=e.distance||t.far;(n!==t.fov||r!==t.aspect||o!==t.far)&&(t.fov=n,t.aspect=r,t.far=o,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class SS extends yh{constructor(e,t,n=0,r=Math.PI/3,o=0,l=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(zn.DEFAULT_UP),this.updateMatrix(),this.target=new zn,this.distance=n,this.angle=r,this.penumbra=o,this.decay=l,this.map=null,this.shadow=new ES}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const sg=new hn,_l=new ce,Au=new ce;class TS extends Df{constructor(){super(new Ri(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Jt(4,2),this._viewportCount=6,this._viewports=[new Bn(2,1,1,1),new Bn(0,1,1,1),new Bn(3,1,1,1),new Bn(1,1,1,1),new Bn(3,0,1,1),new Bn(1,0,1,1)],this._cubeDirections=[new ce(1,0,0),new ce(-1,0,0),new ce(0,0,1),new ce(0,0,-1),new ce(0,1,0),new ce(0,-1,0)],this._cubeUps=[new ce(0,1,0),new ce(0,1,0),new ce(0,1,0),new ce(0,1,0),new ce(0,0,1),new ce(0,0,-1)]}updateMatrices(e,t=0){const n=this.camera,r=this.matrix,o=e.distance||n.far;o!==n.far&&(n.far=o,n.updateProjectionMatrix()),_l.setFromMatrixPosition(e.matrixWorld),n.position.copy(_l),Au.copy(n.position),Au.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(Au),n.updateMatrixWorld(),r.makeTranslation(-_l.x,-_l.y,-_l.z),sg.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(sg)}}class AS extends yh{constructor(e,t,n=0,r=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=r,this.shadow=new TS}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class CS extends Df{constructor(){super(new gh(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class Jc extends yh{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(zn.DEFAULT_UP),this.updateMatrix(),this.target=new zn,this.shadow=new CS}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class RS extends yh{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class tf{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let n=0,r=e.length;n<r;n++)t+=String.fromCharCode(e[n]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class LS extends Jo{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,n,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const o=this,l=qa.get(e);if(l!==void 0)return o.manager.itemStart(e),setTimeout(function(){t&&t(l),o.manager.itemEnd(e)},0),l;const c={};c.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",c.headers=this.requestHeader,fetch(e,c).then(function(f){return f.blob()}).then(function(f){return createImageBitmap(f,Object.assign(o.options,{colorSpaceConversion:"none"}))}).then(function(f){qa.add(e,f),t&&t(f),o.manager.itemEnd(e)}).catch(function(f){r&&r(f),o.manager.itemError(e),o.manager.itemEnd(e)}),o.manager.itemStart(e)}}const Pf="\\[\\]\\.:\\/",DS=new RegExp("["+Pf+"]","g"),If="[^"+Pf+"]",PS="[^"+Pf.replace("\\.","")+"]",IS=/((?:WC+[\/:])*)/.source.replace("WC",If),NS=/(WCOD+)?/.source.replace("WCOD",PS),US=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",If),OS=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",If),kS=new RegExp("^"+IS+NS+US+OS+"$"),BS=["material","materials","bones","map"];class FS{constructor(e,t,n){const r=n||wn.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const n=this._targetGroup.nCachedObjects_,r=this._bindings[n];r!==void 0&&r.getValue(e,t)}setValue(e,t){const n=this._bindings;for(let r=this._targetGroup.nCachedObjects_,o=n.length;r!==o;++r)n[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}class wn{constructor(e,t,n){this.path=t,this.parsedPath=n||wn.parseTrackName(t),this.node=wn.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,n){return e&&e.isAnimationObjectGroup?new wn.Composite(e,t,n):new wn(e,t,n)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(DS,"")}static parseTrackName(e){const t=kS.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(r!==void 0&&r!==-1){const o=n.nodeName.substring(r+1);BS.indexOf(o)!==-1&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=o)}if(n.propertyName===null||n.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const n=e.skeleton.getBoneByName(t);if(n!==void 0)return n}if(e.children){const n=function(o){for(let l=0;l<o.length;l++){const c=o[l];if(c.name===t||c.uuid===t)return c;const f=n(c.children);if(f)return f}return null},r=n(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const n=this.resolvedProperty;for(let r=0,o=n.length;r!==o;++r)e[t++]=n[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const n=this.resolvedProperty;for(let r=0,o=n.length;r!==o;++r)n[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const n=this.resolvedProperty;for(let r=0,o=n.length;r!==o;++r)n[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const n=this.resolvedProperty;for(let r=0,o=n.length;r!==o;++r)n[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,n=t.objectName,r=t.propertyName;let o=t.propertyIndex;if(e||(e=wn.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(n){let d=t.objectIndex;switch(n){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let m=0;m<e.length;m++)if(e[m].name===d){d=m;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[n]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[n]}if(d!==void 0){if(e[d]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[d]}}const l=e[r];if(l===void 0){const d=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+d+"."+r+" but it wasn't found.",e);return}let c=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?c=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(c=this.Versioning.MatrixWorldNeedsUpdate);let f=this.BindingType.Direct;if(o!==void 0){if(r==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[o]!==void 0&&(o=e.morphTargetDictionary[o])}f=this.BindingType.ArrayElement,this.resolvedProperty=l,this.propertyIndex=o}else l.fromArray!==void 0&&l.toArray!==void 0?(f=this.BindingType.HasFromToArray,this.resolvedProperty=l):Array.isArray(l)?(f=this.BindingType.EntireArray,this.resolvedProperty=l):this.propertyName=r;this.getValue=this.GetterByBindingType[f],this.setValue=this.SetterByBindingTypeAndVersioning[f][c]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}wn.Composite=FS;wn.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};wn.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};wn.prototype.GetterByBindingType=[wn.prototype._getValue_direct,wn.prototype._getValue_array,wn.prototype._getValue_arrayElement,wn.prototype._getValue_toArray];wn.prototype.SetterByBindingTypeAndVersioning=[[wn.prototype._setValue_direct,wn.prototype._setValue_direct_setNeedsUpdate,wn.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[wn.prototype._setValue_array,wn.prototype._setValue_array_setNeedsUpdate,wn.prototype._setValue_array_setMatrixWorldNeedsUpdate],[wn.prototype._setValue_arrayElement,wn.prototype._setValue_arrayElement_setNeedsUpdate,wn.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[wn.prototype._setValue_fromArray,wn.prototype._setValue_fromArray_setNeedsUpdate,wn.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class Nf{constructor(e){this.value=e}clone(){return new Nf(this.value.clone===void 0?this.value:this.value.clone())}}class og{constructor(e=1,t=0,n=0){return this.radius=e,this.phi=t,this.theta=n,this}set(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(Ci(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}const ag=new ce,Gc=new ce,lg=new ce;class Cu extends zn{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="DirectionalLightHelper",t===void 0&&(t=1);let r=new Or;r.setAttribute("position",new Ur([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const o=new xh({fog:!1,toneMapped:!1});this.lightPlane=new Fl(r,o),this.add(this.lightPlane),r=new Or,r.setAttribute("position",new Ur([0,0,0,0,0,1],3)),this.targetLine=new Fl(r,o),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),ag.setFromMatrixPosition(this.light.matrixWorld),Gc.setFromMatrixPosition(this.light.target.matrixWorld),lg.subVectors(Gc,ag),this.lightPlane.lookAt(Gc),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Gc),this.targetLine.scale.z=lg.length()}}const Vc=new ce,ti=new Mf;class HS extends S0{constructor(e){const t=new Or,n=new xh({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],o=[],l={};c("n1","n2"),c("n2","n4"),c("n4","n3"),c("n3","n1"),c("f1","f2"),c("f2","f4"),c("f4","f3"),c("f3","f1"),c("n1","f1"),c("n2","f2"),c("n3","f3"),c("n4","f4"),c("p","n1"),c("p","n2"),c("p","n3"),c("p","n4"),c("u1","u2"),c("u2","u3"),c("u3","u1"),c("c","t"),c("p","c"),c("cn1","cn2"),c("cn3","cn4"),c("cf1","cf2"),c("cf3","cf4");function c(T,A){f(T),f(A)}function f(T){r.push(0,0,0),o.push(0,0,0),l[T]===void 0&&(l[T]=[]),l[T].push(r.length/3-1)}t.setAttribute("position",new Ur(r,3)),t.setAttribute("color",new Ur(o,3)),super(t,n),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=l,this.update();const d=new Yt(16755200),m=new Yt(16711680),v=new Yt(43775),y=new Yt(16777215),M=new Yt(3355443);this.setColors(d,m,v,y,M)}setColors(e,t,n,r,o){const c=this.geometry.getAttribute("color");c.setXYZ(0,e.r,e.g,e.b),c.setXYZ(1,e.r,e.g,e.b),c.setXYZ(2,e.r,e.g,e.b),c.setXYZ(3,e.r,e.g,e.b),c.setXYZ(4,e.r,e.g,e.b),c.setXYZ(5,e.r,e.g,e.b),c.setXYZ(6,e.r,e.g,e.b),c.setXYZ(7,e.r,e.g,e.b),c.setXYZ(8,e.r,e.g,e.b),c.setXYZ(9,e.r,e.g,e.b),c.setXYZ(10,e.r,e.g,e.b),c.setXYZ(11,e.r,e.g,e.b),c.setXYZ(12,e.r,e.g,e.b),c.setXYZ(13,e.r,e.g,e.b),c.setXYZ(14,e.r,e.g,e.b),c.setXYZ(15,e.r,e.g,e.b),c.setXYZ(16,e.r,e.g,e.b),c.setXYZ(17,e.r,e.g,e.b),c.setXYZ(18,e.r,e.g,e.b),c.setXYZ(19,e.r,e.g,e.b),c.setXYZ(20,e.r,e.g,e.b),c.setXYZ(21,e.r,e.g,e.b),c.setXYZ(22,e.r,e.g,e.b),c.setXYZ(23,e.r,e.g,e.b),c.setXYZ(24,t.r,t.g,t.b),c.setXYZ(25,t.r,t.g,t.b),c.setXYZ(26,t.r,t.g,t.b),c.setXYZ(27,t.r,t.g,t.b),c.setXYZ(28,t.r,t.g,t.b),c.setXYZ(29,t.r,t.g,t.b),c.setXYZ(30,t.r,t.g,t.b),c.setXYZ(31,t.r,t.g,t.b),c.setXYZ(32,n.r,n.g,n.b),c.setXYZ(33,n.r,n.g,n.b),c.setXYZ(34,n.r,n.g,n.b),c.setXYZ(35,n.r,n.g,n.b),c.setXYZ(36,n.r,n.g,n.b),c.setXYZ(37,n.r,n.g,n.b),c.setXYZ(38,r.r,r.g,r.b),c.setXYZ(39,r.r,r.g,r.b),c.setXYZ(40,o.r,o.g,o.b),c.setXYZ(41,o.r,o.g,o.b),c.setXYZ(42,o.r,o.g,o.b),c.setXYZ(43,o.r,o.g,o.b),c.setXYZ(44,o.r,o.g,o.b),c.setXYZ(45,o.r,o.g,o.b),c.setXYZ(46,o.r,o.g,o.b),c.setXYZ(47,o.r,o.g,o.b),c.setXYZ(48,o.r,o.g,o.b),c.setXYZ(49,o.r,o.g,o.b),c.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,n=1,r=1;ti.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),ii("c",t,e,ti,0,0,-1),ii("t",t,e,ti,0,0,1),ii("n1",t,e,ti,-n,-r,-1),ii("n2",t,e,ti,n,-r,-1),ii("n3",t,e,ti,-n,r,-1),ii("n4",t,e,ti,n,r,-1),ii("f1",t,e,ti,-n,-r,1),ii("f2",t,e,ti,n,-r,1),ii("f3",t,e,ti,-n,r,1),ii("f4",t,e,ti,n,r,1),ii("u1",t,e,ti,n*.7,r*1.1,-1),ii("u2",t,e,ti,-n*.7,r*1.1,-1),ii("u3",t,e,ti,0,r*2,-1),ii("cf1",t,e,ti,-n,0,1),ii("cf2",t,e,ti,n,0,1),ii("cf3",t,e,ti,0,-r,1),ii("cf4",t,e,ti,0,r,1),ii("cn1",t,e,ti,-n,0,-1),ii("cn2",t,e,ti,n,0,-1),ii("cn3",t,e,ti,0,-r,-1),ii("cn4",t,e,ti,0,r,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function ii(s,e,t,n,r,o,l){Vc.set(r,o,l).unproject(n);const c=e[s];if(c!==void 0){const f=t.getAttribute("position");for(let d=0,m=c.length;d<m;d++)f.setXYZ(c[d],Vc.x,Vc.y,Vc.z)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:gf}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=gf);const cg={type:"change"},Ru={type:"start"},hg={type:"end"},Wc=new Gl,ug=new so,zS=Math.cos(70*kl.DEG2RAD);class Lu extends Ko{constructor(e,t){super(),this.object=e,this.domElement=t,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new ce,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:la.ROTATE,MIDDLE:la.DOLLY,RIGHT:la.PAN},this.touches={ONE:ca.ROTATE,TWO:ca.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return c.phi},this.getAzimuthalAngle=function(){return c.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(Q){Q.addEventListener("keydown",k),this._domElementKeyEvents=Q},this.stopListenToKeyEvents=function(){this._domElementKeyEvents.removeEventListener("keydown",k),this._domElementKeyEvents=null},this.saveState=function(){n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=function(){n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(cg),n.update(),o=r.NONE},this.update=function(){const Q=new ce,Ze=new bs().setFromUnitVectors(e.up,new ce(0,1,0)),ze=Ze.clone().invert(),et=new ce,_t=new bs,tt=new ce,pt=2*Math.PI;return function(je=null){const Ie=n.object.position;Q.copy(Ie).sub(n.target),Q.applyQuaternion(Ze),c.setFromVector3(Q),n.autoRotate&&o===r.NONE&&Me(U(je)),n.enableDamping?(c.theta+=f.theta*n.dampingFactor,c.phi+=f.phi*n.dampingFactor):(c.theta+=f.theta,c.phi+=f.phi);let rt=n.minAzimuthAngle,We=n.maxAzimuthAngle;isFinite(rt)&&isFinite(We)&&(rt<-Math.PI?rt+=pt:rt>Math.PI&&(rt-=pt),We<-Math.PI?We+=pt:We>Math.PI&&(We-=pt),rt<=We?c.theta=Math.max(rt,Math.min(We,c.theta)):c.theta=c.theta>(rt+We)/2?Math.max(rt,c.theta):Math.min(We,c.theta)),c.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,c.phi)),c.makeSafe(),n.enableDamping===!0?n.target.addScaledVector(m,n.dampingFactor):n.target.add(m),n.zoomToCursor&&G||n.object.isOrthographicCamera?c.radius=Ee(c.radius):c.radius=Ee(c.radius*d),Q.setFromSpherical(c),Q.applyQuaternion(ze),Ie.copy(n.target).add(Q),n.object.lookAt(n.target),n.enableDamping===!0?(f.theta*=1-n.dampingFactor,f.phi*=1-n.dampingFactor,m.multiplyScalar(1-n.dampingFactor)):(f.set(0,0,0),m.set(0,0,0));let Ue=!1;if(n.zoomToCursor&&G){let qe=null;if(n.object.isPerspectiveCamera){const xt=Q.length();qe=Ee(xt*d);const Zt=xt-qe;n.object.position.addScaledVector(H,Zt),n.object.updateMatrixWorld()}else if(n.object.isOrthographicCamera){const xt=new ce(X.x,X.y,0);xt.unproject(n.object),n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/d)),n.object.updateProjectionMatrix(),Ue=!0;const Zt=new ce(X.x,X.y,0);Zt.unproject(n.object),n.object.position.sub(Zt).add(xt),n.object.updateMatrixWorld(),qe=Q.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),n.zoomToCursor=!1;qe!==null&&(this.screenSpacePanning?n.target.set(0,0,-1).transformDirection(n.object.matrix).multiplyScalar(qe).add(n.object.position):(Wc.origin.copy(n.object.position),Wc.direction.set(0,0,-1).transformDirection(n.object.matrix),Math.abs(n.object.up.dot(Wc.direction))<zS?e.lookAt(n.target):(ug.setFromNormalAndCoplanarPoint(n.object.up,n.target),Wc.intersectPlane(ug,n.target))))}else n.object.isOrthographicCamera&&(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/d)),n.object.updateProjectionMatrix(),Ue=!0);return d=1,G=!1,Ue||et.distanceToSquared(n.object.position)>l||8*(1-_t.dot(n.object.quaternion))>l||tt.distanceToSquared(n.target)>0?(n.dispatchEvent(cg),et.copy(n.object.position),_t.copy(n.object.quaternion),tt.copy(n.target),Ue=!1,!0):!1}}(),this.dispose=function(){n.domElement.removeEventListener("contextmenu",Ne),n.domElement.removeEventListener("pointerdown",wt),n.domElement.removeEventListener("pointercancel",Vt),n.domElement.removeEventListener("wheel",W),n.domElement.removeEventListener("pointermove",Ge),n.domElement.removeEventListener("pointerup",Vt),n._domElementKeyEvents!==null&&(n._domElementKeyEvents.removeEventListener("keydown",k),n._domElementKeyEvents=null)};const n=this,r={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let o=r.NONE;const l=1e-6,c=new og,f=new og;let d=1;const m=new ce,v=new Jt,y=new Jt,M=new Jt,T=new Jt,A=new Jt,E=new Jt,b=new Jt,z=new Jt,I=new Jt,H=new ce,X=new Jt;let G=!1;const g=[],oe={};function U(Q){return Q!==null?2*Math.PI/60*n.autoRotateSpeed*Q:2*Math.PI/60/60*n.autoRotateSpeed}function V(){return Math.pow(.95,n.zoomSpeed)}function Me(Q){f.theta-=Q}function Te(Q){f.phi-=Q}const ve=function(){const Q=new ce;return function(ze,et){Q.setFromMatrixColumn(et,0),Q.multiplyScalar(-ze),m.add(Q)}}(),Z=function(){const Q=new ce;return function(ze,et){n.screenSpacePanning===!0?Q.setFromMatrixColumn(et,1):(Q.setFromMatrixColumn(et,0),Q.crossVectors(n.object.up,Q)),Q.multiplyScalar(ze),m.add(Q)}}(),me=function(){const Q=new ce;return function(ze,et){const _t=n.domElement;if(n.object.isPerspectiveCamera){const tt=n.object.position;Q.copy(tt).sub(n.target);let pt=Q.length();pt*=Math.tan(n.object.fov/2*Math.PI/180),ve(2*ze*pt/_t.clientHeight,n.object.matrix),Z(2*et*pt/_t.clientHeight,n.object.matrix)}else n.object.isOrthographicCamera?(ve(ze*(n.object.right-n.object.left)/n.object.zoom/_t.clientWidth,n.object.matrix),Z(et*(n.object.top-n.object.bottom)/n.object.zoom/_t.clientHeight,n.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}}();function _e(Q){n.object.isPerspectiveCamera||n.object.isOrthographicCamera?d/=Q:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function fe(Q){n.object.isPerspectiveCamera||n.object.isOrthographicCamera?d*=Q:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function Fe(Q){if(!n.zoomToCursor)return;G=!0;const Ze=n.domElement.getBoundingClientRect(),ze=Q.clientX-Ze.left,et=Q.clientY-Ze.top,_t=Ze.width,tt=Ze.height;X.x=ze/_t*2-1,X.y=-(et/tt)*2+1,H.set(X.x,X.y,1).unproject(n.object).sub(n.object.position).normalize()}function Ee(Q){return Math.max(n.minDistance,Math.min(n.maxDistance,Q))}function Le(Q){v.set(Q.clientX,Q.clientY)}function ge(Q){Fe(Q),b.set(Q.clientX,Q.clientY)}function Ce(Q){T.set(Q.clientX,Q.clientY)}function Je(Q){y.set(Q.clientX,Q.clientY),M.subVectors(y,v).multiplyScalar(n.rotateSpeed);const Ze=n.domElement;Me(2*Math.PI*M.x/Ze.clientHeight),Te(2*Math.PI*M.y/Ze.clientHeight),v.copy(y),n.update()}function nt(Q){z.set(Q.clientX,Q.clientY),I.subVectors(z,b),I.y>0?_e(V()):I.y<0&&fe(V()),b.copy(z),n.update()}function ut(Q){A.set(Q.clientX,Q.clientY),E.subVectors(A,T).multiplyScalar(n.panSpeed),me(E.x,E.y),T.copy(A),n.update()}function bt(Q){Fe(Q),Q.deltaY<0?fe(V()):Q.deltaY>0&&_e(V()),n.update()}function It(Q){let Ze=!1;switch(Q.code){case n.keys.UP:Q.ctrlKey||Q.metaKey||Q.shiftKey?Te(2*Math.PI*n.rotateSpeed/n.domElement.clientHeight):me(0,n.keyPanSpeed),Ze=!0;break;case n.keys.BOTTOM:Q.ctrlKey||Q.metaKey||Q.shiftKey?Te(-2*Math.PI*n.rotateSpeed/n.domElement.clientHeight):me(0,-n.keyPanSpeed),Ze=!0;break;case n.keys.LEFT:Q.ctrlKey||Q.metaKey||Q.shiftKey?Me(2*Math.PI*n.rotateSpeed/n.domElement.clientHeight):me(n.keyPanSpeed,0),Ze=!0;break;case n.keys.RIGHT:Q.ctrlKey||Q.metaKey||Q.shiftKey?Me(-2*Math.PI*n.rotateSpeed/n.domElement.clientHeight):me(-n.keyPanSpeed,0),Ze=!0;break}Ze&&(Q.preventDefault(),n.update())}function St(){if(g.length===1)v.set(g[0].pageX,g[0].pageY);else{const Q=.5*(g[0].pageX+g[1].pageX),Ze=.5*(g[0].pageY+g[1].pageY);v.set(Q,Ze)}}function Rt(){if(g.length===1)T.set(g[0].pageX,g[0].pageY);else{const Q=.5*(g[0].pageX+g[1].pageX),Ze=.5*(g[0].pageY+g[1].pageY);T.set(Q,Ze)}}function Mt(){const Q=g[0].pageX-g[1].pageX,Ze=g[0].pageY-g[1].pageY,ze=Math.sqrt(Q*Q+Ze*Ze);b.set(0,ze)}function Ft(){n.enableZoom&&Mt(),n.enablePan&&Rt()}function xe(){n.enableZoom&&Mt(),n.enableRotate&&St()}function Mn(Q){if(g.length==1)y.set(Q.pageX,Q.pageY);else{const ze=ht(Q),et=.5*(Q.pageX+ze.x),_t=.5*(Q.pageY+ze.y);y.set(et,_t)}M.subVectors(y,v).multiplyScalar(n.rotateSpeed);const Ze=n.domElement;Me(2*Math.PI*M.x/Ze.clientHeight),Te(2*Math.PI*M.y/Ze.clientHeight),v.copy(y)}function Tt(Q){if(g.length===1)A.set(Q.pageX,Q.pageY);else{const Ze=ht(Q),ze=.5*(Q.pageX+Ze.x),et=.5*(Q.pageY+Ze.y);A.set(ze,et)}E.subVectors(A,T).multiplyScalar(n.panSpeed),me(E.x,E.y),T.copy(A)}function Gt(Q){const Ze=ht(Q),ze=Q.pageX-Ze.x,et=Q.pageY-Ze.y,_t=Math.sqrt(ze*ze+et*et);z.set(0,_t),I.set(0,Math.pow(z.y/b.y,n.zoomSpeed)),_e(I.y),b.copy(z)}function Lt(Q){n.enableZoom&&Gt(Q),n.enablePan&&Tt(Q)}function qt(Q){n.enableZoom&&Gt(Q),n.enableRotate&&Mn(Q)}function wt(Q){n.enabled!==!1&&(g.length===0&&(n.domElement.setPointerCapture(Q.pointerId),n.domElement.addEventListener("pointermove",Ge),n.domElement.addEventListener("pointerup",Vt)),Xe(Q),Q.pointerType==="touch"?se(Q):Cn(Q))}function Ge(Q){n.enabled!==!1&&(Q.pointerType==="touch"?Ye(Q):Xt(Q))}function Vt(Q){vt(Q),g.length===0&&(n.domElement.releasePointerCapture(Q.pointerId),n.domElement.removeEventListener("pointermove",Ge),n.domElement.removeEventListener("pointerup",Vt)),n.dispatchEvent(hg),o=r.NONE}function Cn(Q){let Ze;switch(Q.button){case 0:Ze=n.mouseButtons.LEFT;break;case 1:Ze=n.mouseButtons.MIDDLE;break;case 2:Ze=n.mouseButtons.RIGHT;break;default:Ze=-1}switch(Ze){case la.DOLLY:if(n.enableZoom===!1)return;ge(Q),o=r.DOLLY;break;case la.ROTATE:if(Q.ctrlKey||Q.metaKey||Q.shiftKey){if(n.enablePan===!1)return;Ce(Q),o=r.PAN}else{if(n.enableRotate===!1)return;Le(Q),o=r.ROTATE}break;case la.PAN:if(Q.ctrlKey||Q.metaKey||Q.shiftKey){if(n.enableRotate===!1)return;Le(Q),o=r.ROTATE}else{if(n.enablePan===!1)return;Ce(Q),o=r.PAN}break;default:o=r.NONE}o!==r.NONE&&n.dispatchEvent(Ru)}function Xt(Q){switch(o){case r.ROTATE:if(n.enableRotate===!1)return;Je(Q);break;case r.DOLLY:if(n.enableZoom===!1)return;nt(Q);break;case r.PAN:if(n.enablePan===!1)return;ut(Q);break}}function W(Q){n.enabled===!1||n.enableZoom===!1||o!==r.NONE||(Q.preventDefault(),n.dispatchEvent(Ru),bt(Q),n.dispatchEvent(hg))}function k(Q){n.enabled===!1||n.enablePan===!1||It(Q)}function se(Q){switch(it(Q),g.length){case 1:switch(n.touches.ONE){case ca.ROTATE:if(n.enableRotate===!1)return;St(),o=r.TOUCH_ROTATE;break;case ca.PAN:if(n.enablePan===!1)return;Rt(),o=r.TOUCH_PAN;break;default:o=r.NONE}break;case 2:switch(n.touches.TWO){case ca.DOLLY_PAN:if(n.enableZoom===!1&&n.enablePan===!1)return;Ft(),o=r.TOUCH_DOLLY_PAN;break;case ca.DOLLY_ROTATE:if(n.enableZoom===!1&&n.enableRotate===!1)return;xe(),o=r.TOUCH_DOLLY_ROTATE;break;default:o=r.NONE}break;default:o=r.NONE}o!==r.NONE&&n.dispatchEvent(Ru)}function Ye(Q){switch(it(Q),o){case r.TOUCH_ROTATE:if(n.enableRotate===!1)return;Mn(Q),n.update();break;case r.TOUCH_PAN:if(n.enablePan===!1)return;Tt(Q),n.update();break;case r.TOUCH_DOLLY_PAN:if(n.enableZoom===!1&&n.enablePan===!1)return;Lt(Q),n.update();break;case r.TOUCH_DOLLY_ROTATE:if(n.enableZoom===!1&&n.enableRotate===!1)return;qt(Q),n.update();break;default:o=r.NONE}}function Ne(Q){n.enabled!==!1&&Q.preventDefault()}function Xe(Q){g.push(Q)}function vt(Q){delete oe[Q.pointerId];for(let Ze=0;Ze<g.length;Ze++)if(g[Ze].pointerId==Q.pointerId){g.splice(Ze,1);return}}function it(Q){let Ze=oe[Q.pointerId];Ze===void 0&&(Ze=new Jt,oe[Q.pointerId]=Ze),Ze.set(Q.pageX,Q.pageY)}function ht(Q){const Ze=Q.pointerId===g[0].pointerId?g[1]:g[0];return oe[Ze.pointerId]}n.domElement.addEventListener("contextmenu",Ne),n.domElement.addEventListener("pointerdown",wt),n.domElement.addEventListener("pointercancel",Vt),n.domElement.addEventListener("wheel",W,{passive:!1}),this.update()}}class GS extends MS{constructor(e){super(e),this.type=Fs}parse(e){const l=function(oe,U){switch(oe){case 1:throw new Error("THREE.RGBELoader: Read Error: "+(U||""));case 2:throw new Error("THREE.RGBELoader: Write Error: "+(U||""));case 3:throw new Error("THREE.RGBELoader: Bad File Format: "+(U||""));default:case 4:throw new Error("THREE.RGBELoader: Memory Error: "+(U||""))}},m=`
`,v=function(oe,U,V){U=U||1024;let Te=oe.pos,ve=-1,Z=0,me="",_e=String.fromCharCode.apply(null,new Uint16Array(oe.subarray(Te,Te+128)));for(;0>(ve=_e.indexOf(m))&&Z<U&&Te<oe.byteLength;)me+=_e,Z+=_e.length,Te+=128,_e+=String.fromCharCode.apply(null,new Uint16Array(oe.subarray(Te,Te+128)));return-1<ve?(V!==!1&&(oe.pos+=Z+ve+1),me+_e.slice(0,ve)):!1},y=function(oe){const U=/^#\?(\S+)/,V=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,Me=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,Te=/^\s*FORMAT=(\S+)\s*$/,ve=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,Z={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let me,_e;for((oe.pos>=oe.byteLength||!(me=v(oe)))&&l(1,"no header found"),(_e=me.match(U))||l(3,"bad initial token"),Z.valid|=1,Z.programtype=_e[1],Z.string+=me+`
`;me=v(oe),me!==!1;){if(Z.string+=me+`
`,me.charAt(0)==="#"){Z.comments+=me+`
`;continue}if((_e=me.match(V))&&(Z.gamma=parseFloat(_e[1])),(_e=me.match(Me))&&(Z.exposure=parseFloat(_e[1])),(_e=me.match(Te))&&(Z.valid|=2,Z.format=_e[1]),(_e=me.match(ve))&&(Z.valid|=4,Z.height=parseInt(_e[1],10),Z.width=parseInt(_e[2],10)),Z.valid&2&&Z.valid&4)break}return Z.valid&2||l(3,"missing format specifier"),Z.valid&4||l(3,"missing image size specifier"),Z},M=function(oe,U,V){const Me=U;if(Me<8||Me>32767||oe[0]!==2||oe[1]!==2||oe[2]&128)return new Uint8Array(oe);Me!==(oe[2]<<8|oe[3])&&l(3,"wrong scanline width");const Te=new Uint8Array(4*U*V);Te.length||l(4,"unable to allocate buffer space");let ve=0,Z=0;const me=4*Me,_e=new Uint8Array(4),fe=new Uint8Array(me);let Fe=V;for(;Fe>0&&Z<oe.byteLength;){Z+4>oe.byteLength&&l(1),_e[0]=oe[Z++],_e[1]=oe[Z++],_e[2]=oe[Z++],_e[3]=oe[Z++],(_e[0]!=2||_e[1]!=2||(_e[2]<<8|_e[3])!=Me)&&l(3,"bad rgbe scanline format");let Ee=0,Le;for(;Ee<me&&Z<oe.byteLength;){Le=oe[Z++];const Ce=Le>128;if(Ce&&(Le-=128),(Le===0||Ee+Le>me)&&l(3,"bad scanline data"),Ce){const Je=oe[Z++];for(let nt=0;nt<Le;nt++)fe[Ee++]=Je}else fe.set(oe.subarray(Z,Z+Le),Ee),Ee+=Le,Z+=Le}const ge=Me;for(let Ce=0;Ce<ge;Ce++){let Je=0;Te[ve]=fe[Ce+Je],Je+=Me,Te[ve+1]=fe[Ce+Je],Je+=Me,Te[ve+2]=fe[Ce+Je],Je+=Me,Te[ve+3]=fe[Ce+Je],ve+=4}Fe--}return Te},T=function(oe,U,V,Me){const Te=oe[U+3],ve=Math.pow(2,Te-128)/255;V[Me+0]=oe[U+0]*ve,V[Me+1]=oe[U+1]*ve,V[Me+2]=oe[U+2]*ve,V[Me+3]=1},A=function(oe,U,V,Me){const Te=oe[U+3],ve=Math.pow(2,Te-128)/255;V[Me+0]=Ec.toHalfFloat(Math.min(oe[U+0]*ve,65504)),V[Me+1]=Ec.toHalfFloat(Math.min(oe[U+1]*ve,65504)),V[Me+2]=Ec.toHalfFloat(Math.min(oe[U+2]*ve,65504)),V[Me+3]=Ec.toHalfFloat(1)},E=new Uint8Array(e);E.pos=0;const b=y(E),z=b.width,I=b.height,H=M(E.subarray(E.pos),z,I);let X,G,g;switch(this.type){case Lr:g=H.length/4;const oe=new Float32Array(g*4);for(let V=0;V<g;V++)T(H,V*4,oe,V*4);X=oe,G=Lr;break;case Fs:g=H.length/4;const U=new Uint16Array(g*4);for(let V=0;V<g;V++)A(H,V*4,U,V*4);X=U,G=Fs;break;default:throw new Error("THREE.RGBELoader: Unsupported type: "+this.type)}return{width:z,height:I,data:X,header:b.string,gamma:b.gamma,exposure:b.exposure,type:G}}setDataType(e){return this.type=e,this}load(e,t,n,r){function o(l,c){switch(l.type){case Lr:case Fs:l.colorSpace=Di,l.minFilter=li,l.magFilter=li,l.generateMipmaps=!1,l.flipY=!0;break}t&&t(l,c)}return super.load(e,o,n,r)}}function fg(s,e){if(e===S_)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),s;if(e===Yu||e===r0){let t=s.getIndex();if(t===null){const l=[],c=s.getAttribute("position");if(c!==void 0){for(let f=0;f<c.count;f++)l.push(f);s.setIndex(l),t=s.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),s}const n=t.count-2,r=[];if(e===Yu)for(let l=1;l<=n;l++)r.push(t.getX(0)),r.push(t.getX(l)),r.push(t.getX(l+1));else for(let l=0;l<n;l++)l%2===0?(r.push(t.getX(l)),r.push(t.getX(l+1)),r.push(t.getX(l+2))):(r.push(t.getX(l+2)),r.push(t.getX(l+1)),r.push(t.getX(l)));r.length/3!==n&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const o=s.clone();return o.setIndex(r),o.clearGroups(),o}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),s}class VS extends Jo{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new YS(t)}),this.register(function(t){return new nT(t)}),this.register(function(t){return new iT(t)}),this.register(function(t){return new rT(t)}),this.register(function(t){return new ZS(t)}),this.register(function(t){return new KS(t)}),this.register(function(t){return new JS(t)}),this.register(function(t){return new QS(t)}),this.register(function(t){return new jS(t)}),this.register(function(t){return new eT(t)}),this.register(function(t){return new qS(t)}),this.register(function(t){return new tT(t)}),this.register(function(t){return new $S(t)}),this.register(function(t){return new sT(t)}),this.register(function(t){return new oT(t)})}load(e,t,n,r){const o=this;let l;this.resourcePath!==""?l=this.resourcePath:this.path!==""?l=this.path:l=tf.extractUrlBase(e),this.manager.itemStart(e);const c=function(d){r?r(d):console.error(d),o.manager.itemError(e),o.manager.itemEnd(e)},f=new Lf(this.manager);f.setPath(this.path),f.setResponseType("arraybuffer"),f.setRequestHeader(this.requestHeader),f.setWithCredentials(this.withCredentials),f.load(e,function(d){try{o.parse(d,l,function(m){t(m),o.manager.itemEnd(e)},c)}catch(m){c(m)}},n,c)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,n,r){let o;const l={},c={},f=new TextDecoder;if(typeof e=="string")o=JSON.parse(e);else if(e instanceof ArrayBuffer)if(f.decode(new Uint8Array(e,0,4))===R0){try{l[_n.KHR_BINARY_GLTF]=new aT(e)}catch(v){r&&r(v);return}o=JSON.parse(l[_n.KHR_BINARY_GLTF].content)}else o=JSON.parse(f.decode(e));else o=e;if(o.asset===void 0||o.asset.version[0]<2){r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const d=new _T(o,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});d.fileLoader.setRequestHeader(this.requestHeader);for(let m=0;m<this.pluginCallbacks.length;m++){const v=this.pluginCallbacks[m](d);c[v.name]=v,l[v.name]=!0}if(o.extensionsUsed)for(let m=0;m<o.extensionsUsed.length;++m){const v=o.extensionsUsed[m],y=o.extensionsRequired||[];switch(v){case _n.KHR_MATERIALS_UNLIT:l[v]=new XS;break;case _n.KHR_DRACO_MESH_COMPRESSION:l[v]=new lT(o,this.dracoLoader);break;case _n.KHR_TEXTURE_TRANSFORM:l[v]=new cT;break;case _n.KHR_MESH_QUANTIZATION:l[v]=new hT;break;default:y.indexOf(v)>=0&&c[v]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+v+'".')}}d.setExtensions(l),d.setPlugins(c),d.parse(n,r)}parseAsync(e,t){const n=this;return new Promise(function(r,o){n.parse(e,t,r,o)})}}function WS(){let s={};return{get:function(e){return s[e]},add:function(e,t){s[e]=t},remove:function(e){delete s[e]},removeAll:function(){s={}}}}const _n={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class $S{constructor(e){this.parser=e,this.name=_n.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let n=0,r=t.length;n<r;n++){const o=t[n];o.extensions&&o.extensions[this.name]&&o.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,o.extensions[this.name].light)}}_loadLight(e){const t=this.parser,n="light:"+e;let r=t.cache.get(n);if(r)return r;const o=t.json,f=((o.extensions&&o.extensions[this.name]||{}).lights||[])[e];let d;const m=new Yt(16777215);f.color!==void 0&&m.setRGB(f.color[0],f.color[1],f.color[2],Di);const v=f.range!==void 0?f.range:0;switch(f.type){case"directional":d=new Jc(m),d.target.position.set(0,0,-1),d.add(d.target);break;case"point":d=new AS(m),d.distance=v;break;case"spot":d=new SS(m),d.distance=v,f.spot=f.spot||{},f.spot.innerConeAngle=f.spot.innerConeAngle!==void 0?f.spot.innerConeAngle:0,f.spot.outerConeAngle=f.spot.outerConeAngle!==void 0?f.spot.outerConeAngle:Math.PI/4,d.angle=f.spot.outerConeAngle,d.penumbra=1-f.spot.innerConeAngle/f.spot.outerConeAngle,d.target.position.set(0,0,-1),d.add(d.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+f.type)}return d.position.set(0,0,0),d.decay=2,oo(d,f),f.intensity!==void 0&&(d.intensity=f.intensity),d.name=t.createUniqueName(f.name||"light_"+e),r=Promise.resolve(d),t.cache.add(n,r),r}getDependency(e,t){if(e==="light")return this._loadLight(t)}createNodeAttachment(e){const t=this,n=this.parser,o=n.json.nodes[e],c=(o.extensions&&o.extensions[this.name]||{}).light;return c===void 0?null:this._loadLight(c).then(function(f){return n._getNodeRef(t.cache,c,f)})}}let XS=class{constructor(){this.name=_n.KHR_MATERIALS_UNLIT}getMaterialType(){return zs}extendParams(e,t,n){const r=[];e.color=new Yt(1,1,1),e.opacity=1;const o=t.pbrMetallicRoughness;if(o){if(Array.isArray(o.baseColorFactor)){const l=o.baseColorFactor;e.color.setRGB(l[0],l[1],l[2],Di),e.opacity=l[3]}o.baseColorTexture!==void 0&&r.push(n.assignTexture(e,"map",o.baseColorTexture,An))}return Promise.all(r)}},jS=class{constructor(e){this.parser=e,this.name=_n.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const o=r.extensions[this.name].emissiveStrength;return o!==void 0&&(t.emissiveIntensity=o),Promise.resolve()}},YS=class{constructor(e){this.parser=e,this.name=_n.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:yi}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const o=[],l=r.extensions[this.name];if(l.clearcoatFactor!==void 0&&(t.clearcoat=l.clearcoatFactor),l.clearcoatTexture!==void 0&&o.push(n.assignTexture(t,"clearcoatMap",l.clearcoatTexture)),l.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=l.clearcoatRoughnessFactor),l.clearcoatRoughnessTexture!==void 0&&o.push(n.assignTexture(t,"clearcoatRoughnessMap",l.clearcoatRoughnessTexture)),l.clearcoatNormalTexture!==void 0&&(o.push(n.assignTexture(t,"clearcoatNormalMap",l.clearcoatNormalTexture)),l.clearcoatNormalTexture.scale!==void 0)){const c=l.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new Jt(c,c)}return Promise.all(o)}},qS=class{constructor(e){this.parser=e,this.name=_n.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:yi}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const o=[],l=r.extensions[this.name];return l.iridescenceFactor!==void 0&&(t.iridescence=l.iridescenceFactor),l.iridescenceTexture!==void 0&&o.push(n.assignTexture(t,"iridescenceMap",l.iridescenceTexture)),l.iridescenceIor!==void 0&&(t.iridescenceIOR=l.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),l.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=l.iridescenceThicknessMinimum),l.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=l.iridescenceThicknessMaximum),l.iridescenceThicknessTexture!==void 0&&o.push(n.assignTexture(t,"iridescenceThicknessMap",l.iridescenceThicknessTexture)),Promise.all(o)}},ZS=class{constructor(e){this.parser=e,this.name=_n.KHR_MATERIALS_SHEEN}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:yi}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const o=[];t.sheenColor=new Yt(0,0,0),t.sheenRoughness=0,t.sheen=1;const l=r.extensions[this.name];if(l.sheenColorFactor!==void 0){const c=l.sheenColorFactor;t.sheenColor.setRGB(c[0],c[1],c[2],Di)}return l.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=l.sheenRoughnessFactor),l.sheenColorTexture!==void 0&&o.push(n.assignTexture(t,"sheenColorMap",l.sheenColorTexture,An)),l.sheenRoughnessTexture!==void 0&&o.push(n.assignTexture(t,"sheenRoughnessMap",l.sheenRoughnessTexture)),Promise.all(o)}},KS=class{constructor(e){this.parser=e,this.name=_n.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:yi}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const o=[],l=r.extensions[this.name];return l.transmissionFactor!==void 0&&(t.transmission=l.transmissionFactor),l.transmissionTexture!==void 0&&o.push(n.assignTexture(t,"transmissionMap",l.transmissionTexture)),Promise.all(o)}},JS=class{constructor(e){this.parser=e,this.name=_n.KHR_MATERIALS_VOLUME}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:yi}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const o=[],l=r.extensions[this.name];t.thickness=l.thicknessFactor!==void 0?l.thicknessFactor:0,l.thicknessTexture!==void 0&&o.push(n.assignTexture(t,"thicknessMap",l.thicknessTexture)),t.attenuationDistance=l.attenuationDistance||1/0;const c=l.attenuationColor||[1,1,1];return t.attenuationColor=new Yt().setRGB(c[0],c[1],c[2],Di),Promise.all(o)}},QS=class{constructor(e){this.parser=e,this.name=_n.KHR_MATERIALS_IOR}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:yi}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const o=r.extensions[this.name];return t.ior=o.ior!==void 0?o.ior:1.5,Promise.resolve()}},eT=class{constructor(e){this.parser=e,this.name=_n.KHR_MATERIALS_SPECULAR}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:yi}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const o=[],l=r.extensions[this.name];t.specularIntensity=l.specularFactor!==void 0?l.specularFactor:1,l.specularTexture!==void 0&&o.push(n.assignTexture(t,"specularIntensityMap",l.specularTexture));const c=l.specularColorFactor||[1,1,1];return t.specularColor=new Yt().setRGB(c[0],c[1],c[2],Di),l.specularColorTexture!==void 0&&o.push(n.assignTexture(t,"specularColorMap",l.specularColorTexture,An)),Promise.all(o)}},tT=class{constructor(e){this.parser=e,this.name=_n.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:yi}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const o=[],l=r.extensions[this.name];return l.anisotropyStrength!==void 0&&(t.anisotropy=l.anisotropyStrength),l.anisotropyRotation!==void 0&&(t.anisotropyRotation=l.anisotropyRotation),l.anisotropyTexture!==void 0&&o.push(n.assignTexture(t,"anisotropyMap",l.anisotropyTexture)),Promise.all(o)}};class nT{constructor(e){this.parser=e,this.name=_n.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,n=t.json,r=n.textures[e];if(!r.extensions||!r.extensions[this.name])return null;const o=r.extensions[this.name],l=t.options.ktx2Loader;if(!l){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,o.source,l)}}class iT{constructor(e){this.parser=e,this.name=_n.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,n=this.parser,r=n.json,o=r.textures[e];if(!o.extensions||!o.extensions[t])return null;const l=o.extensions[t],c=r.images[l.source];let f=n.textureLoader;if(c.uri){const d=n.options.manager.getHandler(c.uri);d!==null&&(f=d)}return this.detectSupport().then(function(d){if(d)return n.loadTextureImage(e,l.source,f);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class rT{constructor(e){this.parser=e,this.name=_n.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,n=this.parser,r=n.json,o=r.textures[e];if(!o.extensions||!o.extensions[t])return null;const l=o.extensions[t],c=r.images[l.source];let f=n.textureLoader;if(c.uri){const d=n.options.manager.getHandler(c.uri);d!==null&&(f=d)}return this.detectSupport().then(function(d){if(d)return n.loadTextureImage(e,l.source,f);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return n.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class sT{constructor(e){this.name=_n.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,n=t.bufferViews[e];if(n.extensions&&n.extensions[this.name]){const r=n.extensions[this.name],o=this.parser.getDependency("buffer",r.buffer),l=this.parser.options.meshoptDecoder;if(!l||!l.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return o.then(function(c){const f=r.byteOffset||0,d=r.byteLength||0,m=r.count,v=r.byteStride,y=new Uint8Array(c,f,d);return l.decodeGltfBufferAsync?l.decodeGltfBufferAsync(m,v,y,r.mode,r.filter).then(function(M){return M.buffer}):l.ready.then(function(){const M=new ArrayBuffer(m*v);return l.decodeGltfBuffer(new Uint8Array(M),m,v,y,r.mode,r.filter),M})})}else return null}}class oT{constructor(e){this.name=_n.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,n=t.nodes[e];if(!n.extensions||!n.extensions[this.name]||n.mesh===void 0)return null;const r=t.meshes[n.mesh];for(const d of r.primitives)if(d.mode!==jr.TRIANGLES&&d.mode!==jr.TRIANGLE_STRIP&&d.mode!==jr.TRIANGLE_FAN&&d.mode!==void 0)return null;const l=n.extensions[this.name].attributes,c=[],f={};for(const d in l)c.push(this.parser.getDependency("accessor",l[d]).then(m=>(f[d]=m,f[d])));return c.length<1?null:(c.push(this.parser.createNodeMesh(e)),Promise.all(c).then(d=>{const m=d.pop(),v=m.isGroup?m.children:[m],y=d[0].count,M=[];for(const T of v){const A=new hn,E=new ce,b=new bs,z=new ce(1,1,1),I=new aS(T.geometry,T.material,y);for(let H=0;H<y;H++)f.TRANSLATION&&E.fromBufferAttribute(f.TRANSLATION,H),f.ROTATION&&b.fromBufferAttribute(f.ROTATION,H),f.SCALE&&z.fromBufferAttribute(f.SCALE,H),I.setMatrixAt(H,A.compose(E,b,z));for(const H in f)H!=="TRANSLATION"&&H!=="ROTATION"&&H!=="SCALE"&&T.geometry.setAttribute(H,f[H]);zn.prototype.copy.call(I,T),this.parser.assignFinalMaterial(I),M.push(I)}return m.isGroup?(m.clear(),m.add(...M),m):M[0]}))}}const R0="glTF",bl=12,dg={JSON:1313821514,BIN:5130562};class aT{constructor(e){this.name=_n.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,bl),n=new TextDecoder;if(this.header={magic:n.decode(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==R0)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const r=this.header.length-bl,o=new DataView(e,bl);let l=0;for(;l<r;){const c=o.getUint32(l,!0);l+=4;const f=o.getUint32(l,!0);if(l+=4,f===dg.JSON){const d=new Uint8Array(e,bl+l,c);this.content=n.decode(d)}else if(f===dg.BIN){const d=bl+l;this.body=e.slice(d,d+c)}l+=c}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class lT{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=_n.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const n=this.json,r=this.dracoLoader,o=e.extensions[this.name].bufferView,l=e.extensions[this.name].attributes,c={},f={},d={};for(const m in l){const v=nf[m]||m.toLowerCase();c[v]=l[m]}for(const m in e.attributes){const v=nf[m]||m.toLowerCase();if(l[m]!==void 0){const y=n.accessors[e.attributes[m]],M=ka[y.componentType];d[v]=M.name,f[v]=y.normalized===!0}}return t.getDependency("bufferView",o).then(function(m){return new Promise(function(v){r.decodeDracoFile(m,function(y){for(const M in y.attributes){const T=y.attributes[M],A=f[M];A!==void 0&&(T.normalized=A)}v(y)},c,d)})})}}class cT{constructor(){this.name=_n.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(t.texCoord===void 0||t.texCoord===e.channel)&&t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.texCoord!==void 0&&(e.channel=t.texCoord),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class hT{constructor(){this.name=_n.KHR_MESH_QUANTIZATION}}class L0 extends $l{constructor(e,t,n,r){super(e,t,n,r)}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,o=e*r*3+r;for(let l=0;l!==r;l++)t[l]=n[o+l];return t}interpolate_(e,t,n,r){const o=this.resultBuffer,l=this.sampleValues,c=this.valueSize,f=c*2,d=c*3,m=r-t,v=(n-t)/m,y=v*v,M=y*v,T=e*d,A=T-d,E=-2*M+3*y,b=M-y,z=1-E,I=b-y+v;for(let H=0;H!==c;H++){const X=l[A+H+c],G=l[A+H+f]*m,g=l[T+H+c],oe=l[T+H]*m;o[H]=z*X+I*G+E*g+b*oe}return o}}const uT=new bs;class fT extends L0{interpolate_(e,t,n,r){const o=super.interpolate_(e,t,n,r);return uT.fromArray(o).normalize().toArray(o),o}}const jr={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},ka={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},pg={9728:xi,9729:li,9984:eh,9985:xf,9986:Rl,9987:Ws},mg={33071:er,33648:Ol,10497:jo},Du={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},nf={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},no={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},dT={CUBICSPLINE:void 0,LINEAR:Yo,STEP:Wa},Pu={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function pT(s){return s.DefaultMaterial===void 0&&(s.DefaultMaterial=new Rf({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:Vs})),s.DefaultMaterial}function Io(s,e,t){for(const n in t.extensions)s[n]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[n]=t.extensions[n])}function oo(s,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(s.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function mT(s,e,t){let n=!1,r=!1,o=!1;for(let d=0,m=e.length;d<m;d++){const v=e[d];if(v.POSITION!==void 0&&(n=!0),v.NORMAL!==void 0&&(r=!0),v.COLOR_0!==void 0&&(o=!0),n&&r&&o)break}if(!n&&!r&&!o)return Promise.resolve(s);const l=[],c=[],f=[];for(let d=0,m=e.length;d<m;d++){const v=e[d];if(n){const y=v.POSITION!==void 0?t.getDependency("accessor",v.POSITION):s.attributes.position;l.push(y)}if(r){const y=v.NORMAL!==void 0?t.getDependency("accessor",v.NORMAL):s.attributes.normal;c.push(y)}if(o){const y=v.COLOR_0!==void 0?t.getDependency("accessor",v.COLOR_0):s.attributes.color;f.push(y)}}return Promise.all([Promise.all(l),Promise.all(c),Promise.all(f)]).then(function(d){const m=d[0],v=d[1],y=d[2];return n&&(s.morphAttributes.position=m),r&&(s.morphAttributes.normal=v),o&&(s.morphAttributes.color=y),s.morphTargetsRelative=!0,s})}function gT(s,e){if(s.updateMorphTargets(),e.weights!==void 0)for(let t=0,n=e.weights.length;t<n;t++)s.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(s.morphTargetInfluences.length===t.length){s.morphTargetDictionary={};for(let n=0,r=t.length;n<r;n++)s.morphTargetDictionary[t[n]]=n}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function vT(s){let e;const t=s.extensions&&s.extensions[_n.KHR_DRACO_MESH_COMPRESSION];if(t?e="draco:"+t.bufferView+":"+t.indices+":"+Iu(t.attributes):e=s.indices+":"+Iu(s.attributes)+":"+s.mode,s.targets!==void 0)for(let n=0,r=s.targets.length;n<r;n++)e+=":"+Iu(s.targets[n]);return e}function Iu(s){let e="";const t=Object.keys(s).sort();for(let n=0,r=t.length;n<r;n++)e+=t[n]+":"+s[t[n]]+";";return e}function rf(s){switch(s){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function xT(s){return s.search(/\.jpe?g($|\?)/i)>0||s.search(/^data\:image\/jpeg/)===0?"image/jpeg":s.search(/\.webp($|\?)/i)>0||s.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const yT=new hn;class _T{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new WS,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let n=!1,r=!1,o=-1;typeof navigator<"u"&&(n=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,r=navigator.userAgent.indexOf("Firefox")>-1,o=r?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||n||r&&o<98?this.textureLoader=new Oa(this.options.manager):this.textureLoader=new LS(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new Lf(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const n=this,r=this.json,o=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(l){return l._markDefs&&l._markDefs()}),Promise.all(this._invokeAll(function(l){return l.beforeRoot&&l.beforeRoot()})).then(function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])}).then(function(l){const c={scene:l[0][r.scene||0],scenes:l[0],animations:l[1],cameras:l[2],asset:r.asset,parser:n,userData:{}};return Io(o,c,r),oo(c,r),Promise.all(n._invokeAll(function(f){return f.afterRoot&&f.afterRoot(c)})).then(function(){e(c)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],n=this.json.meshes||[];for(let r=0,o=t.length;r<o;r++){const l=t[r].joints;for(let c=0,f=l.length;c<f;c++)e[l[c]].isBone=!0}for(let r=0,o=e.length;r<o;r++){const l=e[r];l.mesh!==void 0&&(this._addNodeRef(this.meshCache,l.mesh),l.skin!==void 0&&(n[l.mesh].isSkinnedMesh=!0)),l.camera!==void 0&&this._addNodeRef(this.cameraCache,l.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,n){if(e.refs[t]<=1)return n;const r=n.clone(),o=(l,c)=>{const f=this.associations.get(l);f!=null&&this.associations.set(c,f);for(const[d,m]of l.children.entries())o(m,c.children[d])};return o(n,r),r.name+="_instance_"+e.uses[t]++,r}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let n=0;n<t.length;n++){const r=e(t[n]);if(r)return r}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const n=[];for(let r=0;r<t.length;r++){const o=e(t[r]);o&&n.push(o)}return n}getDependency(e,t){const n=e+":"+t;let r=this.cache.get(n);if(!r){switch(e){case"scene":r=this.loadScene(t);break;case"node":r=this._invokeOne(function(o){return o.loadNode&&o.loadNode(t)});break;case"mesh":r=this._invokeOne(function(o){return o.loadMesh&&o.loadMesh(t)});break;case"accessor":r=this.loadAccessor(t);break;case"bufferView":r=this._invokeOne(function(o){return o.loadBufferView&&o.loadBufferView(t)});break;case"buffer":r=this.loadBuffer(t);break;case"material":r=this._invokeOne(function(o){return o.loadMaterial&&o.loadMaterial(t)});break;case"texture":r=this._invokeOne(function(o){return o.loadTexture&&o.loadTexture(t)});break;case"skin":r=this.loadSkin(t);break;case"animation":r=this._invokeOne(function(o){return o.loadAnimation&&o.loadAnimation(t)});break;case"camera":r=this.loadCamera(t);break;default:if(r=this._invokeOne(function(o){return o!=this&&o.getDependency&&o.getDependency(e,t)}),!r)throw new Error("Unknown type: "+e);break}this.cache.add(n,r)}return r}getDependencies(e){let t=this.cache.get(e);if(!t){const n=this,r=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(r.map(function(o,l){return n.getDependency(e,l)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],n=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[_n.KHR_BINARY_GLTF].body);const r=this.options;return new Promise(function(o,l){n.load(tf.resolveURL(t.uri,r.path),o,void 0,function(){l(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(n){const r=t.byteLength||0,o=t.byteOffset||0;return n.slice(o,o+r)})}loadAccessor(e){const t=this,n=this.json,r=this.json.accessors[e];if(r.bufferView===void 0&&r.sparse===void 0){const l=Du[r.type],c=ka[r.componentType],f=r.normalized===!0,d=new c(r.count*l);return Promise.resolve(new _i(d,l,f))}const o=[];return r.bufferView!==void 0?o.push(this.getDependency("bufferView",r.bufferView)):o.push(null),r.sparse!==void 0&&(o.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),o.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(o).then(function(l){const c=l[0],f=Du[r.type],d=ka[r.componentType],m=d.BYTES_PER_ELEMENT,v=m*f,y=r.byteOffset||0,M=r.bufferView!==void 0?n.bufferViews[r.bufferView].byteStride:void 0,T=r.normalized===!0;let A,E;if(M&&M!==v){const b=Math.floor(y/M),z="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+b+":"+r.count;let I=t.cache.get(z);I||(A=new d(c,b*M,r.count*M/m),I=new nS(A,M/m),t.cache.add(z,I)),E=new Af(I,f,y%M/m,T)}else c===null?A=new d(r.count*f):A=new d(c,y,r.count*f),E=new _i(A,f,T);if(r.sparse!==void 0){const b=Du.SCALAR,z=ka[r.sparse.indices.componentType],I=r.sparse.indices.byteOffset||0,H=r.sparse.values.byteOffset||0,X=new z(l[1],I,r.sparse.count*b),G=new d(l[2],H,r.sparse.count*f);c!==null&&(E=new _i(E.array.slice(),E.itemSize,E.normalized));for(let g=0,oe=X.length;g<oe;g++){const U=X[g];if(E.setX(U,G[g*f]),f>=2&&E.setY(U,G[g*f+1]),f>=3&&E.setZ(U,G[g*f+2]),f>=4&&E.setW(U,G[g*f+3]),f>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return E})}loadTexture(e){const t=this.json,n=this.options,o=t.textures[e].source,l=t.images[o];let c=this.textureLoader;if(l.uri){const f=n.manager.getHandler(l.uri);f!==null&&(c=f)}return this.loadTextureImage(e,o,c)}loadTextureImage(e,t,n){const r=this,o=this.json,l=o.textures[e],c=o.images[t],f=(c.uri||c.bufferView)+":"+l.sampler;if(this.textureCache[f])return this.textureCache[f];const d=this.loadImageSource(t,n).then(function(m){m.flipY=!1,m.name=l.name||c.name||"",m.name===""&&typeof c.uri=="string"&&c.uri.startsWith("data:image/")===!1&&(m.name=c.uri);const y=(o.samplers||{})[l.sampler]||{};return m.magFilter=pg[y.magFilter]||li,m.minFilter=pg[y.minFilter]||Ws,m.wrapS=mg[y.wrapS]||jo,m.wrapT=mg[y.wrapT]||jo,r.associations.set(m,{textures:e}),m}).catch(function(){return null});return this.textureCache[f]=d,d}loadImageSource(e,t){const n=this,r=this.json,o=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(v=>v.clone());const l=r.images[e],c=self.URL||self.webkitURL;let f=l.uri||"",d=!1;if(l.bufferView!==void 0)f=n.getDependency("bufferView",l.bufferView).then(function(v){d=!0;const y=new Blob([v],{type:l.mimeType});return f=c.createObjectURL(y),f});else if(l.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const m=Promise.resolve(f).then(function(v){return new Promise(function(y,M){let T=y;t.isImageBitmapLoader===!0&&(T=function(A){const E=new hi(A);E.needsUpdate=!0,y(E)}),t.load(tf.resolveURL(v,o.path),T,void 0,M)})}).then(function(v){return d===!0&&c.revokeObjectURL(f),v.userData.mimeType=l.mimeType||xT(l.uri),v}).catch(function(v){throw console.error("THREE.GLTFLoader: Couldn't load texture",f),v});return this.sourceCache[e]=m,m}assignTexture(e,t,n,r){const o=this;return this.getDependency("texture",n.index).then(function(l){if(!l)return null;if(n.texCoord!==void 0&&n.texCoord>0&&(l=l.clone(),l.channel=n.texCoord),o.extensions[_n.KHR_TEXTURE_TRANSFORM]){const c=n.extensions!==void 0?n.extensions[_n.KHR_TEXTURE_TRANSFORM]:void 0;if(c){const f=o.associations.get(l);l=o.extensions[_n.KHR_TEXTURE_TRANSFORM].extendTexture(l,c),o.associations.set(l,f)}}return r!==void 0&&(l.colorSpace=r),e[t]=l,l})}assignFinalMaterial(e){const t=e.geometry;let n=e.material;const r=t.attributes.tangent===void 0,o=t.attributes.color!==void 0,l=t.attributes.normal===void 0;if(e.isPoints){const c="PointsMaterial:"+n.uuid;let f=this.cache.get(c);f||(f=new T0,xs.prototype.copy.call(f,n),f.color.copy(n.color),f.map=n.map,f.sizeAttenuation=!1,this.cache.add(c,f)),n=f}else if(e.isLine){const c="LineBasicMaterial:"+n.uuid;let f=this.cache.get(c);f||(f=new xh,xs.prototype.copy.call(f,n),f.color.copy(n.color),f.map=n.map,this.cache.add(c,f)),n=f}if(r||o||l){let c="ClonedMaterial:"+n.uuid+":";r&&(c+="derivative-tangents:"),o&&(c+="vertex-colors:"),l&&(c+="flat-shading:");let f=this.cache.get(c);f||(f=n.clone(),o&&(f.vertexColors=!0),l&&(f.flatShading=!0),r&&(f.normalScale&&(f.normalScale.y*=-1),f.clearcoatNormalScale&&(f.clearcoatNormalScale.y*=-1)),this.cache.add(c,f),this.associations.set(f,this.associations.get(n))),n=f}e.material=n}getMaterialType(){return Rf}loadMaterial(e){const t=this,n=this.json,r=this.extensions,o=n.materials[e];let l;const c={},f=o.extensions||{},d=[];if(f[_n.KHR_MATERIALS_UNLIT]){const v=r[_n.KHR_MATERIALS_UNLIT];l=v.getMaterialType(),d.push(v.extendParams(c,o,t))}else{const v=o.pbrMetallicRoughness||{};if(c.color=new Yt(1,1,1),c.opacity=1,Array.isArray(v.baseColorFactor)){const y=v.baseColorFactor;c.color.setRGB(y[0],y[1],y[2],Di),c.opacity=y[3]}v.baseColorTexture!==void 0&&d.push(t.assignTexture(c,"map",v.baseColorTexture,An)),c.metalness=v.metallicFactor!==void 0?v.metallicFactor:1,c.roughness=v.roughnessFactor!==void 0?v.roughnessFactor:1,v.metallicRoughnessTexture!==void 0&&(d.push(t.assignTexture(c,"metalnessMap",v.metallicRoughnessTexture)),d.push(t.assignTexture(c,"roughnessMap",v.metallicRoughnessTexture))),l=this._invokeOne(function(y){return y.getMaterialType&&y.getMaterialType(e)}),d.push(Promise.all(this._invokeAll(function(y){return y.extendMaterialParams&&y.extendMaterialParams(e,c)})))}o.doubleSided===!0&&(c.side=ss);const m=o.alphaMode||Pu.OPAQUE;if(m===Pu.BLEND?(c.transparent=!0,c.depthWrite=!1):(c.transparent=!1,m===Pu.MASK&&(c.alphaTest=o.alphaCutoff!==void 0?o.alphaCutoff:.5)),o.normalTexture!==void 0&&l!==zs&&(d.push(t.assignTexture(c,"normalMap",o.normalTexture)),c.normalScale=new Jt(1,1),o.normalTexture.scale!==void 0)){const v=o.normalTexture.scale;c.normalScale.set(v,v)}if(o.occlusionTexture!==void 0&&l!==zs&&(d.push(t.assignTexture(c,"aoMap",o.occlusionTexture)),o.occlusionTexture.strength!==void 0&&(c.aoMapIntensity=o.occlusionTexture.strength)),o.emissiveFactor!==void 0&&l!==zs){const v=o.emissiveFactor;c.emissive=new Yt().setRGB(v[0],v[1],v[2],Di)}return o.emissiveTexture!==void 0&&l!==zs&&d.push(t.assignTexture(c,"emissiveMap",o.emissiveTexture,An)),Promise.all(d).then(function(){const v=new l(c);return o.name&&(v.name=o.name),oo(v,o),t.associations.set(v,{materials:e}),o.extensions&&Io(r,v,o),v})}createUniqueName(e){const t=wn.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,n=this.extensions,r=this.primitiveCache;function o(c){return n[_n.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(c,t).then(function(f){return gg(f,c,t)})}const l=[];for(let c=0,f=e.length;c<f;c++){const d=e[c],m=vT(d),v=r[m];if(v)l.push(v.promise);else{let y;d.extensions&&d.extensions[_n.KHR_DRACO_MESH_COMPRESSION]?y=o(d):y=gg(new Or,d,t),r[m]={primitive:d,promise:y},l.push(y)}}return Promise.all(l)}loadMesh(e){const t=this,n=this.json,r=this.extensions,o=n.meshes[e],l=o.primitives,c=[];for(let f=0,d=l.length;f<d;f++){const m=l[f].material===void 0?pT(this.cache):this.getDependency("material",l[f].material);c.push(m)}return c.push(t.loadGeometries(l)),Promise.all(c).then(function(f){const d=f.slice(0,f.length-1),m=f[f.length-1],v=[];for(let M=0,T=m.length;M<T;M++){const A=m[M],E=l[M];let b;const z=d[M];if(E.mode===jr.TRIANGLES||E.mode===jr.TRIANGLE_STRIP||E.mode===jr.TRIANGLE_FAN||E.mode===void 0)b=o.isSkinnedMesh===!0?new rS(A,z):new $i(A,z),b.isSkinnedMesh===!0&&b.normalizeSkinWeights(),E.mode===jr.TRIANGLE_STRIP?b.geometry=fg(b.geometry,r0):E.mode===jr.TRIANGLE_FAN&&(b.geometry=fg(b.geometry,Yu));else if(E.mode===jr.LINES)b=new S0(A,z);else if(E.mode===jr.LINE_STRIP)b=new Fl(A,z);else if(E.mode===jr.LINE_LOOP)b=new lS(A,z);else if(E.mode===jr.POINTS)b=new cS(A,z);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+E.mode);Object.keys(b.geometry.morphAttributes).length>0&&gT(b,o),b.name=t.createUniqueName(o.name||"mesh_"+e),oo(b,o),E.extensions&&Io(r,b,E),t.assignFinalMaterial(b),v.push(b)}for(let M=0,T=v.length;M<T;M++)t.associations.set(v[M],{meshes:e,primitives:M});if(v.length===1)return o.extensions&&Io(r,v[0],o),v[0];const y=new lo;o.extensions&&Io(r,y,o),t.associations.set(y,{meshes:e});for(let M=0,T=v.length;M<T;M++)y.add(v[M]);return y})}loadCamera(e){let t;const n=this.json.cameras[e],r=n[n.type];if(!r){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return n.type==="perspective"?t=new Ri(kl.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):n.type==="orthographic"&&(t=new gh(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),n.name&&(t.name=this.createUniqueName(n.name)),oo(t,n),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],n=[];for(let r=0,o=t.joints.length;r<o;r++)n.push(this._loadNodeShallow(t.joints[r]));return t.inverseBindMatrices!==void 0?n.push(this.getDependency("accessor",t.inverseBindMatrices)):n.push(null),Promise.all(n).then(function(r){const o=r.pop(),l=r,c=[],f=[];for(let d=0,m=l.length;d<m;d++){const v=l[d];if(v){c.push(v);const y=new hn;o!==null&&y.fromArray(o.array,d*16),f.push(y)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[d])}return new Cf(c,f)})}loadAnimation(e){const t=this.json,n=this,r=t.animations[e],o=r.name?r.name:"animation_"+e,l=[],c=[],f=[],d=[],m=[];for(let v=0,y=r.channels.length;v<y;v++){const M=r.channels[v],T=r.samplers[M.sampler],A=M.target,E=A.node,b=r.parameters!==void 0?r.parameters[T.input]:T.input,z=r.parameters!==void 0?r.parameters[T.output]:T.output;A.node!==void 0&&(l.push(this.getDependency("node",E)),c.push(this.getDependency("accessor",b)),f.push(this.getDependency("accessor",z)),d.push(T),m.push(A))}return Promise.all([Promise.all(l),Promise.all(c),Promise.all(f),Promise.all(d),Promise.all(m)]).then(function(v){const y=v[0],M=v[1],T=v[2],A=v[3],E=v[4],b=[];for(let z=0,I=y.length;z<I;z++){const H=y[z],X=M[z],G=T[z],g=A[z],oe=E[z];if(H===void 0)continue;H.updateMatrix&&H.updateMatrix();const U=n._createAnimationTracks(H,X,G,g,oe);if(U)for(let V=0;V<U.length;V++)b.push(U[V])}return new gS(o,void 0,b)})}createNodeMesh(e){const t=this.json,n=this,r=t.nodes[e];return r.mesh===void 0?null:n.getDependency("mesh",r.mesh).then(function(o){const l=n._getNodeRef(n.meshCache,r.mesh,o);return r.weights!==void 0&&l.traverse(function(c){if(c.isMesh)for(let f=0,d=r.weights.length;f<d;f++)c.morphTargetInfluences[f]=r.weights[f]}),l})}loadNode(e){const t=this.json,n=this,r=t.nodes[e],o=n._loadNodeShallow(e),l=[],c=r.children||[];for(let d=0,m=c.length;d<m;d++)l.push(n.getDependency("node",c[d]));const f=r.skin===void 0?Promise.resolve(null):n.getDependency("skin",r.skin);return Promise.all([o,Promise.all(l),f]).then(function(d){const m=d[0],v=d[1],y=d[2];y!==null&&m.traverse(function(M){M.isSkinnedMesh&&M.bind(y,yT)});for(let M=0,T=v.length;M<T;M++)m.add(v[M]);return m})}_loadNodeShallow(e){const t=this.json,n=this.extensions,r=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const o=t.nodes[e],l=o.name?r.createUniqueName(o.name):"",c=[],f=r._invokeOne(function(d){return d.createNodeMesh&&d.createNodeMesh(e)});return f&&c.push(f),o.camera!==void 0&&c.push(r.getDependency("camera",o.camera).then(function(d){return r._getNodeRef(r.cameraCache,o.camera,d)})),r._invokeAll(function(d){return d.createNodeAttachment&&d.createNodeAttachment(e)}).forEach(function(d){c.push(d)}),this.nodeCache[e]=Promise.all(c).then(function(d){let m;if(o.isBone===!0?m=new M0:d.length>1?m=new lo:d.length===1?m=d[0]:m=new zn,m!==d[0])for(let v=0,y=d.length;v<y;v++)m.add(d[v]);if(o.name&&(m.userData.name=o.name,m.name=l),oo(m,o),o.extensions&&Io(n,m,o),o.matrix!==void 0){const v=new hn;v.fromArray(o.matrix),m.applyMatrix4(v)}else o.translation!==void 0&&m.position.fromArray(o.translation),o.rotation!==void 0&&m.quaternion.fromArray(o.rotation),o.scale!==void 0&&m.scale.fromArray(o.scale);return r.associations.has(m)||r.associations.set(m,{}),r.associations.get(m).nodes=e,m}),this.nodeCache[e]}loadScene(e){const t=this.extensions,n=this.json.scenes[e],r=this,o=new lo;n.name&&(o.name=r.createUniqueName(n.name)),oo(o,n),n.extensions&&Io(t,o,n);const l=n.nodes||[],c=[];for(let f=0,d=l.length;f<d;f++)c.push(r.getDependency("node",l[f]));return Promise.all(c).then(function(f){for(let m=0,v=f.length;m<v;m++)o.add(f[m]);const d=m=>{const v=new Map;for(const[y,M]of r.associations)(y instanceof xs||y instanceof hi)&&v.set(y,M);return m.traverse(y=>{const M=r.associations.get(y);M!=null&&v.set(y,M)}),v};return r.associations=d(o),o})}_createAnimationTracks(e,t,n,r,o){const l=[],c=e.name?e.name:e.uuid,f=[];no[o.path]===no.weights?e.traverse(function(y){y.morphTargetInfluences&&f.push(y.name?y.name:y.uuid)}):f.push(c);let d;switch(no[o.path]){case no.weights:d=ja;break;case no.rotation:d=qo;break;case no.position:case no.scale:d=Ya;break;default:switch(n.itemSize){case 1:d=ja;break;case 2:case 3:default:d=Ya;break}break}const m=r.interpolation!==void 0?dT[r.interpolation]:Yo,v=this._getArrayFromAccessor(n);for(let y=0,M=f.length;y<M;y++){const T=new d(f[y]+"."+no[o.path],t.array,v,m);r.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(T),l.push(T)}return l}_getArrayFromAccessor(e){let t=e.array;if(e.normalized){const n=rf(t.constructor),r=new Float32Array(t.length);for(let o=0,l=t.length;o<l;o++)r[o]=t[o]*n;t=r}return t}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(n){const r=this instanceof qo?fT:L0;return new r(this.times,this.values,this.getValueSize()/3,n)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function bT(s,e,t){const n=e.attributes,r=new Xs;if(n.POSITION!==void 0){const c=t.json.accessors[n.POSITION],f=c.min,d=c.max;if(f!==void 0&&d!==void 0){if(r.set(new ce(f[0],f[1],f[2]),new ce(d[0],d[1],d[2])),c.normalized){const m=rf(ka[c.componentType]);r.min.multiplyScalar(m),r.max.multiplyScalar(m)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const o=e.targets;if(o!==void 0){const c=new ce,f=new ce;for(let d=0,m=o.length;d<m;d++){const v=o[d];if(v.POSITION!==void 0){const y=t.json.accessors[v.POSITION],M=y.min,T=y.max;if(M!==void 0&&T!==void 0){if(f.setX(Math.max(Math.abs(M[0]),Math.abs(T[0]))),f.setY(Math.max(Math.abs(M[1]),Math.abs(T[1]))),f.setZ(Math.max(Math.abs(M[2]),Math.abs(T[2]))),y.normalized){const A=rf(ka[y.componentType]);f.multiplyScalar(A)}c.max(f)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(c)}s.boundingBox=r;const l=new Es;r.getCenter(l.center),l.radius=r.min.distanceTo(r.max)/2,s.boundingSphere=l}function gg(s,e,t){const n=e.attributes,r=[];function o(l,c){return t.getDependency("accessor",l).then(function(f){s.setAttribute(c,f)})}for(const l in n){const c=nf[l]||l.toLowerCase();c in s.attributes||r.push(o(n[l],c))}if(e.indices!==void 0&&!s.index){const l=t.getDependency("accessor",e.indices).then(function(c){s.setIndex(c)});r.push(l)}return Dn.workingColorSpace!==Di&&"COLOR_0"in n&&console.warn(`THREE.GLTFLoader: Converting vertex colors from "srgb-linear" to "${Dn.workingColorSpace}" not supported.`),oo(s,e),bT(s,e,t),Promise.all(r).then(function(){return e.targets!==void 0?mT(s,e.targets,t):s})}let $c,Nu,Ca,Xc;function Uu(s,e=1/0,t=null){Nu||(Nu=new Wl(2,2,1,1)),Ca||(Ca=new ws({uniforms:{blitTexture:new Nf(s)},vertexShader:`
            varying vec2 vUv;
            void main(){
                vUv = uv;
                gl_Position = vec4(position.xy * 1.0,0.,.999999);
            }`,fragmentShader:`
            uniform sampler2D blitTexture; 
            varying vec2 vUv;

            void main(){ 
                gl_FragColor = vec4(vUv.xy, 0, 1);
                
                #ifdef IS_SRGB
                gl_FragColor = LinearTosRGB( texture2D( blitTexture, vUv) );
                #else
                gl_FragColor = texture2D( blitTexture, vUv);
                #endif
            }`})),Ca.uniforms.blitTexture.value=s,Ca.defines.IS_SRGB=s.colorSpace==An,Ca.needsUpdate=!0,Xc||(Xc=new $i(Nu,Ca),Xc.frustrumCulled=!1);const n=new Ri,r=new oh;r.add(Xc),t||(t=$c=new Tf({antialias:!1})),t.setSize(Math.min(s.image.width,e),Math.min(s.image.height,e)),t.clear(),t.render(r,n);const o=new hi(t.domElement);return o.minFilter=s.minFilter,o.magFilter=s.magFilter,o.wrapS=s.wrapS,o.wrapT=s.wrapT,o.name=s.name,$c&&($c.dispose(),$c=null),o}const vg={POSITION:["byte","byte normalized","unsigned byte","unsigned byte normalized","short","short normalized","unsigned short","unsigned short normalized"],NORMAL:["byte normalized","short normalized"],TANGENT:["byte normalized","short normalized"],TEXCOORD:["byte","byte normalized","unsigned byte","short","short normalized","unsigned short"]};class Uf{constructor(){this.pluginCallbacks=[],this.register(function(e){return new DT(e)}),this.register(function(e){return new PT(e)}),this.register(function(e){return new UT(e)}),this.register(function(e){return new OT(e)}),this.register(function(e){return new kT(e)}),this.register(function(e){return new BT(e)}),this.register(function(e){return new IT(e)}),this.register(function(e){return new NT(e)}),this.register(function(e){return new FT(e)}),this.register(function(e){return new HT(e)}),this.register(function(e){return new zT(e)})}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,n,r){const o=new LT,l=[];for(let c=0,f=this.pluginCallbacks.length;c<f;c++)l.push(this.pluginCallbacks[c](o));o.setPlugins(l),o.write(e,t,r).catch(n)}parseAsync(e,t){const n=this;return new Promise(function(r,o){n.parse(e,r,o,t)})}}const gn={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,INT:5124,UNSIGNED_INT:5125,FLOAT:5126,ARRAY_BUFFER:34962,ELEMENT_ARRAY_BUFFER:34963,NEAREST:9728,LINEAR:9729,NEAREST_MIPMAP_NEAREST:9984,LINEAR_MIPMAP_NEAREST:9985,NEAREST_MIPMAP_LINEAR:9986,LINEAR_MIPMAP_LINEAR:9987,CLAMP_TO_EDGE:33071,MIRRORED_REPEAT:33648,REPEAT:10497},Ou="KHR_mesh_quantization",Dr={};Dr[xi]=gn.NEAREST;Dr[eh]=gn.NEAREST_MIPMAP_NEAREST;Dr[Rl]=gn.NEAREST_MIPMAP_LINEAR;Dr[li]=gn.LINEAR;Dr[xf]=gn.LINEAR_MIPMAP_NEAREST;Dr[Ws]=gn.LINEAR_MIPMAP_LINEAR;Dr[er]=gn.CLAMP_TO_EDGE;Dr[jo]=gn.REPEAT;Dr[Ol]=gn.MIRRORED_REPEAT;const xg={scale:"scale",position:"translation",quaternion:"rotation",morphTargetInfluences:"weights"},wT=new Yt,yg=12,MT=1179937895,ET=2,_g=8,ST=1313821514,TT=5130562;function Al(s,e){return s.length===e.length&&s.every(function(t,n){return t===e[n]})}function AT(s){return new TextEncoder().encode(s).buffer}function CT(s){return Al(s.elements,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}function RT(s,e,t){const n={min:new Array(s.itemSize).fill(Number.POSITIVE_INFINITY),max:new Array(s.itemSize).fill(Number.NEGATIVE_INFINITY)};for(let r=e;r<e+t;r++)for(let o=0;o<s.itemSize;o++){let l;s.itemSize>4?l=s.array[r*s.itemSize+o]:(o===0?l=s.getX(r):o===1?l=s.getY(r):o===2?l=s.getZ(r):o===3&&(l=s.getW(r)),s.normalized===!0&&(l=kl.normalize(l,s.array))),n.min[o]=Math.min(n.min[o],l),n.max[o]=Math.max(n.max[o],l)}return n}function D0(s){return Math.ceil(s/4)*4}function ku(s,e=0){const t=D0(s.byteLength);if(t!==s.byteLength){const n=new Uint8Array(t);if(n.set(new Uint8Array(s)),e!==0)for(let r=s.byteLength;r<t;r++)n[r]=e;return n.buffer}return s}function bg(){return typeof document>"u"&&typeof OffscreenCanvas<"u"?new OffscreenCanvas(1,1):document.createElement("canvas")}function wg(s,e){if(s.toBlob!==void 0)return new Promise(n=>s.toBlob(n,e));let t;return e==="image/jpeg"?t=.92:e==="image/webp"&&(t=.8),s.convertToBlob({type:e,quality:t})}class LT{constructor(){this.plugins=[],this.options={},this.pending=[],this.buffers=[],this.byteOffset=0,this.buffers=[],this.nodeMap=new Map,this.skins=[],this.extensionsUsed={},this.extensionsRequired={},this.uids=new Map,this.uid=0,this.json={asset:{version:"2.0",generator:"THREE.GLTFExporter"}},this.cache={meshes:new Map,attributes:new Map,attributesNormalized:new Map,materials:new Map,textures:new Map,images:new Map}}setPlugins(e){this.plugins=e}async write(e,t,n={}){this.options=Object.assign({binary:!1,trs:!1,onlyVisible:!0,maxTextureSize:1/0,animations:[],includeCustomExtensions:!1},n),this.options.animations.length>0&&(this.options.trs=!0),this.processInput(e),await Promise.all(this.pending);const r=this,o=r.buffers,l=r.json;n=r.options;const c=r.extensionsUsed,f=r.extensionsRequired,d=new Blob(o,{type:"application/octet-stream"}),m=Object.keys(c),v=Object.keys(f);if(m.length>0&&(l.extensionsUsed=m),v.length>0&&(l.extensionsRequired=v),l.buffers&&l.buffers.length>0&&(l.buffers[0].byteLength=d.size),n.binary===!0){const y=new FileReader;y.readAsArrayBuffer(d),y.onloadend=function(){const M=ku(y.result),T=new DataView(new ArrayBuffer(_g));T.setUint32(0,M.byteLength,!0),T.setUint32(4,TT,!0);const A=ku(AT(JSON.stringify(l)),32),E=new DataView(new ArrayBuffer(_g));E.setUint32(0,A.byteLength,!0),E.setUint32(4,ST,!0);const b=new ArrayBuffer(yg),z=new DataView(b);z.setUint32(0,MT,!0),z.setUint32(4,ET,!0);const I=yg+E.byteLength+A.byteLength+T.byteLength+M.byteLength;z.setUint32(8,I,!0);const H=new Blob([b,E,A,T,M],{type:"application/octet-stream"}),X=new FileReader;X.readAsArrayBuffer(H),X.onloadend=function(){t(X.result)}}}else if(l.buffers&&l.buffers.length>0){const y=new FileReader;y.readAsDataURL(d),y.onloadend=function(){const M=y.result;l.buffers[0].uri=M,t(l)}}else t(l)}serializeUserData(e,t){if(Object.keys(e.userData).length===0)return;const n=this.options,r=this.extensionsUsed;try{const o=JSON.parse(JSON.stringify(e.userData));if(n.includeCustomExtensions&&o.gltfExtensions){t.extensions===void 0&&(t.extensions={});for(const l in o.gltfExtensions)t.extensions[l]=o.gltfExtensions[l],r[l]=!0;delete o.gltfExtensions}Object.keys(o).length>0&&(t.extras=o)}catch(o){console.warn("THREE.GLTFExporter: userData of '"+e.name+"' won't be serialized because of JSON.stringify error - "+o.message)}}getUID(e,t=!1){if(this.uids.has(e)===!1){const r=new Map;r.set(!0,this.uid++),r.set(!1,this.uid++),this.uids.set(e,r)}return this.uids.get(e).get(t)}isNormalizedNormalAttribute(e){if(this.cache.attributesNormalized.has(e))return!1;const n=new ce;for(let r=0,o=e.count;r<o;r++)if(Math.abs(n.fromBufferAttribute(e,r).length()-1)>5e-4)return!1;return!0}createNormalizedNormalAttribute(e){const t=this.cache;if(t.attributesNormalized.has(e))return t.attributesNormalized.get(e);const n=e.clone(),r=new ce;for(let o=0,l=n.count;o<l;o++)r.fromBufferAttribute(n,o),r.x===0&&r.y===0&&r.z===0?r.setX(1):r.normalize(),n.setXYZ(o,r.x,r.y,r.z);return t.attributesNormalized.set(e,n),n}applyTextureTransform(e,t){let n=!1;const r={};(t.offset.x!==0||t.offset.y!==0)&&(r.offset=t.offset.toArray(),n=!0),t.rotation!==0&&(r.rotation=t.rotation,n=!0),(t.repeat.x!==1||t.repeat.y!==1)&&(r.scale=t.repeat.toArray(),n=!0),n&&(e.extensions=e.extensions||{},e.extensions.KHR_texture_transform=r,this.extensionsUsed.KHR_texture_transform=!0)}buildMetalRoughTexture(e,t){if(e===t)return e;function n(M){return M.colorSpace===An?function(A){return A<.04045?A*.0773993808:Math.pow(A*.9478672986+.0521327014,2.4)}:function(A){return A}}console.warn("THREE.GLTFExporter: Merged metalnessMap and roughnessMap textures."),e instanceof Su&&(e=Uu(e)),t instanceof Su&&(t=Uu(t));const r=e?e.image:null,o=t?t.image:null,l=Math.max(r?r.width:0,o?o.width:0),c=Math.max(r?r.height:0,o?o.height:0),f=bg();f.width=l,f.height=c;const d=f.getContext("2d");d.fillStyle="#00ffff",d.fillRect(0,0,l,c);const m=d.getImageData(0,0,l,c);if(r){d.drawImage(r,0,0,l,c);const M=n(e),T=d.getImageData(0,0,l,c).data;for(let A=2;A<T.length;A+=4)m.data[A]=M(T[A]/256)*256}if(o){d.drawImage(o,0,0,l,c);const M=n(t),T=d.getImageData(0,0,l,c).data;for(let A=1;A<T.length;A+=4)m.data[A]=M(T[A]/256)*256}d.putImageData(m,0,0);const y=(e||t).clone();return y.source=new wf(f),y.colorSpace=Rr,y.channel=(e||t).channel,e&&t&&e.channel!==t.channel&&console.warn("THREE.GLTFExporter: UV channels for metalnessMap and roughnessMap textures must match."),y}processBuffer(e){const t=this.json,n=this.buffers;return t.buffers||(t.buffers=[{byteLength:0}]),n.push(e),0}processBufferView(e,t,n,r,o){const l=this.json;l.bufferViews||(l.bufferViews=[]);let c;switch(t){case gn.BYTE:case gn.UNSIGNED_BYTE:c=1;break;case gn.SHORT:case gn.UNSIGNED_SHORT:c=2;break;default:c=4}const f=D0(r*e.itemSize*c),d=new DataView(new ArrayBuffer(f));let m=0;for(let M=n;M<n+r;M++)for(let T=0;T<e.itemSize;T++){let A;e.itemSize>4?A=e.array[M*e.itemSize+T]:(T===0?A=e.getX(M):T===1?A=e.getY(M):T===2?A=e.getZ(M):T===3&&(A=e.getW(M)),e.normalized===!0&&(A=kl.normalize(A,e.array))),t===gn.FLOAT?d.setFloat32(m,A,!0):t===gn.INT?d.setInt32(m,A,!0):t===gn.UNSIGNED_INT?d.setUint32(m,A,!0):t===gn.SHORT?d.setInt16(m,A,!0):t===gn.UNSIGNED_SHORT?d.setUint16(m,A,!0):t===gn.BYTE?d.setInt8(m,A):t===gn.UNSIGNED_BYTE&&d.setUint8(m,A),m+=c}const v={buffer:this.processBuffer(d.buffer),byteOffset:this.byteOffset,byteLength:f};return o!==void 0&&(v.target=o),o===gn.ARRAY_BUFFER&&(v.byteStride=e.itemSize*c),this.byteOffset+=f,l.bufferViews.push(v),{id:l.bufferViews.length-1,byteLength:0}}processBufferViewImage(e){const t=this,n=t.json;return n.bufferViews||(n.bufferViews=[]),new Promise(function(r){const o=new FileReader;o.readAsArrayBuffer(e),o.onloadend=function(){const l=ku(o.result),c={buffer:t.processBuffer(l),byteOffset:t.byteOffset,byteLength:l.byteLength};t.byteOffset+=l.byteLength,r(n.bufferViews.push(c)-1)}})}processAccessor(e,t,n,r){const o=this.json,l={1:"SCALAR",2:"VEC2",3:"VEC3",4:"VEC4",9:"MAT3",16:"MAT4"};let c;if(e.array.constructor===Float32Array)c=gn.FLOAT;else if(e.array.constructor===Int32Array)c=gn.INT;else if(e.array.constructor===Uint32Array)c=gn.UNSIGNED_INT;else if(e.array.constructor===Int16Array)c=gn.SHORT;else if(e.array.constructor===Uint16Array)c=gn.UNSIGNED_SHORT;else if(e.array.constructor===Int8Array)c=gn.BYTE;else if(e.array.constructor===Uint8Array)c=gn.UNSIGNED_BYTE;else throw new Error("THREE.GLTFExporter: Unsupported bufferAttribute component type: "+e.array.constructor.name);if(n===void 0&&(n=0),r===void 0&&(r=e.count),r===0)return null;const f=RT(e,n,r);let d;t!==void 0&&(d=e===t.index?gn.ELEMENT_ARRAY_BUFFER:gn.ARRAY_BUFFER);const m=this.processBufferView(e,c,n,r,d),v={bufferView:m.id,byteOffset:m.byteOffset,componentType:c,count:r,max:f.max,min:f.min,type:l[e.itemSize]};return e.normalized===!0&&(v.normalized=!0),o.accessors||(o.accessors=[]),o.accessors.push(v)-1}processImage(e,t,n,r="image/png"){if(e!==null){const o=this,l=o.cache,c=o.json,f=o.options,d=o.pending;l.images.has(e)||l.images.set(e,{});const m=l.images.get(e),v=r+":flipY/"+n.toString();if(m[v]!==void 0)return m[v];c.images||(c.images=[]);const y={mimeType:r},M=bg();M.width=Math.min(e.width,f.maxTextureSize),M.height=Math.min(e.height,f.maxTextureSize);const T=M.getContext("2d");if(n===!0&&(T.translate(0,M.height),T.scale(1,-1)),e.data!==void 0){t!==Cr&&console.error("GLTFExporter: Only RGBAFormat is supported.",t),(e.width>f.maxTextureSize||e.height>f.maxTextureSize)&&console.warn("GLTFExporter: Image size is bigger than maxTextureSize",e);const E=new Uint8ClampedArray(e.height*e.width*4);for(let b=0;b<E.length;b+=4)E[b+0]=e.data[b+0],E[b+1]=e.data[b+1],E[b+2]=e.data[b+2],E[b+3]=e.data[b+3];T.putImageData(new ImageData(E,e.width,e.height),0,0)}else T.drawImage(e,0,0,M.width,M.height);f.binary===!0?d.push(wg(M,r).then(E=>o.processBufferViewImage(E)).then(E=>{y.bufferView=E})):M.toDataURL!==void 0?y.uri=M.toDataURL(r):d.push(wg(M,r).then(E=>new FileReader().readAsDataURL(E)).then(E=>{y.uri=E}));const A=c.images.push(y)-1;return m[v]=A,A}else throw new Error("THREE.GLTFExporter: No valid image data found. Unable to process texture.")}processSampler(e){const t=this.json;t.samplers||(t.samplers=[]);const n={magFilter:Dr[e.magFilter],minFilter:Dr[e.minFilter],wrapS:Dr[e.wrapS],wrapT:Dr[e.wrapT]};return t.samplers.push(n)-1}processTexture(e){const n=this.options,r=this.cache,o=this.json;if(r.textures.has(e))return r.textures.get(e);o.textures||(o.textures=[]),e instanceof Su&&(e=Uu(e,n.maxTextureSize));let l=e.userData.mimeType;l==="image/webp"&&(l="image/png");const c={sampler:this.processSampler(e),source:this.processImage(e.image,e.format,e.flipY,l)};e.name&&(c.name=e.name),this._invokeAll(function(d){d.writeTexture&&d.writeTexture(e,c)});const f=o.textures.push(c)-1;return r.textures.set(e,f),f}processMaterial(e){const t=this.cache,n=this.json;if(t.materials.has(e))return t.materials.get(e);if(e.isShaderMaterial)return console.warn("GLTFExporter: THREE.ShaderMaterial not supported."),null;n.materials||(n.materials=[]);const r={pbrMetallicRoughness:{}};e.isMeshStandardMaterial!==!0&&e.isMeshBasicMaterial!==!0&&console.warn("GLTFExporter: Use MeshStandardMaterial or MeshBasicMaterial for best results.");const o=e.color.toArray().concat([e.opacity]);if(Al(o,[1,1,1,1])||(r.pbrMetallicRoughness.baseColorFactor=o),e.isMeshStandardMaterial?(r.pbrMetallicRoughness.metallicFactor=e.metalness,r.pbrMetallicRoughness.roughnessFactor=e.roughness):(r.pbrMetallicRoughness.metallicFactor=.5,r.pbrMetallicRoughness.roughnessFactor=.5),e.metalnessMap||e.roughnessMap){const c=this.buildMetalRoughTexture(e.metalnessMap,e.roughnessMap),f={index:this.processTexture(c),channel:c.channel};this.applyTextureTransform(f,c),r.pbrMetallicRoughness.metallicRoughnessTexture=f}if(e.map){const c={index:this.processTexture(e.map),texCoord:e.map.channel};this.applyTextureTransform(c,e.map),r.pbrMetallicRoughness.baseColorTexture=c}if(e.emissive){const c=e.emissive;if(Math.max(c.r,c.g,c.b)>0&&(r.emissiveFactor=e.emissive.toArray()),e.emissiveMap){const d={index:this.processTexture(e.emissiveMap),texCoord:e.emissiveMap.channel};this.applyTextureTransform(d,e.emissiveMap),r.emissiveTexture=d}}if(e.normalMap){const c={index:this.processTexture(e.normalMap),texCoord:e.normalMap.channel};e.normalScale&&e.normalScale.x!==1&&(c.scale=e.normalScale.x),this.applyTextureTransform(c,e.normalMap),r.normalTexture=c}if(e.aoMap){const c={index:this.processTexture(e.aoMap),texCoord:e.aoMap.channel};e.aoMapIntensity!==1&&(c.strength=e.aoMapIntensity),this.applyTextureTransform(c,e.aoMap),r.occlusionTexture=c}e.transparent?r.alphaMode="BLEND":e.alphaTest>0&&(r.alphaMode="MASK",r.alphaCutoff=e.alphaTest),e.side===ss&&(r.doubleSided=!0),e.name!==""&&(r.name=e.name),this.serializeUserData(e,r),this._invokeAll(function(c){c.writeMaterial&&c.writeMaterial(e,r)});const l=n.materials.push(r)-1;return t.materials.set(e,l),l}processMesh(e){const t=this.cache,n=this.json,r=[e.geometry.uuid];if(Array.isArray(e.material))for(let I=0,H=e.material.length;I<H;I++)r.push(e.material[I].uuid);else r.push(e.material.uuid);const o=r.join(":");if(t.meshes.has(o))return t.meshes.get(o);const l=e.geometry;let c;e.isLineSegments?c=gn.LINES:e.isLineLoop?c=gn.LINE_LOOP:e.isLine?c=gn.LINE_STRIP:e.isPoints?c=gn.POINTS:c=e.material.wireframe?gn.LINES:gn.TRIANGLES;const f={},d={},m=[],v=[],y={uv:"TEXCOORD_0",uv1:"TEXCOORD_1",color:"COLOR_0",skinWeight:"WEIGHTS_0",skinIndex:"JOINTS_0"},M=l.getAttribute("normal");M!==void 0&&!this.isNormalizedNormalAttribute(M)&&(console.warn("THREE.GLTFExporter: Creating normalized normal attribute from the non-normalized one."),l.setAttribute("normal",this.createNormalizedNormalAttribute(M)));let T=null;for(let I in l.attributes){if(I.slice(0,5)==="morph")continue;const H=l.attributes[I];if(I=y[I]||I.toUpperCase(),/^(POSITION|NORMAL|TANGENT|TEXCOORD_\d+|COLOR_\d+|JOINTS_\d+|WEIGHTS_\d+)$/.test(I)||(I="_"+I),t.attributes.has(this.getUID(H))){d[I]=t.attributes.get(this.getUID(H));continue}T=null;const G=H.array;I==="JOINTS_0"&&!(G instanceof Uint16Array)&&!(G instanceof Uint8Array)&&(console.warn('GLTFExporter: Attribute "skinIndex" converted to type UNSIGNED_SHORT.'),T=new _i(new Uint16Array(G),H.itemSize,H.normalized));const g=this.processAccessor(T||H,l);g!==null&&(I.startsWith("_")||this.detectMeshQuantization(I,H),d[I]=g,t.attributes.set(this.getUID(H),g))}if(M!==void 0&&l.setAttribute("normal",M),Object.keys(d).length===0)return null;if(e.morphTargetInfluences!==void 0&&e.morphTargetInfluences.length>0){const I=[],H=[],X={};if(e.morphTargetDictionary!==void 0)for(const G in e.morphTargetDictionary)X[e.morphTargetDictionary[G]]=G;for(let G=0;G<e.morphTargetInfluences.length;++G){const g={};let oe=!1;for(const U in l.morphAttributes){if(U!=="position"&&U!=="normal"){oe||(console.warn("GLTFExporter: Only POSITION and NORMAL morph are supported."),oe=!0);continue}const V=l.morphAttributes[U][G],Me=U.toUpperCase(),Te=l.attributes[U];if(t.attributes.has(this.getUID(V,!0))){g[Me]=t.attributes.get(this.getUID(V,!0));continue}const ve=V.clone();if(!l.morphTargetsRelative)for(let Z=0,me=V.count;Z<me;Z++)for(let _e=0;_e<V.itemSize;_e++)_e===0&&ve.setX(Z,V.getX(Z)-Te.getX(Z)),_e===1&&ve.setY(Z,V.getY(Z)-Te.getY(Z)),_e===2&&ve.setZ(Z,V.getZ(Z)-Te.getZ(Z)),_e===3&&ve.setW(Z,V.getW(Z)-Te.getW(Z));g[Me]=this.processAccessor(ve,l),t.attributes.set(this.getUID(Te,!0),g[Me])}v.push(g),I.push(e.morphTargetInfluences[G]),e.morphTargetDictionary!==void 0&&H.push(X[G])}f.weights=I,H.length>0&&(f.extras={},f.extras.targetNames=H)}const A=Array.isArray(e.material);if(A&&l.groups.length===0)return null;const E=A?e.material:[e.material],b=A?l.groups:[{materialIndex:0,start:void 0,count:void 0}];for(let I=0,H=b.length;I<H;I++){const X={mode:c,attributes:d};if(this.serializeUserData(l,X),v.length>0&&(X.targets=v),l.index!==null){let g=this.getUID(l.index);(b[I].start!==void 0||b[I].count!==void 0)&&(g+=":"+b[I].start+":"+b[I].count),t.attributes.has(g)?X.indices=t.attributes.get(g):(X.indices=this.processAccessor(l.index,l,b[I].start,b[I].count),t.attributes.set(g,X.indices)),X.indices===null&&delete X.indices}const G=this.processMaterial(E[b[I].materialIndex]);G!==null&&(X.material=G),m.push(X)}f.primitives=m,n.meshes||(n.meshes=[]),this._invokeAll(function(I){I.writeMesh&&I.writeMesh(e,f)});const z=n.meshes.push(f)-1;return t.meshes.set(o,z),z}detectMeshQuantization(e,t){if(this.extensionsUsed[Ou])return;let n;switch(t.array.constructor){case Int8Array:n="byte";break;case Uint8Array:n="unsigned byte";break;case Int16Array:n="short";break;case Uint16Array:n="unsigned short";break;default:return}t.normalized&&(n+=" normalized");const r=e.split("_",1)[0];vg[r]&&vg[r].includes(n)&&(this.extensionsUsed[Ou]=!0,this.extensionsRequired[Ou]=!0)}processCamera(e){const t=this.json;t.cameras||(t.cameras=[]);const n=e.isOrthographicCamera,r={type:n?"orthographic":"perspective"};return n?r.orthographic={xmag:e.right*2,ymag:e.top*2,zfar:e.far<=0?.001:e.far,znear:e.near<0?0:e.near}:r.perspective={aspectRatio:e.aspect,yfov:kl.degToRad(e.fov),zfar:e.far<=0?.001:e.far,znear:e.near<0?0:e.near},e.name!==""&&(r.name=e.type),t.cameras.push(r)-1}processAnimation(e,t){const n=this.json,r=this.nodeMap;n.animations||(n.animations=[]),e=Uf.Utils.mergeMorphTargetTracks(e.clone(),t);const o=e.tracks,l=[],c=[];for(let f=0;f<o.length;++f){const d=o[f],m=wn.parseTrackName(d.name);let v=wn.findNode(t,m.nodeName);const y=xg[m.propertyName];if(m.objectName==="bones"&&(v.isSkinnedMesh===!0?v=v.skeleton.getBoneByName(m.objectIndex):v=void 0),!v||!y)return console.warn('THREE.GLTFExporter: Could not export animation track "%s".',d.name),null;const M=1;let T=d.values.length/d.times.length;y===xg.morphTargetInfluences&&(T/=v.morphTargetInfluences.length);let A;d.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline===!0?(A="CUBICSPLINE",T/=3):d.getInterpolation()===Wa?A="STEP":A="LINEAR",c.push({input:this.processAccessor(new _i(d.times,M)),output:this.processAccessor(new _i(d.values,T)),interpolation:A}),l.push({sampler:c.length-1,target:{node:r.get(v),path:y}})}return n.animations.push({name:e.name||"clip_"+n.animations.length,samplers:c,channels:l}),n.animations.length-1}processSkin(e){const t=this.json,n=this.nodeMap,r=t.nodes[n.get(e)],o=e.skeleton;if(o===void 0)return null;const l=e.skeleton.bones[0];if(l===void 0)return null;const c=[],f=new Float32Array(o.bones.length*16),d=new hn;for(let v=0;v<o.bones.length;++v)c.push(n.get(o.bones[v])),d.copy(o.boneInverses[v]),d.multiply(e.bindMatrix).toArray(f,v*16);return t.skins===void 0&&(t.skins=[]),t.skins.push({inverseBindMatrices:this.processAccessor(new _i(f,16)),joints:c,skeleton:n.get(l)}),r.skin=t.skins.length-1}processNode(e){const t=this.json,n=this.options,r=this.nodeMap;t.nodes||(t.nodes=[]);const o={};if(n.trs){const c=e.quaternion.toArray(),f=e.position.toArray(),d=e.scale.toArray();Al(c,[0,0,0,1])||(o.rotation=c),Al(f,[0,0,0])||(o.translation=f),Al(d,[1,1,1])||(o.scale=d)}else e.matrixAutoUpdate&&e.updateMatrix(),CT(e.matrix)===!1&&(o.matrix=e.matrix.elements);if(e.name!==""&&(o.name=String(e.name)),this.serializeUserData(e,o),e.isMesh||e.isLine||e.isPoints){const c=this.processMesh(e);c!==null&&(o.mesh=c)}else e.isCamera&&(o.camera=this.processCamera(e));if(e.isSkinnedMesh&&this.skins.push(e),e.children.length>0){const c=[];for(let f=0,d=e.children.length;f<d;f++){const m=e.children[f];if(m.visible||n.onlyVisible===!1){const v=this.processNode(m);v!==null&&c.push(v)}}c.length>0&&(o.children=c)}this._invokeAll(function(c){c.writeNode&&c.writeNode(e,o)});const l=t.nodes.push(o)-1;return r.set(e,l),l}processScene(e){const t=this.json,n=this.options;t.scenes||(t.scenes=[],t.scene=0);const r={};e.name!==""&&(r.name=e.name),t.scenes.push(r);const o=[];for(let l=0,c=e.children.length;l<c;l++){const f=e.children[l];if(f.visible||n.onlyVisible===!1){const d=this.processNode(f);d!==null&&o.push(d)}}o.length>0&&(r.nodes=o),this.serializeUserData(e,r)}processObjects(e){const t=new oh;t.name="AuxScene";for(let n=0;n<e.length;n++)t.children.push(e[n]);this.processScene(t)}processInput(e){const t=this.options;e=e instanceof Array?e:[e],this._invokeAll(function(r){r.beforeParse&&r.beforeParse(e)});const n=[];for(let r=0;r<e.length;r++)e[r]instanceof oh?this.processScene(e[r]):n.push(e[r]);n.length>0&&this.processObjects(n);for(let r=0;r<this.skins.length;++r)this.processSkin(this.skins[r]);for(let r=0;r<t.animations.length;++r)this.processAnimation(t.animations[r],e[0]);this._invokeAll(function(r){r.afterParse&&r.afterParse(e)})}_invokeAll(e){for(let t=0,n=this.plugins.length;t<n;t++)e(this.plugins[t])}}class DT{constructor(e){this.writer=e,this.name="KHR_lights_punctual"}writeNode(e,t){if(!e.isLight)return;if(!e.isDirectionalLight&&!e.isPointLight&&!e.isSpotLight){console.warn("THREE.GLTFExporter: Only directional, point, and spot lights are supported.",e);return}const n=this.writer,r=n.json,o=n.extensionsUsed,l={};e.name&&(l.name=e.name),l.color=e.color.toArray(),l.intensity=e.intensity,e.isDirectionalLight?l.type="directional":e.isPointLight?(l.type="point",e.distance>0&&(l.range=e.distance)):e.isSpotLight&&(l.type="spot",e.distance>0&&(l.range=e.distance),l.spot={},l.spot.innerConeAngle=(1-e.penumbra)*e.angle,l.spot.outerConeAngle=e.angle),e.decay!==void 0&&e.decay!==2&&console.warn("THREE.GLTFExporter: Light decay may be lost. glTF is physically-based, and expects light.decay=2."),e.target&&(e.target.parent!==e||e.target.position.x!==0||e.target.position.y!==0||e.target.position.z!==-1)&&console.warn("THREE.GLTFExporter: Light direction may be lost. For best results, make light.target a child of the light with position 0,0,-1."),o[this.name]||(r.extensions=r.extensions||{},r.extensions[this.name]={lights:[]},o[this.name]=!0);const c=r.extensions[this.name].lights;c.push(l),t.extensions=t.extensions||{},t.extensions[this.name]={light:c.length-1}}}class PT{constructor(e){this.writer=e,this.name="KHR_materials_unlit"}writeMaterial(e,t){if(!e.isMeshBasicMaterial)return;const r=this.writer.extensionsUsed;t.extensions=t.extensions||{},t.extensions[this.name]={},r[this.name]=!0,t.pbrMetallicRoughness.metallicFactor=0,t.pbrMetallicRoughness.roughnessFactor=.9}}class IT{constructor(e){this.writer=e,this.name="KHR_materials_clearcoat"}writeMaterial(e,t){if(!e.isMeshPhysicalMaterial||e.clearcoat===0)return;const n=this.writer,r=n.extensionsUsed,o={};if(o.clearcoatFactor=e.clearcoat,e.clearcoatMap){const l={index:n.processTexture(e.clearcoatMap),texCoord:e.clearcoatMap.channel};n.applyTextureTransform(l,e.clearcoatMap),o.clearcoatTexture=l}if(o.clearcoatRoughnessFactor=e.clearcoatRoughness,e.clearcoatRoughnessMap){const l={index:n.processTexture(e.clearcoatRoughnessMap),texCoord:e.clearcoatRoughnessMap.channel};n.applyTextureTransform(l,e.clearcoatRoughnessMap),o.clearcoatRoughnessTexture=l}if(e.clearcoatNormalMap){const l={index:n.processTexture(e.clearcoatNormalMap),texCoord:e.clearcoatNormalMap.channel};n.applyTextureTransform(l,e.clearcoatNormalMap),o.clearcoatNormalTexture=l}t.extensions=t.extensions||{},t.extensions[this.name]=o,r[this.name]=!0}}class NT{constructor(e){this.writer=e,this.name="KHR_materials_iridescence"}writeMaterial(e,t){if(!e.isMeshPhysicalMaterial||e.iridescence===0)return;const n=this.writer,r=n.extensionsUsed,o={};if(o.iridescenceFactor=e.iridescence,e.iridescenceMap){const l={index:n.processTexture(e.iridescenceMap),texCoord:e.iridescenceMap.channel};n.applyTextureTransform(l,e.iridescenceMap),o.iridescenceTexture=l}if(o.iridescenceIor=e.iridescenceIOR,o.iridescenceThicknessMinimum=e.iridescenceThicknessRange[0],o.iridescenceThicknessMaximum=e.iridescenceThicknessRange[1],e.iridescenceThicknessMap){const l={index:n.processTexture(e.iridescenceThicknessMap),texCoord:e.iridescenceThicknessMap.channel};n.applyTextureTransform(l,e.iridescenceThicknessMap),o.iridescenceThicknessTexture=l}t.extensions=t.extensions||{},t.extensions[this.name]=o,r[this.name]=!0}}class UT{constructor(e){this.writer=e,this.name="KHR_materials_transmission"}writeMaterial(e,t){if(!e.isMeshPhysicalMaterial||e.transmission===0)return;const n=this.writer,r=n.extensionsUsed,o={};if(o.transmissionFactor=e.transmission,e.transmissionMap){const l={index:n.processTexture(e.transmissionMap),texCoord:e.transmissionMap.channel};n.applyTextureTransform(l,e.transmissionMap),o.transmissionTexture=l}t.extensions=t.extensions||{},t.extensions[this.name]=o,r[this.name]=!0}}class OT{constructor(e){this.writer=e,this.name="KHR_materials_volume"}writeMaterial(e,t){if(!e.isMeshPhysicalMaterial||e.transmission===0)return;const n=this.writer,r=n.extensionsUsed,o={};if(o.thicknessFactor=e.thickness,e.thicknessMap){const l={index:n.processTexture(e.thicknessMap),texCoord:e.thicknessMap.channel};n.applyTextureTransform(l,e.thicknessMap),o.thicknessTexture=l}o.attenuationDistance=e.attenuationDistance,o.attenuationColor=e.attenuationColor.toArray(),t.extensions=t.extensions||{},t.extensions[this.name]=o,r[this.name]=!0}}class kT{constructor(e){this.writer=e,this.name="KHR_materials_ior"}writeMaterial(e,t){if(!e.isMeshPhysicalMaterial||e.ior===1.5)return;const r=this.writer.extensionsUsed,o={};o.ior=e.ior,t.extensions=t.extensions||{},t.extensions[this.name]=o,r[this.name]=!0}}class BT{constructor(e){this.writer=e,this.name="KHR_materials_specular"}writeMaterial(e,t){if(!e.isMeshPhysicalMaterial||e.specularIntensity===1&&e.specularColor.equals(wT)&&!e.specularIntensityMap&&!e.specularColorTexture)return;const n=this.writer,r=n.extensionsUsed,o={};if(e.specularIntensityMap){const l={index:n.processTexture(e.specularIntensityMap),texCoord:e.specularIntensityMap.channel};n.applyTextureTransform(l,e.specularIntensityMap),o.specularTexture=l}if(e.specularColorMap){const l={index:n.processTexture(e.specularColorMap),texCoord:e.specularColorMap.channel};n.applyTextureTransform(l,e.specularColorMap),o.specularColorTexture=l}o.specularFactor=e.specularIntensity,o.specularColorFactor=e.specularColor.toArray(),t.extensions=t.extensions||{},t.extensions[this.name]=o,r[this.name]=!0}}class FT{constructor(e){this.writer=e,this.name="KHR_materials_sheen"}writeMaterial(e,t){if(!e.isMeshPhysicalMaterial||e.sheen==0)return;const n=this.writer,r=n.extensionsUsed,o={};if(e.sheenRoughnessMap){const l={index:n.processTexture(e.sheenRoughnessMap),texCoord:e.sheenRoughnessMap.channel};n.applyTextureTransform(l,e.sheenRoughnessMap),o.sheenRoughnessTexture=l}if(e.sheenColorMap){const l={index:n.processTexture(e.sheenColorMap),texCoord:e.sheenColorMap.channel};n.applyTextureTransform(l,e.sheenColorMap),o.sheenColorTexture=l}o.sheenRoughnessFactor=e.sheenRoughness,o.sheenColorFactor=e.sheenColor.toArray(),t.extensions=t.extensions||{},t.extensions[this.name]=o,r[this.name]=!0}}class HT{constructor(e){this.writer=e,this.name="KHR_materials_anisotropy"}writeMaterial(e,t){if(!e.isMeshPhysicalMaterial||e.anisotropy==0)return;const n=this.writer,r=n.extensionsUsed,o={};if(e.anisotropyMap){const l={index:n.processTexture(e.anisotropyMap)};n.applyTextureTransform(l,e.anisotropyMap),o.anisotropyTexture=l}o.anisotropyStrength=e.anisotropy,o.anisotropyRotation=e.anisotropyRotation,t.extensions=t.extensions||{},t.extensions[this.name]=o,r[this.name]=!0}}class zT{constructor(e){this.writer=e,this.name="KHR_materials_emissive_strength"}writeMaterial(e,t){if(!e.isMeshStandardMaterial||e.emissiveIntensity===1)return;const r=this.writer.extensionsUsed,o={};o.emissiveStrength=e.emissiveIntensity,t.extensions=t.extensions||{},t.extensions[this.name]=o,r[this.name]=!0}}Uf.Utils={insertKeyframe:function(s,e){const n=s.getValueSize(),r=new s.TimeBufferType(s.times.length+1),o=new s.ValueBufferType(s.values.length+n),l=s.createInterpolant(new s.ValueBufferType(n));let c;if(s.times.length===0){r[0]=e;for(let f=0;f<n;f++)o[f]=0;c=0}else if(e<s.times[0]){if(Math.abs(s.times[0]-e)<.001)return 0;r[0]=e,r.set(s.times,1),o.set(l.evaluate(e),0),o.set(s.values,n),c=0}else if(e>s.times[s.times.length-1]){if(Math.abs(s.times[s.times.length-1]-e)<.001)return s.times.length-1;r[r.length-1]=e,r.set(s.times,0),o.set(s.values,0),o.set(l.evaluate(e),s.values.length),c=r.length-1}else for(let f=0;f<s.times.length;f++){if(Math.abs(s.times[f]-e)<.001)return f;if(s.times[f]<e&&s.times[f+1]>e){r.set(s.times.slice(0,f+1),0),r[f+1]=e,r.set(s.times.slice(f+1),f+2),o.set(s.values.slice(0,(f+1)*n),0),o.set(l.evaluate(e),(f+1)*n),o.set(s.values.slice((f+1)*n),(f+2)*n),c=f+1;break}}return s.times=r,s.values=o,c},mergeMorphTargetTracks:function(s,e){const t=[],n={},r=s.tracks;for(let o=0;o<r.length;++o){let l=r[o];const c=wn.parseTrackName(l.name),f=wn.findNode(e,c.nodeName);if(c.propertyName!=="morphTargetInfluences"||c.propertyIndex===void 0){t.push(l);continue}if(l.createInterpolant!==l.InterpolantFactoryMethodDiscrete&&l.createInterpolant!==l.InterpolantFactoryMethodLinear){if(l.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline)throw new Error("THREE.GLTFExporter: Cannot merge tracks with glTF CUBICSPLINE interpolation.");console.warn("THREE.GLTFExporter: Morph target interpolation mode not yet supported. Using LINEAR instead."),l=l.clone(),l.setInterpolation(Yo)}const d=f.morphTargetInfluences.length,m=f.morphTargetDictionary[c.propertyIndex];if(m===void 0)throw new Error("THREE.GLTFExporter: Morph target name not found: "+c.propertyIndex);let v;if(n[f.uuid]===void 0){v=l.clone();const M=new v.ValueBufferType(d*v.times.length);for(let T=0;T<v.times.length;T++)M[T*d+m]=v.values[T];v.name=(c.nodeName||"")+".morphTargetInfluences",v.values=M,n[f.uuid]=v,t.push(v);continue}const y=l.createInterpolant(new l.ValueBufferType(1));v=n[f.uuid];for(let M=0;M<v.times.length;M++)v.values[M*d+m]=y.evaluate(v.times[M]);for(let M=0;M<l.times.length;M++){const T=this.insertKeyframe(v,l.times[M]);v.values[T*d+m]=l.values[M]}}return s.tracks=t,s}};const GT={name:"HorizontalBlurShader",uniforms:{tDiffuse:{value:null},h:{value:1/512}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform sampler2D tDiffuse;
		uniform float h;

		varying vec2 vUv;

		void main() {

			vec4 sum = vec4( 0.0 );

			sum += texture2D( tDiffuse, vec2( vUv.x - 4.0 * h, vUv.y ) ) * 0.051;
			sum += texture2D( tDiffuse, vec2( vUv.x - 3.0 * h, vUv.y ) ) * 0.0918;
			sum += texture2D( tDiffuse, vec2( vUv.x - 2.0 * h, vUv.y ) ) * 0.12245;
			sum += texture2D( tDiffuse, vec2( vUv.x - 1.0 * h, vUv.y ) ) * 0.1531;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;
			sum += texture2D( tDiffuse, vec2( vUv.x + 1.0 * h, vUv.y ) ) * 0.1531;
			sum += texture2D( tDiffuse, vec2( vUv.x + 2.0 * h, vUv.y ) ) * 0.12245;
			sum += texture2D( tDiffuse, vec2( vUv.x + 3.0 * h, vUv.y ) ) * 0.0918;
			sum += texture2D( tDiffuse, vec2( vUv.x + 4.0 * h, vUv.y ) ) * 0.051;

			gl_FragColor = sum;

		}`},VT={name:"VerticalBlurShader",uniforms:{tDiffuse:{value:null},v:{value:1/512}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform sampler2D tDiffuse;
		uniform float v;

		varying vec2 vUv;

		void main() {

			vec4 sum = vec4( 0.0 );

			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 4.0 * v ) ) * 0.051;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 3.0 * v ) ) * 0.0918;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 2.0 * v ) ) * 0.12245;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 1.0 * v ) ) * 0.1531;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 1.0 * v ) ) * 0.1531;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 2.0 * v ) ) * 0.12245;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 3.0 * v ) ) * 0.0918;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 4.0 * v ) ) * 0.051;

			gl_FragColor = sum;

		}`};/*!
 * Cropper.js v1.6.1
 * https://fengyuanchen.github.io/cropperjs
 *
 * Copyright 2015-present Chen Fengyuan
 * Released under the MIT license
 *
 * Date: 2023-09-17T03:44:19.860Z
 */function Mg(s,e){var t=Object.keys(s);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(s);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(s,r).enumerable})),t.push.apply(t,n)}return t}function P0(s){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Mg(Object(t),!0).forEach(function(n){XT(s,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(t)):Mg(Object(t)).forEach(function(n){Object.defineProperty(s,n,Object.getOwnPropertyDescriptor(t,n))})}return s}function sf(s){"@babel/helpers - typeof";return sf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sf(s)}function WT(s,e){if(!(s instanceof e))throw new TypeError("Cannot call a class as a function")}function Eg(s,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(s,N0(n.key),n)}}function $T(s,e,t){return e&&Eg(s.prototype,e),t&&Eg(s,t),Object.defineProperty(s,"prototype",{writable:!1}),s}function XT(s,e,t){return e=N0(e),e in s?Object.defineProperty(s,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):s[e]=t,s}function I0(s){return jT(s)||YT(s)||qT(s)||ZT()}function jT(s){if(Array.isArray(s))return of(s)}function YT(s){if(typeof Symbol<"u"&&s[Symbol.iterator]!=null||s["@@iterator"]!=null)return Array.from(s)}function qT(s,e){if(s){if(typeof s=="string")return of(s,e);var t=Object.prototype.toString.call(s).slice(8,-1);if(t==="Object"&&s.constructor&&(t=s.constructor.name),t==="Map"||t==="Set")return Array.from(s);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return of(s,e)}}function of(s,e){(e==null||e>s.length)&&(e=s.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=s[t];return n}function ZT(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function KT(s,e){if(typeof s!="object"||s===null)return s;var t=s[Symbol.toPrimitive];if(t!==void 0){var n=t.call(s,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(s)}function N0(s){var e=KT(s,"string");return typeof e=="symbol"?e:String(e)}var _h=typeof window<"u"&&typeof window.document<"u",Ms=_h?window:{},Of=_h&&Ms.document.documentElement?"ontouchstart"in Ms.document.documentElement:!1,kf=_h?"PointerEvent"in Ms:!1,Xn="cropper",Bf="all",U0="crop",O0="move",k0="zoom",No="e",Uo="w",Ra="s",io="n",wl="ne",Ml="nw",El="se",Sl="sw",af="".concat(Xn,"-crop"),Sg="".concat(Xn,"-disabled"),cr="".concat(Xn,"-hidden"),Tg="".concat(Xn,"-hide"),JT="".concat(Xn,"-invisible"),ah="".concat(Xn,"-modal"),lf="".concat(Xn,"-move"),Hl="".concat(Xn,"Action"),jc="".concat(Xn,"Preview"),Ff="crop",B0="move",F0="none",cf="crop",hf="cropend",uf="cropmove",ff="cropstart",Ag="dblclick",QT=Of?"touchstart":"mousedown",eA=Of?"touchmove":"mousemove",tA=Of?"touchend touchcancel":"mouseup",Cg=kf?"pointerdown":QT,Rg=kf?"pointermove":eA,Lg=kf?"pointerup pointercancel":tA,Dg="ready",Pg="resize",Ig="wheel",df="zoom",Ng="image/jpeg",nA=/^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/,iA=/^data:/,rA=/^data:image\/jpeg;base64,/,sA=/^img|canvas$/i,H0=200,z0=100,Ug={viewMode:0,dragMode:Ff,initialAspectRatio:NaN,aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:H0,minContainerHeight:z0,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},oA='<div class="cropper-container" touch-action="none"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-cropper-action="e"></span><span class="cropper-line line-n" data-cropper-action="n"></span><span class="cropper-line line-w" data-cropper-action="w"></span><span class="cropper-line line-s" data-cropper-action="s"></span><span class="cropper-point point-e" data-cropper-action="e"></span><span class="cropper-point point-n" data-cropper-action="n"></span><span class="cropper-point point-w" data-cropper-action="w"></span><span class="cropper-point point-s" data-cropper-action="s"></span><span class="cropper-point point-ne" data-cropper-action="ne"></span><span class="cropper-point point-nw" data-cropper-action="nw"></span><span class="cropper-point point-sw" data-cropper-action="sw"></span><span class="cropper-point point-se" data-cropper-action="se"></span></div></div>',aA=Number.isNaN||Ms.isNaN;function vn(s){return typeof s=="number"&&!aA(s)}var Og=function(e){return e>0&&e<1/0};function Bu(s){return typeof s>"u"}function Zo(s){return sf(s)==="object"&&s!==null}var lA=Object.prototype.hasOwnProperty;function Pa(s){if(!Zo(s))return!1;try{var e=s.constructor,t=e.prototype;return e&&t&&lA.call(t,"isPrototypeOf")}catch{return!1}}function lr(s){return typeof s=="function"}var cA=Array.prototype.slice;function G0(s){return Array.from?Array.from(s):cA.call(s)}function ci(s,e){return s&&lr(e)&&(Array.isArray(s)||vn(s.length)?G0(s).forEach(function(t,n){e.call(s,t,n,s)}):Zo(s)&&Object.keys(s).forEach(function(t){e.call(s,s[t],t,s)})),s}var Yn=Object.assign||function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Zo(e)&&n.length>0&&n.forEach(function(o){Zo(o)&&Object.keys(o).forEach(function(l){e[l]=o[l]})}),e},hA=/\.\d*(?:0|9){12}\d*$/;function Ba(s){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e11;return hA.test(s)?Math.round(s*e)/e:s}var uA=/^width|height|left|top|marginLeft|marginTop$/;function co(s,e){var t=s.style;ci(e,function(n,r){uA.test(r)&&vn(n)&&(n="".concat(n,"px")),t[r]=n})}function fA(s,e){return s.classList?s.classList.contains(e):s.className.indexOf(e)>-1}function Ti(s,e){if(e){if(vn(s.length)){ci(s,function(n){Ti(n,e)});return}if(s.classList){s.classList.add(e);return}var t=s.className.trim();t?t.indexOf(e)<0&&(s.className="".concat(t," ").concat(e)):s.className=e}}function ys(s,e){if(e){if(vn(s.length)){ci(s,function(t){ys(t,e)});return}if(s.classList){s.classList.remove(e);return}s.className.indexOf(e)>=0&&(s.className=s.className.replace(e,""))}}function Ia(s,e,t){if(e){if(vn(s.length)){ci(s,function(n){Ia(n,e,t)});return}t?Ti(s,e):ys(s,e)}}var dA=/([a-z\d])([A-Z])/g;function Hf(s){return s.replace(dA,"$1-$2").toLowerCase()}function pf(s,e){return Zo(s[e])?s[e]:s.dataset?s.dataset[e]:s.getAttribute("data-".concat(Hf(e)))}function zl(s,e,t){Zo(t)?s[e]=t:s.dataset?s.dataset[e]=t:s.setAttribute("data-".concat(Hf(e)),t)}function pA(s,e){if(Zo(s[e]))try{delete s[e]}catch{s[e]=void 0}else if(s.dataset)try{delete s.dataset[e]}catch{s.dataset[e]=void 0}else s.removeAttribute("data-".concat(Hf(e)))}var V0=/\s\s*/,W0=function(){var s=!1;if(_h){var e=!1,t=function(){},n=Object.defineProperty({},"once",{get:function(){return s=!0,e},set:function(o){e=o}});Ms.addEventListener("test",t,n),Ms.removeEventListener("test",t,n)}return s}();function ns(s,e,t){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},r=t;e.trim().split(V0).forEach(function(o){if(!W0){var l=s.listeners;l&&l[o]&&l[o][t]&&(r=l[o][t],delete l[o][t],Object.keys(l[o]).length===0&&delete l[o],Object.keys(l).length===0&&delete s.listeners)}s.removeEventListener(o,r,n)})}function Xr(s,e,t){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},r=t;e.trim().split(V0).forEach(function(o){if(n.once&&!W0){var l=s.listeners,c=l===void 0?{}:l;r=function(){delete c[o][t],s.removeEventListener(o,r,n);for(var d=arguments.length,m=new Array(d),v=0;v<d;v++)m[v]=arguments[v];t.apply(s,m)},c[o]||(c[o]={}),c[o][t]&&s.removeEventListener(o,c[o][t],n),c[o][t]=r,s.listeners=c}s.addEventListener(o,r,n)})}function Fa(s,e,t){var n;return lr(Event)&&lr(CustomEvent)?n=new CustomEvent(e,{detail:t,bubbles:!0,cancelable:!0}):(n=document.createEvent("CustomEvent"),n.initCustomEvent(e,!0,!0,t)),s.dispatchEvent(n)}function $0(s){var e=s.getBoundingClientRect();return{left:e.left+(window.pageXOffset-document.documentElement.clientLeft),top:e.top+(window.pageYOffset-document.documentElement.clientTop)}}var Fu=Ms.location,mA=/^(\w+:)\/\/([^:/?#]*):?(\d*)/i;function kg(s){var e=s.match(mA);return e!==null&&(e[1]!==Fu.protocol||e[2]!==Fu.hostname||e[3]!==Fu.port)}function Bg(s){var e="timestamp=".concat(new Date().getTime());return s+(s.indexOf("?")===-1?"?":"&")+e}function Il(s){var e=s.rotate,t=s.scaleX,n=s.scaleY,r=s.translateX,o=s.translateY,l=[];vn(r)&&r!==0&&l.push("translateX(".concat(r,"px)")),vn(o)&&o!==0&&l.push("translateY(".concat(o,"px)")),vn(e)&&e!==0&&l.push("rotate(".concat(e,"deg)")),vn(t)&&t!==1&&l.push("scaleX(".concat(t,")")),vn(n)&&n!==1&&l.push("scaleY(".concat(n,")"));var c=l.length?l.join(" "):"none";return{WebkitTransform:c,msTransform:c,transform:c}}function gA(s){var e=P0({},s),t=0;return ci(s,function(n,r){delete e[r],ci(e,function(o){var l=Math.abs(n.startX-o.startX),c=Math.abs(n.startY-o.startY),f=Math.abs(n.endX-o.endX),d=Math.abs(n.endY-o.endY),m=Math.sqrt(l*l+c*c),v=Math.sqrt(f*f+d*d),y=(v-m)/m;Math.abs(y)>Math.abs(t)&&(t=y)})}),t}function Yc(s,e){var t=s.pageX,n=s.pageY,r={endX:t,endY:n};return e?r:P0({startX:t,startY:n},r)}function vA(s){var e=0,t=0,n=0;return ci(s,function(r){var o=r.startX,l=r.startY;e+=o,t+=l,n+=1}),e/=n,t/=n,{pageX:e,pageY:t}}function ho(s){var e=s.aspectRatio,t=s.height,n=s.width,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"contain",o=Og(n),l=Og(t);if(o&&l){var c=t*e;r==="contain"&&c>n||r==="cover"&&c<n?t=n/e:n=t*e}else o?t=n/e:l&&(n=t*e);return{width:n,height:t}}function xA(s){var e=s.width,t=s.height,n=s.degree;if(n=Math.abs(n)%180,n===90)return{width:t,height:e};var r=n%90*Math.PI/180,o=Math.sin(r),l=Math.cos(r),c=e*l+t*o,f=e*o+t*l;return n>90?{width:f,height:c}:{width:c,height:f}}function yA(s,e,t,n){var r=e.aspectRatio,o=e.naturalWidth,l=e.naturalHeight,c=e.rotate,f=c===void 0?0:c,d=e.scaleX,m=d===void 0?1:d,v=e.scaleY,y=v===void 0?1:v,M=t.aspectRatio,T=t.naturalWidth,A=t.naturalHeight,E=n.fillColor,b=E===void 0?"transparent":E,z=n.imageSmoothingEnabled,I=z===void 0?!0:z,H=n.imageSmoothingQuality,X=H===void 0?"low":H,G=n.maxWidth,g=G===void 0?1/0:G,oe=n.maxHeight,U=oe===void 0?1/0:oe,V=n.minWidth,Me=V===void 0?0:V,Te=n.minHeight,ve=Te===void 0?0:Te,Z=document.createElement("canvas"),me=Z.getContext("2d"),_e=ho({aspectRatio:M,width:g,height:U}),fe=ho({aspectRatio:M,width:Me,height:ve},"cover"),Fe=Math.min(_e.width,Math.max(fe.width,T)),Ee=Math.min(_e.height,Math.max(fe.height,A)),Le=ho({aspectRatio:r,width:g,height:U}),ge=ho({aspectRatio:r,width:Me,height:ve},"cover"),Ce=Math.min(Le.width,Math.max(ge.width,o)),Je=Math.min(Le.height,Math.max(ge.height,l)),nt=[-Ce/2,-Je/2,Ce,Je];return Z.width=Ba(Fe),Z.height=Ba(Ee),me.fillStyle=b,me.fillRect(0,0,Fe,Ee),me.save(),me.translate(Fe/2,Ee/2),me.rotate(f*Math.PI/180),me.scale(m,y),me.imageSmoothingEnabled=I,me.imageSmoothingQuality=X,me.drawImage.apply(me,[s].concat(I0(nt.map(function(ut){return Math.floor(Ba(ut))})))),me.restore(),Z}var X0=String.fromCharCode;function _A(s,e,t){var n="";t+=e;for(var r=e;r<t;r+=1)n+=X0(s.getUint8(r));return n}var bA=/^data:.*,/;function wA(s){var e=s.replace(bA,""),t=atob(e),n=new ArrayBuffer(t.length),r=new Uint8Array(n);return ci(r,function(o,l){r[l]=t.charCodeAt(l)}),n}function MA(s,e){for(var t=[],n=8192,r=new Uint8Array(s);r.length>0;)t.push(X0.apply(null,G0(r.subarray(0,n)))),r=r.subarray(n);return"data:".concat(e,";base64,").concat(btoa(t.join("")))}function EA(s){var e=new DataView(s),t;try{var n,r,o;if(e.getUint8(0)===255&&e.getUint8(1)===216)for(var l=e.byteLength,c=2;c+1<l;){if(e.getUint8(c)===255&&e.getUint8(c+1)===225){r=c;break}c+=1}if(r){var f=r+4,d=r+10;if(_A(e,f,4)==="Exif"){var m=e.getUint16(d);if(n=m===18761,(n||m===19789)&&e.getUint16(d+2,n)===42){var v=e.getUint32(d+4,n);v>=8&&(o=d+v)}}}if(o){var y=e.getUint16(o,n),M,T;for(T=0;T<y;T+=1)if(M=o+T*12+2,e.getUint16(M,n)===274){M+=8,t=e.getUint16(M,n),e.setUint16(M,1,n);break}}}catch{t=1}return t}function SA(s){var e=0,t=1,n=1;switch(s){case 2:t=-1;break;case 3:e=-180;break;case 4:n=-1;break;case 5:e=90,n=-1;break;case 6:e=90;break;case 7:e=90,t=-1;break;case 8:e=-90;break}return{rotate:e,scaleX:t,scaleY:n}}var TA={render:function(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.cropped&&this.renderCropBox()},initContainer:function(){var e=this.element,t=this.options,n=this.container,r=this.cropper,o=Number(t.minContainerWidth),l=Number(t.minContainerHeight);Ti(r,cr),ys(e,cr);var c={width:Math.max(n.offsetWidth,o>=0?o:H0),height:Math.max(n.offsetHeight,l>=0?l:z0)};this.containerData=c,co(r,{width:c.width,height:c.height}),Ti(e,cr),ys(r,cr)},initCanvas:function(){var e=this.containerData,t=this.imageData,n=this.options.viewMode,r=Math.abs(t.rotate)%180===90,o=r?t.naturalHeight:t.naturalWidth,l=r?t.naturalWidth:t.naturalHeight,c=o/l,f=e.width,d=e.height;e.height*c>e.width?n===3?f=e.height*c:d=e.width/c:n===3?d=e.width/c:f=e.height*c;var m={aspectRatio:c,naturalWidth:o,naturalHeight:l,width:f,height:d};this.canvasData=m,this.limited=n===1||n===2,this.limitCanvas(!0,!0),m.width=Math.min(Math.max(m.width,m.minWidth),m.maxWidth),m.height=Math.min(Math.max(m.height,m.minHeight),m.maxHeight),m.left=(e.width-m.width)/2,m.top=(e.height-m.height)/2,m.oldLeft=m.left,m.oldTop=m.top,this.initialCanvasData=Yn({},m)},limitCanvas:function(e,t){var n=this.options,r=this.containerData,o=this.canvasData,l=this.cropBoxData,c=n.viewMode,f=o.aspectRatio,d=this.cropped&&l;if(e){var m=Number(n.minCanvasWidth)||0,v=Number(n.minCanvasHeight)||0;c>1?(m=Math.max(m,r.width),v=Math.max(v,r.height),c===3&&(v*f>m?m=v*f:v=m/f)):c>0&&(m?m=Math.max(m,d?l.width:0):v?v=Math.max(v,d?l.height:0):d&&(m=l.width,v=l.height,v*f>m?m=v*f:v=m/f));var y=ho({aspectRatio:f,width:m,height:v});m=y.width,v=y.height,o.minWidth=m,o.minHeight=v,o.maxWidth=1/0,o.maxHeight=1/0}if(t)if(c>(d?0:1)){var M=r.width-o.width,T=r.height-o.height;o.minLeft=Math.min(0,M),o.minTop=Math.min(0,T),o.maxLeft=Math.max(0,M),o.maxTop=Math.max(0,T),d&&this.limited&&(o.minLeft=Math.min(l.left,l.left+(l.width-o.width)),o.minTop=Math.min(l.top,l.top+(l.height-o.height)),o.maxLeft=l.left,o.maxTop=l.top,c===2&&(o.width>=r.width&&(o.minLeft=Math.min(0,M),o.maxLeft=Math.max(0,M)),o.height>=r.height&&(o.minTop=Math.min(0,T),o.maxTop=Math.max(0,T))))}else o.minLeft=-o.width,o.minTop=-o.height,o.maxLeft=r.width,o.maxTop=r.height},renderCanvas:function(e,t){var n=this.canvasData,r=this.imageData;if(t){var o=xA({width:r.naturalWidth*Math.abs(r.scaleX||1),height:r.naturalHeight*Math.abs(r.scaleY||1),degree:r.rotate||0}),l=o.width,c=o.height,f=n.width*(l/n.naturalWidth),d=n.height*(c/n.naturalHeight);n.left-=(f-n.width)/2,n.top-=(d-n.height)/2,n.width=f,n.height=d,n.aspectRatio=l/c,n.naturalWidth=l,n.naturalHeight=c,this.limitCanvas(!0,!1)}(n.width>n.maxWidth||n.width<n.minWidth)&&(n.left=n.oldLeft),(n.height>n.maxHeight||n.height<n.minHeight)&&(n.top=n.oldTop),n.width=Math.min(Math.max(n.width,n.minWidth),n.maxWidth),n.height=Math.min(Math.max(n.height,n.minHeight),n.maxHeight),this.limitCanvas(!1,!0),n.left=Math.min(Math.max(n.left,n.minLeft),n.maxLeft),n.top=Math.min(Math.max(n.top,n.minTop),n.maxTop),n.oldLeft=n.left,n.oldTop=n.top,co(this.canvas,Yn({width:n.width,height:n.height},Il({translateX:n.left,translateY:n.top}))),this.renderImage(e),this.cropped&&this.limited&&this.limitCropBox(!0,!0)},renderImage:function(e){var t=this.canvasData,n=this.imageData,r=n.naturalWidth*(t.width/t.naturalWidth),o=n.naturalHeight*(t.height/t.naturalHeight);Yn(n,{width:r,height:o,left:(t.width-r)/2,top:(t.height-o)/2}),co(this.image,Yn({width:n.width,height:n.height},Il(Yn({translateX:n.left,translateY:n.top},n)))),e&&this.output()},initCropBox:function(){var e=this.options,t=this.canvasData,n=e.aspectRatio||e.initialAspectRatio,r=Number(e.autoCropArea)||.8,o={width:t.width,height:t.height};n&&(t.height*n>t.width?o.height=o.width/n:o.width=o.height*n),this.cropBoxData=o,this.limitCropBox(!0,!0),o.width=Math.min(Math.max(o.width,o.minWidth),o.maxWidth),o.height=Math.min(Math.max(o.height,o.minHeight),o.maxHeight),o.width=Math.max(o.minWidth,o.width*r),o.height=Math.max(o.minHeight,o.height*r),o.left=t.left+(t.width-o.width)/2,o.top=t.top+(t.height-o.height)/2,o.oldLeft=o.left,o.oldTop=o.top,this.initialCropBoxData=Yn({},o)},limitCropBox:function(e,t){var n=this.options,r=this.containerData,o=this.canvasData,l=this.cropBoxData,c=this.limited,f=n.aspectRatio;if(e){var d=Number(n.minCropBoxWidth)||0,m=Number(n.minCropBoxHeight)||0,v=c?Math.min(r.width,o.width,o.width+o.left,r.width-o.left):r.width,y=c?Math.min(r.height,o.height,o.height+o.top,r.height-o.top):r.height;d=Math.min(d,r.width),m=Math.min(m,r.height),f&&(d&&m?m*f>d?m=d/f:d=m*f:d?m=d/f:m&&(d=m*f),y*f>v?y=v/f:v=y*f),l.minWidth=Math.min(d,v),l.minHeight=Math.min(m,y),l.maxWidth=v,l.maxHeight=y}t&&(c?(l.minLeft=Math.max(0,o.left),l.minTop=Math.max(0,o.top),l.maxLeft=Math.min(r.width,o.left+o.width)-l.width,l.maxTop=Math.min(r.height,o.top+o.height)-l.height):(l.minLeft=0,l.minTop=0,l.maxLeft=r.width-l.width,l.maxTop=r.height-l.height))},renderCropBox:function(){var e=this.options,t=this.containerData,n=this.cropBoxData;(n.width>n.maxWidth||n.width<n.minWidth)&&(n.left=n.oldLeft),(n.height>n.maxHeight||n.height<n.minHeight)&&(n.top=n.oldTop),n.width=Math.min(Math.max(n.width,n.minWidth),n.maxWidth),n.height=Math.min(Math.max(n.height,n.minHeight),n.maxHeight),this.limitCropBox(!1,!0),n.left=Math.min(Math.max(n.left,n.minLeft),n.maxLeft),n.top=Math.min(Math.max(n.top,n.minTop),n.maxTop),n.oldLeft=n.left,n.oldTop=n.top,e.movable&&e.cropBoxMovable&&zl(this.face,Hl,n.width>=t.width&&n.height>=t.height?O0:Bf),co(this.cropBox,Yn({width:n.width,height:n.height},Il({translateX:n.left,translateY:n.top}))),this.cropped&&this.limited&&this.limitCanvas(!0,!0),this.disabled||this.output()},output:function(){this.preview(),Fa(this.element,cf,this.getData())}},AA={initPreview:function(){var e=this.element,t=this.crossOrigin,n=this.options.preview,r=t?this.crossOriginUrl:this.url,o=e.alt||"The image to preview",l=document.createElement("img");if(t&&(l.crossOrigin=t),l.src=r,l.alt=o,this.viewBox.appendChild(l),this.viewBoxImage=l,!!n){var c=n;typeof n=="string"?c=e.ownerDocument.querySelectorAll(n):n.querySelector&&(c=[n]),this.previews=c,ci(c,function(f){var d=document.createElement("img");zl(f,jc,{width:f.offsetWidth,height:f.offsetHeight,html:f.innerHTML}),t&&(d.crossOrigin=t),d.src=r,d.alt=o,d.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',f.innerHTML="",f.appendChild(d)})}},resetPreview:function(){ci(this.previews,function(e){var t=pf(e,jc);co(e,{width:t.width,height:t.height}),e.innerHTML=t.html,pA(e,jc)})},preview:function(){var e=this.imageData,t=this.canvasData,n=this.cropBoxData,r=n.width,o=n.height,l=e.width,c=e.height,f=n.left-t.left-e.left,d=n.top-t.top-e.top;!this.cropped||this.disabled||(co(this.viewBoxImage,Yn({width:l,height:c},Il(Yn({translateX:-f,translateY:-d},e)))),ci(this.previews,function(m){var v=pf(m,jc),y=v.width,M=v.height,T=y,A=M,E=1;r&&(E=y/r,A=o*E),o&&A>M&&(E=M/o,T=r*E,A=M),co(m,{width:T,height:A}),co(m.getElementsByTagName("img")[0],Yn({width:l*E,height:c*E},Il(Yn({translateX:-f*E,translateY:-d*E},e))))}))}},CA={bind:function(){var e=this.element,t=this.options,n=this.cropper;lr(t.cropstart)&&Xr(e,ff,t.cropstart),lr(t.cropmove)&&Xr(e,uf,t.cropmove),lr(t.cropend)&&Xr(e,hf,t.cropend),lr(t.crop)&&Xr(e,cf,t.crop),lr(t.zoom)&&Xr(e,df,t.zoom),Xr(n,Cg,this.onCropStart=this.cropStart.bind(this)),t.zoomable&&t.zoomOnWheel&&Xr(n,Ig,this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),t.toggleDragModeOnDblclick&&Xr(n,Ag,this.onDblclick=this.dblclick.bind(this)),Xr(e.ownerDocument,Rg,this.onCropMove=this.cropMove.bind(this)),Xr(e.ownerDocument,Lg,this.onCropEnd=this.cropEnd.bind(this)),t.responsive&&Xr(window,Pg,this.onResize=this.resize.bind(this))},unbind:function(){var e=this.element,t=this.options,n=this.cropper;lr(t.cropstart)&&ns(e,ff,t.cropstart),lr(t.cropmove)&&ns(e,uf,t.cropmove),lr(t.cropend)&&ns(e,hf,t.cropend),lr(t.crop)&&ns(e,cf,t.crop),lr(t.zoom)&&ns(e,df,t.zoom),ns(n,Cg,this.onCropStart),t.zoomable&&t.zoomOnWheel&&ns(n,Ig,this.onWheel,{passive:!1,capture:!0}),t.toggleDragModeOnDblclick&&ns(n,Ag,this.onDblclick),ns(e.ownerDocument,Rg,this.onCropMove),ns(e.ownerDocument,Lg,this.onCropEnd),t.responsive&&ns(window,Pg,this.onResize)}},RA={resize:function(){if(!this.disabled){var e=this.options,t=this.container,n=this.containerData,r=t.offsetWidth/n.width,o=t.offsetHeight/n.height,l=Math.abs(r-1)>Math.abs(o-1)?r:o;if(l!==1){var c,f;e.restore&&(c=this.getCanvasData(),f=this.getCropBoxData()),this.render(),e.restore&&(this.setCanvasData(ci(c,function(d,m){c[m]=d*l})),this.setCropBoxData(ci(f,function(d,m){f[m]=d*l})))}}},dblclick:function(){this.disabled||this.options.dragMode===F0||this.setDragMode(fA(this.dragBox,af)?B0:Ff)},wheel:function(e){var t=this,n=Number(this.options.wheelZoomRatio)||.1,r=1;this.disabled||(e.preventDefault(),!this.wheeling&&(this.wheeling=!0,setTimeout(function(){t.wheeling=!1},50),e.deltaY?r=e.deltaY>0?1:-1:e.wheelDelta?r=-e.wheelDelta/120:e.detail&&(r=e.detail>0?1:-1),this.zoom(-r*n,e)))},cropStart:function(e){var t=e.buttons,n=e.button;if(!(this.disabled||(e.type==="mousedown"||e.type==="pointerdown"&&e.pointerType==="mouse")&&(vn(t)&&t!==1||vn(n)&&n!==0||e.ctrlKey))){var r=this.options,o=this.pointers,l;e.changedTouches?ci(e.changedTouches,function(c){o[c.identifier]=Yc(c)}):o[e.pointerId||0]=Yc(e),Object.keys(o).length>1&&r.zoomable&&r.zoomOnTouch?l=k0:l=pf(e.target,Hl),nA.test(l)&&Fa(this.element,ff,{originalEvent:e,action:l})!==!1&&(e.preventDefault(),this.action=l,this.cropping=!1,l===U0&&(this.cropping=!0,Ti(this.dragBox,ah)))}},cropMove:function(e){var t=this.action;if(!(this.disabled||!t)){var n=this.pointers;e.preventDefault(),Fa(this.element,uf,{originalEvent:e,action:t})!==!1&&(e.changedTouches?ci(e.changedTouches,function(r){Yn(n[r.identifier]||{},Yc(r,!0))}):Yn(n[e.pointerId||0]||{},Yc(e,!0)),this.change(e))}},cropEnd:function(e){if(!this.disabled){var t=this.action,n=this.pointers;e.changedTouches?ci(e.changedTouches,function(r){delete n[r.identifier]}):delete n[e.pointerId||0],t&&(e.preventDefault(),Object.keys(n).length||(this.action=""),this.cropping&&(this.cropping=!1,Ia(this.dragBox,ah,this.cropped&&this.options.modal)),Fa(this.element,hf,{originalEvent:e,action:t}))}}},LA={change:function(e){var t=this.options,n=this.canvasData,r=this.containerData,o=this.cropBoxData,l=this.pointers,c=this.action,f=t.aspectRatio,d=o.left,m=o.top,v=o.width,y=o.height,M=d+v,T=m+y,A=0,E=0,b=r.width,z=r.height,I=!0,H;!f&&e.shiftKey&&(f=v&&y?v/y:1),this.limited&&(A=o.minLeft,E=o.minTop,b=A+Math.min(r.width,n.width,n.left+n.width),z=E+Math.min(r.height,n.height,n.top+n.height));var X=l[Object.keys(l)[0]],G={x:X.endX-X.startX,y:X.endY-X.startY},g=function(U){switch(U){case No:M+G.x>b&&(G.x=b-M);break;case Uo:d+G.x<A&&(G.x=A-d);break;case io:m+G.y<E&&(G.y=E-m);break;case Ra:T+G.y>z&&(G.y=z-T);break}};switch(c){case Bf:d+=G.x,m+=G.y;break;case No:if(G.x>=0&&(M>=b||f&&(m<=E||T>=z))){I=!1;break}g(No),v+=G.x,v<0&&(c=Uo,v=-v,d-=v),f&&(y=v/f,m+=(o.height-y)/2);break;case io:if(G.y<=0&&(m<=E||f&&(d<=A||M>=b))){I=!1;break}g(io),y-=G.y,m+=G.y,y<0&&(c=Ra,y=-y,m-=y),f&&(v=y*f,d+=(o.width-v)/2);break;case Uo:if(G.x<=0&&(d<=A||f&&(m<=E||T>=z))){I=!1;break}g(Uo),v-=G.x,d+=G.x,v<0&&(c=No,v=-v,d-=v),f&&(y=v/f,m+=(o.height-y)/2);break;case Ra:if(G.y>=0&&(T>=z||f&&(d<=A||M>=b))){I=!1;break}g(Ra),y+=G.y,y<0&&(c=io,y=-y,m-=y),f&&(v=y*f,d+=(o.width-v)/2);break;case wl:if(f){if(G.y<=0&&(m<=E||M>=b)){I=!1;break}g(io),y-=G.y,m+=G.y,v=y*f}else g(io),g(No),G.x>=0?M<b?v+=G.x:G.y<=0&&m<=E&&(I=!1):v+=G.x,G.y<=0?m>E&&(y-=G.y,m+=G.y):(y-=G.y,m+=G.y);v<0&&y<0?(c=Sl,y=-y,v=-v,m-=y,d-=v):v<0?(c=Ml,v=-v,d-=v):y<0&&(c=El,y=-y,m-=y);break;case Ml:if(f){if(G.y<=0&&(m<=E||d<=A)){I=!1;break}g(io),y-=G.y,m+=G.y,v=y*f,d+=o.width-v}else g(io),g(Uo),G.x<=0?d>A?(v-=G.x,d+=G.x):G.y<=0&&m<=E&&(I=!1):(v-=G.x,d+=G.x),G.y<=0?m>E&&(y-=G.y,m+=G.y):(y-=G.y,m+=G.y);v<0&&y<0?(c=El,y=-y,v=-v,m-=y,d-=v):v<0?(c=wl,v=-v,d-=v):y<0&&(c=Sl,y=-y,m-=y);break;case Sl:if(f){if(G.x<=0&&(d<=A||T>=z)){I=!1;break}g(Uo),v-=G.x,d+=G.x,y=v/f}else g(Ra),g(Uo),G.x<=0?d>A?(v-=G.x,d+=G.x):G.y>=0&&T>=z&&(I=!1):(v-=G.x,d+=G.x),G.y>=0?T<z&&(y+=G.y):y+=G.y;v<0&&y<0?(c=wl,y=-y,v=-v,m-=y,d-=v):v<0?(c=El,v=-v,d-=v):y<0&&(c=Ml,y=-y,m-=y);break;case El:if(f){if(G.x>=0&&(M>=b||T>=z)){I=!1;break}g(No),v+=G.x,y=v/f}else g(Ra),g(No),G.x>=0?M<b?v+=G.x:G.y>=0&&T>=z&&(I=!1):v+=G.x,G.y>=0?T<z&&(y+=G.y):y+=G.y;v<0&&y<0?(c=Ml,y=-y,v=-v,m-=y,d-=v):v<0?(c=Sl,v=-v,d-=v):y<0&&(c=wl,y=-y,m-=y);break;case O0:this.move(G.x,G.y),I=!1;break;case k0:this.zoom(gA(l),e),I=!1;break;case U0:if(!G.x||!G.y){I=!1;break}H=$0(this.cropper),d=X.startX-H.left,m=X.startY-H.top,v=o.minWidth,y=o.minHeight,G.x>0?c=G.y>0?El:wl:G.x<0&&(d-=v,c=G.y>0?Sl:Ml),G.y<0&&(m-=y),this.cropped||(ys(this.cropBox,cr),this.cropped=!0,this.limited&&this.limitCropBox(!0,!0));break}I&&(o.width=v,o.height=y,o.left=d,o.top=m,this.action=c,this.renderCropBox()),ci(l,function(oe){oe.startX=oe.endX,oe.startY=oe.endY})}},DA={crop:function(){return this.ready&&!this.cropped&&!this.disabled&&(this.cropped=!0,this.limitCropBox(!0,!0),this.options.modal&&Ti(this.dragBox,ah),ys(this.cropBox,cr),this.setCropBoxData(this.initialCropBoxData)),this},reset:function(){return this.ready&&!this.disabled&&(this.imageData=Yn({},this.initialImageData),this.canvasData=Yn({},this.initialCanvasData),this.cropBoxData=Yn({},this.initialCropBoxData),this.renderCanvas(),this.cropped&&this.renderCropBox()),this},clear:function(){return this.cropped&&!this.disabled&&(Yn(this.cropBoxData,{left:0,top:0,width:0,height:0}),this.cropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),ys(this.dragBox,ah),Ti(this.cropBox,cr)),this},replace:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return!this.disabled&&e&&(this.isImg&&(this.element.src=e),t?(this.url=e,this.image.src=e,this.ready&&(this.viewBoxImage.src=e,ci(this.previews,function(n){n.getElementsByTagName("img")[0].src=e}))):(this.isImg&&(this.replaced=!0),this.options.data=null,this.uncreate(),this.load(e))),this},enable:function(){return this.ready&&this.disabled&&(this.disabled=!1,ys(this.cropper,Sg)),this},disable:function(){return this.ready&&!this.disabled&&(this.disabled=!0,Ti(this.cropper,Sg)),this},destroy:function(){var e=this.element;return e[Xn]?(e[Xn]=void 0,this.isImg&&this.replaced&&(e.src=this.originalUrl),this.uncreate(),this):this},move:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e,n=this.canvasData,r=n.left,o=n.top;return this.moveTo(Bu(e)?e:r+Number(e),Bu(t)?t:o+Number(t))},moveTo:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e,n=this.canvasData,r=!1;return e=Number(e),t=Number(t),this.ready&&!this.disabled&&this.options.movable&&(vn(e)&&(n.left=e,r=!0),vn(t)&&(n.top=t,r=!0),r&&this.renderCanvas(!0)),this},zoom:function(e,t){var n=this.canvasData;return e=Number(e),e<0?e=1/(1-e):e=1+e,this.zoomTo(n.width*e/n.naturalWidth,null,t)},zoomTo:function(e,t,n){var r=this.options,o=this.canvasData,l=o.width,c=o.height,f=o.naturalWidth,d=o.naturalHeight;if(e=Number(e),e>=0&&this.ready&&!this.disabled&&r.zoomable){var m=f*e,v=d*e;if(Fa(this.element,df,{ratio:e,oldRatio:l/f,originalEvent:n})===!1)return this;if(n){var y=this.pointers,M=$0(this.cropper),T=y&&Object.keys(y).length?vA(y):{pageX:n.pageX,pageY:n.pageY};o.left-=(m-l)*((T.pageX-M.left-o.left)/l),o.top-=(v-c)*((T.pageY-M.top-o.top)/c)}else Pa(t)&&vn(t.x)&&vn(t.y)?(o.left-=(m-l)*((t.x-o.left)/l),o.top-=(v-c)*((t.y-o.top)/c)):(o.left-=(m-l)/2,o.top-=(v-c)/2);o.width=m,o.height=v,this.renderCanvas(!0)}return this},rotate:function(e){return this.rotateTo((this.imageData.rotate||0)+Number(e))},rotateTo:function(e){return e=Number(e),vn(e)&&this.ready&&!this.disabled&&this.options.rotatable&&(this.imageData.rotate=e%360,this.renderCanvas(!0,!0)),this},scaleX:function(e){var t=this.imageData.scaleY;return this.scale(e,vn(t)?t:1)},scaleY:function(e){var t=this.imageData.scaleX;return this.scale(vn(t)?t:1,e)},scale:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e,n=this.imageData,r=!1;return e=Number(e),t=Number(t),this.ready&&!this.disabled&&this.options.scalable&&(vn(e)&&(n.scaleX=e,r=!0),vn(t)&&(n.scaleY=t,r=!0),r&&this.renderCanvas(!0,!0)),this},getData:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,t=this.options,n=this.imageData,r=this.canvasData,o=this.cropBoxData,l;if(this.ready&&this.cropped){l={x:o.left-r.left,y:o.top-r.top,width:o.width,height:o.height};var c=n.width/n.naturalWidth;if(ci(l,function(m,v){l[v]=m/c}),e){var f=Math.round(l.y+l.height),d=Math.round(l.x+l.width);l.x=Math.round(l.x),l.y=Math.round(l.y),l.width=d-l.x,l.height=f-l.y}}else l={x:0,y:0,width:0,height:0};return t.rotatable&&(l.rotate=n.rotate||0),t.scalable&&(l.scaleX=n.scaleX||1,l.scaleY=n.scaleY||1),l},setData:function(e){var t=this.options,n=this.imageData,r=this.canvasData,o={};if(this.ready&&!this.disabled&&Pa(e)){var l=!1;t.rotatable&&vn(e.rotate)&&e.rotate!==n.rotate&&(n.rotate=e.rotate,l=!0),t.scalable&&(vn(e.scaleX)&&e.scaleX!==n.scaleX&&(n.scaleX=e.scaleX,l=!0),vn(e.scaleY)&&e.scaleY!==n.scaleY&&(n.scaleY=e.scaleY,l=!0)),l&&this.renderCanvas(!0,!0);var c=n.width/n.naturalWidth;vn(e.x)&&(o.left=e.x*c+r.left),vn(e.y)&&(o.top=e.y*c+r.top),vn(e.width)&&(o.width=e.width*c),vn(e.height)&&(o.height=e.height*c),this.setCropBoxData(o)}return this},getContainerData:function(){return this.ready?Yn({},this.containerData):{}},getImageData:function(){return this.sized?Yn({},this.imageData):{}},getCanvasData:function(){var e=this.canvasData,t={};return this.ready&&ci(["left","top","width","height","naturalWidth","naturalHeight"],function(n){t[n]=e[n]}),t},setCanvasData:function(e){var t=this.canvasData,n=t.aspectRatio;return this.ready&&!this.disabled&&Pa(e)&&(vn(e.left)&&(t.left=e.left),vn(e.top)&&(t.top=e.top),vn(e.width)?(t.width=e.width,t.height=e.width/n):vn(e.height)&&(t.height=e.height,t.width=e.height*n),this.renderCanvas(!0)),this},getCropBoxData:function(){var e=this.cropBoxData,t;return this.ready&&this.cropped&&(t={left:e.left,top:e.top,width:e.width,height:e.height}),t||{}},setCropBoxData:function(e){var t=this.cropBoxData,n=this.options.aspectRatio,r,o;return this.ready&&this.cropped&&!this.disabled&&Pa(e)&&(vn(e.left)&&(t.left=e.left),vn(e.top)&&(t.top=e.top),vn(e.width)&&e.width!==t.width&&(r=!0,t.width=e.width),vn(e.height)&&e.height!==t.height&&(o=!0,t.height=e.height),n&&(r?t.height=t.width/n:o&&(t.width=t.height*n)),this.renderCropBox()),this},getCroppedCanvas:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!this.ready||!window.HTMLCanvasElement)return null;var t=this.canvasData,n=yA(this.image,this.imageData,t,e);if(!this.cropped)return n;var r=this.getData(e.rounded),o=r.x,l=r.y,c=r.width,f=r.height,d=n.width/Math.floor(t.naturalWidth);d!==1&&(o*=d,l*=d,c*=d,f*=d);var m=c/f,v=ho({aspectRatio:m,width:e.maxWidth||1/0,height:e.maxHeight||1/0}),y=ho({aspectRatio:m,width:e.minWidth||0,height:e.minHeight||0},"cover"),M=ho({aspectRatio:m,width:e.width||(d!==1?n.width:c),height:e.height||(d!==1?n.height:f)}),T=M.width,A=M.height;T=Math.min(v.width,Math.max(y.width,T)),A=Math.min(v.height,Math.max(y.height,A));var E=document.createElement("canvas"),b=E.getContext("2d");E.width=Ba(T),E.height=Ba(A),b.fillStyle=e.fillColor||"transparent",b.fillRect(0,0,T,A);var z=e.imageSmoothingEnabled,I=z===void 0?!0:z,H=e.imageSmoothingQuality;b.imageSmoothingEnabled=I,H&&(b.imageSmoothingQuality=H);var X=n.width,G=n.height,g=o,oe=l,U,V,Me,Te,ve,Z;g<=-c||g>X?(g=0,U=0,Me=0,ve=0):g<=0?(Me=-g,g=0,U=Math.min(X,c+g),ve=U):g<=X&&(Me=0,U=Math.min(c,X-g),ve=U),U<=0||oe<=-f||oe>G?(oe=0,V=0,Te=0,Z=0):oe<=0?(Te=-oe,oe=0,V=Math.min(G,f+oe),Z=V):oe<=G&&(Te=0,V=Math.min(f,G-oe),Z=V);var me=[g,oe,U,V];if(ve>0&&Z>0){var _e=T/c;me.push(Me*_e,Te*_e,ve*_e,Z*_e)}return b.drawImage.apply(b,[n].concat(I0(me.map(function(fe){return Math.floor(Ba(fe))})))),E},setAspectRatio:function(e){var t=this.options;return!this.disabled&&!Bu(e)&&(t.aspectRatio=Math.max(0,e)||NaN,this.ready&&(this.initCropBox(),this.cropped&&this.renderCropBox())),this},setDragMode:function(e){var t=this.options,n=this.dragBox,r=this.face;if(this.ready&&!this.disabled){var o=e===Ff,l=t.movable&&e===B0;e=o||l?e:F0,t.dragMode=e,zl(n,Hl,e),Ia(n,af,o),Ia(n,lf,l),t.cropBoxMovable||(zl(r,Hl,e),Ia(r,af,o),Ia(r,lf,l))}return this}},PA=Ms.Cropper,j0=function(){function s(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(WT(this,s),!e||!sA.test(e.tagName))throw new Error("The first argument is required and must be an <img> or <canvas> element.");this.element=e,this.options=Yn({},Ug,Pa(t)&&t),this.cropped=!1,this.disabled=!1,this.pointers={},this.ready=!1,this.reloading=!1,this.replaced=!1,this.sized=!1,this.sizing=!1,this.init()}return $T(s,[{key:"init",value:function(){var t=this.element,n=t.tagName.toLowerCase(),r;if(!t[Xn]){if(t[Xn]=this,n==="img"){if(this.isImg=!0,r=t.getAttribute("src")||"",this.originalUrl=r,!r)return;r=t.src}else n==="canvas"&&window.HTMLCanvasElement&&(r=t.toDataURL());this.load(r)}}},{key:"load",value:function(t){var n=this;if(t){this.url=t,this.imageData={};var r=this.element,o=this.options;if(!o.rotatable&&!o.scalable&&(o.checkOrientation=!1),!o.checkOrientation||!window.ArrayBuffer){this.clone();return}if(iA.test(t)){rA.test(t)?this.read(wA(t)):this.clone();return}var l=new XMLHttpRequest,c=this.clone.bind(this);this.reloading=!0,this.xhr=l,l.onabort=c,l.onerror=c,l.ontimeout=c,l.onprogress=function(){l.getResponseHeader("content-type")!==Ng&&l.abort()},l.onload=function(){n.read(l.response)},l.onloadend=function(){n.reloading=!1,n.xhr=null},o.checkCrossOrigin&&kg(t)&&r.crossOrigin&&(t=Bg(t)),l.open("GET",t,!0),l.responseType="arraybuffer",l.withCredentials=r.crossOrigin==="use-credentials",l.send()}}},{key:"read",value:function(t){var n=this.options,r=this.imageData,o=EA(t),l=0,c=1,f=1;if(o>1){this.url=MA(t,Ng);var d=SA(o);l=d.rotate,c=d.scaleX,f=d.scaleY}n.rotatable&&(r.rotate=l),n.scalable&&(r.scaleX=c,r.scaleY=f),this.clone()}},{key:"clone",value:function(){var t=this.element,n=this.url,r=t.crossOrigin,o=n;this.options.checkCrossOrigin&&kg(n)&&(r||(r="anonymous"),o=Bg(n)),this.crossOrigin=r,this.crossOriginUrl=o;var l=document.createElement("img");r&&(l.crossOrigin=r),l.src=o||n,l.alt=t.alt||"The image to crop",this.image=l,l.onload=this.start.bind(this),l.onerror=this.stop.bind(this),Ti(l,Tg),t.parentNode.insertBefore(l,t.nextSibling)}},{key:"start",value:function(){var t=this,n=this.image;n.onload=null,n.onerror=null,this.sizing=!0;var r=Ms.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(Ms.navigator.userAgent),o=function(d,m){Yn(t.imageData,{naturalWidth:d,naturalHeight:m,aspectRatio:d/m}),t.initialImageData=Yn({},t.imageData),t.sizing=!1,t.sized=!0,t.build()};if(n.naturalWidth&&!r){o(n.naturalWidth,n.naturalHeight);return}var l=document.createElement("img"),c=document.body||document.documentElement;this.sizingImage=l,l.onload=function(){o(l.width,l.height),r||c.removeChild(l)},l.src=n.src,r||(l.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",c.appendChild(l))}},{key:"stop",value:function(){var t=this.image;t.onload=null,t.onerror=null,t.parentNode.removeChild(t),this.image=null}},{key:"build",value:function(){if(!(!this.sized||this.ready)){var t=this.element,n=this.options,r=this.image,o=t.parentNode,l=document.createElement("div");l.innerHTML=oA;var c=l.querySelector(".".concat(Xn,"-container")),f=c.querySelector(".".concat(Xn,"-canvas")),d=c.querySelector(".".concat(Xn,"-drag-box")),m=c.querySelector(".".concat(Xn,"-crop-box")),v=m.querySelector(".".concat(Xn,"-face"));this.container=o,this.cropper=c,this.canvas=f,this.dragBox=d,this.cropBox=m,this.viewBox=c.querySelector(".".concat(Xn,"-view-box")),this.face=v,f.appendChild(r),Ti(t,cr),o.insertBefore(c,t.nextSibling),ys(r,Tg),this.initPreview(),this.bind(),n.initialAspectRatio=Math.max(0,n.initialAspectRatio)||NaN,n.aspectRatio=Math.max(0,n.aspectRatio)||NaN,n.viewMode=Math.max(0,Math.min(3,Math.round(n.viewMode)))||0,Ti(m,cr),n.guides||Ti(m.getElementsByClassName("".concat(Xn,"-dashed")),cr),n.center||Ti(m.getElementsByClassName("".concat(Xn,"-center")),cr),n.background&&Ti(c,"".concat(Xn,"-bg")),n.highlight||Ti(v,JT),n.cropBoxMovable&&(Ti(v,lf),zl(v,Hl,Bf)),n.cropBoxResizable||(Ti(m.getElementsByClassName("".concat(Xn,"-line")),cr),Ti(m.getElementsByClassName("".concat(Xn,"-point")),cr)),this.render(),this.ready=!0,this.setDragMode(n.dragMode),n.autoCrop&&this.crop(),this.setData(n.data),lr(n.ready)&&Xr(t,Dg,n.ready,{once:!0}),Fa(t,Dg)}}},{key:"unbuild",value:function(){if(this.ready){this.ready=!1,this.unbind(),this.resetPreview();var t=this.cropper.parentNode;t&&t.removeChild(this.cropper),ys(this.element,cr)}}},{key:"uncreate",value:function(){this.ready?(this.unbuild(),this.ready=!1,this.cropped=!1):this.sizing?(this.sizingImage.onload=null,this.sizing=!1,this.sized=!1):this.reloading?(this.xhr.onabort=null,this.xhr.abort()):this.image&&this.stop()}}],[{key:"noConflict",value:function(){return window.Cropper=PA,s}},{key:"setDefaults",value:function(t){Yn(Ug,Pa(t)&&t)}}]),s}();Yn(j0.prototype,TA,AA,CA,RA,LA,DA);let jn,Sn,Qc,Fg,Er,Hu,ko,Bo,Fo,zu,vi,Sr,Tr,Jn,Pr,Ki,Ji,Qi,Za=-Math.PI/2,IA="hardcover.glb",NA="paperback.glb",Nl="camera",Ir=new zn,gs,Wi,qr,hr,Nr=new zn,Yr,Ai,Zr,tr,_s,po,mo,go,zo,Y0=new VS;const UA=new Uf;let ui=!0,Li=!1,lh=!1,q0=!1;const Gu=1,Vu=1,OA=.2,Go={shadow:{blur:1,darkness:.5,opacity:.5},plane:{color:"#ffffff",opacity:0},showWireframe:!1};let Ar,Ha,ch,Vo,Z0,ro,hh,uh,Cl,is,Wu;kA();function kA(){jn=new oh,vi=new Ri(50,window.innerWidth/window.innerHeight,.02,1e3),Sn=new Tf({alpha:!0,preserveDrawingBuffer:!0,antialias:!0}),Sn.setSize(window.innerWidth,window.innerHeight),Sn.toneMapping=vf,Sn.toneMappingExposure=1,Sn.gammaFactor=2.2,Sn.outputColorSpace=An,new GS().setDataType(Lr).load("studio5.hdr",function(E){zu=s.fromEquirectangular(E).texture,jn.environment=zu,E.dispose(),s.dispose()});const s=new Ju(Sn);s.compileEquirectangularShader(),Sr=new Ri(50,window.innerWidth/window.innerHeight,.02,1e3),Tr=new Ri(50,window.innerWidth/window.innerHeight,.02,1e3),Jn=vi,vi.position.x=-.3,vi.position.y=.4,vi.position.z=-.6,vi.rotation.x=-2.59,vi.rotation.y=-.43,vi.rotation.z=-2.89,Sr.position.x=.7,Sr.position.y=.5,Sr.position.z=-.05,Tr.position.x=0,Tr.position.y=.5,Tr.position.z=.05,jn.add(vi,Sr,Tr),Ki=new Lu(vi,Sn.domElement),Ki.screenSpacePanning=!0,Ki.panSpeed=.2,Ki.minDistance=.6,Ki.maxDistance=2.5,Ki.maxPolarAngle=2,Ki.enabled=!0,Ji=new Lu(Sr,Sn.domElement),Ji.screenSpacePanning=!0,Ji.panSpeed=.2,Ji.minDistance=.6,Ji.maxDistance=2.5,Ji.maxPolarAngle=2,Ji.enabled=!1,Qi=new Lu(Tr,Sn.domElement),Qi.screenSpacePanning=!0,Qi.panSpeed=.2,Qi.minDistance=.6,Qi.maxDistance=2.5,Qi.maxPolarAngle=2,Qi.enabled=!1;let e=!1;$(document).ready(function(){$(".lock1_checkbox").on("click",function(){$(this).prop("checked")==!0?(Ki.enabled=!1,e=!0):$(this).prop("checked")==!1&&(Ki.enabled=!0,e=!1)})});let t=!1;$(document).ready(function(){$(".lock2_checkbox").on("click",function(){$(this).prop("checked")==!0?(Ji.enabled=!1,t=!0):$(this).prop("checked")==!1&&(Ji.enabled=!0,t=!1)})});let n=!1;$(document).ready(function(){$(".lock3_checkbox").on("click",function(){$(this).prop("checked")==!0?(Qi.enabled=!1,n=!0):$(this).prop("checked")==!1&&(Qi.enabled=!0,n=!1)})}),$("#camera1").on("click",function(){Jn=vi,e?Ki.enabled=!1:Ki.enabled=!0,Ji.enabled=!1,Qi.enabled=!1,Jn.updateProjectionMatrix(),document.getElementById("active").innerHTML="CAMERA 1",Nl="camera"}),$("#camera2").on("click",function(){Jn=Sr,t?Ji.enabled=!1:Ji.enabled=!0,Ki.enabled=!1,Qi.enabled=!1,Jn.updateProjectionMatrix(),document.getElementById("active").innerHTML="CAMERA 2",Nl="camera2"}),$("#camera3").on("click",function(){Jn=Tr,n?Qi.enabled=!1:Qi.enabled=!0,Ki.enabled=!1,Ji.enabled=!1,Jn.updateProjectionMatrix(),document.getElementById("active").innerHTML="CAMERA 3",Nl="camera3"}),ko=new Jc(16777215,0),ko.position.x=5,ko.position.y=10,ko.position.z=-20,Bo=new Jc(16777215,0),Bo.position.x=20,Bo.position.y=10,Bo.position.z=20,Fo=new Jc(16777215,0),Fo.position.x=-20,Fo.position.y=10,Fo.position.z=-10,new Cu(ko,1,15891724),new Cu(Bo,1,15891724),new Cu(Fo,1,15891724),Qc=new RS(4210752,0),Qc.position.set(0,50,0),jn.add(ko,Bo,Fo,Qc),Ar=new lo,Ar.position.y=-.018,jn.add(Ar),Ha=new $s(512,512),Ha.texture.generateMipmaps=!1,ch=new $s(512,512),ch.texture.generateMipmaps=!1;const r=new Wl(Gu,Vu).rotateX(Math.PI/2),o=new zs({map:Ha.texture,opacity:Go.shadow.opacity,transparent:!0,depthWrite:!1});Cl=new $i(r,o),Cl.material.opacity=.5,Ar.add(Cl),Cl.scale.y=-1,is=new $i(r),is.visible=!1,Ar.add(is);const l=new zs({color:Go.plane.color,opacity:Go.plane.opacity,transparent:!0,depthWrite:!1});Wu=new $i(r,l),Wu.rotateX(Math.PI),Ar.add(Wu),Vo=new gh(-Gu/2,Gu/2,Vu/2,-Vu/2,0,OA),Vo.rotation.x=Math.PI/2,Ar.add(Vo),Z0=new HS(Vo),ro=new w0,ro.userData.darkness={value:Go.shadow.darkness},ro.onBeforeCompile=function(E){E.uniforms.darkness=ro.userData.darkness,E.fragmentShader=`
        uniform float darkness;
        ${E.fragmentShader.replace("gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );","gl_FragColor = vec4( vec3( 0.0 ), ( 1.0 - fragCoordZ ) * darkness );")}
    `},ro.depthTest=!1,ro.depthWrite=!1,hh=new ws(GT),hh.depthTest=!1,uh=new ws(VT),uh.depthTest=!1,ro.morphTargets=!0;let c,f,d,m=document.getElementById("cropperModal"),v=document.getElementById("userImage"),y=document.getElementById("userImage2"),M=document.getElementById("userImage3");[v,y,M].forEach(E=>{E.addEventListener("change",function(){d=E.id;var b=this.files,z,I;if(b.length>0){I=b[0],z=new FileReader,z.onload=function(U){Zc.modal(m).show(),f=$(".image")[0],f.src=U.target.result,f.setAttribute("style","height:70vh;")};const H=["jpg","jpeg","png"],X=5e6,{name:G,size:g}=this.files[0],oe=G.split(".").pop();if(H.includes(oe)){if(g>X)return alert("File size too large"),this.value=null,!1}else return alert("File type not allowed. Please use jpg or png."),this.value=null,!1;z.readAsDataURL(I),[v][0].value="",[y][0].value="",[M][0].value=""}})}),$("#cropperModal").on({"show.uk.modal":function(){c=new j0(f,{guides:!0,center:!0,autoCropArea:.99,viewMode:2,responsive:!0,restore:!0})},"hide.uk.modal":function(){c.destroy(),c=null}});const T=1;$(".crop").on("click",function(E){E.preventDefault(),c.getCroppedCanvas();let b=c.getCroppedCanvas(),z=new hi(b);z.colorSpace=An,Fg=z.image.height,Er=z.image.width,Hu=Er/Fg,ui&&d=="userImage"&&(zA(),Ai.material.map=z,Ai.material.map.flipY=!1,Nr.scale.set(T*Hu,T)),Li&&d=="userImage"&&(HA(),Wi.material.map=z,Wi.material.map.flipY=!1,Ir.scale.set(T*Hu,T)),ui&&d=="userImage2"&&(VA(),Zr.material.map=z,Zr.material.map.flipY=!1),Li&&d=="userImage2"&&(GA(),qr.material.map=z,qr.material.map.flipY=!1),ui&&d=="userImage3"&&(tr.material.map=z,Ai.morphTargetInfluences[0]=Er*2.54/(96*window.devicePixelRatio)/10,tr.morphTargetInfluences[0]=Er*2.54/(96*window.devicePixelRatio)/10,Yr.morphTargetInfluences[0]=Er*2.54/(96*window.devicePixelRatio)/10,_s.morphTargetInfluences[0]=Er*2.54/(96*window.devicePixelRatio)/10,po.morphTargetInfluences[0]=Er*2.54/(96*window.devicePixelRatio)/10,mo.morphTargetInfluences[0]=Er*2.54/(96*window.devicePixelRatio)/10,go.morphTargetInfluences[0]=Er*2.54/(96*window.devicePixelRatio)/10,tr.material.map.flipY=!1,tr.material.needsUpdate=!0,tr.material.color.set(16777215)),Li&&d=="userImage3"&&(hr.material.map=z,zo.morphTargetInfluences[1]=Er*2.54/(96*window.devicePixelRatio)/10,hr.morphTargetInfluences[0]=Er*2.54/(96*window.devicePixelRatio)/10,Wi.morphTargetInfluences[1]=Er*2.54/(96*window.devicePixelRatio)/10,gs.morphTargetInfluences[0]=Er*2.54/(96*window.devicePixelRatio)/10,hr.material.map.flipY=!1,hr.material.needsUpdate=!0,hr.material.color.set(16777215)),z.needsUpdate=!0,Zc.modal(m).hide();var I=500;setTimeout(function(){Zc.offcanvas(offcanvasUsage).show()},I)}),document.getElementById("background").addEventListener("input",function(){jn.background=new Yt(this.value)}),$("#default-1").on("click",function(){this.checked?jn.environment=zu:jn.environment=null}),document.getElementById("canvas").appendChild(Sn.domElement),Pr=document.getElementById("canvas"),window.addEventListener("resize",()=>{Sn.setSize(window.innerWidth,window.innerHeight),Jn.aspect=window.innerWidth/window.innerHeight,Jn.updateProjectionMatrix(),vi.aspect=window.innerWidth/window.innerHeight,Sr.aspect=window.innerWidth/window.innerHeight,Tr.aspect=window.innerWidth/window.innerHeight,vi.updateProjectionMatrix(),Sr.updateProjectionMatrix(),Tr.updateProjectionMatrix()})}function BA(s){s.domElement;const e=Pr.clientWidth,t=Pr.clientHeight,n=Pr.width!==e||Pr.height!==t;return n&&s.setSize(e,t,!1),n}jn.background=new Yt(12303291);function FA(s){const e=$("#currentPosition"),t=$("#currentRotation");e.text(`Current Position: X: ${s.position.x.toFixed(2)}, Y: ${s.position.y.toFixed(2)}, Z: ${s.position.z.toFixed(2)}`),t.text(`Current Rotation: X: ${s.rotation.x.toFixed(2)}, Y: ${s.rotation.y.toFixed(2)}, Z: ${s.rotation.z.toFixed(2)}`)}function K0(){let s;switch(Nl){case"camera":s=vi;break;case"camera2":s=Sr;break;case"camera3":s=Tr;break;default:console.error(`Unknown camera selected: ${Nl}`);return}FA(s),requestAnimationFrame(K0);const e=jn.background;if(jn.background=null,Z0.visible=!1,jn.overrideMaterial=ro,Sn.setRenderTarget(Ha),Sn.render(jn,Vo),jn.overrideMaterial=null,Hg(Go.shadow.blur),Hg(Go.shadow.blur*.8),BA(Sn)){const t=Sn.domElement;Jn.aspect=t.clientWidth/t.clientHeight,Jn.updateProjectionMatrix()}Sn.setRenderTarget(null),jn.background=e,Jn.updateProjectionMatrix(),Sn.render(jn,Jn)}function HA(){Li&&(Wi.material.map=null,Wi.material.needsUpdate=!0),$("#userImage").val("")}function zA(){ui&&(Ai.material.map=null,Ai.material.needsUpdate=!0),$("#userImage").val("")}function GA(){Li&&(qr.material.map=null,qr.material.needsUpdate=!0),$("#userImage2").val("")}function VA(){ui&&(Zr.material.map=null,Zr.material.needsUpdate=!0),$("#userImage2").val("")}function WA(){Li&&(hr.material.map=null,hr.material.needsUpdate=!0),ui&&(tr.material.map=null,tr.material.needsUpdate=!0),$("#userImage3").val("")}function qc(s){Sn.toneMapping=s,Li&&$A(),ui&&XA()}$("#no, #linear, #cineon, #aces").on("click",function(){switch(this.id){case"no":qc(Gs);break;case"linear":qc(qg);break;case"cineon":qc(Zg);break;case"aces":qc(vf);break}});function $A(){Wi.material.needsUpdate=!0,qr.material.needsUpdate=!0,hr.material.needsUpdate=!0,gs.material.needsUpdate=!0}function XA(){Ai.material.needsUpdate=!0,Zr.material.needsUpdate=!0,tr.material.needsUpdate=!0,Yr.material.needsUpdate=!0,_s.material.needsUpdate=!0,po.material.needsUpdate=!0,mo.material.needsUpdate=!0,go.material.needsUpdate=!0}let[J0,Q0,e1]=document.querySelectorAll("#hc, #hc2, #hc3"),zf=!0,Gf=!1;$("#HardcoverBook").on("click",function(){!ui&&!q0?(Ir.visible=!1,t1(),Ar.position.y=-.015):!Li&&lh&&(Nr.visible=!0,Ir.visible=!1,Ar.position.y=-.015),Ir.visible=!1,Nr.visible=!0,zf=!0,Gf=!1,J0.style.display="block",Q0.style.display="block",e1.style.display="block",document.getElementById("Round").disabled=!1,ui=!0,Li=!1});$("#paperbackBook").on("click",function(){!Li&&!lh?(Nr.visible=!1,t1()):!Li&&lh&&(Nr.visible=!1,Ir.visible=!0),zf=!1,Gf=!0,J0.style.display="none",Q0.style.display="none",e1.style.display="none",document.getElementById("Round").disabled=!0,ui=!1,Li=!0});$("#rotateUp").on("click",function(){Nr.rotation.x=Za,Ir.rotation.x=Za,Ar.position.y=-.244,bh.value=-.244,document.getElementById("shadowHeightSetValue").innerHTML=-.244});$("#rotateDown").on("click",function(){Nr.rotation.x=!Za,Ir.rotation.x=!Za,Ar.position.y=-.015,bh.value=-.015,document.getElementById("shadowHeightSetValue").innerHTML=-.015});$("#clear").on("click",function(){WA()});$("#export").on("click",function(){zf&&zg(Nr),Gf&&zg(Ir)});let jA=document.getElementById("Thick");jA.oninput=function(){ui&&(Ai.morphTargetInfluences[0]=parseFloat(this.value),tr.morphTargetInfluences[0]=parseFloat(this.value),Yr.morphTargetInfluences[0]=parseFloat(this.value),_s.morphTargetInfluences[0]=parseFloat(this.value),po.morphTargetInfluences[0]=parseFloat(this.value),mo.morphTargetInfluences[0]=parseFloat(this.value),go.morphTargetInfluences[0]=parseFloat(this.value)),Li&&(Wi.morphTargetInfluences[1]=parseFloat(this.value),gs.morphTargetInfluences[0]=parseFloat(this.value),hr.morphTargetInfluences[0]=parseFloat(this.value),zo.morphTargetInfluences[1]=parseFloat(this.value))};let YA=document.getElementById("Round");YA.oninput=function(){ui&&(Ai.morphTargetInfluences[1]=parseFloat(this.value),tr.morphTargetInfluences[1]=parseFloat(this.value),Yr.morphTargetInfluences[1]=parseFloat(this.value),_s.morphTargetInfluences[1]=parseFloat(this.value),po.morphTargetInfluences[1]=parseFloat(this.value),mo.morphTargetInfluences[1]=parseFloat(this.value),go.morphTargetInfluences[1]=parseFloat(this.value))};let qA=document.getElementById("Up");qA.oninput=function(){ui&&(Ai.morphTargetInfluences[2]=parseFloat(this.value),_s.morphTargetInfluences[2]=parseFloat(this.value)),Li&&(Wi.morphTargetInfluences[0]=parseFloat(this.value),zo.morphTargetInfluences[0]=parseFloat(this.value))};let ZA=document.getElementById("Tilt");ZA.oninput=function(){Nr.rotation.x=Za-this.value,Ir.rotation.x=Za-this.value,Ar.position.y=-.244,bh.value=-.244,document.getElementById("shadowHeightSetValue").innerHTML=-.244};let KA=document.getElementById("Reflect");KA.oninput=function(){ui&&(Ai.material.roughness=parseFloat(this.value),Zr.material.roughness=parseFloat(this.value),tr.material.roughness=parseFloat(this.value),_s.material.roughness=parseFloat(this.value)),Li&&(Wi.material.roughness=parseFloat(this.value),qr.material.roughness=parseFloat(this.value),hr.material.roughness=parseFloat(this.value))};let JA=document.getElementById("Ambient");JA.oninput=function(){Qc.intensity=this.value};let QA=document.getElementById("Exposure");QA.oninput=function(){Sn.toneMappingExposure=this.value};let e3=document.getElementById("Front");e3.oninput=function(){ko.intensity=this.value};let t3=document.getElementById("Back");t3.oninput=function(){Bo.intensity=this.value};let n3=document.getElementById("SideLight");n3.oninput=function(){Fo.intensity=this.value};let i3=document.getElementById("FOV");i3.oninput=function(){vi.fov=this.value};let r3=document.getElementById("FOV2");r3.oninput=function(){Sr.fov=this.value};let s3=document.getElementById("FOV3");s3.oninput=function(){Tr.fov=this.value};let bh=document.getElementById("ShadowHeight");bh.oninput=function(){Ar.position.y=this.value};let o3=document.getElementById("ShadowOpacity");o3.oninput=function(){Cl.material.opacity=this.value};let a3=document.getElementById("ShadowBlur");a3.oninput=function(){Go.shadow.blur=this.value};let l3=document.getElementById("spine");l3.addEventListener("input",function(){ui&&tr.material.color.set(this.value).convertSRGBToLinear(),Li&&hr.material.color.set(this.value).convertSRGBToLinear()});let c3=document.getElementById("hardCover");c3.addEventListener("input",function(){ui&&_s.material.color.set(this.value).convertSRGBToLinear()});let h3=document.getElementById("innerSpine");h3.addEventListener("input",function(){ui&&po.material.color.set(this.value).convertSRGBToLinear()});let u3=document.getElementById("endband");u3.addEventListener("input",function(){ui&&(mo.material.color.set(this.value).convertSRGBToLinear(),go.material.color.set(this.value).convertSRGBToLinear())});let f3=document.getElementById("pagesColor");f3.addEventListener("input",function(){ui&&Yr.material.color.set(this.value).convertSRGBToLinear(),Li&&gs.material.color.set(this.value).convertSRGBToLinear()});function Os(s,e){const t=10**e;return Math.round(s*t)/t}function Vf(s,e,t,n){localStorage.setItem(`${e}.position.x`,Os(s.position.x,2).toString()),localStorage.setItem(`${e}.position.y`,Os(s.position.y,2).toString()),localStorage.setItem(`${e}.position.z`,Os(s.position.z,2).toString()),localStorage.setItem(`${e}.rotation.x`,Os(s.rotation.x,2).toString()),localStorage.setItem(`${e}.rotation.y`,Os(s.rotation.y,2).toString()),localStorage.setItem(`${e}.rotation.z`,Os(s.rotation.z,2).toString()),localStorage.setItem(`${n}.target.x`,Os(t.target.x,2).toString()),localStorage.setItem(`${n}.target.y`,Os(t.target.y,2).toString()),localStorage.setItem(`${n}.target.z`,Os(t.target.z,2).toString()),localStorage.setItem(`${e}.fov`,s.fov)}function Wf(s,e,t,n,r,o){if(localStorage.getItem(`${e}.position.x`)===null)alert("No saved files. Please make sure that you are not in private mode.");else{s.position.x=parseFloat(localStorage.getItem(`${e}.position.x`)),s.position.y=parseFloat(localStorage.getItem(`${e}.position.y`)),s.position.z=parseFloat(localStorage.getItem(`${e}.position.z`)),s.rotation.x=parseFloat(localStorage.getItem(`${e}.rotation.x`)),s.rotation.y=parseFloat(localStorage.getItem(`${e}.rotation.y`)),s.rotation.z=parseFloat(localStorage.getItem(`${e}.rotation.z`));const l=localStorage.getItem(`${o}.target.x`),c=localStorage.getItem(`${o}.target.y`),f=localStorage.getItem(`${o}.target.z`);l!==null&&c!==null&&f!==null?(r.target.x=parseFloat(l),r.target.y=parseFloat(c),r.target.z=parseFloat(f)):r.target.set(0,0,0),s.fov=parseFloat(localStorage.getItem(`${e}.fov`)),t&&n&&(document.getElementById(t).value=parseFloat(localStorage.getItem(`${e}.fov`)),document.getElementById(n).innerHTML=s.fov.toString())}}$("#saveCamera1").on("click",function(){Vf(vi,"camera",Ki,"controls1")});$("#loadCamera1").on("click",function(){Wf(vi,"camera","FOV","fov1",Ki,"controls1")});$("#saveCamera2").on("click",function(){Vf(Sr,"camera2",Ji,"controls2")});$("#loadCamera2").on("click",function(){Wf(Sr,"camera2","FOV2","fov2",Ji,"controls2")});$("#saveCamera3").on("click",function(){Vf(Tr,"camera3",Qi,"controls3")});$("#loadCamera3").on("click",function(){Wf(Tr,"camera3","FOV3","fov3",Qi,"controls3")});$("#applySettings").on("click",function(){const s=parseFloat($("#positionX").val()),e=parseFloat($("#positionY").val()),t=parseFloat($("#positionZ").val()),n=parseFloat($("#rotationX").val()),r=parseFloat($("#rotationY").val()),o=parseFloat($("#rotationZ").val());isNaN(s)||isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r)||isNaN(o)||s>4||e>4||t>4||n>4||r>4||o>4||(vi.position.set(s,e,t),vi.rotation.set(n,r,o))});function d3(){const s=new Oa().load("cover.webp"),e=new Oa().load("pages.webp"),t=new Oa().load("pages_Normal.webp");s.colorSpace=An,e.colorSpace=An,t.colorSpace=An;let n=new yi,r=new yi,o=new yi,l=new yi,c=new yi,f=new yi;Y0.load(IA,function(d){Nr=d.scene,Yr=d.scene.getObjectByName("pages"),Ai=d.scene.getObjectByName("cover_front"),Zr=d.scene.getObjectByName("cover_back"),tr=d.scene.getObjectByName("spine"),_s=d.scene.getObjectByName("inner_cover"),po=d.scene.getObjectByName("inner_spine"),mo=d.scene.getObjectByName("endband"),go=d.scene.getObjectByName("endband2"),Ai.material.morphTargets=!0,tr.material.morphTargets=!0,Yr.material.morphTargets=!0,_s.material.morphTargets=!0,po.material.morphTargets=!0,mo.material.morphTargets=!0,go.material.morphTargets=!0,mo.material.color.setHex(8750469),go.material.color.setHex(8750469),Ai.material.morphTargets=[],Ai.material=n,Ai.material.map=s,Ai.material.roughness=1,Ai.material.map.flipY=!1,Ai.material.needsUpdate=!0,Zr.material=r,Zr.material.map=s,Zr.material.roughness=1,Zr.material.map.flipY=!1,Zr.material.needsUpdate=!0,Yr.material=o,Yr.material.map=e,Yr.material.normal=t,Yr.material.map.flipY=!1,Yr.material.needsUpdate=!0,tr.material=l,_s.material=c,po.material=f,Nr.rotation.y=-Math.PI/1,jn.add(Nr),Nr.visible=!0},d=>{},d=>{}),ui=!0,q0=!0}function t1(){const s=new Oa().load("/cover.webp"),e=new Oa().load("/pages.webp");s.colorSpace=An,e.colorSpace=An;let t=new yi,n=new yi,r=new yi,o=new yi,l=new yi;Y0.load(NA,function(c){Ir=c.scene,gs=c.scene.getObjectByName("pages"),Wi=c.scene.getObjectByName("cover_front"),qr=c.scene.getObjectByName("cover_back"),hr=c.scene.getObjectByName("spine"),zo=c.scene.getObjectByName("inner_cover"),gs.material.morphTargets=!0,Wi.material.morphTargets=!0,hr.material.morphTargets=!0,zo.material.morphTargets=!0,Wi.material=t,Wi.material.map=s,Wi.material.roughness=1,Wi.material.map.flipY=!1,Wi.material.needsUpdate=!0,qr.material=n,qr.material.map=s,qr.material.roughness=1,qr.material.map.flipY=!1,qr.material.needsUpdate=!0,gs.material=r,gs.material.map=e,gs.material.map.flipY=!1,gs.material.needsUpdate=!0,zo.material.morphTargets=!0,zo.material=l,hr.material=o,Ir.rotation.y=Math.PI/1,jn.add(Ir),Ir.visible=!0},c=>{},c=>{}),Li=!0,lh=!0}function Hg(s){is.visible=!0,is.material=hh,is.material.uniforms.tDiffuse.value=Ha.texture,hh.uniforms.h.value=s*1/256,Sn.setRenderTarget(ch),Sn.render(is,Vo),is.material=uh,is.material.uniforms.tDiffuse.value=ch.texture,uh.uniforms.v.value=s*1/256,Sn.setRenderTarget(Ha),Sn.render(is,Vo),is.visible=!1}function zg(s){UA.parse(s,function(e){if(e instanceof ArrayBuffer)m3(e,"scene.glb");else{const t=JSON.stringify(e,null,2);p3(t,"scene.gltf")}})}const Ul=document.createElement("a");Ul.style.display="none";document.body.appendChild(Ul);function n1(s,e){Ul.href=URL.createObjectURL(s),Ul.download=e,Ul.click()}function p3(s,e){n1(new Blob([s],{type:"text/plain"}),e)}function m3(s,e){n1(new Blob([s],{type:"application/octet-stream"}),e)}d3();K0();function g3(s,e){const t=jn.background;jn.background=null,jn.background=null,Jn.aspect=s/e,Jn.updateProjectionMatrix(),Sn.setSize(s,e),Sn.render(jn,Jn);const n=Sn.domElement.toDataURL("image/png");i1(r1(".png"),n),jn.background=t}function v3(s,e){Jn.aspect=s/e,Jn.updateProjectionMatrix(),Sn.setSize(s,e),Sn.render(jn,Jn);const t=Sn.domElement.toDataURL("image/jpeg",1);i1(r1(".jpeg"),t)}function x3(s){const e=window.atob(s.split(",")[1]),t=e.length,n=new Uint8Array(t);for(let r=0;r<t;r++)n[r]=e.charCodeAt(r);return new window.Blob([n])}function i1(s,e){const t=x3(e),n=document.createElement("a");n.download=s,n.href=window.URL.createObjectURL(t),n.onclick=()=>{window.setTimeout(()=>{window.URL.revokeObjectURL(t),n.removeAttribute("href")},500)},n.click()}function r1(s){return`mockupea_export${s}`.replace(/\//g,"-").replace(/:/g,".")}$("#png").on("click",function(){g3(Pr.clientWidth*4,Pr.clientHeight*4),Sn.setSize(window.innerWidth,window.innerHeight),Jn.aspect=window.innerWidth/window.innerHeight,Jn.updateProjectionMatrix()});$("#jpg").on("click",function(){v3(Pr.clientWidth*4,Pr.clientHeight*4),Sn.setSize(window.innerWidth,window.innerHeight),Jn.aspect=window.innerWidth/window.innerHeight,Jn.updateProjectionMatrix()});document.getElementById("jpgResolution").innerHTML=Pr.clientWidth+" px + "+Pr.clientHeight+" px";let y3=new ResizeObserver(()=>{document.getElementById("jpgResolution").innerHTML=Pr.clientWidth*4+" px + "+Pr.clientHeight*4+" px"});y3.observe(document.getElementById("canvas"));const s1=localStorage,o1="mockupea_consent",_3=()=>!s1.getItem(o1),b3=()=>s1.setItem(o1,!0);window.onload=()=>{const s=document.getElementById("consent-popup"),e=document.getElementById("accept");_3()&&s.classList.remove("hidden");const t=n=>{b3(),s.classList.add("hidden"),window.dataLayer=window.dataLayer||[];function r(){dataLayer.push(arguments)}r("js",new Date),r("config","UA-187937344-1"),window["ga-disable-UA-187937344-1"]=!1};e.addEventListener("click",t)};
